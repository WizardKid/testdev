var postgrest=function(e,t){"use strict";e="default"in e?e["default"]:e,t="default"in t?t["default"]:t;var r={};r.slicedToArray=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(a){o=!0,i=a}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var n=function(r){var n={},o=function(){var r=e.prop(""),o=function(e){return arguments.length>0?(r(e),n):r()};return o.toFilter=function(){return t.isString(o())?o().trim():o()},o},i=t.reduce(r,function(e,t,r){return"between"===t?e[r]={lte:o(),gte:o()}:e[r]=o(),e},{order:o()}),u=function(){return t.reduce(i,function(e,n,o){if("order"!==o){var i=r[o];if(t.isFunction(n.toFilter)&&(void 0===n.toFilter()||""===n.toFilter()))return e;if("ilike"===i||"like"===i)e[o]=i+".*"+n.toFilter()+"*";else if("@@"===i)e[o]=i+"."+n.toFilter().replace(/\s+/g,"&");else if("between"===i){if(!n.lte.toFilter()&&!n.gte.toFilter())return e;e[o]=[],n.gte()&&e[o].push("gte."+n.gte.toFilter()),n.lte()&&e[o].push("lte."+n.lte.toFilter())}else"is.null"===i?e[o]=null===n.toFilter()?"is.null":"not.is.null":e[o]=i+"."+n.toFilter()}return e},{})},s=function(){var e=function(){return i.order()&&t.reduce(i.order(),function(e,t,r){return e.push(r+"."+t),e},[]).join(",")},r=e()?{order:e()}:{};return t.extend({},r,u())};return t.extend(n,i,{parameters:s,parametersWithoutOrder:u})},o=function(n,o){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],u=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],s=e.prop([]),a=o||"id.desc",c=e.prop({order:a}),l=e.prop(!1),d=e.prop(1),f=e.prop(),p=u?n.getPageWithToken:n.getPage,g=e.prop(),h=function(){var n=e.deferred(),o=function(e){if(!e||0===e.status)return JSON.stringify({hint:null,details:null,code:0,message:"Connection error"});var n=e.getResponseHeader("Content-Range");if(t.isString(n)){var o=n.split("/"),i=r.slicedToArray(o,2),u=i[0],s=i[1],a=u.split("-"),c=r.slicedToArray(a,2),l=c[0],d=c[1],p=parseInt(d)+1||0,h=parseInt(l)||0;g(parseInt(s)),f(p-h)}try{return JSON.parse(e.responseText),e.responseText}catch(v){return JSON.stringify({hint:null,details:null,code:0,message:e.responseText})}};return l(!0),p(c(),d(),{background:!0,extract:o},i).then(function(r){s(t.union(s(),r)),l(!1),n.resolve(s()),e.redraw()},function(t){l(!1),g(0),n.reject(t),e.redraw()}),n.promise},v=function(e){return c(t.extend({order:a},e)),s([]),d(1),h()},m=function(){return n.pageSize()>f()},T=function(){return d(d()+1),h()};return{collection:s,firstPage:v,isLoading:l,nextPage:T,isLastPage:m,total:g,resultsCount:f}},i={},u=e.prop(),s=function(e,r){return r&&t.isFunction(r.config)?t.compose(r.config,e):e},a=function(e){return function(r){return t.each(e,function(e,t){r.setRequestHeader(t,e)}),r}},c=function(e,r){return t.extend({},r,{config:s(a(e),r)})},l=function(r,n){var o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=e.prop(o),u=e.deferred();return i.load=function(){return i(!0),e.redraw(),r(t.extend({},n,{background:!0})).then(function(t){i(!1),u.resolve(t),e.redraw()},function(t){i(!1),u.reject(t),e.redraw()}),u.promise},i},d={Prefer:"return=representation"};return i.token=u,i.init=function(r,n){return i.request=function(n){var o=function(e){try{return JSON.parse(e.responseText),e.responseText}catch(t){return JSON.stringify({hint:null,details:null,code:0,message:e.responseText})}};return e.request(t.extend({extract:o},n,{url:r+n.url}))},i.authenticate=function(){var r=e.deferred();return u()?r.resolve({token:u()}):e.request(t.extend({},n)).then(function(e){u(e.token),r.resolve({token:u()})},function(e){r.reject(e)}),r.promise},i.requestWithToken=function(e){return i.authenticate().then(function(){return i.request(c({Authorization:"Bearer "+u()},e))},function(){return i.request(e)})},i.loader=t.partial(l,i.request),i.loaderWithToken=t.partial(l,i.requestWithToken),i.model=function(r){var n=function(e,t){if(t){var r=function(){var r=(e-1)*t,n=r+t-1;return r+"-"+n};return{"Range-unit":"items",Range:r()}}},o=e.prop(10),u={url:"/"+r},s=function(e,r,o,i){var s=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],a=t.extend({},{Prefer:"count=none"},s,n(r,o));return c(a,t.extend({},i,u,{method:"GET",data:e}))},l=function(t,r){return r.url+="?"+e.route.buildQueryString(t),r},f=function(e){return i.request(t.extend({},e,u,{method:"OPTIONS"}))},p=function(e,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=t.extend({},d,n);return c(o,t.extend({},r,u,{method:"POST",data:e}))},g=function(e,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=a(t.extend({},n));return l(e,c(o,t.extend({},r,u,{method:"DELETE"})))},h=function(e,r,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],i=t.extend({},d,o);return l(e,c(i,t.extend({},n,u,{method:"PATCH",data:r})))},v=function(e,t,r){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return s(e,t||1,o(),r,n)},m=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return s(e,1,1,t,r)};return{pageSize:o,getPageOptions:v,getRowOptions:m,patchOptions:h,postOptions:p,deleteOptions:g,getPage:t.compose(i.request,v),getRow:t.compose(i.request,m),patch:t.compose(i.request,h),post:t.compose(i.request,p),deleteRequest:t.compose(i.request,g),getPageWithToken:t.compose(i.requestWithToken,v),getRowWithToken:t.compose(i.requestWithToken,m),patchWithToken:t.compose(i.requestWithToken,h),postWithToken:t.compose(i.requestWithToken,p),deleteWithToken:t.compose(i.requestWithToken,g),options:f}},i},i.filtersVM=n,i.paginationVM=o,i}(m,_);