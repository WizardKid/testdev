/*
Mithril v0.2.8
https://mithril.js.org
(c) 2014-2017 Leo Horie
License: MIT
*/

!function(e,t){"use strict";var n=t(e);"undefined"==typeof window&&n.deps({document:"undefined"!=typeof document?document:{},location:"undefined"!=typeof location?location:{},clearTimeout:clearTimeout,setTimeout:setTimeout}),"object"==typeof module&&null!=module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.m=n}("undefined"!=typeof window?window:this,function e(t,n){"use strict";function r(e){return"function"==typeof e}function o(e){return"[object Object]"===Ae.call(e)}function a(e){return"[object String]"===Ae.call(e)}function i(){}function u(e){Ne=e.document,Te=e.location,Oe=e.cancelAnimationFrame||e.clearTimeout,ke=e.requestAnimationFrame||e.setTimeout}function l(e,t){for(var n,r=[],o=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g;n=o.exec(t);)if(""===n[1]&&n[2])e.tag=n[2];else if("#"===n[1])e.attrs.id=n[2];else if("."===n[1])r.push(n[2]);else if("["===n[3].charAt(0)){var a=n[6];a&&(a=a.replace(/\\(["'])/g,"$1")),"class"===n[4]?r.push(a):e.attrs[n[4]]=a||!0}return r}function c(e,t){var n=t?e.slice(1):e;return 1===n.length&&Se(n[0])?n[0]:n}function s(e,t,n){var r="class"in t?"class":"className";for(var o in t)je.call(t,o)&&(o===r&&null!=t[o]&&""!==t[o]?(n.push(t[o]),e[o]=""):e[o]=t[o]);n.length&&(e[r]=n.join(" "))}function d(e,t){for(var n=[],i=1,u=arguments.length;i<u;i++)n[i-1]=arguments[i];if(e&&r(e.view))return oe(e,n);if(!a(e))throw new Error("selector in m(selector, attrs, children) should be a string");var d=null!=t&&o(t)&&!("tag"in t||"view"in t||"subtree"in t),f=d?t:{},h={tag:"div",attrs:{},children:c(n,d)};return s(h.attrs,f,l(h,e)),h}function f(e,t){for(var n=0;n<e.length&&!t(e[n],n++););}function h(e,t){f(e,function(e,n){return(e=e&&e.attrs)&&null!=e.key&&t(e,n)})}function p(e){try{if("boolean"!=typeof e&&null!=e&&null!=e.toString())return e}catch(e){}return""}function v(e,t,n,r){try{g(e,t,n),t.nodeValue=r}catch(e){}}function m(e){for(var t=0;t<e.length;t++)Se(e[t])&&(e=e.concat.apply([],e),t--);return e}function g(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}function y(e,t,n,r){h(e,function(e,r){t[e=e.key]=t[e]?{action:De,index:r,from:t[e].index,element:n.nodes[t[e].index]||Ne.createElement("div")}:{action:Le,index:r}});var o=[];for(var a in t)je.call(t,a)&&o.push(t[a]);var i=o.sort(_),u=new Array(n.length);return u.nodes=n.nodes.slice(),f(i,function(t){var o=t.index;if(t.action===Me&&(Q(n[o].nodes,n[o]),u.splice(o,1)),t.action===Le){var a=Ne.createElement("div");a.key=e[o].attrs.key,g(r,a,o),u.splice(o,0,{attrs:{key:e[o].attrs.key},nodes:[a]}),u.nodes[o]=a}if(t.action===De){var i=t.element,l=r.childNodes[o];l!==i&&null!==i&&r.insertBefore(i,l||null),u[o]=n[t.from],u.nodes[o]=i}}),u}function w(e,t,n,r){var o=e.length!==t.length;return o||h(e,function(e,n){var r=t[n];return o=r&&r.attrs&&r.attrs.key!==e.key}),o?y(e,n,t,r):t}function E(e,t,n){f(e,function(e,r){null!=t[r]&&n.push.apply(n,t[r].nodes)}),f(t.nodes,function(e,r){null!=e.parentNode&&n.indexOf(e)<0&&Q([e],[t[r]])}),e.length<t.length&&(t.length=e.length),t.nodes=n}function x(e){var t=0;h(e,function(){return f(e,function(e){(e=e&&e.attrs)&&null==e.key&&(e.key="__mithril__"+t++)}),1})}function C(e,t,n){return e.tag!==t.tag||(n.sort().join()!==Object.keys(t.attrs).sort().join()||(e.attrs.id!==t.attrs.id||(e.attrs.key!==t.attrs.key||("all"===d.redraw.strategy()?!t.configContext||!0!==t.configContext.retain:"diff"===d.redraw.strategy()&&(t.configContext&&!1===t.configContext.retain)))))}function b(e,t,n){C(e,t,n)&&(t.nodes.length&&Q(t.nodes),t.configContext&&r(t.configContext.onunload)&&t.configContext.onunload(),t.controllers&&f(t.controllers,function(e){e.onunload&&e.onunload({preventDefault:i})}))}function N(e,t){return e.attrs.xmlns?e.attrs.xmlns:"svg"===e.tag?"http://www.w3.org/2000/svg":"math"===e.tag?"http://www.w3.org/1998/Math/MathML":t}function T(e,t,n){n.length&&(e.views=t,e.controllers=n,f(n,function(e){if(e.onunload&&e.onunload.$old&&(e.onunload=e.onunload.$old),Ie&&e.onunload){var t=e.onunload;e.onunload=function(){},e.onunload.$old=t}}))}function k(e,t,n,o,a){if(r(t.attrs.config)){var i=a.configContext=a.configContext||{};e.push(function(){return t.attrs.config.call(t,n,!o,i,a)})}}function O(e,t,r,o,a,i,u,l){var c=e.nodes[0];return o&&V(c,t.tag,t.attrs,e.attrs,a),e.children=K(c,t.tag,n,n,t.children,e.children,!1,0,t.attrs.contenteditable?c:r,a,u),e.nodes.intact=!0,l.length&&(e.views=i,e.controllers=l),c}function j(e,t,n){var r;e.$trusted?r=ee(t,n,e):(r=[Ne.createTextNode(e)],t.nodeName in Re||g(t,r[0],n));var o;return o="string"==typeof e||"number"==typeof e||"boolean"==typeof e?new e.constructor(e):e,o.nodes=r,o}function A(e,t,n,r,o,a){var i=t.nodes;return r&&r===Ne.activeElement&&e===t||(e.$trusted?(Q(i,t),i=ee(n,o,e)):"textarea"===a?n.value=e:r?(r.innerHTML=e,i=[].slice.call(r.childNodes)):((1===i[0].nodeType||i.length>1||i[0].nodeValue.trim&&!i[0].nodeValue.trim())&&(Q(t.nodes,t),i=[Ne.createTextNode(e)]),v(n,i[0],o,e))),t=new e.constructor(e),t.nodes=i,t.$trusted=e.$trusted,t}function S(e,t,n,r,o,a,i){return e.nodes.length?e.valueOf()!==t.valueOf()||o?A(t,e,r,a,n,i):(e.nodes.intact=!0,e):j(t,r,n)}function R(e){return e.$trusted?e.nodes.length:Se(e)?e.length:1}function M(e,t,r,o,a,i,u,l,c){e=m(e);var s=[],d=t.length===e.length,f=0,p={},v=!1;h(t,function(e,n){v=!0,p[t[n].attrs.key]={action:Me,index:n}}),x(e),v&&(t=w(e,t,p,r));for(var g=0,y=0,C=e.length;y<C;y++){var b=K(r,a,t,o,e[y],t[g],i,o+f||f,u,l,c);b!==n&&(d=d&&b.nodes.intact,f+=R(b),t[g++]=b)}return d||E(e,t,s),t}function L(e,t,n,r,o){if(null!=t){if(Ae.call(t)===Ae.call(e))return t;if(o&&o.nodes){var a=n-r,i=a+(Se(e)?e:t.nodes).length;Q(o.nodes.slice(a,i),o.slice(a,i))}else t.nodes&&Q(t.nodes,t)}return(t=new e.constructor).tag&&(t={}),t.nodes=[],t}function D(e,t){return e.attrs.is?null==t?Ne.createElement(e.tag,e.attrs.is):Ne.createElementNS(t,e.tag,e.attrs.is):null==t?Ne.createElement(e.tag):Ne.createElementNS(t,e.tag)}function I(e,t,n,r){return r?V(t,e.tag,e.attrs,{},n):e.attrs}function $(e,t,r,o,a,i){return null!=e.children&&e.children.length>0?K(t,e.tag,n,n,e.children,r.children,!0,0,e.attrs.contenteditable?t:o,a,i):e.children}function U(e,t,n,r,o,a,i){var u={tag:e.tag,attrs:t,children:n,nodes:[r]};return T(u,a,i),u.children&&!u.children.nodes&&(u.children.nodes=[]),u}function q(e,t,n,o){var a;return(a="diff"===d.redraw.strategy()&&e?e.indexOf(t):-1)>-1?n[a]:r(o)?new o:{}}function z(e,t,n,r){null!=r.onunload&&Ue.map(function(e){return e.handler}).indexOf(r.onunload)<0&&Ue.push({controller:r,handler:r.onunload}),e.push(n),t.push(r)}function H(e,t,n,r,o,a){var i=q(n.views,t,r,e.controller),u=e&&e.attrs&&e.attrs.key;return"retain"===(e=0===Ie||qe||r&&r.indexOf(i)>-1?e.view(i):{tag:"placeholder"}).subtree?e:(e.attrs=e.attrs||{},e.attrs.key=u,z(a,o,t,i),e)}function J(e,t,n,r){for(var o=t&&t.controllers;null!=e.view;)e=H(e,e.view.$original||e.view,t,o,r,n);return e}function B(e,t,n,r,o,i,u,l){var c=[],s=[];if("retain"===(e=J(e,t,c,s)).subtree)return t;if(!e.tag&&s.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");e.attrs=e.attrs||{},t.attrs=t.attrs||{};var d=Object.keys(e.attrs),f=d.length>("key"in e.attrs?1:0);if(b(e,t,d),a(e.tag)){var h=0===t.nodes.length;u=N(e,u);var p;if(h){var v=I(e,p=D(e,u),u,f);g(r,p,o),t=U(e,v,$(e,p,t,n,u,l),p,u,c,s)}else p=O(t,e,n,f,u,c,l,s);return"select"===e.tag&&"value"in e.attrs&&V(p,e.tag,{value:e.attrs.value},{},u),h||!0!==i||null==p||g(r,p,o),k(l,e,p,h,t),t}}function K(e,t,n,a,i,u,l,c,s,d,f){return"retain"===(i=p(i)).subtree?u:(u=L(i,u,c,a,n),Se(i)?M(i,u,e,c,t,l,s,d,f):null!=i&&o(i)?B(i,u,s,e,c,l,d,f):r(i)?u:S(u,i,c,e,l,s,t))}function _(e,t){return e.action-t.action||e.index-t.index}function F(e,t,n){n===t&&(e.style="",n={});for(var r in t)je.call(t,r)&&(null!=n&&n[r]===t[r]||(e.style[r]=t[r]));for(r in n)je.call(n,r)&&(je.call(t,r)||(e.style[r]=""))}function G(e,t,n,a,i,u){if("config"===t||"key"===t)return!0;if(r(n)&&"on"===t.slice(0,2))e[t]=te(n,e);else if("style"===t&&null!=n&&o(n))F(e,n,a);else if(null!=u)"href"===t?e.setAttributeNS("http://www.w3.org/1999/xlink","href",n):e.setAttribute("className"===t?"class":t,n);else if(t in e&&!ze[t])try{("input"!==i&&!e.isContentEditable||e[t]!=n)&&(e[t]=n)}catch(r){e.setAttribute(t,n)}else try{e.setAttribute(t,n)}catch(e){}}function P(e,t,n,r,o,a,i){if(t in o&&r===n&&"object"!=typeof n&&Ne.activeElement!==e)"value"===t&&"input"===a&&e.value!=n&&(e.value=n);else{o[t]=n;try{return G(e,t,n,r,a,i)}catch(e){if(e.message.indexOf("Invalid argument")<0)throw e}}}function V(e,t,n,r,o){for(var a in n)!je.call(n,a)||P(e,a,n[a],r[a],r,t,o);return r}function Q(e,t){for(var n=e.length-1;n>-1;n--)if(e[n]&&e[n].parentNode){try{e[n].parentNode.removeChild(e[n])}catch(e){}(t=[].concat(t))[n]&&Y(t[n])}e.length&&(e.length=0)}function Y(e){e.configContext&&r(e.configContext.onunload)&&(e.configContext.onunload(),e.configContext.onunload=null),e.controllers&&f(e.controllers,function(e){r(e.onunload)&&e.onunload({preventDefault:i})}),e.children&&(Se(e.children)?f(e.children,Y):e.children.tag&&Y(e.children))}function W(e,t){try{e.appendChild(Ne.createRange().createContextualFragment(t))}catch(n){e.insertAdjacentHTML("beforeend",t),X(e)}}function X(e){if("SCRIPT"===e.tagName)e.parentNode.replaceChild(Z(e),e);else{var t=e.childNodes;if(t&&t.length)for(var n=0;n<t.length;n++)X(t[n])}return e}function Z(e){for(var t=document.createElement("script"),n=e.attributes,r=0;r<n.length;r++)t.setAttribute(n[r].name,n[r].value);return t.text=e.innerHTML,t}function ee(e,t,n){var r=e.childNodes[t];if(r){var o=1!==r.nodeType,a=Ne.createElement("span");o?(e.insertBefore(a,r||null),a.insertAdjacentHTML("beforebegin",n),e.removeChild(a)):r.insertAdjacentHTML("beforebegin",n)}else W(e,n);for(var i=[];e.childNodes[t]!==r;)i.push(e.childNodes[t]),t++;return i}function te(e,t){return function(n){n=n||event,d.redraw.strategy("diff"),d.startComputation();try{return e.call(t,n)}finally{le()}}}function ne(e){var t=Je.indexOf(e);return t<0?Je.push(e)-1:t}function re(e){function t(){return arguments.length&&(e=arguments[0]),e}return t.toJSON=function(){return e&&r(e.toJSON)?e.toJSON():e},t}function oe(e,t){function n(){return(e.controller||i).apply(this,t)||this}function r(n){for(var r=[n].concat(t),o=1;o<arguments.length;o++)r.push(arguments[o]);return e.view.apply(e,r)}e.controller&&(n.prototype=e.controller.prototype),r.$original=e.view;var o={controller:n,view:r};return t[0]&&null!=t[0].key&&(o.attrs={key:t[0].key}),o}function ae(e,t,n,r){if(!r){d.redraw.strategy("all"),d.startComputation(),_e[n]=t;var o;o=Ke=e||(e={controller:i});var a=new(e.controller||i);return o===Ke&&(Ge[n]=a,Fe[n]=e),le(),null===e&&ie(t,n),Ge[n]}null==e&&ie(t,n),Xe&&(We=Xe)}function ie(e,t){_e.splice(t,1),Ge.splice(t,1),Fe.splice(t,1),ve(e),Je.splice(ne(e),1),Ue=[]}function ue(){Qe&&(Qe(),Qe=null),f(_e,function(e,t){var n=Fe[t];if(Ge[t]){var r=[Ge[t]];d.render(e,n.view?n.view(Ge[t],r):"")}}),Ye&&(Ye(),Ye=null),Pe=null,Ve=new Date,d.redraw.strategy("diff")}function le(){"none"===d.redraw.strategy()?(Ie--,d.redraw.strategy("diff")):d.endComputation()}function ce(e){return e.slice(tt[d.route.mode].length)}function se(e,t,n){et={};var r=n.indexOf("?");-1!==r&&(et=pe(n.substr(r+1,n.length)),n=n.substr(0,r));var o=Object.keys(t),a=o.indexOf(n);if(-1!==a)return d.mount(e,t[o[a]]),!0;for(var i in t)if(je.call(t,i)){if(i===n)return d.mount(e,t[i]),!0;var u=new RegExp("^"+i.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(u.test(n))return n.replace(u,function(){var n=i.match(/:[^\/]+/g)||[],r=[].slice.call(arguments,1,-2);f(n,function(e,t){et[e.replace(/:|\./g,"")]=decodeURIComponent(r[t])}),d.mount(e,t[i])}),!0}}function de(e){if(!((e=e||event).ctrlKey||e.metaKey||e.shiftKey||2===e.which)){e.preventDefault?e.preventDefault():e.returnValue=!1;var t,n=e.currentTarget||e.srcElement;for(t="pathname"===d.route.mode&&n.search?pe(n.search.slice(1)):{};n&&!/a/i.test(n.nodeName);)n=n.parentNode;Ie=0,d.route(n[d.route.mode].slice(tt[d.route.mode].length),t)}}function fe(){"hash"!==d.route.mode&&Te.hash?Te.hash=Te.hash:t.scrollTo(0,0)}function he(e,t){var r={},a=[];for(var i in e)if(je.call(e,i)){var u=t?t+"["+i+"]":i,l=e[i];if(null===l)a.push(encodeURIComponent(u));else if(o(l))a.push(he(l,u));else if(Se(l)){var c=[];r[u]=r[u]||{},f(l,function(e){r[u][e]||(r[u][e]=!0,c.push(encodeURIComponent(u)+"="+encodeURIComponent(e)))}),a.push(c.join("&"))}else l!==n&&a.push(encodeURIComponent(u)+"="+encodeURIComponent(l))}return a.join("&")}function pe(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));var t={};return f(e.split("&"),function(e){var n=e.split("="),r=decodeURIComponent(n[0]),o=2===n.length?decodeURIComponent(n[1]):null;null!=t[r]?(Se(t[r])||(t[r]=[t[r]]),t[r].push(o)):t[r]=o}),t}function ve(e){var t=ne(e);Q(e.childNodes,Be[t]),Be[t]=n}function me(e,t){var n=d.prop(t);return e.then(n),n.then=function(n,r){return me(e.then(n,r),t)},n.catch=n.then.bind(null,null),n}function ge(e,t){function n(e){l=e||ut,s.map(function(e){l===it?e.resolve(c):e.reject(c)})}function a(e,t,n,a){if((null!=c&&o(c)||r(c))&&r(e))try{var i=0;e.call(c,function(e){i++||(c=e,t())},function(e){i++||(c=e,n())})}catch(e){d.deferred.onerror(e),c=e,n()}else a()}function i(){var o;try{o=c&&c.then}catch(e){return d.deferred.onerror(e),c=e,l=at,i()}l===at&&d.deferred.onerror(c),a(o,function(){l=ot,i()},function(){l=at,i()},function(){try{l===ot&&r(e)?c=e(c):l===at&&r(t)&&(c=t(c),l=ot)}catch(e){return d.deferred.onerror(e),c=e,n()}c===u?(c=TypeError(),n()):a(o,function(){n(it)},n,function(){n(l===ot&&it)})})}var u=this,l=0,c=0,s=[];u.promise={},u.resolve=function(e){return l||(c=e,l=ot,i()),u},u.reject=function(e){return l||(c=e,l=at,i()),u},u.promise.then=function(e,t){var n=new ge(e,t);return l===it?n.resolve(c):l===ut?n.reject(c):s.push(n),n.promise}}function ye(e){return e}function we(e){var r=e.callbackName||"mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),o=Ne.createElement("script");t[r]=function(a){o.parentNode.removeChild(o),e.onload({type:"load",target:{responseText:a}}),t[r]=n},o.onerror=function(){return o.parentNode.removeChild(o),e.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),t[r]=n,!1},o.onload=function(){return!1},o.src=e.url+(e.url.indexOf("?")>0?"&":"?")+(e.callbackKey?e.callbackKey:"callback")+"="+r+"&"+he(e.data||{}),Ne.body.appendChild(o)}function Ee(e){var n=new t.XMLHttpRequest;if(n.open(e.method,e.url,!0,e.user,e.password),n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?e.onload({type:"load",target:n}):e.onerror({type:"error",target:n}))},e.serialize===JSON.stringify&&e.data&&"GET"!==e.method&&n.setRequestHeader("Content-Type","application/json; charset=utf-8"),e.deserialize===JSON.parse&&n.setRequestHeader("Accept","application/json, text/*"),o(e.headers))for(var i in e.headers)je.call(e.headers,i)&&n.setRequestHeader(i,e.headers[i]);if(r(e.config)){var u=e.config(n,e);null!=u&&(n=u)}var l="GET"!==e.method&&e.data?e.data:"";if(l&&!a(l)&&l.constructor!==t.FormData)throw new Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");return n.send(l),n}function xe(e){return e.dataType&&"jsonp"===e.dataType.toLowerCase()?we(e):Ee(e)}function Ce(e,t,n){if("GET"===e.method&&"jsonp"!==e.dataType){var r=e.url.indexOf("?")<0?"?":"&",o=he(t);e.url+=o?r+o:""}else e.data=n(t)}function be(e,t){return t&&(e=e.replace(/:[a-z]\w+/gi,function(e){var n=e.slice(1),r=t[n]||e;return delete t[n],r})),e}d.version=function(){return"v0.2.8"};var Ne,Te,ke,Oe,je={}.hasOwnProperty,Ae={}.toString,Se=Array.isArray||function(e){return"[object Array]"===Ae.call(e)},Re={AREA:1,BASE:1,BR:1,COL:1,COMMAND:1,EMBED:1,HR:1,IMG:1,INPUT:1,KEYGEN:1,LINK:1,META:1,PARAM:1,SOURCE:1,TRACK:1,WBR:1};d.deps=function(e){return u(t=e||window),t},d.deps.factory=d.factory=e,d.deps(t);var Me=1,Le=2,De=3,Ie=0;d.startComputation=function(){Ie++},d.endComputation=function(){Ie>1?Ie--:(Ie=0,d.redraw())};var $e,Ue=[],qe=!1,ze={list:1,style:1,form:1,type:1,width:1,height:1},He={appendChild:function(e){$e===n&&($e=Ne.createElement("html")),Ne.documentElement&&Ne.documentElement!==e?Ne.replaceChild(e,Ne.documentElement):Ne.appendChild(e),this.childNodes=Ne.childNodes},insertBefore:function(e){this.appendChild(e)},childNodes:[]},Je=[],Be={};d.render=function(e,t,r){if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var o,a=[],i=ne(e),u=e===Ne;o=u||e===Ne.documentElement?He:e,u&&"html"!==t.tag&&(t={tag:"html",attrs:{},children:t}),Be[i]===n&&Q(o.childNodes),!0===r&&ve(e),Be[i]=K(o,null,n,n,t,Be[i],!1,0,null,n,a),f(a,function(e){e()})},d.trust=function(e){return e=new String(e),e.$trusted=!0,e},d.prop=function(e){return(null!=e&&(o(e)||r(e))||"undefined"!=typeof Promise&&e instanceof Promise)&&r(e.then)?me(e):re(e)};var Ke,_e=[],Fe=[],Ge=[],Pe=null,Ve=0,Qe=null,Ye=null;d.component=function(e){for(var t=new Array(arguments.length-1),n=1;n<arguments.length;n++)t[n-1]=arguments[n];return oe(e,t)};var We,Xe;d.mount=d.module=function(e,t){if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var n=_e.indexOf(e);n<0&&(n=_e.length);var o=!1,a={preventDefault:function(){o=!0,Qe=Ye=null}};return f(Ue,function(e){e.handler.call(e.controller,a),e.controller.onunload=null}),o?f(Ue,function(e){e.controller.onunload=e.handler}):Ue=[],Ge[n]&&r(Ge[n].onunload)&&Ge[n].onunload(a),ae(t,e,n,o)};var Ze=!1;d.redraw=function(e){if(!Ze){Ze=!0,e&&(qe=!0);try{Pe&&!e?(ke===t.requestAnimationFrame||new Date-Ve>16)&&(Pe>0&&Oe(Pe),Pe=ke(ue,16)):(ue(),Pe=ke(function(){Pe=null},16))}finally{Ze=qe=!1}}},d.redraw.strategy=d.prop(),d.withAttr=function(e,t,n){return function(r){var o=(r=r||window.event).currentTarget||this,a=n||this,i=e in o?o[e]:o.getAttribute(e);t.call(a,i)}};var et,tt={pathname:"",hash:"#",search:"?"},nt=i,rt=!1;d.route=function(e,n,r,o){if(0===arguments.length)return We;if(3===arguments.length&&a(n)){nt=function(t){var o=We=ce(t);if(!se(e,r,o)){if(rt)throw new Error("Ensure the default route matches one of the routes defined in m.route");rt=!0,d.route(n,!0),rt=!1}};var i="hash"===d.route.mode?"onhashchange":"onpopstate";return t[i]=function(){var e=Te[d.route.mode];"pathname"===d.route.mode&&(e+=Te.search),We!==ce(e)&&nt(e)},Qe=fe,void t[i]()}if(e.addEventListener||e.attachEvent){var u="pathname"!==d.route.mode?Te.pathname:"";return e.href=u+tt[d.route.mode]+o.attrs.href,void(e.addEventListener?(e.removeEventListener("click",de),e.addEventListener("click",de)):(e.detachEvent("onclick",de),e.attachEvent("onclick",de)))}if(a(e)){Xe=We,We=e;var l,c=n||{},s=We.indexOf("?");l=s>-1?pe(We.slice(s+1)):{};for(var f in c)je.call(c,f)&&(l[f]=c[f]);var h,p=he(l);h=s>-1?We.slice(0,s):We,p&&(We=h+(-1===h.indexOf("?")?"?":"&")+p);var v=!0===(3===arguments.length?r:n)||Xe===We;if(t.history.pushState){var m=v?"replaceState":"pushState";Qe=fe,Ye=function(){try{t.history[m](null,Ne.title,tt[d.route.mode]+We)}catch(e){Te[d.route.mode]=We}},nt(tt[d.route.mode]+We)}else Te[d.route.mode]=We,nt(tt[d.route.mode]+We);Xe=null}},d.route.param=function(e){if(!et)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return e?et[e]:et},d.route.mode="search",d.route.buildQueryString=he,d.route.parseQueryString=pe,d.deferred=function(){var e=new ge;return e.promise=me(e.promise),e};var ot=1,at=2,it=3,ut=4;return d.deferred.onerror=function(e){if("[object Error]"===Ae.call(e)&&!/ Error/.test(e.constructor.toString()))throw Ie=0,e},d.sync=function(e){function t(e,t){return function(i){return o[e]=i,t||(a="reject"),0==--r&&(n.promise(o),n[a](o)),i}}var n=d.deferred(),r=e.length,o=[],a="resolve";return e.length>0?f(e,function(e,n){e.then(t(n,!0),t(n,!1))}):n.resolve([]),n.promise},d.request=function(e){!0!==e.background&&d.startComputation();var t,n,r,o=new ge;return e.dataType&&"jsonp"===e.dataType.toLowerCase()?(t=e.serialize=n=e.deserialize=ye,r=function(e){return e.responseText}):(t=e.serialize=e.serialize||JSON.stringify,n=e.deserialize=e.deserialize||JSON.parse,r=e.extract||function(e){return e.responseText.length||n!==JSON.parse?e.responseText:null}),e.method=(e.method||"GET").toUpperCase(),e.url=be(e.url,e.data),Ce(e,e.data,t),e.onload=e.onerror=function(t){try{t=t||event;var a=n(r(t.target,e));"load"===t.type?(e.unwrapSuccess&&(a=e.unwrapSuccess(a,t.target)),Se(a)&&e.type?f(a,function(t,n){a[n]=new e.type(t)}):e.type&&(a=new e.type(a)),o.resolve(a)):(e.unwrapError&&(a=e.unwrapError(a,t.target)),o.reject(a))}catch(e){o.reject(e),d.deferred.onerror(e)}finally{!0!==e.background&&d.endComputation()}},xe(e),o.promise=me(o.promise,e.initialValue),o.promise},d});
//# sourceMappingURL=mithril.min.js.map
;
/*!
 * jQuery JavaScript Library v1.12.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:17Z
 */


(function( global, factory ) {

	if ( typeof module === "object" && typeof module.exports === "object" ) {
		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Support: Firefox 18+
// Can't be in strict mode, several libs including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
//"use strict";
var deletedIds = [];

var document = window.document;

var slice = deletedIds.slice;

var concat = deletedIds.concat;

var push = deletedIds.push;

var indexOf = deletedIds.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
	version = "1.12.4",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {

		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android<4.1, IE<9
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	};

jQuery.fn = jQuery.prototype = {

	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num != null ?

			// Return just the one element from the set
			( num < 0 ? this[ num + this.length ] : this[ num ] ) :

			// Return all the elements in a clean array
			slice.call( this );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	each: function( callback ) {
		return jQuery.each( this, callback );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map( this, function( elem, i ) {
			return callback.call( elem, i, elem );
		} ) );
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor();
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: deletedIds.sort,
	splice: deletedIds.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var src, copyIsArray, copy, name, options, clone,
		target = arguments[ 0 ] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction( target ) ) {
		target = {};
	}

	// extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {

		// Only deal with non-null/undefined values
		if ( ( options = arguments[ i ] ) != null ) {

			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject( copy ) ||
					( copyIsArray = jQuery.isArray( copy ) ) ) ) {

					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray( src ) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject( src ) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend( {

	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	// See test/unit/core.js for details concerning isFunction.
	// Since version 1.3, DOM methods and functions like alert
	// aren't supported. They return false on IE (#2968).
	isFunction: function( obj ) {
		return jQuery.type( obj ) === "function";
	},

	isArray: Array.isArray || function( obj ) {
		return jQuery.type( obj ) === "array";
	},

	isWindow: function( obj ) {
		/* jshint eqeqeq: false */
		return obj != null && obj == obj.window;
	},

	isNumeric: function( obj ) {

		// parseFloat NaNs numeric-cast false positives (null|true|false|"")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		// adding 1 corrects loss of precision from parseFloat (#15100)
		var realStringObj = obj && obj.toString();
		return !jQuery.isArray( obj ) && ( realStringObj - parseFloat( realStringObj ) + 1 ) >= 0;
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	isPlainObject: function( obj ) {
		var key;

		// Must be an Object.
		// Because of IE, we also have to check the presence of the constructor property.
		// Make sure that DOM nodes and window objects don't pass through, as well
		if ( !obj || jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		try {

			// Not own constructor property must be Object
			if ( obj.constructor &&
				!hasOwn.call( obj, "constructor" ) &&
				!hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
				return false;
			}
		} catch ( e ) {

			// IE8,9 Will throw exceptions on certain host objects #9897
			return false;
		}

		// Support: IE<9
		// Handle iteration over inherited properties before own properties.
		if ( !support.ownFirst ) {
			for ( key in obj ) {
				return hasOwn.call( obj, key );
			}
		}

		// Own properties are enumerated firstly, so to speed up,
		// if last one is own, then all properties are own.
		for ( key in obj ) {}

		return key === undefined || hasOwn.call( obj, key );
	},

	type: function( obj ) {
		if ( obj == null ) {
			return obj + "";
		}
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ toString.call( obj ) ] || "object" :
			typeof obj;
	},

	// Workarounds based on findings by Jim Driscoll
	// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
	globalEval: function( data ) {
		if ( data && jQuery.trim( data ) ) {

			// We use execScript on Internet Explorer
			// We use an anonymous function so that context is window
			// rather than jQuery in Firefox
			( window.execScript || function( data ) {
				window[ "eval" ].call( window, data ); // jscs:ignore requireDotNotation
			} )( data );
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	each: function( obj, callback ) {
		var length, i = 0;

		if ( isArrayLike( obj ) ) {
			length = obj.length;
			for ( ; i < length; i++ ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		} else {
			for ( i in obj ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		}

		return obj;
	},

	// Support: Android<4.1, IE<9
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArrayLike( Object( arr ) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		var len;

		if ( arr ) {
			if ( indexOf ) {
				return indexOf.call( arr, elem, i );
			}

			len = arr.length;
			i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;

			for ( ; i < len; i++ ) {

				// Skip accessing in sparse arrays
				if ( i in arr && arr[ i ] === elem ) {
					return i;
				}
			}
		}

		return -1;
	},

	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		while ( j < len ) {
			first[ i++ ] = second[ j++ ];
		}

		// Support: IE<9
		// Workaround casting of .length to NaN on otherwise arraylike objects (e.g., NodeLists)
		if ( len !== len ) {
			while ( second[ j ] !== undefined ) {
				first[ i++ ] = second[ j++ ];
			}
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var length, value,
			i = 0,
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArrayLike( elems ) ) {
			length = elems.length;
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var args, proxy, tmp;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	now: function() {
		return +( new Date() );
	},

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
} );

// JSHint would error on this code due to the Symbol not being defined in ES5.
// Defining this global in .jshintrc would create a danger of using the global
// unguarded in another place, it seems safer to just disable JSHint for these
// three lines.
/* jshint ignore: start */
if ( typeof Symbol === "function" ) {
	jQuery.fn[ Symbol.iterator ] = deletedIds[ Symbol.iterator ];
}
/* jshint ignore: end */

// Populate the class2type map
jQuery.each( "Boolean Number String Function Array Date RegExp Object Error Symbol".split( " " ),
function( i, name ) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
} );

function isArrayLike( obj ) {

	// Support: iOS 8.2 (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = !!obj && "length" in obj && obj.length,
		type = jQuery.type( obj );

	if ( type === "function" || jQuery.isWindow( obj ) ) {
		return false;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// General-purpose constants
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// http://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",

	// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + identifier + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + identifier + ")" ),
		"CLASS": new RegExp( "^\\.(" + identifier + ")" ),
		"TAG": new RegExp( "^(" + identifier + "|[*])" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var m, i, elem, nid, nidselect, match, groups, newSelector,
		newContext = context && context.ownerDocument,

		// nodeType defaults to 9, since context defaults to document
		nodeType = context ? context.nodeType : 9;

	results = results || [];

	// Return early from calls with invalid selector or context
	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	// Try to shortcut find operations (as opposed to filters) in HTML documents
	if ( !seed ) {

		if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
			setDocument( context );
		}
		context = context || document;

		if ( documentIsHTML ) {

			// If the selector is sufficiently simple, try using a "get*By*" DOM method
			// (excepting DocumentFragment context, where the methods don't exist)
			if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {

				// ID selector
				if ( (m = match[1]) ) {

					// Document context
					if ( nodeType === 9 ) {
						if ( (elem = context.getElementById( m )) ) {

							// Support: IE, Opera, Webkit
							// TODO: identify versions
							// getElementById can match elements by name instead of ID
							if ( elem.id === m ) {
								results.push( elem );
								return results;
							}
						} else {
							return results;
						}

					// Element context
					} else {

						// Support: IE, Opera, Webkit
						// TODO: identify versions
						// getElementById can match elements by name instead of ID
						if ( newContext && (elem = newContext.getElementById( m )) &&
							contains( context, elem ) &&
							elem.id === m ) {

							results.push( elem );
							return results;
						}
					}

				// Type selector
				} else if ( match[2] ) {
					push.apply( results, context.getElementsByTagName( selector ) );
					return results;

				// Class selector
				} else if ( (m = match[3]) && support.getElementsByClassName &&
					context.getElementsByClassName ) {

					push.apply( results, context.getElementsByClassName( m ) );
					return results;
				}
			}

			// Take advantage of querySelectorAll
			if ( support.qsa &&
				!compilerCache[ selector + " " ] &&
				(!rbuggyQSA || !rbuggyQSA.test( selector )) ) {

				if ( nodeType !== 1 ) {
					newContext = context;
					newSelector = selector;

				// qSA looks outside Element context, which is not what we want
				// Thanks to Andrew Dupont for this workaround technique
				// Support: IE <=8
				// Exclude object elements
				} else if ( context.nodeName.toLowerCase() !== "object" ) {

					// Capture the context ID, setting it first if necessary
					if ( (nid = context.getAttribute( "id" )) ) {
						nid = nid.replace( rescape, "\\$&" );
					} else {
						context.setAttribute( "id", (nid = expando) );
					}

					// Prefix every selector in the list
					groups = tokenize( selector );
					i = groups.length;
					nidselect = ridentifier.test( nid ) ? "#" + nid : "[id='" + nid + "']";
					while ( i-- ) {
						groups[i] = nidselect + " " + toSelector( groups[i] );
					}
					newSelector = groups.join( "," );

					// Expand context for sibling selectors
					newContext = rsibling.test( selector ) && testContext( context.parentNode ) ||
						context;
				}

				if ( newSelector ) {
					try {
						push.apply( results,
							newContext.querySelectorAll( newSelector )
						);
						return results;
					} catch ( qsaError ) {
					} finally {
						if ( nid === expando ) {
							context.removeAttribute( "id" );
						}
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {function(string, object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = arr.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, parent,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// Return early if doc is invalid or already selected
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Update global variables
	document = doc;
	docElem = document.documentElement;
	documentIsHTML = !isXML( document );

	// Support: IE 9-11, Edge
	// Accessing iframe documents after unload throws "permission denied" errors (jQuery #13936)
	if ( (parent = document.defaultView) && parent.top !== parent ) {
		// Support: IE 11
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", unloadHandler, false );

		// Support: IE 9 - 10 only
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( document.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( document.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !document.getElementsByName || !document.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var m = context.getElementById( id );
				return m ? [ m ] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" &&
					elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== "undefined" && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( document.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			docElem.appendChild( div ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\r\\' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( div.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+
			if ( !div.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibing-combinator selector` fails
			if ( !div.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( div ) {
			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = document.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully self-exclusive
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === document ? -1 :
				b === document ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return document;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		!compilerCache[ expr + " " ] &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, uniqueCache, outerCache, node, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType,
						diff = false;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) {

										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {

							// Seek `elem` from a previously-cached index

							// ...in a gzip-friendly way
							node = parent;
							outerCache = node[ expando ] || (node[ expando ] = {});

							// Support: IE <9 only
							// Defend against cloned attroperties (jQuery gh-1709)
							uniqueCache = outerCache[ node.uniqueID ] ||
								(outerCache[ node.uniqueID ] = {});

							cache = uniqueCache[ type ] || [];
							nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
							diff = nodeIndex && cache[ 2 ];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									uniqueCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						} else {
							// Use previously-cached element index if available
							if ( useCache ) {
								// ...in a gzip-friendly way
								node = elem;
								outerCache = node[ expando ] || (node[ expando ] = {});

								// Support: IE <9 only
								// Defend against cloned attroperties (jQuery gh-1709)
								uniqueCache = outerCache[ node.uniqueID ] ||
									(outerCache[ node.uniqueID ] = {});

								cache = uniqueCache[ type ] || [];
								nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
								diff = nodeIndex;
							}

							// xml :nth-child(...)
							// or :nth-last-child(...) or :nth(-last)?-of-type(...)
							if ( diff === false ) {
								// Use the same loop as above to seek `elem` from the start
								while ( (node = ++nodeIndex && node && node[ dir ] ||
									(diff = nodeIndex = 0) || start.pop()) ) {

									if ( ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) &&
										++diff ) {

										// Cache the index of each encountered element
										if ( useCache ) {
											outerCache = node[ expando ] || (node[ expando ] = {});

											// Support: IE <9 only
											// Defend against cloned attroperties (jQuery gh-1709)
											uniqueCache = outerCache[ node.uniqueID ] ||
												(outerCache[ node.uniqueID ] = {});

											uniqueCache[ type ] = [ dirruns, diff ];
										}

										if ( node === elem ) {
											break;
										}
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, uniqueCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});

						// Support: IE <9 only
						// Defend against cloned attroperties (jQuery gh-1709)
						uniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});

						if ( (oldCache = uniqueCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							uniqueCache[ dir ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context === document || context || outermost;
			}

			// Add elements passing elementMatchers directly to results
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					if ( !context && elem.ownerDocument !== document ) {
						setDocument( elem );
						xml = !documentIsHTML;
					}
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context || document, xml) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// `i` is now the count of elements visited above, and adding it to `matchedCount`
			// makes the latter nonnegative.
			matchedCount += i;

			// Apply set filters to unmatched elements
			// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`
			// equals `i`), unless we didn't visit _any_ elements in the above loop because we have
			// no element matchers and no seed.
			// Incrementing an initially-string "0" `i` allows `i` to remain a string only in that
			// case, which will result in a "00" `matchedCount` that differs from `i` but is also
			// numerically zero.
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is only one selector in the list and no seed
	// (the latter of which guarantees us context)
	if ( match.length === 1 ) {

		// Reduce context if the leading compound selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		!context || rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
	// Should return 1, but returns 4 (following)
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[ ":" ] = jQuery.expr.pseudos;
jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var dir = function( elem, dir, until ) {
	var matched = [],
		truncate = until !== undefined;

	while ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {
		if ( elem.nodeType === 1 ) {
			if ( truncate && jQuery( elem ).is( until ) ) {
				break;
			}
			matched.push( elem );
		}
	}
	return matched;
};


var siblings = function( n, elem ) {
	var matched = [];

	for ( ; n; n = n.nextSibling ) {
		if ( n.nodeType === 1 && n !== elem ) {
			matched.push( n );
		}
	}

	return matched;
};


var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = ( /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/ );



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		} );

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		} );

	}

	if ( typeof qualifier === "string" ) {
		if ( risSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( jQuery.inArray( elem, qualifier ) > -1 ) !== not;
	} );
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	return elems.length === 1 && elem.nodeType === 1 ?
		jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
		jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
			return elem.nodeType === 1;
		} ) );
};

jQuery.fn.extend( {
	find: function( selector ) {
		var i,
			ret = [],
			self = this,
			len = self.length;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter( function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			} ) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow( this, selector || [], false ) );
	},
	not: function( selector ) {
		return this.pushStack( winnow( this, selector || [], true ) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
} );


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	init = jQuery.fn.init = function( selector, context, root ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// init accepts an alternate rootjQuery
		// so migrate can support jQuery.sub (gh-2101)
		root = root || rootjQuery;

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector.charAt( 0 ) === "<" &&
				selector.charAt( selector.length - 1 ) === ">" &&
				selector.length >= 3 ) {

				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && ( match[ 1 ] || !context ) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[ 1 ] ) {
					context = context instanceof jQuery ? context[ 0 ] : context;

					// scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[ 1 ],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {

							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[ 2 ] );

					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document #6963
					if ( elem && elem.parentNode ) {

						// Handle the case where IE and Opera return items
						// by name instead of ID
						if ( elem.id !== match[ 2 ] ) {
							return rootjQuery.find( selector );
						}

						// Otherwise, we inject the element directly into the jQuery object
						this.length = 1;
						this[ 0 ] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || root ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[ 0 ] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return typeof root.ready !== "undefined" ?
				root.ready( selector ) :

				// Execute immediately if ready is not present
				selector( jQuery );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,

	// methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend( {
	has: function( target ) {
		var i,
			targets = jQuery( target, this ),
			len = targets.length;

		return this.filter( function() {
			for ( i = 0; i < len; i++ ) {
				if ( jQuery.contains( this, targets[ i ] ) ) {
					return true;
				}
			}
		} );
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {

				// Always skip document fragments
				if ( cur.nodeType < 11 && ( pos ?
					pos.index( cur ) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector( cur, selectors ) ) ) {

					matched.push( cur );
					break;
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );
	},

	// Determine the position of an element within
	// the matched set of elements
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// index in selector
		if ( typeof elem === "string" ) {
			return jQuery.inArray( this[ 0 ], jQuery( elem ) );
		}

		// Locate the position of the desired element
		return jQuery.inArray(

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem, this );
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.uniqueSort(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	}
} );

function sibling( cur, dir ) {
	do {
		cur = cur[ dir ];
	} while ( cur && cur.nodeType !== 1 );

	return cur;
}

jQuery.each( {
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return siblings( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return siblings( elem.firstChild );
	},
	contents: function( elem ) {
		return jQuery.nodeName( elem, "iframe" ) ?
			elem.contentDocument || elem.contentWindow.document :
			jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var ret = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			ret = jQuery.filter( selector, ret );
		}

		if ( this.length > 1 ) {

			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				ret = jQuery.uniqueSort( ret );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				ret = ret.reverse();
			}
		}

		return this.pushStack( ret );
	};
} );
var rnotwhite = ( /\S+/g );



// Convert String-formatted options into Object-formatted ones
function createOptions( options ) {
	var object = {};
	jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	} );
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		createOptions( options ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,

		// Last fire value for non-forgettable lists
		memory,

		// Flag to know if list was already fired
		fired,

		// Flag to prevent firing
		locked,

		// Actual callback list
		list = [],

		// Queue of execution data for repeatable lists
		queue = [],

		// Index of currently firing callback (modified by add/remove as needed)
		firingIndex = -1,

		// Fire callbacks
		fire = function() {

			// Enforce single-firing
			locked = options.once;

			// Execute callbacks for all pending executions,
			// respecting firingIndex overrides and runtime changes
			fired = firing = true;
			for ( ; queue.length; firingIndex = -1 ) {
				memory = queue.shift();
				while ( ++firingIndex < list.length ) {

					// Run callback and check for early termination
					if ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&
						options.stopOnFalse ) {

						// Jump to end and forget the data so .add doesn't re-fire
						firingIndex = list.length;
						memory = false;
					}
				}
			}

			// Forget the data if we're done with it
			if ( !options.memory ) {
				memory = false;
			}

			firing = false;

			// Clean up if we're done firing for good
			if ( locked ) {

				// Keep an empty list if we have data for future add calls
				if ( memory ) {
					list = [];

				// Otherwise, this object is spent
				} else {
					list = "";
				}
			}
		},

		// Actual Callbacks object
		self = {

			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {

					// If we have memory from a past run, we should fire after adding
					if ( memory && !firing ) {
						firingIndex = list.length - 1;
						queue.push( memory );
					}

					( function add( args ) {
						jQuery.each( args, function( _, arg ) {
							if ( jQuery.isFunction( arg ) ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && jQuery.type( arg ) !== "string" ) {

								// Inspect recursively
								add( arg );
							}
						} );
					} )( arguments );

					if ( memory && !firing ) {
						fire();
					}
				}
				return this;
			},

			// Remove a callback from the list
			remove: function() {
				jQuery.each( arguments, function( _, arg ) {
					var index;
					while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
						list.splice( index, 1 );

						// Handle firing indexes
						if ( index <= firingIndex ) {
							firingIndex--;
						}
					}
				} );
				return this;
			},

			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ?
					jQuery.inArray( fn, list ) > -1 :
					list.length > 0;
			},

			// Remove all callbacks from the list
			empty: function() {
				if ( list ) {
					list = [];
				}
				return this;
			},

			// Disable .fire and .add
			// Abort any current/pending executions
			// Clear all callbacks and values
			disable: function() {
				locked = queue = [];
				list = memory = "";
				return this;
			},
			disabled: function() {
				return !list;
			},

			// Disable .fire
			// Also disable .add unless we have memory (since it would have no effect)
			// Abort any pending executions
			lock: function() {
				locked = true;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			locked: function() {
				return !!locked;
			},

			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( !locked ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					queue.push( args );
					if ( !firing ) {
						fire();
					}
				}
				return this;
			},

			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},

			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


jQuery.extend( {

	Deferred: function( func ) {
		var tuples = [

				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks( "once memory" ), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks( "once memory" ), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks( "memory" ) ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred( function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];

							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[ 1 ] ]( function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.progress( newDefer.notify )
										.done( newDefer.resolve )
										.fail( newDefer.reject );
								} else {
									newDefer[ tuple[ 0 ] + "With" ](
										this === promise ? newDefer.promise() : this,
										fn ? [ returned ] : arguments
									);
								}
							} );
						} );
						fns = null;
					} ).promise();
				},

				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[ 1 ] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add( function() {

					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[ 0 ] ] = function() {
				deferred[ tuple[ 0 ] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[ 0 ] + "With" ] = list.fireWith;
		} );

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 ||
				( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred.
			// If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( values === progressValues ) {
						deferred.notifyWith( contexts, values );

					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.progress( updateFunc( i, progressContexts, progressValues ) )
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject );
				} else {
					--remaining;
				}
			}
		}

		// if we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
} );


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {

	// Add the callback
	jQuery.ready.promise().done( fn );

	return this;
};

jQuery.extend( {

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.triggerHandler ) {
			jQuery( document ).triggerHandler( "ready" );
			jQuery( document ).off( "ready" );
		}
	}
} );

/**
 * Clean-up method for dom ready events
 */
function detach() {
	if ( document.addEventListener ) {
		document.removeEventListener( "DOMContentLoaded", completed );
		window.removeEventListener( "load", completed );

	} else {
		document.detachEvent( "onreadystatechange", completed );
		window.detachEvent( "onload", completed );
	}
}

/**
 * The ready event handler and self cleanup method
 */
function completed() {

	// readyState === "complete" is good enough for us to call the dom ready in oldIE
	if ( document.addEventListener ||
		window.event.type === "load" ||
		document.readyState === "complete" ) {

		detach();
		jQuery.ready();
	}
}

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called
		// after the browser event has already occurred.
		// Support: IE6-10
		// Older IE sometimes signals "interactive" too soon
		if ( document.readyState === "complete" ||
			( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {

			// Handle it asynchronously to allow scripts the opportunity to delay ready
			window.setTimeout( jQuery.ready );

		// Standards-based browsers support DOMContentLoaded
		} else if ( document.addEventListener ) {

			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed );

		// If IE event model is used
		} else {

			// Ensure firing before onload, maybe late but safe also for iframes
			document.attachEvent( "onreadystatechange", completed );

			// A fallback to window.onload, that will always work
			window.attachEvent( "onload", completed );

			// If IE and not a frame
			// continually check to see if the document is ready
			var top = false;

			try {
				top = window.frameElement == null && document.documentElement;
			} catch ( e ) {}

			if ( top && top.doScroll ) {
				( function doScrollCheck() {
					if ( !jQuery.isReady ) {

						try {

							// Use the trick by Diego Perini
							// http://javascript.nwbox.com/IEContentLoaded/
							top.doScroll( "left" );
						} catch ( e ) {
							return window.setTimeout( doScrollCheck, 50 );
						}

						// detach all dom ready events
						detach();

						// and execute any waiting functions
						jQuery.ready();
					}
				} )();
			}
		}
	}
	return readyList.promise( obj );
};

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();




// Support: IE<9
// Iteration over object's inherited properties before its own
var i;
for ( i in jQuery( support ) ) {
	break;
}
support.ownFirst = i === "0";

// Note: most support tests are defined in their respective modules.
// false until the test is run
support.inlineBlockNeedsLayout = false;

// Execute ASAP in case we need to set body.style.zoom
jQuery( function() {

	// Minified: var a,b,c,d
	var val, div, body, container;

	body = document.getElementsByTagName( "body" )[ 0 ];
	if ( !body || !body.style ) {

		// Return for frameset docs that don't have a body
		return;
	}

	// Setup
	div = document.createElement( "div" );
	container = document.createElement( "div" );
	container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
	body.appendChild( container ).appendChild( div );

	if ( typeof div.style.zoom !== "undefined" ) {

		// Support: IE<8
		// Check if natively block-level elements act like inline-block
		// elements when setting their display to 'inline' and giving
		// them layout
		div.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";

		support.inlineBlockNeedsLayout = val = div.offsetWidth === 3;
		if ( val ) {

			// Prevent IE 6 from affecting layout for positioned elements #11048
			// Prevent IE from shrinking the body in IE 7 mode #12869
			// Support: IE<8
			body.style.zoom = 1;
		}
	}

	body.removeChild( container );
} );


( function() {
	var div = document.createElement( "div" );

	// Support: IE<9
	support.deleteExpando = true;
	try {
		delete div.test;
	} catch ( e ) {
		support.deleteExpando = false;
	}

	// Null elements to avoid leaks in IE.
	div = null;
} )();
var acceptData = function( elem ) {
	var noData = jQuery.noData[ ( elem.nodeName + " " ).toLowerCase() ],
		nodeType = +elem.nodeType || 1;

	// Do not set data on non-element DOM nodes because it will not be cleared (#8335).
	return nodeType !== 1 && nodeType !== 9 ?
		false :

		// Nodes accept data unless otherwise specified; rejection can be conditional
		!noData || noData !== true && elem.getAttribute( "classid" ) === noData;
};




var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {

		var name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();

		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :

					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} catch ( e ) {}

			// Make sure we set the data so it isn't changed later
			jQuery.data( elem, key, data );

		} else {
			data = undefined;
		}
	}

	return data;
}

// checks a cache object for emptiness
function isEmptyDataObject( obj ) {
	var name;
	for ( name in obj ) {

		// if the public data object is empty, the private is still empty
		if ( name === "data" && jQuery.isEmptyObject( obj[ name ] ) ) {
			continue;
		}
		if ( name !== "toJSON" ) {
			return false;
		}
	}

	return true;
}

function internalData( elem, name, data, pvt /* Internal Use Only */ ) {
	if ( !acceptData( elem ) ) {
		return;
	}

	var ret, thisCache,
		internalKey = jQuery.expando,

		// We have to handle DOM nodes and JS objects differently because IE6-7
		// can't GC object references properly across the DOM-JS boundary
		isNode = elem.nodeType,

		// Only DOM nodes need the global jQuery cache; JS object data is
		// attached directly to the object so GC can occur automatically
		cache = isNode ? jQuery.cache : elem,

		// Only defining an ID for JS objects if its cache already exists allows
		// the code to shortcut on the same path as a DOM node with no cache
		id = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;

	// Avoid doing any more work than we need to when trying to get data on an
	// object that has no data at all
	if ( ( !id || !cache[ id ] || ( !pvt && !cache[ id ].data ) ) &&
		data === undefined && typeof name === "string" ) {
		return;
	}

	if ( !id ) {

		// Only DOM nodes need a new unique ID for each element since their data
		// ends up in the global cache
		if ( isNode ) {
			id = elem[ internalKey ] = deletedIds.pop() || jQuery.guid++;
		} else {
			id = internalKey;
		}
	}

	if ( !cache[ id ] ) {

		// Avoid exposing jQuery metadata on plain JS objects when the object
		// is serialized using JSON.stringify
		cache[ id ] = isNode ? {} : { toJSON: jQuery.noop };
	}

	// An object can be passed to jQuery.data instead of a key/value pair; this gets
	// shallow copied over onto the existing cache
	if ( typeof name === "object" || typeof name === "function" ) {
		if ( pvt ) {
			cache[ id ] = jQuery.extend( cache[ id ], name );
		} else {
			cache[ id ].data = jQuery.extend( cache[ id ].data, name );
		}
	}

	thisCache = cache[ id ];

	// jQuery data() is stored in a separate object inside the object's internal data
	// cache in order to avoid key collisions between internal data and user-defined
	// data.
	if ( !pvt ) {
		if ( !thisCache.data ) {
			thisCache.data = {};
		}

		thisCache = thisCache.data;
	}

	if ( data !== undefined ) {
		thisCache[ jQuery.camelCase( name ) ] = data;
	}

	// Check for both converted-to-camel and non-converted data property names
	// If a data property was specified
	if ( typeof name === "string" ) {

		// First Try to find as-is property data
		ret = thisCache[ name ];

		// Test for null|undefined property data
		if ( ret == null ) {

			// Try to find the camelCased property
			ret = thisCache[ jQuery.camelCase( name ) ];
		}
	} else {
		ret = thisCache;
	}

	return ret;
}

function internalRemoveData( elem, name, pvt ) {
	if ( !acceptData( elem ) ) {
		return;
	}

	var thisCache, i,
		isNode = elem.nodeType,

		// See jQuery.data for more information
		cache = isNode ? jQuery.cache : elem,
		id = isNode ? elem[ jQuery.expando ] : jQuery.expando;

	// If there is already no cache entry for this object, there is no
	// purpose in continuing
	if ( !cache[ id ] ) {
		return;
	}

	if ( name ) {

		thisCache = pvt ? cache[ id ] : cache[ id ].data;

		if ( thisCache ) {

			// Support array or space separated string names for data keys
			if ( !jQuery.isArray( name ) ) {

				// try the string as a key before any manipulation
				if ( name in thisCache ) {
					name = [ name ];
				} else {

					// split the camel cased version by spaces unless a key with the spaces exists
					name = jQuery.camelCase( name );
					if ( name in thisCache ) {
						name = [ name ];
					} else {
						name = name.split( " " );
					}
				}
			} else {

				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = name.concat( jQuery.map( name, jQuery.camelCase ) );
			}

			i = name.length;
			while ( i-- ) {
				delete thisCache[ name[ i ] ];
			}

			// If there is no data left in the cache, we want to continue
			// and let the cache object itself get destroyed
			if ( pvt ? !isEmptyDataObject( thisCache ) : !jQuery.isEmptyObject( thisCache ) ) {
				return;
			}
		}
	}

	// See jQuery.data for more information
	if ( !pvt ) {
		delete cache[ id ].data;

		// Don't destroy the parent cache unless the internal data object
		// had been the only thing left in it
		if ( !isEmptyDataObject( cache[ id ] ) ) {
			return;
		}
	}

	// Destroy the cache
	if ( isNode ) {
		jQuery.cleanData( [ elem ], true );

	// Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)
	/* jshint eqeqeq: false */
	} else if ( support.deleteExpando || cache != cache.window ) {
		/* jshint eqeqeq: true */
		delete cache[ id ];

	// When all else fails, undefined
	} else {
		cache[ id ] = undefined;
	}
}

jQuery.extend( {
	cache: {},

	// The following elements (space-suffixed to avoid Object.prototype collisions)
	// throw uncatchable exceptions if you attempt to set expando properties
	noData: {
		"applet ": true,
		"embed ": true,

		// ...but Flash objects (which have this classid) *can* handle expandos
		"object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
	},

	hasData: function( elem ) {
		elem = elem.nodeType ? jQuery.cache[ elem[ jQuery.expando ] ] : elem[ jQuery.expando ];
		return !!elem && !isEmptyDataObject( elem );
	},

	data: function( elem, name, data ) {
		return internalData( elem, name, data );
	},

	removeData: function( elem, name ) {
		return internalRemoveData( elem, name );
	},

	// For internal use only.
	_data: function( elem, name, data ) {
		return internalData( elem, name, data, true );
	},

	_removeData: function( elem, name ) {
		return internalRemoveData( elem, name, true );
	}
} );

jQuery.fn.extend( {
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Special expections of .data basically thwart jQuery.access,
		// so implement the relevant behavior ourselves

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = jQuery.data( elem );

				if ( elem.nodeType === 1 && !jQuery._data( elem, "parsedAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE11+
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = jQuery.camelCase( name.slice( 5 ) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					jQuery._data( elem, "parsedAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each( function() {
				jQuery.data( this, key );
			} );
		}

		return arguments.length > 1 ?

			// Sets one value
			this.each( function() {
				jQuery.data( this, key, value );
			} ) :

			// Gets one value
			// Try to fetch any internally stored data first
			elem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : undefined;
	},

	removeData: function( key ) {
		return this.each( function() {
			jQuery.removeData( this, key );
		} );
	}
} );


jQuery.extend( {
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = jQuery._data( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray( data ) ) {
					queue = jQuery._data( elem, type, jQuery.makeArray( data ) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// not intended for public consumption - generates a queueHooks object,
	// or returns the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return jQuery._data( elem, key ) || jQuery._data( elem, key, {
			empty: jQuery.Callbacks( "once memory" ).add( function() {
				jQuery._removeData( elem, type + "queue" );
				jQuery._removeData( elem, key );
			} )
		} );
	}
} );

jQuery.fn.extend( {
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[ 0 ], type );
		}

		return data === undefined ?
			this :
			this.each( function() {
				var queue = jQuery.queue( this, type, data );

				// ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[ 0 ] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			} );
	},
	dequeue: function( type ) {
		return this.each( function() {
			jQuery.dequeue( this, type );
		} );
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},

	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = jQuery._data( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
} );


( function() {
	var shrinkWrapBlocksVal;

	support.shrinkWrapBlocks = function() {
		if ( shrinkWrapBlocksVal != null ) {
			return shrinkWrapBlocksVal;
		}

		// Will be changed later if needed.
		shrinkWrapBlocksVal = false;

		// Minified: var b,c,d
		var div, body, container;

		body = document.getElementsByTagName( "body" )[ 0 ];
		if ( !body || !body.style ) {

			// Test fired too early or in an unsupported environment, exit.
			return;
		}

		// Setup
		div = document.createElement( "div" );
		container = document.createElement( "div" );
		container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
		body.appendChild( container ).appendChild( div );

		// Support: IE6
		// Check if elements with layout shrink-wrap their children
		if ( typeof div.style.zoom !== "undefined" ) {

			// Reset CSS: box-sizing; display; margin; border
			div.style.cssText =

				// Support: Firefox<29, Android 2.3
				// Vendor-prefix box-sizing
				"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
				"box-sizing:content-box;display:block;margin:0;border:0;" +
				"padding:1px;width:1px;zoom:1";
			div.appendChild( document.createElement( "div" ) ).style.width = "5px";
			shrinkWrapBlocksVal = div.offsetWidth !== 3;
		}

		body.removeChild( container );

		return shrinkWrapBlocksVal;
	};

} )();
var pnum = ( /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/ ).source;

var rcssNum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" );


var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {

		// isHidden might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;
		return jQuery.css( elem, "display" ) === "none" ||
			!jQuery.contains( elem.ownerDocument, elem );
	};



function adjustCSS( elem, prop, valueParts, tween ) {
	var adjusted,
		scale = 1,
		maxIterations = 20,
		currentValue = tween ?
			function() { return tween.cur(); } :
			function() { return jQuery.css( elem, prop, "" ); },
		initial = currentValue(),
		unit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

		// Starting value computation is required for potential unit mismatches
		initialInUnit = ( jQuery.cssNumber[ prop ] || unit !== "px" && +initial ) &&
			rcssNum.exec( jQuery.css( elem, prop ) );

	if ( initialInUnit && initialInUnit[ 3 ] !== unit ) {

		// Trust units reported by jQuery.css
		unit = unit || initialInUnit[ 3 ];

		// Make sure we update the tween properties later on
		valueParts = valueParts || [];

		// Iteratively approximate from a nonzero starting point
		initialInUnit = +initial || 1;

		do {

			// If previous iteration zeroed out, double until we get *something*.
			// Use string for doubling so we don't accidentally see scale as unchanged below
			scale = scale || ".5";

			// Adjust and apply
			initialInUnit = initialInUnit / scale;
			jQuery.style( elem, prop, initialInUnit + unit );

		// Update scale, tolerating zero or NaN from tween.cur()
		// Break the loop if scale is unchanged or perfect, or if we've just had enough.
		} while (
			scale !== ( scale = currentValue() / initial ) && scale !== 1 && --maxIterations
		);
	}

	if ( valueParts ) {
		initialInUnit = +initialInUnit || +initial || 0;

		// Apply relative offset (+=/-=) if specified
		adjusted = valueParts[ 1 ] ?
			initialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :
			+valueParts[ 2 ];
		if ( tween ) {
			tween.unit = unit;
			tween.start = initialInUnit;
			tween.end = adjusted;
		}
	}
	return adjusted;
}


// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		length = elems.length,
		bulk = key == null;

	// Sets many values
	if ( jQuery.type( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			access( elems, fn, i, key[ i ], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !jQuery.isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {

			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < length; i++ ) {
				fn(
					elems[ i ],
					key,
					raw ? value : value.call( elems[ i ], i, fn( elems[ i ], key ) )
				);
			}
		}
	}

	return chainable ?
		elems :

		// Gets
		bulk ?
			fn.call( elems ) :
			length ? fn( elems[ 0 ], key ) : emptyGet;
};
var rcheckableType = ( /^(?:checkbox|radio)$/i );

var rtagName = ( /<([\w:-]+)/ );

var rscriptType = ( /^$|\/(?:java|ecma)script/i );

var rleadingWhitespace = ( /^\s+/ );

var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|" +
		"details|dialog|figcaption|figure|footer|header|hgroup|main|" +
		"mark|meter|nav|output|picture|progress|section|summary|template|time|video";



function createSafeFragment( document ) {
	var list = nodeNames.split( "|" ),
		safeFrag = document.createDocumentFragment();

	if ( safeFrag.createElement ) {
		while ( list.length ) {
			safeFrag.createElement(
				list.pop()
			);
		}
	}
	return safeFrag;
}


( function() {
	var div = document.createElement( "div" ),
		fragment = document.createDocumentFragment(),
		input = document.createElement( "input" );

	// Setup
	div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";

	// IE strips leading whitespace when .innerHTML is used
	support.leadingWhitespace = div.firstChild.nodeType === 3;

	// Make sure that tbody elements aren't automatically inserted
	// IE will insert them into empty tables
	support.tbody = !div.getElementsByTagName( "tbody" ).length;

	// Make sure that link elements get serialized correctly by innerHTML
	// This requires a wrapper element in IE
	support.htmlSerialize = !!div.getElementsByTagName( "link" ).length;

	// Makes sure cloning an html5 element does not cause problems
	// Where outerHTML is undefined, this still works
	support.html5Clone =
		document.createElement( "nav" ).cloneNode( true ).outerHTML !== "<:nav></:nav>";

	// Check if a disconnected checkbox will retain its checked
	// value of true after appended to the DOM (IE6/7)
	input.type = "checkbox";
	input.checked = true;
	fragment.appendChild( input );
	support.appendChecked = input.checked;

	// Make sure textarea (and checkbox) defaultValue is properly cloned
	// Support: IE6-IE11+
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;

	// #11217 - WebKit loses check when the name is after the checked attribute
	fragment.appendChild( div );

	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input = document.createElement( "input" );
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Safari 5.1, iOS 5.1, Android 4.x, Android 2.3
	// old WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<9
	// Cloned elements keep attachEvent handlers, we use addEventListener on IE9+
	support.noCloneEvent = !!div.addEventListener;

	// Support: IE<9
	// Since attributes and properties are the same in IE,
	// cleanData must set properties to undefined rather than use removeAttribute
	div[ jQuery.expando ] = 1;
	support.attributes = !div.getAttribute( jQuery.expando );
} )();


// We have to close these tags to support XHTML (#13200)
var wrapMap = {
	option: [ 1, "<select multiple='multiple'>", "</select>" ],
	legend: [ 1, "<fieldset>", "</fieldset>" ],
	area: [ 1, "<map>", "</map>" ],

	// Support: IE8
	param: [ 1, "<object>", "</object>" ],
	thead: [ 1, "<table>", "</table>" ],
	tr: [ 2, "<table><tbody>", "</tbody></table>" ],
	col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
	td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

	// IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,
	// unless wrapped in a div with non-breaking characters in front of it.
	_default: support.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>" ]
};

// Support: IE8-IE9
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;


function getAll( context, tag ) {
	var elems, elem,
		i = 0,
		found = typeof context.getElementsByTagName !== "undefined" ?
			context.getElementsByTagName( tag || "*" ) :
			typeof context.querySelectorAll !== "undefined" ?
				context.querySelectorAll( tag || "*" ) :
				undefined;

	if ( !found ) {
		for ( found = [], elems = context.childNodes || context;
			( elem = elems[ i ] ) != null;
			i++
		) {
			if ( !tag || jQuery.nodeName( elem, tag ) ) {
				found.push( elem );
			} else {
				jQuery.merge( found, getAll( elem, tag ) );
			}
		}
	}

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], found ) :
		found;
}


// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var elem,
		i = 0;
	for ( ; ( elem = elems[ i ] ) != null; i++ ) {
		jQuery._data(
			elem,
			"globalEval",
			!refElements || jQuery._data( refElements[ i ], "globalEval" )
		);
	}
}


var rhtml = /<|&#?\w+;/,
	rtbody = /<tbody/i;

function fixDefaultChecked( elem ) {
	if ( rcheckableType.test( elem.type ) ) {
		elem.defaultChecked = elem.checked;
	}
}

function buildFragment( elems, context, scripts, selection, ignored ) {
	var j, elem, contains,
		tmp, tag, tbody, wrap,
		l = elems.length,

		// Ensure a safe fragment
		safe = createSafeFragment( context ),

		nodes = [],
		i = 0;

	for ( ; i < l; i++ ) {
		elem = elems[ i ];

		if ( elem || elem === 0 ) {

			// Add nodes directly
			if ( jQuery.type( elem ) === "object" ) {
				jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

			// Convert non-html into a text node
			} else if ( !rhtml.test( elem ) ) {
				nodes.push( context.createTextNode( elem ) );

			// Convert html into DOM nodes
			} else {
				tmp = tmp || safe.appendChild( context.createElement( "div" ) );

				// Deserialize a standard representation
				tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
				wrap = wrapMap[ tag ] || wrapMap._default;

				tmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];

				// Descend through wrappers to the right content
				j = wrap[ 0 ];
				while ( j-- ) {
					tmp = tmp.lastChild;
				}

				// Manually add leading whitespace removed by IE
				if ( !support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {
					nodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[ 0 ] ) );
				}

				// Remove IE's autoinserted <tbody> from table fragments
				if ( !support.tbody ) {

					// String was a <table>, *may* have spurious <tbody>
					elem = tag === "table" && !rtbody.test( elem ) ?
						tmp.firstChild :

						// String was a bare <thead> or <tfoot>
						wrap[ 1 ] === "<table>" && !rtbody.test( elem ) ?
							tmp :
							0;

					j = elem && elem.childNodes.length;
					while ( j-- ) {
						if ( jQuery.nodeName( ( tbody = elem.childNodes[ j ] ), "tbody" ) &&
							!tbody.childNodes.length ) {

							elem.removeChild( tbody );
						}
					}
				}

				jQuery.merge( nodes, tmp.childNodes );

				// Fix #12392 for WebKit and IE > 9
				tmp.textContent = "";

				// Fix #12392 for oldIE
				while ( tmp.firstChild ) {
					tmp.removeChild( tmp.firstChild );
				}

				// Remember the top-level container for proper cleanup
				tmp = safe.lastChild;
			}
		}
	}

	// Fix #11356: Clear elements from fragment
	if ( tmp ) {
		safe.removeChild( tmp );
	}

	// Reset defaultChecked for any radios and checkboxes
	// about to be appended to the DOM in IE 6/7 (#8060)
	if ( !support.appendChecked ) {
		jQuery.grep( getAll( nodes, "input" ), fixDefaultChecked );
	}

	i = 0;
	while ( ( elem = nodes[ i++ ] ) ) {

		// Skip elements already in the context collection (trac-4087)
		if ( selection && jQuery.inArray( elem, selection ) > -1 ) {
			if ( ignored ) {
				ignored.push( elem );
			}

			continue;
		}

		contains = jQuery.contains( elem.ownerDocument, elem );

		// Append to fragment
		tmp = getAll( safe.appendChild( elem ), "script" );

		// Preserve script evaluation history
		if ( contains ) {
			setGlobalEval( tmp );
		}

		// Capture executables
		if ( scripts ) {
			j = 0;
			while ( ( elem = tmp[ j++ ] ) ) {
				if ( rscriptType.test( elem.type || "" ) ) {
					scripts.push( elem );
				}
			}
		}
	}

	tmp = null;

	return safe;
}


( function() {
	var i, eventName,
		div = document.createElement( "div" );

	// Support: IE<9 (lack submit/change bubble), Firefox (lack focus(in | out) events)
	for ( i in { submit: true, change: true, focusin: true } ) {
		eventName = "on" + i;

		if ( !( support[ i ] = eventName in window ) ) {

			// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP)
			div.setAttribute( eventName, "t" );
			support[ i ] = div.attributes[ eventName ].expando === false;
		}
	}

	// Null elements to avoid leaks in IE.
	div = null;
} )();


var rformElems = /^(?:input|select|textarea)$/i,
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

// Support: IE9
// See #13393 for more info
function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

function on( elem, types, selector, data, fn, one ) {
	var origFn, type;

	// Types can be a map of types/handlers
	if ( typeof types === "object" ) {

		// ( types-Object, selector, data )
		if ( typeof selector !== "string" ) {

			// ( types-Object, data )
			data = data || selector;
			selector = undefined;
		}
		for ( type in types ) {
			on( elem, type, selector, data, types[ type ], one );
		}
		return elem;
	}

	if ( data == null && fn == null ) {

		// ( types, fn )
		fn = selector;
		data = selector = undefined;
	} else if ( fn == null ) {
		if ( typeof selector === "string" ) {

			// ( types, selector, fn )
			fn = data;
			data = undefined;
		} else {

			// ( types, data, fn )
			fn = data;
			data = selector;
			selector = undefined;
		}
	}
	if ( fn === false ) {
		fn = returnFalse;
	} else if ( !fn ) {
		return elem;
	}

	if ( one === 1 ) {
		origFn = fn;
		fn = function( event ) {

			// Can use an empty set, since event contains the info
			jQuery().off( event );
			return origFn.apply( this, arguments );
		};

		// Use same guid so caller can remove using origFn
		fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
	}
	return elem.each( function() {
		jQuery.event.add( this, types, fn, data, selector );
	} );
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {
		var tmp, events, t, handleObjIn,
			special, eventHandle, handleObj,
			handlers, type, namespaces, origType,
			elemData = jQuery._data( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !( events = elemData.events ) ) {
			events = elemData.events = {};
		}
		if ( !( eventHandle = elemData.handle ) ) {
			eventHandle = elemData.handle = function( e ) {

				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== "undefined" &&
					( !e || jQuery.event.triggered !== e.type ) ?
					jQuery.event.dispatch.apply( eventHandle.elem, arguments ) :
					undefined;
			};

			// Add elem as a property of the handle fn to prevent a memory leak
			// with IE non-native events
			eventHandle.elem = elem;
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend( {
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join( "." )
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !( handlers = events[ type ] ) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener/attachEvent if the special events handler returns false
				if ( !special.setup ||
					special.setup.call( elem, data, namespaces, eventHandle ) === false ) {

					// Bind the global event handler to the element
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );

					} else if ( elem.attachEvent ) {
						elem.attachEvent( "on" + type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

		// Nullify elem to prevent memory leaks in IE
		elem = null;
	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {
		var j, handleObj, tmp,
			origCount, t, events,
			special, handlers, type,
			namespaces, origType,
			elemData = jQuery.hasData( elem ) && jQuery._data( elem );

		if ( !elemData || !( events = elemData.events ) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[ 2 ] &&
				new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector ||
						selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown ||
					special.teardown.call( elem, namespaces, elemData.handle ) === false ) {

					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;

			// removeData also checks for emptiness and clears the expando if empty
			// so use it instead of delete
			jQuery._removeData( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {
		var handle, ontype, cur,
			bubbleType, special, tmp, i,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split( "." ) : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf( "." ) > -1 ) {

			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split( "." );
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf( ":" ) < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join( "." );
		event.rnamespace = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === ( elem.ownerDocument || document ) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( jQuery._data( cur, "events" ) || {} )[ event.type ] &&
				jQuery._data( cur, "handle" );

			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if (
				( !special._default ||
				 special._default.apply( eventPath.pop(), data ) === false
				) && acceptData( elem )
			) {

				// Call a native DOM method on the target with the same name name as the event.
				// Can't use an .isFunction() check here because IE6/7 fails that test.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					try {
						elem[ type ]();
					} catch ( e ) {

						// IE<9 dies on focus/blur to hidden element (#1486,#12518)
						// only reproducible on winXP IE8 native, not IE9 in IE8 mode
					}
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, j, ret, matched, handleObj,
			handlerQueue = [],
			args = slice.call( arguments ),
			handlers = ( jQuery._data( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[ 0 ] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( ( handleObj = matched.handlers[ j++ ] ) &&
				!event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.rnamespace || event.rnamespace.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||
						handleObj.handler ).apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( ( event.result = ret ) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, matches, sel, handleObj,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Support (at least): Chrome, IE9
		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		//
		// Support: Firefox<=42+
		// Avoid non-left-click in FF but don't block IE radio events (#3861, gh-2343)
		if ( delegateCount && cur.nodeType &&
			( event.type !== "click" || isNaN( event.button ) || event.button < 1 ) ) {

			/* jshint eqeqeq: false */
			for ( ; cur != this; cur = cur.parentNode || this ) {
				/* jshint eqeqeq: true */

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && ( cur.disabled !== true || event.type !== "click" ) ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) > -1 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push( { elem: cur, handlers: matches } );
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push( { elem: this, handlers: handlers.slice( delegateCount ) } );
		}

		return handlerQueue;
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: IE<9
		// Fix target property (#1925)
		if ( !event.target ) {
			event.target = originalEvent.srcElement || document;
		}

		// Support: Safari 6-8+
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		// Support: IE<9
		// For mouse/key events, metaKey==false if it's undefined (#3368, #11328)
		event.metaKey = !!event.metaKey;

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: ( "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase " +
		"metaKey relatedTarget shiftKey target timeStamp view which" ).split( " " ),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split( " " ),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: ( "button buttons clientX clientY fromElement offsetX offsetY " +
			"pageX pageY screenX screenY toElement" ).split( " " ),
		filter: function( event, original ) {
			var body, eventDoc, doc,
				button = original.button,
				fromElement = original.fromElement;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX +
					( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) -
					( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY +
					( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) -
					( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add relatedTarget, if necessary
			if ( !event.relatedTarget && fromElement ) {
				event.relatedTarget = fromElement === event.target ?
					original.toElement :
					fromElement;
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	special: {
		load: {

			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {

			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					try {
						this.focus();
						return false;
					} catch ( e ) {

						// Support: IE<9
						// If we error on focus to hidden element (#1486, #12518),
						// let .trigger() run the handlers
					}
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {

			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( jQuery.nodeName( this, "input" ) && this.type === "checkbox" && this.click ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	// Piggyback on a donor event to simulate a different one
	simulate: function( type, elem, event ) {
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true

				// Previously, `originalEvent: {}` was set here, so stopPropagation call
				// would not be triggered on donor event, since in our own
				// jQuery.event.stopPropagation function we had a check for existence of
				// originalEvent.stopPropagation method, so, consequently it would be a noop.
				//
				// Guard for simulated events was moved to jQuery.event.stopPropagation function
				// since `originalEvent` should point to the original event for the
				// constancy with other events and for more focused logic
			}
		);

		jQuery.event.trigger( e, null, elem );

		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = document.removeEventListener ?
	function( elem, type, handle ) {

		// This "if" is needed for plain objects
		if ( elem.removeEventListener ) {
			elem.removeEventListener( type, handle );
		}
	} :
	function( elem, type, handle ) {
		var name = "on" + type;

		if ( elem.detachEvent ) {

			// #8545, #7054, preventing memory leaks for custom events in IE6-8
			// detachEvent needed property on element, by name of that event,
			// to properly expose it to GC
			if ( typeof elem[ name ] === "undefined" ) {
				elem[ name ] = null;
			}

			elem.detachEvent( name, handle );
		}
	};

jQuery.Event = function( src, props ) {

	// Allow instantiation without the 'new' keyword
	if ( !( this instanceof jQuery.Event ) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&

				// Support: IE < 9, Android < 4.0
				src.returnValue === false ?
			returnTrue :
			returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	constructor: jQuery.Event,
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;
		if ( !e ) {
			return;
		}

		// If preventDefault exists, run it on the original event
		if ( e.preventDefault ) {
			e.preventDefault();

		// Support: IE
		// Otherwise set the returnValue property of the original event to false
		} else {
			e.returnValue = false;
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( !e || this.isSimulated ) {
			return;
		}

		// If stopPropagation exists, run it on the original event
		if ( e.stopPropagation ) {
			e.stopPropagation();
		}

		// Support: IE
		// Set the cancelBubble property of the original event to true
		e.cancelBubble = true;
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && e.stopImmediatePropagation ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
// so that event delegation works in jQuery.
// Do the same for pointerenter/pointerleave and pointerover/pointerout
//
// Support: Safari 7 only
// Safari sends mouseenter too often; see:
// https://code.google.com/p/chromium/issues/detail?id=470258
// for the description of the bug (it existed in older Chrome versions as well).
jQuery.each( {
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mouseenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
} );

// IE submit delegation
if ( !support.submit ) {

	jQuery.event.special.submit = {
		setup: function() {

			// Only need this for delegated form submit events
			if ( jQuery.nodeName( this, "form" ) ) {
				return false;
			}

			// Lazy-add a submit handler when a descendant form may potentially be submitted
			jQuery.event.add( this, "click._submit keypress._submit", function( e ) {

				// Node name check avoids a VML-related crash in IE (#9807)
				var elem = e.target,
					form = jQuery.nodeName( elem, "input" ) || jQuery.nodeName( elem, "button" ) ?

						// Support: IE <=8
						// We use jQuery.prop instead of elem.form
						// to allow fixing the IE8 delegated submit issue (gh-2332)
						// by 3rd party polyfills/workarounds.
						jQuery.prop( elem, "form" ) :
						undefined;

				if ( form && !jQuery._data( form, "submit" ) ) {
					jQuery.event.add( form, "submit._submit", function( event ) {
						event._submitBubble = true;
					} );
					jQuery._data( form, "submit", true );
				}
			} );

			// return undefined since we don't need an event listener
		},

		postDispatch: function( event ) {

			// If form was submitted by the user, bubble the event up the tree
			if ( event._submitBubble ) {
				delete event._submitBubble;
				if ( this.parentNode && !event.isTrigger ) {
					jQuery.event.simulate( "submit", this.parentNode, event );
				}
			}
		},

		teardown: function() {

			// Only need this for delegated form submit events
			if ( jQuery.nodeName( this, "form" ) ) {
				return false;
			}

			// Remove delegated handlers; cleanData eventually reaps submit handlers attached above
			jQuery.event.remove( this, "._submit" );
		}
	};
}

// IE change delegation and checkbox/radio fix
if ( !support.change ) {

	jQuery.event.special.change = {

		setup: function() {

			if ( rformElems.test( this.nodeName ) ) {

				// IE doesn't fire change on a check/radio until blur; trigger it on click
				// after a propertychange. Eat the blur-change in special.change.handle.
				// This still fires onchange a second time for check/radio after blur.
				if ( this.type === "checkbox" || this.type === "radio" ) {
					jQuery.event.add( this, "propertychange._change", function( event ) {
						if ( event.originalEvent.propertyName === "checked" ) {
							this._justChanged = true;
						}
					} );
					jQuery.event.add( this, "click._change", function( event ) {
						if ( this._justChanged && !event.isTrigger ) {
							this._justChanged = false;
						}

						// Allow triggered, simulated change events (#11500)
						jQuery.event.simulate( "change", this, event );
					} );
				}
				return false;
			}

			// Delegated event; lazy-add a change handler on descendant inputs
			jQuery.event.add( this, "beforeactivate._change", function( e ) {
				var elem = e.target;

				if ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, "change" ) ) {
					jQuery.event.add( elem, "change._change", function( event ) {
						if ( this.parentNode && !event.isSimulated && !event.isTrigger ) {
							jQuery.event.simulate( "change", this.parentNode, event );
						}
					} );
					jQuery._data( elem, "change", true );
				}
			} );
		},

		handle: function( event ) {
			var elem = event.target;

			// Swallow native change events from checkbox/radio, we already triggered them above
			if ( this !== elem || event.isSimulated || event.isTrigger ||
				( elem.type !== "radio" && elem.type !== "checkbox" ) ) {

				return event.handleObj.handler.apply( this, arguments );
			}
		},

		teardown: function() {
			jQuery.event.remove( this, "._change" );

			return !rformElems.test( this.nodeName );
		}
	};
}

// Support: Firefox
// Firefox doesn't have focus(in | out) events
// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787
//
// Support: Chrome, Safari
// focus(in | out) events fire after focus & blur events,
// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order
// Related ticket - https://code.google.com/p/chromium/issues/detail?id=449857
if ( !support.focusin ) {
	jQuery.each( { focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
			jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );
		};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = jQuery._data( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				jQuery._data( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = jQuery._data( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					jQuery._removeData( doc, fix );
				} else {
					jQuery._data( doc, fix, attaches );
				}
			}
		};
	} );
}

jQuery.fn.extend( {

	on: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn );
	},
	one: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {

			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ?
					handleObj.origType + "." + handleObj.namespace :
					handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {

			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {

			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each( function() {
			jQuery.event.remove( this, types, fn, selector );
		} );
	},

	trigger: function( type, data ) {
		return this.each( function() {
			jQuery.event.trigger( type, data, this );
		} );
	},
	triggerHandler: function( type, data ) {
		var elem = this[ 0 ];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
} );


var rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g,
	rnoshimcache = new RegExp( "<(?:" + nodeNames + ")[\\s/>]", "i" ),
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,

	// Support: IE 10-11, Edge 10240+
	// In IE/Edge using regex groups here causes severe slowdowns.
	// See https://connect.microsoft.com/IE/feedback/details/1736512/
	rnoInnerhtml = /<script|<style|<link/i,

	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
	safeFragment = createSafeFragment( document ),
	fragmentDiv = safeFragment.appendChild( document.createElement( "div" ) );

// Support: IE<8
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName( "tbody" )[ 0 ] ||
			elem.appendChild( elem.ownerDocument.createElement( "tbody" ) ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = ( jQuery.find.attr( elem, "type" ) !== null ) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );
	if ( match ) {
		elem.type = match[ 1 ];
	} else {
		elem.removeAttribute( "type" );
	}
	return elem;
}

function cloneCopyEvent( src, dest ) {
	if ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {
		return;
	}

	var type, i, l,
		oldData = jQuery._data( src ),
		curData = jQuery._data( dest, oldData ),
		events = oldData.events;

	if ( events ) {
		delete curData.handle;
		curData.events = {};

		for ( type in events ) {
			for ( i = 0, l = events[ type ].length; i < l; i++ ) {
				jQuery.event.add( dest, type, events[ type ][ i ] );
			}
		}
	}

	// make the cloned public data object a copy from the original
	if ( curData.data ) {
		curData.data = jQuery.extend( {}, curData.data );
	}
}

function fixCloneNodeIssues( src, dest ) {
	var nodeName, e, data;

	// We do not need to do anything for non-Elements
	if ( dest.nodeType !== 1 ) {
		return;
	}

	nodeName = dest.nodeName.toLowerCase();

	// IE6-8 copies events bound via attachEvent when using cloneNode.
	if ( !support.noCloneEvent && dest[ jQuery.expando ] ) {
		data = jQuery._data( dest );

		for ( e in data.events ) {
			jQuery.removeEvent( dest, e, data.handle );
		}

		// Event data gets referenced instead of copied if the expando gets copied too
		dest.removeAttribute( jQuery.expando );
	}

	// IE blanks contents when cloning scripts, and tries to evaluate newly-set text
	if ( nodeName === "script" && dest.text !== src.text ) {
		disableScript( dest ).text = src.text;
		restoreScript( dest );

	// IE6-10 improperly clones children of object elements using classid.
	// IE10 throws NoModificationAllowedError if parent is null, #12132.
	} else if ( nodeName === "object" ) {
		if ( dest.parentNode ) {
			dest.outerHTML = src.outerHTML;
		}

		// This path appears unavoidable for IE9. When cloning an object
		// element in IE9, the outerHTML strategy above is not sufficient.
		// If the src has innerHTML and the destination does not,
		// copy the src.innerHTML into the dest.innerHTML. #10324
		if ( support.html5Clone && ( src.innerHTML && !jQuery.trim( dest.innerHTML ) ) ) {
			dest.innerHTML = src.innerHTML;
		}

	} else if ( nodeName === "input" && rcheckableType.test( src.type ) ) {

		// IE6-8 fails to persist the checked state of a cloned checkbox
		// or radio button. Worse, IE6-7 fail to give the cloned element
		// a checked appearance if the defaultChecked value isn't also set

		dest.defaultChecked = dest.checked = src.checked;

		// IE6-7 get confused and end up setting the value of a cloned
		// checkbox/radio button to an empty string instead of "on"
		if ( dest.value !== src.value ) {
			dest.value = src.value;
		}

	// IE6-8 fails to return the selected option to the default selected
	// state when cloning options
	} else if ( nodeName === "option" ) {
		dest.defaultSelected = dest.selected = src.defaultSelected;

	// IE6-8 fails to set the defaultValue to the correct value when
	// cloning other types of input fields
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

function domManip( collection, args, callback, ignored ) {

	// Flatten any nested arrays
	args = concat.apply( [], args );

	var first, node, hasScripts,
		scripts, doc, fragment,
		i = 0,
		l = collection.length,
		iNoClone = l - 1,
		value = args[ 0 ],
		isFunction = jQuery.isFunction( value );

	// We can't cloneNode fragments that contain checked, in WebKit
	if ( isFunction ||
			( l > 1 && typeof value === "string" &&
				!support.checkClone && rchecked.test( value ) ) ) {
		return collection.each( function( index ) {
			var self = collection.eq( index );
			if ( isFunction ) {
				args[ 0 ] = value.call( this, index, self.html() );
			}
			domManip( self, args, callback, ignored );
		} );
	}

	if ( l ) {
		fragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );
		first = fragment.firstChild;

		if ( fragment.childNodes.length === 1 ) {
			fragment = first;
		}

		// Require either new content or an interest in ignored elements to invoke the callback
		if ( first || ignored ) {
			scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
			hasScripts = scripts.length;

			// Use the original fragment for the last item
			// instead of the first because it can end up
			// being emptied incorrectly in certain situations (#8070).
			for ( ; i < l; i++ ) {
				node = fragment;

				if ( i !== iNoClone ) {
					node = jQuery.clone( node, true, true );

					// Keep references to cloned scripts for later restoration
					if ( hasScripts ) {

						// Support: Android<4.1, PhantomJS<2
						// push.apply(_, arraylike) throws on ancient WebKit
						jQuery.merge( scripts, getAll( node, "script" ) );
					}
				}

				callback.call( collection[ i ], node, i );
			}

			if ( hasScripts ) {
				doc = scripts[ scripts.length - 1 ].ownerDocument;

				// Reenable scripts
				jQuery.map( scripts, restoreScript );

				// Evaluate executable scripts on first document insertion
				for ( i = 0; i < hasScripts; i++ ) {
					node = scripts[ i ];
					if ( rscriptType.test( node.type || "" ) &&
						!jQuery._data( node, "globalEval" ) &&
						jQuery.contains( doc, node ) ) {

						if ( node.src ) {

							// Optional AJAX dependency, but won't run scripts if not present
							if ( jQuery._evalUrl ) {
								jQuery._evalUrl( node.src );
							}
						} else {
							jQuery.globalEval(
								( node.text || node.textContent || node.innerHTML || "" )
									.replace( rcleanScript, "" )
							);
						}
					}
				}
			}

			// Fix #11809: Avoid leaking memory
			fragment = first = null;
		}
	}

	return collection;
}

function remove( elem, selector, keepData ) {
	var node,
		elems = selector ? jQuery.filter( selector, elem ) : elem,
		i = 0;

	for ( ; ( node = elems[ i ] ) != null; i++ ) {

		if ( !keepData && node.nodeType === 1 ) {
			jQuery.cleanData( getAll( node ) );
		}

		if ( node.parentNode ) {
			if ( keepData && jQuery.contains( node.ownerDocument, node ) ) {
				setGlobalEval( getAll( node, "script" ) );
			}
			node.parentNode.removeChild( node );
		}
	}

	return elem;
}

jQuery.extend( {
	htmlPrefilter: function( html ) {
		return html.replace( rxhtmlTag, "<$1></$2>" );
	},

	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var destElements, node, clone, i, srcElements,
			inPage = jQuery.contains( elem.ownerDocument, elem );

		if ( support.html5Clone || jQuery.isXMLDoc( elem ) ||
			!rnoshimcache.test( "<" + elem.nodeName + ">" ) ) {

			clone = elem.cloneNode( true );

		// IE<=8 does not properly clone detached, unknown element nodes
		} else {
			fragmentDiv.innerHTML = elem.outerHTML;
			fragmentDiv.removeChild( clone = fragmentDiv.firstChild );
		}

		if ( ( !support.noCloneEvent || !support.noCloneChecked ) &&
				( elem.nodeType === 1 || elem.nodeType === 11 ) && !jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			// Fix all IE cloning issues
			for ( i = 0; ( node = srcElements[ i ] ) != null; ++i ) {

				// Ensure that the destination node is not null; Fixes #9587
				if ( destElements[ i ] ) {
					fixCloneNodeIssues( node, destElements[ i ] );
				}
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0; ( node = srcElements[ i ] ) != null; i++ ) {
					cloneCopyEvent( node, destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		destElements = srcElements = node = null;

		// Return the cloned set
		return clone;
	},

	cleanData: function( elems, /* internal */ forceAcceptData ) {
		var elem, type, id, data,
			i = 0,
			internalKey = jQuery.expando,
			cache = jQuery.cache,
			attributes = support.attributes,
			special = jQuery.event.special;

		for ( ; ( elem = elems[ i ] ) != null; i++ ) {
			if ( forceAcceptData || acceptData( elem ) ) {

				id = elem[ internalKey ];
				data = id && cache[ id ];

				if ( data ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Remove cache only if it was not already removed by jQuery.event.remove
					if ( cache[ id ] ) {

						delete cache[ id ];

						// Support: IE<9
						// IE does not allow us to delete expando properties from nodes
						// IE creates expando attributes along with the property
						// IE does not have a removeAttribute function on Document nodes
						if ( !attributes && typeof elem.removeAttribute !== "undefined" ) {
							elem.removeAttribute( internalKey );

						// Webkit & Blink performance suffers when deleting properties
						// from DOM nodes, so set to undefined instead
						// https://code.google.com/p/chromium/issues/detail?id=378607
						} else {
							elem[ internalKey ] = undefined;
						}

						deletedIds.push( id );
					}
				}
			}
		}
	}
} );

jQuery.fn.extend( {

	// Keep domManip exposed until 3.0 (gh-2225)
	domManip: domManip,

	detach: function( selector ) {
		return remove( this, selector, true );
	},

	remove: function( selector ) {
		return remove( this, selector );
	},

	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().append(
					( this[ 0 ] && this[ 0 ].ownerDocument || document ).createTextNode( value )
				);
		}, null, value, arguments.length );
	},

	append: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		} );
	},

	prepend: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		} );
	},

	before: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		} );
	},

	after: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		} );
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; ( elem = this[ i ] ) != null; i++ ) {

			// Remove element nodes and prevent memory leaks
			if ( elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem, false ) );
			}

			// Remove any remaining nodes
			while ( elem.firstChild ) {
				elem.removeChild( elem.firstChild );
			}

			// If this is a select, ensure that it displays empty (#12336)
			// Support: IE<9
			if ( elem.options && jQuery.nodeName( elem, "select" ) ) {
				elem.options.length = 0;
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		} );
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined ) {
				return elem.nodeType === 1 ?
					elem.innerHTML.replace( rinlinejQuery, "" ) :
					undefined;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				( support.htmlSerialize || !rnoshimcache.test( value )  ) &&
				( support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = jQuery.htmlPrefilter( value );

				try {
					for ( ; i < l; i++ ) {

						// Remove element nodes and prevent memory leaks
						elem = this[ i ] || {};
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch ( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var ignored = [];

		// Make the changes, replacing each non-ignored context element with the new content
		return domManip( this, arguments, function( elem ) {
			var parent = this.parentNode;

			if ( jQuery.inArray( this, ignored ) < 0 ) {
				jQuery.cleanData( getAll( this ) );
				if ( parent ) {
					parent.replaceChild( elem, this );
				}
			}

		// Force callback invocation
		}, ignored );
	}
} );

jQuery.each( {
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			i = 0,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
} );


var iframe,
	elemdisplay = {

		// Support: Firefox
		// We have to pre-define these values for FF (#10227)
		HTML: "block",
		BODY: "block"
	};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */

// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
	var elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

		display = jQuery.css( elem[ 0 ], "display" );

	// We don't have any data stored on the element,
	// so use "detach" method as fast way to get rid of the element
	elem.detach();

	return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {

			// Use the already-created iframe if possible
			iframe = ( iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" ) )
				.appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = ( iframe[ 0 ].contentWindow || iframe[ 0 ].contentDocument ).document;

			// Support: IE
			doc.write();
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}
var rmargin = ( /^margin/ );

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var documentElement = document.documentElement;



( function() {
	var pixelPositionVal, pixelMarginRightVal, boxSizingReliableVal,
		reliableHiddenOffsetsVal, reliableMarginRightVal, reliableMarginLeftVal,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	// Finish early in limited (non-browser) environments
	if ( !div.style ) {
		return;
	}

	div.style.cssText = "float:left;opacity:.5";

	// Support: IE<9
	// Make sure that element opacity exists (as opposed to filter)
	support.opacity = div.style.opacity === "0.5";

	// Verify style float existence
	// (IE uses styleFloat instead of cssFloat)
	support.cssFloat = !!div.style.cssFloat;

	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	container = document.createElement( "div" );
	container.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;" +
		"padding:0;margin-top:1px;position:absolute";
	div.innerHTML = "";
	container.appendChild( div );

	// Support: Firefox<29, Android 2.3
	// Vendor-prefix box-sizing
	support.boxSizing = div.style.boxSizing === "" || div.style.MozBoxSizing === "" ||
		div.style.WebkitBoxSizing === "";

	jQuery.extend( support, {
		reliableHiddenOffsets: function() {
			if ( pixelPositionVal == null ) {
				computeStyleTests();
			}
			return reliableHiddenOffsetsVal;
		},

		boxSizingReliable: function() {

			// We're checking for pixelPositionVal here instead of boxSizingReliableVal
			// since that compresses better and they're computed together anyway.
			if ( pixelPositionVal == null ) {
				computeStyleTests();
			}
			return boxSizingReliableVal;
		},

		pixelMarginRight: function() {

			// Support: Android 4.0-4.3
			if ( pixelPositionVal == null ) {
				computeStyleTests();
			}
			return pixelMarginRightVal;
		},

		pixelPosition: function() {
			if ( pixelPositionVal == null ) {
				computeStyleTests();
			}
			return pixelPositionVal;
		},

		reliableMarginRight: function() {

			// Support: Android 2.3
			if ( pixelPositionVal == null ) {
				computeStyleTests();
			}
			return reliableMarginRightVal;
		},

		reliableMarginLeft: function() {

			// Support: IE <=8 only, Android 4.0 - 4.3 only, Firefox <=3 - 37
			if ( pixelPositionVal == null ) {
				computeStyleTests();
			}
			return reliableMarginLeftVal;
		}
	} );

	function computeStyleTests() {
		var contents, divStyle,
			documentElement = document.documentElement;

		// Setup
		documentElement.appendChild( container );

		div.style.cssText =

			// Support: Android 2.3
			// Vendor-prefix box-sizing
			"-webkit-box-sizing:border-box;box-sizing:border-box;" +
			"position:relative;display:block;" +
			"margin:auto;border:1px;padding:1px;" +
			"top:1%;width:50%";

		// Support: IE<9
		// Assume reasonable values in the absence of getComputedStyle
		pixelPositionVal = boxSizingReliableVal = reliableMarginLeftVal = false;
		pixelMarginRightVal = reliableMarginRightVal = true;

		// Check for getComputedStyle so that this code is not run in IE<9.
		if ( window.getComputedStyle ) {
			divStyle = window.getComputedStyle( div );
			pixelPositionVal = ( divStyle || {} ).top !== "1%";
			reliableMarginLeftVal = ( divStyle || {} ).marginLeft === "2px";
			boxSizingReliableVal = ( divStyle || { width: "4px" } ).width === "4px";

			// Support: Android 4.0 - 4.3 only
			// Some styles come back with percentage values, even though they shouldn't
			div.style.marginRight = "50%";
			pixelMarginRightVal = ( divStyle || { marginRight: "4px" } ).marginRight === "4px";

			// Support: Android 2.3 only
			// Div with explicit width and no margin-right incorrectly
			// gets computed margin-right based on width of container (#3333)
			// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
			contents = div.appendChild( document.createElement( "div" ) );

			// Reset CSS: box-sizing; display; margin; border; padding
			contents.style.cssText = div.style.cssText =

				// Support: Android 2.3
				// Vendor-prefix box-sizing
				"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
				"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
			contents.style.marginRight = contents.style.width = "0";
			div.style.width = "1px";

			reliableMarginRightVal =
				!parseFloat( ( window.getComputedStyle( contents ) || {} ).marginRight );

			div.removeChild( contents );
		}

		// Support: IE6-8
		// First check that getClientRects works as expected
		// Check if table cells still have offsetWidth/Height when they are set
		// to display:none and there are still other visible table cells in a
		// table row; if so, offsetWidth/Height are not reliable for use when
		// determining if an element has been hidden directly using
		// display:none (it is still safe to use offsets if a parent element is
		// hidden; don safety goggles and see bug #4512 for more information).
		div.style.display = "none";
		reliableHiddenOffsetsVal = div.getClientRects().length === 0;
		if ( reliableHiddenOffsetsVal ) {
			div.style.display = "";
			div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
			div.childNodes[ 0 ].style.borderCollapse = "separate";
			contents = div.getElementsByTagName( "td" );
			contents[ 0 ].style.cssText = "margin:0;border:0;padding:0;display:none";
			reliableHiddenOffsetsVal = contents[ 0 ].offsetHeight === 0;
			if ( reliableHiddenOffsetsVal ) {
				contents[ 0 ].style.display = "";
				contents[ 1 ].style.display = "none";
				reliableHiddenOffsetsVal = contents[ 0 ].offsetHeight === 0;
			}
		}

		// Teardown
		documentElement.removeChild( container );
	}

} )();


var getStyles, curCSS,
	rposition = /^(top|right|bottom|left)$/;

if ( window.getComputedStyle ) {
	getStyles = function( elem ) {

		// Support: IE<=11+, Firefox<=30+ (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		var view = elem.ownerDocument.defaultView;

		if ( !view || !view.opener ) {
			view = window;
		}

		return view.getComputedStyle( elem );
	};

	curCSS = function( elem, name, computed ) {
		var width, minWidth, maxWidth, ret,
			style = elem.style;

		computed = computed || getStyles( elem );

		// getPropertyValue is only needed for .css('filter') in IE9, see #12537
		ret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined;

		// Support: Opera 12.1x only
		// Fall back to style even without computed
		// computed is undefined for elems on document fragments
		if ( ( ret === "" || ret === undefined ) && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		if ( computed ) {

			// A tribute to the "awesome hack by Dean Edwards"
			// Chrome < 17 and Safari 5.0 uses "computed value"
			// instead of "used value" for margin-right
			// Safari 5.1.7 (at least) returns percentage for a larger set of values,
			// but width seems to be reliably pixels
			// this is against the CSSOM draft spec:
			// http://dev.w3.org/csswg/cssom/#resolved-values
			if ( !support.pixelMarginRight() && rnumnonpx.test( ret ) && rmargin.test( name ) ) {

				// Remember the original values
				width = style.width;
				minWidth = style.minWidth;
				maxWidth = style.maxWidth;

				// Put in the new values to get a computed value out
				style.minWidth = style.maxWidth = style.width = ret;
				ret = computed.width;

				// Revert the changed values
				style.width = width;
				style.minWidth = minWidth;
				style.maxWidth = maxWidth;
			}
		}

		// Support: IE
		// IE returns zIndex value as an integer.
		return ret === undefined ?
			ret :
			ret + "";
	};
} else if ( documentElement.currentStyle ) {
	getStyles = function( elem ) {
		return elem.currentStyle;
	};

	curCSS = function( elem, name, computed ) {
		var left, rs, rsLeft, ret,
			style = elem.style;

		computed = computed || getStyles( elem );
		ret = computed ? computed[ name ] : undefined;

		// Avoid setting ret to empty string here
		// so we don't default to auto
		if ( ret == null && style && style[ name ] ) {
			ret = style[ name ];
		}

		// From the awesome hack by Dean Edwards
		// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291

		// If we're not dealing with a regular pixel number
		// but a number that has a weird ending, we need to convert it to pixels
		// but not position css attributes, as those are
		// proportional to the parent element instead
		// and we can't measure the parent instead because it
		// might trigger a "stacking dolls" problem
		if ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {

			// Remember the original values
			left = style.left;
			rs = elem.runtimeStyle;
			rsLeft = rs && rs.left;

			// Put in the new values to get a computed value out
			if ( rsLeft ) {
				rs.left = elem.currentStyle.left;
			}
			style.left = name === "fontSize" ? "1em" : ret;
			ret = style.pixelLeft + "px";

			// Revert the changed values
			style.left = left;
			if ( rsLeft ) {
				rs.left = rsLeft;
			}
		}

		// Support: IE
		// IE returns zIndex value as an integer.
		return ret === undefined ?
			ret :
			ret + "" || "auto";
	};
}




function addGetHookIf( conditionFn, hookFn ) {

	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {

				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return ( this.get = hookFn ).apply( this, arguments );
		}
	};
}


var

		ralpha = /alpha\([^)]*\)/i,
	ropacity = /opacity\s*=\s*([^)]*)/i,

	// swappable if display is none or starts with table except
	// "table", "table-cell", or "table-caption"
	// see here for display values:
	// https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ],
	emptyStyle = document.createElement( "div" ).style;


// return a css property mapped to a potentially vendor prefixed property
function vendorPropName( name ) {

	// shortcut for names that are not vendor prefixed
	if ( name in emptyStyle ) {
		return name;
	}

	// check for vendor prefixed names
	var capName = name.charAt( 0 ).toUpperCase() + name.slice( 1 ),
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in emptyStyle ) {
			return name;
		}
	}
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = jQuery._data( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {

			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] =
					jQuery._data( elem, "olddisplay", defaultDisplay( elem.nodeName ) );
			}
		} else {
			hidden = isHidden( elem );

			if ( display && display !== "none" || !hidden ) {
				jQuery._data(
					elem,
					"olddisplay",
					hidden ? display : jQuery.css( elem, "display" )
				);
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?

		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?

		// If we already have the right measurement, avoid augmentation
		4 :

		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {

		// both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {

			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// at this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {

			// at this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// at this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = support.boxSizing &&
			jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {

		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test( val ) ) {
			return val;
		}

		// we need the check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox &&
			( support.boxSizingReliable() || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

jQuery.extend( {

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"animationIterationCount": true,
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {

		// normalize float css property
		"float": support.cssFloat ? "cssFloat" : "styleFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] ||
			( jQuery.cssProps[ origName ] = vendorPropName( origName ) || origName );

		// gets hook for the prefixed version
		// followed by the unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {
				value = adjustCSS( elem, name, ret );

				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set. See: #7116
			if ( value == null || value !== value ) {
				return;
			}

			// If a number was passed in, add the unit (except for certain CSS properties)
			if ( type === "number" ) {
				value += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? "" : "px" );
			}

			// Fixes #8908, it can be done more correctly by specifing setters in cssHooks,
			// but it would mean to define eight
			// (for every problematic property) identical functions
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !( "set" in hooks ) ||
				( value = hooks.set( elem, value, extra ) ) !== undefined ) {

				// Support: IE
				// Swallow errors from 'invalid' CSS values (#5509)
				try {
					style[ name ] = value;
				} catch ( e ) {}
			}

		} else {

			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks &&
				( ret = hooks.get( elem, false, extra ) ) !== undefined ) {

				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var num, val, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] ||
			( jQuery.cssProps[ origName ] = vendorPropName( origName ) || origName );

		// gets hook for the prefixed version
		// followed by the unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		//convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Return, converting to number if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || isFinite( num ) ? num || 0 : val;
		}
		return val;
	}
} );

jQuery.each( [ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// certain elements can have dimension info if we invisibly show them
				// however, it must have a current display style that would benefit from this
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) &&
					elem.offsetWidth === 0 ?
						swap( elem, cssShow, function() {
							return getWidthOrHeight( elem, name, extra );
						} ) :
						getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					support.boxSizing &&
						jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
} );

if ( !support.opacity ) {
	jQuery.cssHooks.opacity = {
		get: function( elem, computed ) {

			// IE uses filters for opacity
			return ropacity.test( ( computed && elem.currentStyle ?
				elem.currentStyle.filter :
				elem.style.filter ) || "" ) ?
					( 0.01 * parseFloat( RegExp.$1 ) ) + "" :
					computed ? "1" : "";
		},

		set: function( elem, value ) {
			var style = elem.style,
				currentStyle = elem.currentStyle,
				opacity = jQuery.isNumeric( value ) ? "alpha(opacity=" + value * 100 + ")" : "",
				filter = currentStyle && currentStyle.filter || style.filter || "";

			// IE has trouble with opacity if it does not have layout
			// Force it by setting the zoom level
			style.zoom = 1;

			// if setting opacity to 1, and no other filters exist -
			// attempt to remove filter attribute #6652
			// if value === "", then remove inline opacity #12685
			if ( ( value >= 1 || value === "" ) &&
					jQuery.trim( filter.replace( ralpha, "" ) ) === "" &&
					style.removeAttribute ) {

				// Setting style.filter to null, "" & " " still leave "filter:" in the cssText
				// if "filter:" is present at all, clearType is disabled, we want to avoid this
				// style.removeAttribute is IE Only, but so apparently is this code path...
				style.removeAttribute( "filter" );

				// if there is no filter style applied in a css rule
				// or unset inline opacity, we are done
				if ( value === "" || currentStyle && !currentStyle.filter ) {
					return;
				}
			}

			// otherwise, set new filter values
			style.filter = ralpha.test( filter ) ?
				filter.replace( ralpha, opacity ) :
				filter + " " + opacity;
		}
	};
}

jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
	function( elem, computed ) {
		if ( computed ) {
			return swap( elem, { "display": "inline-block" },
				curCSS, [ elem, "marginRight" ] );
		}
	}
);

jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,
	function( elem, computed ) {
		if ( computed ) {
			return (
				parseFloat( curCSS( elem, "marginLeft" ) ) ||

				// Support: IE<=11+
				// Running getBoundingClientRect on a disconnected node in IE throws an error
				// Support: IE8 only
				// getClientRects() errors on disconnected elems
				( jQuery.contains( elem.ownerDocument, elem ) ?
					elem.getBoundingClientRect().left -
						swap( elem, { marginLeft: 0 }, function() {
							return elem.getBoundingClientRect().left;
						} ) :
					0
				)
			) + "px";
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each( {
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// assumes a single number if not a string
				parts = typeof value === "string" ? value.split( " " ) : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
} );

jQuery.fn.extend( {
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each( function() {
			if ( isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		} );
	}
} );


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || jQuery.easing._default;
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			// Use a property on the element directly when it is not a DOM element,
			// or when there is no matching style property that exists.
			if ( tween.elem.nodeType !== 1 ||
				tween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {
				return tween.elem[ tween.prop ];
			}

			// passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails
			// so, simple values such as "10px" are parsed to Float.
			// complex values such as "rotate(1rad)" are returned as is.
			result = jQuery.css( tween.elem, tween.prop, "" );

			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {

			// use step hook for back compat - use cssHook if its there - use .style if its
			// available and use plain properties where available
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.nodeType === 1 &&
				( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null ||
					jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE <=9
// Panic based approach to setting things on disconnected nodes

Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	},
	_default: "swing"
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rrun = /queueHooks$/;

// Animations created synchronously will run synchronously
function createFxNow() {
	window.setTimeout( function() {
		fxNow = undefined;
	} );
	return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		attrs = { height: type },
		i = 0;

	// if we include width, step value is 1 to do all cssExpand values,
	// if we don't include width, step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {

			// we're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = jQuery._data( elem, "fxshow" );

	// handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always( function() {

			// doing this makes sure that the complete handler will be called
			// before this completes
			anim.always( function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			} );
		} );
	}

	// height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {

		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE does not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		display = jQuery.css( elem, "display" );

		// Test default display if display is currently "none"
		checkDisplay = display === "none" ?
			jQuery._data( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

		if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {

			// inline-level elements accept inline-block;
			// block-level elements need to be inline with layout
			if ( !support.inlineBlockNeedsLayout || defaultDisplay( elem.nodeName ) === "inline" ) {
				style.display = "inline-block";
			} else {
				style.zoom = 1;
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		if ( !support.shrinkWrapBlocks() ) {
			anim.always( function() {
				style.overflow = opts.overflow[ 0 ];
				style.overflowX = opts.overflow[ 1 ];
				style.overflowY = opts.overflow[ 2 ];
			} );
		}
	}

	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// If there is dataShow left over from a stopped hide or show
				// and we are going to proceed with show, we should pretend to be hidden
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

		// Any non-fx value stops us from restoring the original display value
		} else {
			display = undefined;
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = jQuery._data( elem, "fxshow", {} );
		}

		// store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done( function() {
				jQuery( elem ).hide();
			} );
		}
		anim.done( function() {
			var prop;
			jQuery._removeData( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		} );
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}

	// If this is a noop like .hide().hide(), restore an overwritten display value
	} else if ( ( display === "none" ? defaultDisplay( elem.nodeName ) : display ) === "inline" ) {
		style.display = display;
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// not quite $.extend, this wont overwrite keys already present.
			// also - reusing 'index' from above because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = Animation.prefilters.length,
		deferred = jQuery.Deferred().always( function() {

			// don't match elem in the :animated selector
			delete tick.elem;
		} ),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),

				// Support: Android 2.3
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ] );

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise( {
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, {
				specialEasing: {},
				easing: jQuery.easing._default
			}, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,

					// if we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// resolve when we played the last frame
				// otherwise, reject
				if ( gotoEnd ) {
					deferred.notifyWith( elem, [ animation, 1, 0 ] );
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		} ),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			if ( jQuery.isFunction( result.stop ) ) {
				jQuery._queueHooks( animation.elem, animation.opts.queue ).stop =
					jQuery.proxy( result.stop, result );
			}
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		} )
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {

	tweeners: {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value );
			adjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );
			return tween;
		} ]
	},

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.match( rnotwhite );
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			Animation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];
			Animation.tweeners[ prop ].unshift( callback );
		}
	},

	prefilters: [ defaultPrefilter ],

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			Animation.prefilters.unshift( callback );
		} else {
			Animation.prefilters.push( callback );
		}
	}
} );

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ?
			jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend( {
	fadeTo: function( speed, to, easing, callback ) {

		// show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// animate to the value specified
			.end().animate( { opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {

				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || jQuery._data( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each( function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = jQuery._data( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this &&
					( type == null || timers[ index ].queue === type ) ) {

					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// start the next in the queue if the last step wasn't forced
			// timers currently will call their complete callbacks, which will dequeue
			// but only if they were gotoEnd
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		} );
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each( function() {
			var index,
				data = jQuery._data( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// enable finishing flag on private data
			data.finish = true;

			// empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// turn off finishing flag
			delete data.finish;
		} );
	}
} );

jQuery.each( [ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
} );

// Generate shortcuts for custom animations
jQuery.each( {
	slideDown: genFx( "show" ),
	slideUp: genFx( "hide" ),
	slideToggle: genFx( "toggle" ),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
} );

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		timers = jQuery.timers,
		i = 0;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];

		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	if ( timer() ) {
		jQuery.fx.start();
	} else {
		jQuery.timers.pop();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = window.setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	window.clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,

	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = window.setTimeout( next, time );
		hooks.stop = function() {
			window.clearTimeout( timeout );
		};
	} );
};


( function() {
	var a,
		input = document.createElement( "input" ),
		div = document.createElement( "div" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	// Setup
	div = document.createElement( "div" );
	div.setAttribute( "className", "t" );
	div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
	a = div.getElementsByTagName( "a" )[ 0 ];

	// Support: Windows Web Apps (WWA)
	// `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "checkbox" );
	div.appendChild( input );

	a = div.getElementsByTagName( "a" )[ 0 ];

	// First batch of tests.
	a.style.cssText = "top:1px";

	// Test setAttribute on camelCase class.
	// If it works, we need attrFixes when doing get/setAttribute (ie6/7)
	support.getSetAttribute = div.className !== "t";

	// Get the style information from getAttribute
	// (IE uses .cssText instead)
	support.style = /top/.test( a.getAttribute( "style" ) );

	// Make sure that URLs aren't manipulated
	// (IE normalizes it by default)
	support.hrefNormalized = a.getAttribute( "href" ) === "/a";

	// Check the default checkbox/radio value ("" on WebKit; "on" elsewhere)
	support.checkOn = !!input.value;

	// Make sure that a selected-by-default option has a working selected property.
	// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)
	support.optSelected = opt.selected;

	// Tests for enctype support on a form (#6743)
	support.enctype = !!document.createElement( "form" ).enctype;

	// Make sure that the options inside disabled selects aren't marked as disabled
	// (WebKit marks them as disabled)
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE8 only
	// Check if we can trust getAttribute("value")
	input = document.createElement( "input" );
	input.setAttribute( "value", "" );
	support.input = input.getAttribute( "value" ) === "";

	// Check if an input maintains its value after becoming a radio
	input.value = "t";
	input.setAttribute( "type", "radio" );
	support.radioValue = input.value === "t";
} )();


var rreturn = /\r/g,
	rspaces = /[\x20\t\r\n\f]+/g;

jQuery.fn.extend( {
	val: function( value ) {
		var hooks, ret, isFunction,
			elem = this[ 0 ];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] ||
					jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if (
					hooks &&
					"get" in hooks &&
					( ret = hooks.get( elem, "value" ) ) !== undefined
				) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?

					// handle most common string cases
					ret.replace( rreturn, "" ) :

					// handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each( function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";
			} else if ( typeof val === "number" ) {
				val += "";
			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				} );
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !( "set" in hooks ) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		} );
	}
} );

jQuery.extend( {
	valHooks: {
		option: {
			get: function( elem ) {
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :

					// Support: IE10-11+
					// option.text throws exceptions (#14686, #14858)
					// Strip and collapse whitespace
					// https://html.spec.whatwg.org/#strip-and-collapse-whitespace
					jQuery.trim( jQuery.text( elem ) ).replace( rspaces, " " );
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// oldIE doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&

							// Don't return options that are disabled or in a disabled optgroup
							( support.optDisabled ?
								!option.disabled :
								option.getAttribute( "disabled" ) === null ) &&
							( !option.parentNode.disabled ||
								!jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];

					if ( jQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1 ) {

						// Support: IE6
						// When new option element is added to select box we need to
						// force reflow of newly added node in order to workaround delay
						// of initialization properties
						try {
							option.selected = optionSet = true;

						} catch ( _ ) {

							// Will be executed only in IE6
							option.scrollHeight;
						}

					} else {
						option.selected = false;
					}
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}

				return options;
			}
		}
	}
} );

// Radios and checkboxes getter/setter
jQuery.each( [ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute( "value" ) === null ? "on" : elem.value;
		};
	}
} );




var nodeHook, boolHook,
	attrHandle = jQuery.expr.attrHandle,
	ruseDefault = /^(?:checked|selected)$/i,
	getSetAttribute = support.getSetAttribute,
	getSetInput = support.input;

jQuery.fn.extend( {
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each( function() {
			jQuery.removeAttr( this, name );
		} );
	}
} );

jQuery.extend( {
	attr: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set attributes on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === "undefined" ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {
			if ( value === null ) {
				jQuery.removeAttr( elem, name );
				return;
			}

			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			elem.setAttribute( name, value + "" );
			return value;
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		ret = jQuery.find.attr( elem, name );

		// Non-existent attributes return null, we normalize to undefined
		return ret == null ? undefined : ret;
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					jQuery.nodeName( elem, "input" ) ) {

					// Setting the type on a radio button after the value resets the value in IE8-9
					// Reset value to default in case type is set after value during creation
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( ( name = attrNames[ i++ ] ) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {

					// Set corresponding property to false
					if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
						elem[ propName ] = false;

					// Support: IE<9
					// Also clear defaultChecked/defaultSelected (if appropriate)
					} else {
						elem[ jQuery.camelCase( "default-" + name ) ] =
							elem[ propName ] = false;
					}

				// See #9699 for explanation of this approach (setting first, then removal)
				} else {
					jQuery.attr( elem, name, "" );
				}

				elem.removeAttribute( getSetAttribute ? name : propName );
			}
		}
	}
} );

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {

			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {

			// IE<8 needs the *property* name
			elem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );

		} else {

			// Support: IE<9
			// Use defaultChecked and defaultSelected for oldIE
			elem[ jQuery.camelCase( "default-" + name ) ] = elem[ name ] = true;
		}
		return name;
	}
};

jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
		attrHandle[ name ] = function( elem, name, isXML ) {
			var ret, handle;
			if ( !isXML ) {

				// Avoid an infinite loop by temporarily removing this function from the getter
				handle = attrHandle[ name ];
				attrHandle[ name ] = ret;
				ret = getter( elem, name, isXML ) != null ?
					name.toLowerCase() :
					null;
				attrHandle[ name ] = handle;
			}
			return ret;
		};
	} else {
		attrHandle[ name ] = function( elem, name, isXML ) {
			if ( !isXML ) {
				return elem[ jQuery.camelCase( "default-" + name ) ] ?
					name.toLowerCase() :
					null;
			}
		};
	}
} );

// fix oldIE attroperties
if ( !getSetInput || !getSetAttribute ) {
	jQuery.attrHooks.value = {
		set: function( elem, value, name ) {
			if ( jQuery.nodeName( elem, "input" ) ) {

				// Does not return so that setAttribute is also used
				elem.defaultValue = value;
			} else {

				// Use nodeHook if defined (#1954); otherwise setAttribute is fine
				return nodeHook && nodeHook.set( elem, value, name );
			}
		}
	};
}

// IE6/7 do not support getting/setting some attributes with get/setAttribute
if ( !getSetAttribute ) {

	// Use this for any attribute in IE6/7
	// This fixes almost every IE6/7 issue
	nodeHook = {
		set: function( elem, value, name ) {

			// Set the existing or create a new attribute node
			var ret = elem.getAttributeNode( name );
			if ( !ret ) {
				elem.setAttributeNode(
					( ret = elem.ownerDocument.createAttribute( name ) )
				);
			}

			ret.value = value += "";

			// Break association with cloned elements by also using setAttribute (#9646)
			if ( name === "value" || value === elem.getAttribute( name ) ) {
				return value;
			}
		}
	};

	// Some attributes are constructed with empty-string values when not defined
	attrHandle.id = attrHandle.name = attrHandle.coords =
		function( elem, name, isXML ) {
			var ret;
			if ( !isXML ) {
				return ( ret = elem.getAttributeNode( name ) ) && ret.value !== "" ?
					ret.value :
					null;
			}
		};

	// Fixing value retrieval on a button requires this module
	jQuery.valHooks.button = {
		get: function( elem, name ) {
			var ret = elem.getAttributeNode( name );
			if ( ret && ret.specified ) {
				return ret.value;
			}
		},
		set: nodeHook.set
	};

	// Set contenteditable to false on removals(#10429)
	// Setting to empty string throws an error as an invalid value
	jQuery.attrHooks.contenteditable = {
		set: function( elem, value, name ) {
			nodeHook.set( elem, value === "" ? false : value, name );
		}
	};

	// Set width and height to auto instead of 0 on empty string( Bug #8150 )
	// This is for removals
	jQuery.each( [ "width", "height" ], function( i, name ) {
		jQuery.attrHooks[ name ] = {
			set: function( elem, value ) {
				if ( value === "" ) {
					elem.setAttribute( name, "auto" );
					return value;
				}
			}
		};
	} );
}

if ( !support.style ) {
	jQuery.attrHooks.style = {
		get: function( elem ) {

			// Return undefined in the case of empty string
			// Note: IE uppercases css property names, but if we were to .toLowerCase()
			// .cssText, that would destroy case sensitivity in URL's, like in "background"
			return elem.style.cssText || undefined;
		},
		set: function( elem, value ) {
			return ( elem.style.cssText = value + "" );
		}
	};
}




var rfocusable = /^(?:input|select|textarea|button|object)$/i,
	rclickable = /^(?:a|area)$/i;

jQuery.fn.extend( {
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		name = jQuery.propFix[ name ] || name;
		return this.each( function() {

			// try/catch handles cases where IE balks (such as removing a property on window)
			try {
				this[ name ] = undefined;
				delete this[ name ];
			} catch ( e ) {}
		} );
	}
} );

jQuery.extend( {
	prop: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {

			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			return ( elem[ name ] = value );
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		return elem[ name ];
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {

				// elem.tabIndex doesn't always return the
				// correct value when it hasn't been explicitly set
				// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				// Use proper attribute retrieval(#12072)
				var tabindex = jQuery.find.attr( elem, "tabindex" );

				return tabindex ?
					parseInt( tabindex, 10 ) :
					rfocusable.test( elem.nodeName ) ||
						rclickable.test( elem.nodeName ) && elem.href ?
							0 :
							-1;
			}
		}
	},

	propFix: {
		"for": "htmlFor",
		"class": "className"
	}
} );

// Some attributes require a special call on IE
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !support.hrefNormalized ) {

	// href/src property should get the full normalized URL (#10299/#12915)
	jQuery.each( [ "href", "src" ], function( i, name ) {
		jQuery.propHooks[ name ] = {
			get: function( elem ) {
				return elem.getAttribute( name, 4 );
			}
		};
	} );
}

// Support: Safari, IE9+
// Accessing the selectedIndex property
// forces the browser to respect setting selected
// on the option
// The getter ensures a default option is selected
// when in an optgroup
if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;

			if ( parent ) {
				parent.selectedIndex;

				// Make sure that it also works with optgroups, see #5701
				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
			return null;
		},
		set: function( elem ) {
			var parent = elem.parentNode;
			if ( parent ) {
				parent.selectedIndex;

				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
		}
	};
}

jQuery.each( [
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
} );

// IE6/7 call enctype encoding
if ( !support.enctype ) {
	jQuery.propFix.enctype = "encoding";
}




var rclass = /[\t\r\n\f]/g;

function getClass( elem ) {
	return jQuery.attr( elem, "class" ) || "";
}

jQuery.fn.extend( {
	addClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( jQuery.isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).addClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		if ( typeof value === "string" && value ) {
			classes = value.match( rnotwhite ) || [];

			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );
				cur = elem.nodeType === 1 &&
					( " " + curValue + " " ).replace( rclass, " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( curValue !== finalValue ) {
						jQuery.attr( elem, "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( jQuery.isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		if ( !arguments.length ) {
			return this.attr( "class", "" );
		}

		if ( typeof value === "string" && value ) {
			classes = value.match( rnotwhite ) || [];

			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );

				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 &&
					( " " + curValue + " " ).replace( rclass, " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {

						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) > -1 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( curValue !== finalValue ) {
						jQuery.attr( elem, "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value;

		if ( typeof stateVal === "boolean" && type === "string" ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( jQuery.isFunction( value ) ) {
			return this.each( function( i ) {
				jQuery( this ).toggleClass(
					value.call( this, i, getClass( this ), stateVal ),
					stateVal
				);
			} );
		}

		return this.each( function() {
			var className, i, self, classNames;

			if ( type === "string" ) {

				// Toggle individual class names
				i = 0;
				self = jQuery( this );
				classNames = value.match( rnotwhite ) || [];

				while ( ( className = classNames[ i++ ] ) ) {

					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( value === undefined || type === "boolean" ) {
				className = getClass( this );
				if ( className ) {

					// store className if set
					jQuery._data( this, "__className__", className );
				}

				// If the element has a class name or if we're passed "false",
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				jQuery.attr( this, "class",
					className || value === false ?
					"" :
					jQuery._data( this, "__className__" ) || ""
				);
			}
		} );
	},

	hasClass: function( selector ) {
		var className, elem,
			i = 0;

		className = " " + selector + " ";
		while ( ( elem = this[ i++ ] ) ) {
			if ( elem.nodeType === 1 &&
				( " " + getClass( elem ) + " " ).replace( rclass, " " )
					.indexOf( className ) > -1
			) {
				return true;
			}
		}

		return false;
	}
} );




// Return jQuery for attributes-only inclusion


jQuery.each( ( "blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu" ).split( " " ),
	function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
} );

jQuery.fn.extend( {
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	}
} );


var location = window.location;

var nonce = jQuery.now();

var rquery = ( /\?/ );



var rvalidtokens = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;

jQuery.parseJSON = function( data ) {

	// Attempt to parse using the native JSON parser first
	if ( window.JSON && window.JSON.parse ) {

		// Support: Android 2.3
		// Workaround failure to string-cast null input
		return window.JSON.parse( data + "" );
	}

	var requireNonComma,
		depth = null,
		str = jQuery.trim( data + "" );

	// Guard against invalid (and possibly dangerous) input by ensuring that nothing remains
	// after removing valid tokens
	return str && !jQuery.trim( str.replace( rvalidtokens, function( token, comma, open, close ) {

		// Force termination if we see a misplaced comma
		if ( requireNonComma && comma ) {
			depth = 0;
		}

		// Perform no more replacements after returning to outermost depth
		if ( depth === 0 ) {
			return token;
		}

		// Commas must not follow "[", "{", or ","
		requireNonComma = open || comma;

		// Determine new depth
		// array/object open ("[" or "{"): depth += true - false (increment)
		// array/object close ("]" or "}"): depth += false - true (decrement)
		// other cases ("," or primitive): depth += true - true (numeric cast)
		depth += !close - !open;

		// Remove this token
		return "";
	} ) ) ?
		( Function( "return " + str ) )() :
		jQuery.error( "Invalid JSON: " + data );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, tmp;
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	try {
		if ( window.DOMParser ) { // Standard
			tmp = new window.DOMParser();
			xml = tmp.parseFromString( data, "text/xml" );
		} else { // IE
			xml = new window.ActiveXObject( "Microsoft.XMLDOM" );
			xml.async = "false";
			xml.loadXML( data );
		}
	} catch ( e ) {
		xml = undefined;
	}
	if ( !xml || !xml.documentElement || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,

	// IE leaves an \r character at EOL
	rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg,

	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Document location
	ajaxLocation = location.href,

	// Segment location into parts
	ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {

			// For each dataType in the dataTypeExpression
			while ( ( dataType = dataTypes[ i++ ] ) ) {

				// Prepend if requested
				if ( dataType.charAt( 0 ) === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );

				// Otherwise append
				} else {
					( structure[ dataType ] = structure[ dataType ] || [] ).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" &&
				!seekingTransport && !inspected[ dataTypeOrTransport ] ) {

				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		} );
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var deep, key,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {
	var firstDataType, ct, finalDataType, type,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader( "Content-Type" );
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {

		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[ 0 ] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}

		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},

		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

			// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {

								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) { // jscs:ignore requireDotNotation
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return {
								state: "parsererror",
								error: conv ? e : "No conversion from " + prev + " to " + current
							};
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend( {

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /\bxml\b/,
			html: /\bhtml/,
			json: /\bjson\b/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var

			// Cross-domain detection vars
			parts,

			// Loop variable
			i,

			// URL without anti-cache param
			cacheURL,

			// Response headers as string
			responseHeadersString,

			// timeout handle
			timeoutTimer,

			// To know if global events are to be dispatched
			fireGlobals,

			transport,

			// Response headers
			responseHeaders,

			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),

			// Callbacks context
			callbackContext = s.context || s,

			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context &&
				( callbackContext.nodeType || callbackContext.jquery ) ?
					jQuery( callbackContext ) :
					jQuery.event,

			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks( "once memory" ),

			// Status-dependent callbacks
			statusCode = s.statusCode || {},

			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},

			// The jqXHR state
			state = 0,

			// Default abort message
			strAbort = "canceled",

			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( ( match = rheaders.exec( responseHeadersString ) ) ) {
								responseHeaders[ match[ 1 ].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {

								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {

							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" )
			.replace( rhash, "" )
			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger( "ajaxStart" );
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );

				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?
				s.accepts[ s.dataTypes[ 0 ] ] +
					( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend &&
			( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {

			// Abort if not done already and return
			return jqXHR.abort();
		}

		// aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}

			// If request was aborted inside ajaxSend, stop there
			if ( state === 2 ) {
				return jqXHR;
			}

			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = window.setTimeout( function() {
					jqXHR.abort( "timeout" );
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {

				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );

				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				window.clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader( "Last-Modified" );
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader( "etag" );
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {

				// We extract error from statusText
				// then normalize statusText and status for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );

				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger( "ajaxStop" );
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
} );

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {

		// shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		// The url can be an options object (which then must have .url)
		return jQuery.ajax( jQuery.extend( {
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		}, jQuery.isPlainObject( url ) && url ) );
	};
} );


jQuery._evalUrl = function( url ) {
	return jQuery.ajax( {
		url: url,

		// Make this explicit, since user can override this through ajaxSetup (#11264)
		type: "GET",
		dataType: "script",
		cache: true,
		async: false,
		global: false,
		"throws": true
	} );
};


jQuery.fn.extend( {
	wrapAll: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each( function( i ) {
				jQuery( this ).wrapAll( html.call( this, i ) );
			} );
		}

		if ( this[ 0 ] ) {

			// The elements to wrap the target around
			var wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map( function() {
				var elem = this;

				while ( elem.firstChild && elem.firstChild.nodeType === 1 ) {
					elem = elem.firstChild;
				}

				return elem;
			} ).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each( function( i ) {
				jQuery( this ).wrapInner( html.call( this, i ) );
			} );
		}

		return this.each( function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		} );
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each( function( i ) {
			jQuery( this ).wrapAll( isFunction ? html.call( this, i ) : html );
		} );
	},

	unwrap: function() {
		return this.parent().each( function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		} ).end();
	}
} );


function getDisplay( elem ) {
	return elem.style && elem.style.display || jQuery.css( elem, "display" );
}

function filterHidden( elem ) {

	// Disconnected elements are considered hidden
	if ( !jQuery.contains( elem.ownerDocument || document, elem ) ) {
		return true;
	}
	while ( elem && elem.nodeType === 1 ) {
		if ( getDisplay( elem ) === "none" || elem.type === "hidden" ) {
			return true;
		}
		elem = elem.parentNode;
	}
	return false;
}

jQuery.expr.filters.hidden = function( elem ) {

	// Support: Opera <= 12.12
	// Opera reports offsetWidths and offsetHeights less than zero on some elements
	return support.reliableHiddenOffsets() ?
		( elem.offsetWidth <= 0 && elem.offsetHeight <= 0 &&
			!elem.getClientRects().length ) :
			filterHidden( elem );
};

jQuery.expr.filters.visible = function( elem ) {
	return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {

		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {

				// Treat each array item as a scalar.
				add( prefix, v );

			} else {

				// Item is non-scalar (array or object), encode its numeric index.
				buildParams(
					prefix + "[" + ( typeof v === "object" && v != null ? i : "" ) + "]",
					v,
					traditional,
					add
				);
			}
		} );

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {

		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {

		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {

			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {

		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		} );

	} else {

		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend( {
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map( function() {

			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		} )
		.filter( function() {
			var type = this.type;

			// Use .is(":disabled") so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		} )
		.map( function( i, elem ) {
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ) {
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					} ) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		} ).get();
	}
} );


// Create the request object
// (This is still attached to ajaxSettings for backward compatibility)
jQuery.ajaxSettings.xhr = window.ActiveXObject !== undefined ?

	// Support: IE6-IE8
	function() {

		// XHR cannot access local files, always use ActiveX for that case
		if ( this.isLocal ) {
			return createActiveXHR();
		}

		// Support: IE 9-11
		// IE seems to error on cross-domain PATCH requests when ActiveX XHR
		// is used. In IE 9+ always use the native XHR.
		// Note: this condition won't catch Edge as it doesn't define
		// document.documentMode but it also doesn't support ActiveX so it won't
		// reach this code.
		if ( document.documentMode > 8 ) {
			return createStandardXHR();
		}

		// Support: IE<9
		// oldIE XHR does not support non-RFC2616 methods (#13240)
		// See http://msdn.microsoft.com/en-us/library/ie/ms536648(v=vs.85).aspx
		// and http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9
		// Although this check for six methods instead of eight
		// since IE also does not support "trace" and "connect"
		return /^(get|post|head|put|delete|options)$/i.test( this.type ) &&
			createStandardXHR() || createActiveXHR();
	} :

	// For all other browsers, use the standard XMLHttpRequest object
	createStandardXHR;

var xhrId = 0,
	xhrCallbacks = {},
	xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE<10
// Open requests must be manually aborted on unload (#5280)
// See https://support.microsoft.com/kb/2856746 for more info
if ( window.attachEvent ) {
	window.attachEvent( "onunload", function() {
		for ( var key in xhrCallbacks ) {
			xhrCallbacks[ key ]( undefined, true );
		}
	} );
}

// Determine support properties
support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
xhrSupported = support.ajax = !!xhrSupported;

// Create transport if the browser can provide an xhr
if ( xhrSupported ) {

	jQuery.ajaxTransport( function( options ) {

		// Cross domain only allowed if supported through XMLHttpRequest
		if ( !options.crossDomain || support.cors ) {

			var callback;

			return {
				send: function( headers, complete ) {
					var i,
						xhr = options.xhr(),
						id = ++xhrId;

					// Open the socket
					xhr.open(
						options.type,
						options.url,
						options.async,
						options.username,
						options.password
					);

					// Apply custom fields if provided
					if ( options.xhrFields ) {
						for ( i in options.xhrFields ) {
							xhr[ i ] = options.xhrFields[ i ];
						}
					}

					// Override mime type if needed
					if ( options.mimeType && xhr.overrideMimeType ) {
						xhr.overrideMimeType( options.mimeType );
					}

					// X-Requested-With header
					// For cross-domain requests, seeing as conditions for a preflight are
					// akin to a jigsaw puzzle, we simply never set it to be sure.
					// (it can always be set on a per-request basis or even using ajaxSetup)
					// For same-domain requests, won't change header if already provided.
					if ( !options.crossDomain && !headers[ "X-Requested-With" ] ) {
						headers[ "X-Requested-With" ] = "XMLHttpRequest";
					}

					// Set headers
					for ( i in headers ) {

						// Support: IE<9
						// IE's ActiveXObject throws a 'Type Mismatch' exception when setting
						// request header to a null-value.
						//
						// To keep consistent with other XHR implementations, cast the value
						// to string and ignore `undefined`.
						if ( headers[ i ] !== undefined ) {
							xhr.setRequestHeader( i, headers[ i ] + "" );
						}
					}

					// Do send the request
					// This may raise an exception which is actually
					// handled in jQuery.ajax (so no try/catch here)
					xhr.send( ( options.hasContent && options.data ) || null );

					// Listener
					callback = function( _, isAbort ) {
						var status, statusText, responses;

						// Was never called and is aborted or complete
						if ( callback && ( isAbort || xhr.readyState === 4 ) ) {

							// Clean up
							delete xhrCallbacks[ id ];
							callback = undefined;
							xhr.onreadystatechange = jQuery.noop;

							// Abort manually if needed
							if ( isAbort ) {
								if ( xhr.readyState !== 4 ) {
									xhr.abort();
								}
							} else {
								responses = {};
								status = xhr.status;

								// Support: IE<10
								// Accessing binary-data responseText throws an exception
								// (#11426)
								if ( typeof xhr.responseText === "string" ) {
									responses.text = xhr.responseText;
								}

								// Firefox throws an exception when accessing
								// statusText for faulty cross-domain requests
								try {
									statusText = xhr.statusText;
								} catch ( e ) {

									// We normalize with Webkit giving an empty statusText
									statusText = "";
								}

								// Filter status for non standard behaviors

								// If the request is local and we have data: assume a success
								// (success with no data won't get notified, that's the best we
								// can do given current implementations)
								if ( !status && options.isLocal && !options.crossDomain ) {
									status = responses.text ? 200 : 404;

								// IE - #1450: sometimes returns 1223 when it should be 204
								} else if ( status === 1223 ) {
									status = 204;
								}
							}
						}

						// Call complete if needed
						if ( responses ) {
							complete( status, statusText, responses, xhr.getAllResponseHeaders() );
						}
					};

					// Do send the request
					// `xhr.send` may raise an exception, but it will be
					// handled in jQuery.ajax (so no try/catch here)
					if ( !options.async ) {

						// If we're in sync mode we fire the callback
						callback();
					} else if ( xhr.readyState === 4 ) {

						// (IE6 & IE7) if it's in cache and has been
						// retrieved directly we need to fire the callback
						window.setTimeout( callback );
					} else {

						// Register the callback, but delay it in case `xhr.send` throws
						// Add to the list of active xhr callbacks
						xhr.onreadystatechange = xhrCallbacks[ id ] = callback;
					}
				},

				abort: function() {
					if ( callback ) {
						callback( undefined, true );
					}
				}
			};
		}
	} );
}

// Functions to create xhrs
function createStandardXHR() {
	try {
		return new window.XMLHttpRequest();
	} catch ( e ) {}
}

function createActiveXHR() {
	try {
		return new window.ActiveXObject( "Microsoft.XMLHTTP" );
	} catch ( e ) {}
}




// Install script dataType
jQuery.ajaxSetup( {
	accepts: {
		script: "text/javascript, application/javascript, " +
			"application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /\b(?:java|ecma)script\b/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
} );

// Handle cache's special case and global
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
		s.global = false;
	}
} );

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {

	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {

		var script,
			head = document.head || jQuery( "head" )[ 0 ] || document.documentElement;

		return {

			send: function( _, callback ) {

				script = document.createElement( "script" );

				script.async = true;

				if ( s.scriptCharset ) {
					script.charset = s.scriptCharset;
				}

				script.src = s.url;

				// Attach handlers for all browsers
				script.onload = script.onreadystatechange = function( _, isAbort ) {

					if ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {

						// Handle memory leak in IE
						script.onload = script.onreadystatechange = null;

						// Remove the script
						if ( script.parentNode ) {
							script.parentNode.removeChild( script );
						}

						// Dereference the script
						script = null;

						// Callback if not abort
						if ( !isAbort ) {
							callback( 200, "success" );
						}
					}
				};

				// Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending
				// Use native DOM manipulation to avoid our domManip AJAX trickery
				head.insertBefore( script, head.firstChild );
			},

			abort: function() {
				if ( script ) {
					script.onload( undefined, true );
				}
			}
		};
	}
} );




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup( {
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
} );

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" &&
				( s.contentType || "" )
					.indexOf( "application/x-www-form-urlencoded" ) === 0 &&
				rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters[ "script json" ] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always( function() {

			// If previous value didn't exist - remove it
			if ( overwritten === undefined ) {
				jQuery( window ).removeProp( callbackName );

			// Otherwise restore preexisting value
			} else {
				window[ callbackName ] = overwritten;
			}

			// Save back as free
			if ( s[ callbackName ] ) {

				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		} );

		// Delegate to script
		return "script";
	}
} );




// data: string of html
// context (optional): If specified, the fragment will be created in this context,
// defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}
	context = context || document;

	var parsed = rsingleTag.exec( data ),
		scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[ 1 ] ) ];
	}

	parsed = buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, type, response,
		self = this,
		off = url.indexOf( " " );

	if ( off > -1 ) {
		selector = jQuery.trim( url.slice( off, url.length ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax( {
			url: url,

			// If "type" variable is undefined, then "GET" method will be used.
			// Make value of this field explicit since
			// user can override it through ajaxSetup method
			type: type || "GET",
			dataType: "html",
			data: params
		} ).done( function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery( "<div>" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		// If the request succeeds, this function gets "data", "status", "jqXHR"
		// but they are ignored because response was set above.
		// If it fails, this function gets "jqXHR", "status", "error"
		} ).always( callback && function( jqXHR, status ) {
			self.each( function() {
				callback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );
			} );
		} );
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [
	"ajaxStart",
	"ajaxStop",
	"ajaxComplete",
	"ajaxError",
	"ajaxSuccess",
	"ajaxSend"
], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
} );




jQuery.expr.filters.animated = function( elem ) {
	return jQuery.grep( jQuery.timers, function( fn ) {
		return elem === fn.elem;
	} ).length;
};





/**
 * Gets a window from an element
 */
function getWindow( elem ) {
	return jQuery.isWindow( elem ) ?
		elem :
		elem.nodeType === 9 ?
			elem.defaultView || elem.parentWindow :
			false;
}

jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			jQuery.inArray( "auto", [ curCSSTop, curCSSLeft ] ) > -1;

		// need to be able to calculate position if either top or left
		// is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;
		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {

			// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)
			options = options.call( elem, i, jQuery.extend( {}, curOffset ) );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );
		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend( {
	offset: function( options ) {
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each( function( i ) {
					jQuery.offset.setOffset( this, options, i );
				} );
		}

		var docElem, win,
			box = { top: 0, left: 0 },
			elem = this[ 0 ],
			doc = elem && elem.ownerDocument;

		if ( !doc ) {
			return;
		}

		docElem = doc.documentElement;

		// Make sure it's not a disconnected DOM node
		if ( !jQuery.contains( docElem, elem ) ) {
			return box;
		}

		// If we don't have gBCR, just use 0,0 rather than error
		// BlackBerry 5, iOS 3 (original iPhone)
		if ( typeof elem.getBoundingClientRect !== "undefined" ) {
			box = elem.getBoundingClientRect();
		}
		win = getWindow( doc );
		return {
			top: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),
			left: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )
		};
	},

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			parentOffset = { top: 0, left: 0 },
			elem = this[ 0 ];

		// Fixed elements are offset from window (parentOffset = {top:0, left: 0},
		// because it is its only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {

			// we assume that getBoundingClientRect is available when computed position is fixed
			offset = elem.getBoundingClientRect();
		} else {

			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top  += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		// note: when an element has margin: auto the offsetLeft and marginLeft
		// are the same in Safari causing offset.left to incorrectly be 0
		return {
			top:  offset.top  - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	offsetParent: function() {
		return this.map( function() {
			var offsetParent = this.offsetParent;

			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) &&
				jQuery.css( offsetParent, "position" ) === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}
			return offsetParent || documentElement;
		} );
	}
} );

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = /Y/.test( prop );

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? ( prop in win ) ? win[ prop ] :
					win.document.documentElement[ method ] :
					elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : jQuery( win ).scrollLeft(),
					top ? val : jQuery( win ).scrollTop()
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
} );

// Support: Safari<7-8+, Chrome<37-44+
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// getComputedStyle returns percent when specified for top/left/bottom/right
// rather than make the css module depend on the offset module, we just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );

				// if curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
} );


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name },
	function( defaultExtra, funcName ) {

		// margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {

					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					// unfortunately, this causes bug #3838 in IE6/8 only,
					// but there is currently no good, small way to fix it.
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?

					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	} );
} );


jQuery.fn.extend( {

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {

		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ?
			this.off( selector, "**" ) :
			this.off( types, selector || "**", fn );
	}
} );

// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	} );
}



var

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in
// AMD (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( !noGlobal ) {
	window.jQuery = window.$ = jQuery;
}

return jQuery;
}));
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.select = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function select(element) {
    var selectedText;

    if (element.nodeName === 'SELECT') {
        element.focus();

        selectedText = element.value;
    }
    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {
        var isReadOnly = element.hasAttribute('readonly');

        if (!isReadOnly) {
            element.setAttribute('readonly', '');
        }

        element.select();
        element.setSelectionRange(0, element.value.length);

        if (!isReadOnly) {
            element.removeAttribute('readonly');
        }

        selectedText = element.value;
    }
    else {
        if (element.hasAttribute('contenteditable')) {
            element.focus();
        }

        var selection = window.getSelection();
        var range = document.createRange();

        range.selectNodeContents(element);
        selection.removeAllRanges();
        selection.addRange(range);

        selectedText = selection.toString();
    }

    return selectedText;
}

module.exports = select;

},{}]},{},[1])(1)
});
//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
//# sourceMappingURL=underscore-min.map
;
var postgrest = (function (m,_) {
    'use strict';

    m = 'default' in m ? m['default'] : m;
    _ = 'default' in _ ? _['default'] : _;

    var babelHelpers = {};

    babelHelpers.slicedToArray = function () {
      function sliceIterator(arr, i) {
        var _arr = [];
        var _n = true;
        var _d = false;
        var _e = undefined;

        try {
          for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
            _arr.push(_s.value);

            if (i && _arr.length === i) break;
          }
        } catch (err) {
          _d = true;
          _e = err;
        } finally {
          try {
            if (!_n && _i["return"]) _i["return"]();
          } finally {
            if (_d) throw _e;
          }
        }

        return _arr;
      }

      return function (arr, i) {
        if (Array.isArray(arr)) {
          return arr;
        } else if (Symbol.iterator in Object(arr)) {
          return sliceIterator(arr, i);
        } else {
          throw new TypeError("Invalid attempt to destructure non-iterable instance");
        }
      };
    }();

    babelHelpers;

    var filtersVM = function filtersVM(attributes) {
        var newVM = {},
            filter = function filter() {
            var prop = m.prop(''),
                filterProp = function filterProp(value) {
                if (arguments.length > 0) {
                    prop(value);
                    return newVM;
                }
                return prop();
            };
            // Just so we can have a default to_filter and avoid if _.isFunction calls
            filterProp.toFilter = function () {
                return _.isString(filterProp()) ? filterProp().trim() : filterProp();
            };
            return filterProp;
        },
            getters = _.reduce(attributes, function (memo, operator, attr) {
            // The operator between is implemented with two properties, one for greater than value and another for lesser than value.
            // Both properties are sent in the queurystring with the same name,
            // that's why we need the special case here, so we can use a simple map as argument to filtersVM.
            if (operator === 'between') {
                memo[attr] = {
                    lte: filter(),
                    gte: filter()
                };
            } else {
                memo[attr] = filter();
            }
            return memo;
        }, {
            order: filter()
        }),
            parametersWithoutOrder = function parametersWithoutOrder() {
            return _.reduce(getters, function (memo, getter, attr) {
                if (attr !== 'order') {
                    var operator = attributes[attr];

                    if (_.isFunction(getter.toFilter) && (getter.toFilter() === undefined || getter.toFilter() === '')) {
                        return memo;
                    }

                    // Bellow we use different formatting rules for the value depending on the operator
                    // These rules are used regardless of the toFilter function,
                    // so the user can use a custom toFilter without having to worry with basic filter syntax
                    if (operator === 'ilike' || operator === 'like') {
                        memo[attr] = operator + '.*' + getter.toFilter() + '*';
                    } else if (operator === '@@') {
                        memo[attr] = operator + '.' + getter.toFilter().replace(/\s+/g, '&');
                    } else if (operator === 'between') {
                        if (!getter.lte.toFilter() && !getter.gte.toFilter()) {
                            return memo;
                        }
                        memo[attr] = [];
                        if (getter.gte()) {
                            memo[attr].push('gte.' + getter.gte.toFilter());
                        }
                        if (getter.lte()) {
                            memo[attr].push('lte.' + getter.lte.toFilter());
                        }
                    } else if (operator === 'is.null') {
                        memo[attr] = getter.toFilter() === null ? 'is.null' : 'not.is.null';
                    } else {
                        memo[attr] = operator + '.' + getter.toFilter();
                    }
                }
                return memo;
            }, {});
        },
            parameters = function parameters() {
            // The order parameters have a special syntax (just like an order by SQL clause)
            // https://github.com/begriffs/postgrest/wiki/Routing#filtering-and-ordering
            var order = function order() {
                return getters.order() && _.reduce(getters.order(), function (memo, direction, attr) {
                    memo.push(attr + '.' + direction);
                    return memo;
                }, []).join(',');
            },
                orderParameter = order() ? {
                order: order()
            } : {};

            return _.extend({}, orderParameter, parametersWithoutOrder());
        };

        return _.extend(newVM, getters, {
            parameters: parameters,
            parametersWithoutOrder: parametersWithoutOrder
        });
    };

    var paginationVM = function paginationVM(model, order) {
        var extraHeaders = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];
        var authenticate = arguments.length <= 3 || arguments[3] === undefined ? true : arguments[3];

        var collection = m.prop([]),
            defaultOrder = order || 'id.desc',
            filters = m.prop({
            order: defaultOrder
        }),
            isLoading = m.prop(false),
            page = m.prop(1),
            resultsCount = m.prop(),
            pageRequest = authenticate ? model.getPageWithToken : model.getPage,
            total = m.prop();

        var fetch = function fetch() {
            var d = m.deferred();
            var getTotal = function getTotal(xhr) {
                if (!xhr || xhr.status === 0) {
                    return JSON.stringify({
                        hint: null,
                        details: null,
                        code: 0,
                        message: 'Connection error'
                    });
                }
                var rangeHeader = xhr.getResponseHeader('Content-Range');
                if (_.isString(rangeHeader)) {
                    var _rangeHeader$split = rangeHeader.split('/');

                    var _rangeHeader$split2 = babelHelpers.slicedToArray(_rangeHeader$split, 2);

                    var headerSize = _rangeHeader$split2[0];
                    var headerCount = _rangeHeader$split2[1];

                    var _headerSize$split = headerSize.split('-');

                    var _headerSize$split2 = babelHelpers.slicedToArray(_headerSize$split, 2);

                    var headerFrom = _headerSize$split2[0];
                    var headerTo = _headerSize$split2[1];
                    var to = parseInt(headerTo) + 1 || 0;
                    var from = parseInt(headerFrom) || 0;

                    total(parseInt(headerCount));
                    resultsCount(to - from);
                }
                try {
                    JSON.parse(xhr.responseText);
                    return xhr.responseText;
                } catch (ex) {
                    return JSON.stringify({
                        hint: null,
                        details: null,
                        code: 0,
                        message: xhr.responseText
                    });
                }
            };
            isLoading(true);
            pageRequest(filters(), page(), {
                background: true,
                extract: getTotal
            }, extraHeaders).then(function (data) {
                collection(_.union(collection(), data));
                isLoading(false);
                d.resolve(collection());
                m.redraw();
            }, function (error) {
                isLoading(false);
                total(0);
                d.reject(error);
                m.redraw();
            });
            return d.promise;
        },
            firstPage = function firstPage(parameters) {
            filters(_.extend({
                order: defaultOrder
            }, parameters));
            collection([]);
            page(1);
            return fetch();
        },
            isLastPage = function isLastPage() {
            return model.pageSize() > resultsCount();
        },
            nextPage = function nextPage() {
            page(page() + 1);
            return fetch();
        };

        return {
            collection: collection,
            firstPage: firstPage,
            isLoading: isLoading,
            nextPage: nextPage,
            isLastPage: isLastPage,
            total: total,
            resultsCount: resultsCount
        };
    };

    var postgrest = {};

    var token = m.prop();
    var mergeConfig = function mergeConfig(config, options) {
        return options && _.isFunction(options.config) ? _.compose(options.config, config) : config;
    };
    var addHeaders = function addHeaders(headers) {
        return function (xhr) {
            _.each(headers, function (value, key) {
                xhr.setRequestHeader(key, value);
            });
            return xhr;
        };
    };
    var addConfigHeaders = function addConfigHeaders(headers, options) {
        return _.extend({}, options, {
            config: mergeConfig(addHeaders(headers), options)
        });
    };
    var createLoader = function createLoader(requestFunction, options) {
        var defaultState = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];

        var loader = m.prop(defaultState),
            d = m.deferred();
        loader.load = function () {
            loader(true);
            m.redraw();
            requestFunction(_.extend({}, options, {
                background: true
            })).then(function (data) {
                loader(false);
                d.resolve(data);
                m.redraw();
            }, function (error) {
                loader(false);
                d.reject(error);
                m.redraw();
            });
            return d.promise;
        };
        return loader;
    };
    var representationHeader = {
        'Prefer': 'return=representation'
    };
    postgrest.token = token;

    postgrest.init = function (apiPrefix, authenticationOptions) {
        postgrest.request = function (options) {
            var errorHandler = function errorHandler(xhr) {
                try {
                    JSON.parse(xhr.responseText);
                    return xhr.responseText;
                } catch (ex) {
                    return JSON.stringify({
                        hint: null,
                        details: null,
                        code: 0,
                        message: xhr.responseText
                    });
                }
            };
            return m.request(_.extend({ extract: errorHandler }, options, {
                url: apiPrefix + options.url
            }));
        };

        postgrest.authenticate = function () {
            var deferred = m.deferred();
            if (token()) {
                deferred.resolve({
                    token: token()
                });
            } else {
                m.request(_.extend({}, authenticationOptions)).then(function (data) {
                    token(data.token);
                    deferred.resolve({
                        token: token()
                    });
                }, function (data) {
                    deferred.reject(data);
                });
            }
            return deferred.promise;
        };

        postgrest.requestWithToken = function (options) {
            return postgrest.authenticate().then(function () {
                return postgrest.request(addConfigHeaders({
                    'Authorization': 'Bearer ' + token()
                }, options));
            }, function () {
                return postgrest.request(options);
            });
        };

        postgrest.loader = _.partial(createLoader, postgrest.request);

        postgrest.loaderWithToken = _.partial(createLoader, postgrest.requestWithToken);

        postgrest.model = function (name) {
            var paginationHeaders = function paginationHeaders(page, pageSize) {
                if (!pageSize) {
                    return;
                }

                var toRange = function toRange() {
                    var from = (page - 1) * pageSize,
                        to = from + pageSize - 1;
                    return from + '-' + to;
                };

                return {
                    'Range-unit': 'items',
                    'Range': toRange()
                };
            },
                pageSize = m.prop(10),
                nameOptions = {
                url: '/' + name
            },
                getOptions = function getOptions(data, page, pageSize, options) {
                var headers = arguments.length <= 4 || arguments[4] === undefined ? {} : arguments[4];

                var extraHeaders = _.extend({}, {
                    'Prefer': 'count=none'
                }, headers, paginationHeaders(page, pageSize));
                return addConfigHeaders(extraHeaders, _.extend({}, options, nameOptions, {
                    method: 'GET',
                    data: data
                }));
            },
                querystring = function querystring(filters, options) {
                options.url += '?' + m.route.buildQueryString(filters);
                return options;
            },
                options = function options(_options) {
                return postgrest.request(_.extend({}, _options, nameOptions, {
                    method: 'OPTIONS'
                }));
            },
                postOptions = function postOptions(attributes, options) {
                var headers = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

                var extraHeaders = _.extend({}, representationHeader, headers);
                return addConfigHeaders(extraHeaders, _.extend({}, options, nameOptions, {
                    method: 'POST',
                    data: attributes
                }));
            },
                deleteOptions = function deleteOptions(filters, options) {
                var headers = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

                var extraHeaders = addHeaders(_.extend({}, headers));
                return querystring(filters, addConfigHeaders(extraHeaders, _.extend({}, options, nameOptions, {
                    method: 'DELETE'
                })));
            },
                patchOptions = function patchOptions(filters, attributes, options) {
                var headers = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];

                var extraHeaders = _.extend({}, representationHeader, headers);
                return querystring(filters, addConfigHeaders(extraHeaders, _.extend({}, options, nameOptions, {
                    method: 'PATCH',
                    data: attributes
                })));
            },
                getPageOptions = function getPageOptions(data, page, options) {
                var headers = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];

                return getOptions(data, page || 1, pageSize(), options, headers);
            },
                getRowOptions = function getRowOptions(data, options) {
                var headers = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

                return getOptions(data, 1, 1, options, headers);
            };

            return {
                pageSize: pageSize,
                getPageOptions: getPageOptions,
                getRowOptions: getRowOptions,
                patchOptions: patchOptions,
                postOptions: postOptions,
                deleteOptions: deleteOptions,
                getPage: _.compose(postgrest.request, getPageOptions),
                getRow: _.compose(postgrest.request, getRowOptions),
                patch: _.compose(postgrest.request, patchOptions),
                post: _.compose(postgrest.request, postOptions),
                deleteRequest: _.compose(postgrest.request, deleteOptions),
                getPageWithToken: _.compose(postgrest.requestWithToken, getPageOptions),
                getRowWithToken: _.compose(postgrest.requestWithToken, getRowOptions),
                patchWithToken: _.compose(postgrest.requestWithToken, patchOptions),
                postWithToken: _.compose(postgrest.requestWithToken, postOptions),
                deleteWithToken: _.compose(postgrest.requestWithToken, deleteOptions),
                options: options
            };
        };

        return postgrest;
    };

    postgrest.filtersVM = filtersVM;
    postgrest.paginationVM = paginationVM;

    return postgrest;

}(m,_));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjLyoqLyouanMiLCJzb3VyY2VzIjpbInNyYy92bXMvZmlsdGVyc1ZNLmpzIiwic3JjL3Ztcy9wYWdpbmF0aW9uVk0uanMiLCJzcmMvcG9zdGdyZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtIGZyb20gJ21pdGhyaWwnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmNvbnN0IGZpbHRlcnNWTSA9IChhdHRyaWJ1dGVzKSA9PiB7XG4gICAgbGV0IG5ld1ZNID0ge30sXG4gICAgICAgIGZpbHRlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSBtLnByb3AoJycpLFxuICAgICAgICAgICAgICAgIGZpbHRlclByb3AgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdWTTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcCgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBKdXN0IHNvIHdlIGNhbiBoYXZlIGEgZGVmYXVsdCB0b19maWx0ZXIgYW5kIGF2b2lkIGlmIF8uaXNGdW5jdGlvbiBjYWxsc1xuICAgICAgICAgICAgZmlsdGVyUHJvcC50b0ZpbHRlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5pc1N0cmluZyhmaWx0ZXJQcm9wKCkpID8gZmlsdGVyUHJvcCgpLnRyaW0oKSA6IGZpbHRlclByb3AoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyUHJvcDtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXR0ZXJzID0gXy5yZWR1Y2UoXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLCAobWVtbywgb3BlcmF0b3IsIGF0dHIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3BlcmF0b3IgYmV0d2VlbiBpcyBpbXBsZW1lbnRlZCB3aXRoIHR3byBwcm9wZXJ0aWVzLCBvbmUgZm9yIGdyZWF0ZXIgdGhhbiB2YWx1ZSBhbmQgYW5vdGhlciBmb3IgbGVzc2VyIHRoYW4gdmFsdWUuXG4gICAgICAgICAgICAgICAgLy8gQm90aCBwcm9wZXJ0aWVzIGFyZSBzZW50IGluIHRoZSBxdWV1cnlzdHJpbmcgd2l0aCB0aGUgc2FtZSBuYW1lLFxuICAgICAgICAgICAgICAgIC8vIHRoYXQncyB3aHkgd2UgbmVlZCB0aGUgc3BlY2lhbCBjYXNlIGhlcmUsIHNvIHdlIGNhbiB1c2UgYSBzaW1wbGUgbWFwIGFzIGFyZ3VtZW50IHRvIGZpbHRlcnNWTS5cbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdiZXR3ZWVuJykge1xuICAgICAgICAgICAgICAgICAgICBtZW1vW2F0dHJdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbHRlOiBmaWx0ZXIoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGd0ZTogZmlsdGVyKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZW1vW2F0dHJdID0gZmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG9yZGVyOiBmaWx0ZXIoKVxuICAgICAgICAgICAgfVxuICAgICAgICApLFxuXG4gICAgICAgIHBhcmFtZXRlcnNXaXRob3V0T3JkZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gXy5yZWR1Y2UoXG4gICAgICAgICAgICAgICAgZ2V0dGVycywgKG1lbW8sIGdldHRlciwgYXR0cikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ciAhPT0gJ29yZGVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3IgPSBhdHRyaWJ1dGVzW2F0dHJdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKGdldHRlci50b0ZpbHRlcikgJiYgKGdldHRlci50b0ZpbHRlcigpID09PSB1bmRlZmluZWQgfHwgZ2V0dGVyLnRvRmlsdGVyKCkgPT09ICcnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCZWxsb3cgd2UgdXNlIGRpZmZlcmVudCBmb3JtYXR0aW5nIHJ1bGVzIGZvciB0aGUgdmFsdWUgZGVwZW5kaW5nIG9uIHRoZSBvcGVyYXRvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgcnVsZXMgYXJlIHVzZWQgcmVnYXJkbGVzcyBvZiB0aGUgdG9GaWx0ZXIgZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyB0aGUgdXNlciBjYW4gdXNlIGEgY3VzdG9tIHRvRmlsdGVyIHdpdGhvdXQgaGF2aW5nIHRvIHdvcnJ5IHdpdGggYmFzaWMgZmlsdGVyIHN5bnRheFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnaWxpa2UnIHx8IG9wZXJhdG9yID09PSAnbGlrZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vW2F0dHJdID0gb3BlcmF0b3IgKyAnLionICsgZ2V0dGVyLnRvRmlsdGVyKCkgKyAnKic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSAnQEAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb1thdHRyXSA9IG9wZXJhdG9yICsgJy4nICsgZ2V0dGVyLnRvRmlsdGVyKCkucmVwbGFjZSgvXFxzKy9nLCAnJicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gJ2JldHdlZW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXR0ZXIubHRlLnRvRmlsdGVyKCkgJiYgIWdldHRlci5ndGUudG9GaWx0ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVtbztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb1thdHRyXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXR0ZXIuZ3RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb1thdHRyXS5wdXNoKCdndGUuJyArIGdldHRlci5ndGUudG9GaWx0ZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXR0ZXIubHRlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb1thdHRyXS5wdXNoKCdsdGUuJyArIGdldHRlci5sdGUudG9GaWx0ZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gJ2lzLm51bGwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb1thdHRyXSA9IGdldHRlci50b0ZpbHRlcigpID09PSBudWxsID8gJ2lzLm51bGwnIDogJ25vdC5pcy5udWxsJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb1thdHRyXSA9IG9wZXJhdG9yICsgJy4nICsgZ2V0dGVyLnRvRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICAgICAgICAgICAgfSwge31cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFyYW1ldGVycyA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSBvcmRlciBwYXJhbWV0ZXJzIGhhdmUgYSBzcGVjaWFsIHN5bnRheCAoanVzdCBsaWtlIGFuIG9yZGVyIGJ5IFNRTCBjbGF1c2UpXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYmVncmlmZnMvcG9zdGdyZXN0L3dpa2kvUm91dGluZyNmaWx0ZXJpbmctYW5kLW9yZGVyaW5nXG4gICAgICAgICAgICBjb25zdCBvcmRlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVycy5vcmRlcigpICYmIF8ucmVkdWNlKFxuICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzLm9yZGVyKCksIChtZW1vLCBkaXJlY3Rpb24sIGF0dHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8ucHVzaChhdHRyICsgJy4nICsgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgICAgICAgICAgICAgICB9LCBbXVxuICAgICAgICAgICAgICAgICkuam9pbignLCcpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIG9yZGVyUGFyYW1ldGVyID0gb3JkZXIoKSA/IHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IG9yZGVyKClcbiAgICAgICAgICAgICAgICB9IDoge307XG5cbiAgICAgICAgICAgIHJldHVybiBfLmV4dGVuZCh7fSwgb3JkZXJQYXJhbWV0ZXIsIHBhcmFtZXRlcnNXaXRob3V0T3JkZXIoKSk7XG5cbiAgICAgICAgfTtcblxuICAgIHJldHVybiBfLmV4dGVuZChuZXdWTSwgZ2V0dGVycywge1xuICAgICAgICBwYXJhbWV0ZXJzOiBwYXJhbWV0ZXJzLFxuICAgICAgICBwYXJhbWV0ZXJzV2l0aG91dE9yZGVyOiBwYXJhbWV0ZXJzV2l0aG91dE9yZGVyXG4gICAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmaWx0ZXJzVk07XG4iLCJpbXBvcnQgbSBmcm9tICdtaXRocmlsJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5jb25zdCBwYWdpbmF0aW9uVk0gPSAobW9kZWwsIG9yZGVyLCBleHRyYUhlYWRlcnMgPSB7fSwgYXV0aGVudGljYXRlID0gdHJ1ZSkgPT4ge1xuICAgIGxldCBjb2xsZWN0aW9uID0gbS5wcm9wKFtdKSxcbiAgICAgICAgZGVmYXVsdE9yZGVyID0gb3JkZXIgfHwgJ2lkLmRlc2MnLFxuICAgICAgICBmaWx0ZXJzID0gbS5wcm9wKHtcbiAgICAgICAgICAgIG9yZGVyOiBkZWZhdWx0T3JkZXJcbiAgICAgICAgfSksXG4gICAgICAgIGlzTG9hZGluZyA9IG0ucHJvcChmYWxzZSksXG4gICAgICAgIHBhZ2UgPSBtLnByb3AoMSksXG4gICAgICAgIHJlc3VsdHNDb3VudCA9IG0ucHJvcCgpLFxuICAgICAgICBwYWdlUmVxdWVzdCA9IGF1dGhlbnRpY2F0ZSA/IG1vZGVsLmdldFBhZ2VXaXRoVG9rZW4gOiBtb2RlbC5nZXRQYWdlLFxuICAgICAgICB0b3RhbCA9IG0ucHJvcCgpO1xuXG4gICAgY29uc3QgZmV0Y2ggPSAoKSA9PiB7XG4gICAgICAgIGxldCBkID0gbS5kZWZlcnJlZCgpO1xuICAgICAgICBjb25zdCBnZXRUb3RhbCA9ICh4aHIpID0+IHtcbiAgICAgICAgICAgIGlmICgheGhyIHx8IHhoci5zdGF0dXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBoaW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ29ubmVjdGlvbiBlcnJvcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByYW5nZUhlYWRlciA9IHhoci5nZXRSZXNwb25zZUhlYWRlcignQ29udGVudC1SYW5nZScpO1xuICAgICAgICAgICAgaWYgKF8uaXNTdHJpbmcocmFuZ2VIZWFkZXIpKSB7XG4gICAgICAgICAgICAgICAgbGV0IFtoZWFkZXJTaXplLCBoZWFkZXJDb3VudF0gPSByYW5nZUhlYWRlci5zcGxpdCgnLycpLFxuICAgICAgICAgICAgICAgICAgICBbaGVhZGVyRnJvbSwgaGVhZGVyVG9dID0gaGVhZGVyU2l6ZS5zcGxpdCgnLScpLFxuICAgICAgICAgICAgICAgICAgICB0byA9IHBhcnNlSW50KGhlYWRlclRvKSArIDEgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgZnJvbSA9IHBhcnNlSW50KGhlYWRlckZyb20pICB8fCAwO1xuXG4gICAgICAgICAgICAgICAgdG90YWwocGFyc2VJbnQoaGVhZGVyQ291bnQpKTtcbiAgICAgICAgICAgICAgICByZXN1bHRzQ291bnQodG8gLSBmcm9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaGludDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogeGhyLnJlc3BvbnNlVGV4dFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgIHBhZ2VSZXF1ZXN0KGZpbHRlcnMoKSwgcGFnZSgpLCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cnVlLFxuICAgICAgICAgICAgZXh0cmFjdDogZ2V0VG90YWxcbiAgICAgICAgfSwgZXh0cmFIZWFkZXJzKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uKF8udW5pb24oY29sbGVjdGlvbigpLCBkYXRhKSk7XG4gICAgICAgICAgICBpc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgZC5yZXNvbHZlKGNvbGxlY3Rpb24oKSk7XG4gICAgICAgICAgICBtLnJlZHJhdygpO1xuICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICB0b3RhbCgwKTtcbiAgICAgICAgICAgIGQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIG0ucmVkcmF3KCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICBmaXJzdFBhZ2UgPSAocGFyYW1ldGVycykgPT4ge1xuICAgICAgICBmaWx0ZXJzKF8uZXh0ZW5kKHtcbiAgICAgICAgICAgIG9yZGVyOiBkZWZhdWx0T3JkZXJcbiAgICAgICAgfSwgcGFyYW1ldGVycykpO1xuICAgICAgICBjb2xsZWN0aW9uKFtdKTtcbiAgICAgICAgcGFnZSgxKTtcbiAgICAgICAgcmV0dXJuIGZldGNoKCk7XG4gICAgfSxcblxuICAgIGlzTGFzdFBhZ2UgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAobW9kZWwucGFnZVNpemUoKSA+IHJlc3VsdHNDb3VudCgpKTtcbiAgICB9LFxuXG4gICAgbmV4dFBhZ2UgPSAoKSA9PiB7XG4gICAgICAgIHBhZ2UocGFnZSgpICsgMSk7XG4gICAgICAgIHJldHVybiBmZXRjaCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLFxuICAgICAgICBmaXJzdFBhZ2U6IGZpcnN0UGFnZSxcbiAgICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcsXG4gICAgICAgIG5leHRQYWdlOiBuZXh0UGFnZSxcbiAgICAgICAgaXNMYXN0UGFnZTogaXNMYXN0UGFnZSxcbiAgICAgICAgdG90YWw6IHRvdGFsLFxuICAgICAgICByZXN1bHRzQ291bnQ6IHJlc3VsdHNDb3VudFxuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwYWdpbmF0aW9uVk07XG4iLCJpbXBvcnQgbSBmcm9tICdtaXRocmlsJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGZpbHRlcnNWTSBmcm9tICcuL3Ztcy9maWx0ZXJzVk0nO1xuaW1wb3J0IHBhZ2luYXRpb25WTSBmcm9tICcuL3Ztcy9wYWdpbmF0aW9uVk0nO1xuXG5sZXQgcG9zdGdyZXN0ID0ge307XG5cbmNvbnN0IHRva2VuID0gbS5wcm9wKCksXG5cbiAgICAgIG1lcmdlQ29uZmlnID0gKGNvbmZpZywgb3B0aW9ucykgPT4ge1xuICAgICAgICAgIHJldHVybiBvcHRpb25zICYmIF8uaXNGdW5jdGlvbihvcHRpb25zLmNvbmZpZykgPyBfLmNvbXBvc2Uob3B0aW9ucy5jb25maWcsIGNvbmZpZykgOiBjb25maWc7XG4gICAgICB9LFxuXG4gICAgICBhZGRIZWFkZXJzID0gKGhlYWRlcnMpID0+IHtcbiAgICAgICAgICByZXR1cm4gKHhocikgPT4ge1xuICAgICAgICAgICAgICBfLmVhY2goaGVhZGVycywgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIHhocjtcbiAgICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgYWRkQ29uZmlnSGVhZGVycyA9IChoZWFkZXJzLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7XG4gICAgICAgICAgICAgIGNvbmZpZzogbWVyZ2VDb25maWcoYWRkSGVhZGVycyhoZWFkZXJzKSwgb3B0aW9ucylcbiAgICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIGNyZWF0ZUxvYWRlciA9IChyZXF1ZXN0RnVuY3Rpb24sIG9wdGlvbnMsIGRlZmF1bHRTdGF0ZSA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgY29uc3QgbG9hZGVyID0gbS5wcm9wKGRlZmF1bHRTdGF0ZSksXG4gICAgICAgICAgICAgICAgZCA9IG0uZGVmZXJyZWQoKTtcbiAgICAgICAgICBsb2FkZXIubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgbG9hZGVyKHRydWUpO1xuICAgICAgICAgICAgICBtLnJlZHJhdygpO1xuICAgICAgICAgICAgICByZXF1ZXN0RnVuY3Rpb24oXy5leHRlbmQoe30sIG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRydWVcbiAgICAgICAgICAgICAgfSkpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgIGxvYWRlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICBkLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICBtLnJlZHJhdygpO1xuICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgIGxvYWRlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICBkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICBtLnJlZHJhdygpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBsb2FkZXI7XG4gICAgICB9LFxuXG4gICAgICByZXByZXNlbnRhdGlvbkhlYWRlciA9IHtcbiAgICAgICAgICAnUHJlZmVyJzogJ3JldHVybj1yZXByZXNlbnRhdGlvbidcbiAgICAgIH07XG5cbnBvc3RncmVzdC50b2tlbiA9IHRva2VuO1xuXG5wb3N0Z3Jlc3QuaW5pdCA9IChhcGlQcmVmaXgsIGF1dGhlbnRpY2F0aW9uT3B0aW9ucykgPT4ge1xuICAgIHBvc3RncmVzdC5yZXF1ZXN0ID0gKG9wdGlvbnMpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JIYW5kbGVyID0gKHhocikgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBoaW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBtLnJlcXVlc3QoXy5leHRlbmQoe2V4dHJhY3Q6IGVycm9ySGFuZGxlcn0sIG9wdGlvbnMsIHtcbiAgICAgICAgICAgIHVybDogYXBpUHJlZml4ICsgb3B0aW9ucy51cmxcbiAgICAgICAgfSkpO1xuICAgIH07XG5cbiAgICBwb3N0Z3Jlc3QuYXV0aGVudGljYXRlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG0uZGVmZXJyZWQoKTtcbiAgICAgICAgaWYgKHRva2VuKCkpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbigpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG0ucmVxdWVzdChfLmV4dGVuZCh7fSwgYXV0aGVudGljYXRpb25PcHRpb25zKSkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHRva2VuKGRhdGEudG9rZW4pO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4oKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgcG9zdGdyZXN0LnJlcXVlc3RXaXRoVG9rZW4gPSAob3B0aW9ucykgPT4ge1xuICAgICAgICByZXR1cm4gcG9zdGdyZXN0LmF1dGhlbnRpY2F0ZSgpLnRoZW4oXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvc3RncmVzdC5yZXF1ZXN0KGFkZENvbmZpZ0hlYWRlcnMoe1xuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuKClcbiAgICAgICAgICAgICAgICB9LCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvc3RncmVzdC5yZXF1ZXN0KG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICBwb3N0Z3Jlc3QubG9hZGVyID0gXy5wYXJ0aWFsKGNyZWF0ZUxvYWRlciwgcG9zdGdyZXN0LnJlcXVlc3QpO1xuXG4gICAgcG9zdGdyZXN0LmxvYWRlcldpdGhUb2tlbiA9IF8ucGFydGlhbChjcmVhdGVMb2FkZXIsIHBvc3RncmVzdC5yZXF1ZXN0V2l0aFRva2VuKTtcblxuICAgIHBvc3RncmVzdC5tb2RlbCA9IChuYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhZ2luYXRpb25IZWFkZXJzID0gKHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXBhZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0b1JhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyb20gPSAocGFnZSAtIDEpICogcGFnZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgdG8gPSBmcm9tICsgcGFnZVNpemUgLSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tICsgJy0nICsgdG87XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICdSYW5nZS11bml0JzogJ2l0ZW1zJyxcbiAgICAgICAgICAgICAgICAnUmFuZ2UnOiB0b1JhbmdlKClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgcGFnZVNpemUgPSBtLnByb3AoMTApLFxuXG4gICAgICAgICAgICAgIG5hbWVPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiAnLycgKyBuYW1lXG4gICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgZ2V0T3B0aW9ucyA9IChkYXRhLCBwYWdlLCBwYWdlU2l6ZSwgb3B0aW9ucywgaGVhZGVycyA9IHt9KSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBfLmV4dGVuZCh7fSwge1xuICAgICAgICAgICAgICAgICAgICAgICdQcmVmZXInOiAnY291bnQ9bm9uZSdcbiAgICAgICAgICAgICAgICAgIH0sIGhlYWRlcnMsIHBhZ2luYXRpb25IZWFkZXJzKHBhZ2UsIHBhZ2VTaXplKSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gYWRkQ29uZmlnSGVhZGVycyhleHRyYUhlYWRlcnMsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCBuYW1lT3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgIHF1ZXJ5c3RyaW5nID0gKGZpbHRlcnMsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXJsICs9ICc/JyArIG0ucm91dGUuYnVpbGRRdWVyeVN0cmluZyhmaWx0ZXJzKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgIG9wdGlvbnMgPSAob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvc3RncmVzdC5yZXF1ZXN0KF8uZXh0ZW5kKHt9LCBvcHRpb25zLCBuYW1lT3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ09QVElPTlMnXG4gICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgcG9zdE9wdGlvbnMgPSAoYXR0cmlidXRlcywgb3B0aW9ucywgaGVhZGVycyA9IHt9KSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBfLmV4dGVuZCh7fSwgcmVwcmVzZW50YXRpb25IZWFkZXIsIGhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGFkZENvbmZpZ0hlYWRlcnMoXG4gICAgICAgICAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgIF8uZXh0ZW5kKHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZU9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgIGRlbGV0ZU9wdGlvbnMgPSAoZmlsdGVycywgb3B0aW9ucywgaGVhZGVycyA9IHt9KSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBleHRyYUhlYWRlcnMgPSBhZGRIZWFkZXJzKF8uZXh0ZW5kKHt9LCBoZWFkZXJzKSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnlzdHJpbmcoZmlsdGVycywgYWRkQ29uZmlnSGVhZGVycyhleHRyYUhlYWRlcnMsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCBuYW1lT3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgcGF0Y2hPcHRpb25zID0gKGZpbHRlcnMsIGF0dHJpYnV0ZXMsIG9wdGlvbnMsIGhlYWRlcnMgPSB7fSkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFIZWFkZXJzID0gXy5leHRlbmQoe30sIHJlcHJlc2VudGF0aW9uSGVhZGVyLCBoZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBxdWVyeXN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLFxuICAgICAgICAgICAgICAgICAgICAgIGFkZENvbmZpZ0hlYWRlcnMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXy5leHRlbmQoe30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVPcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICBnZXRQYWdlT3B0aW9ucyA9IChkYXRhLCBwYWdlLCBvcHRpb25zLCBoZWFkZXJzID0ge30pID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRPcHRpb25zKGRhdGEsIChwYWdlIHx8IDEpLCBwYWdlU2l6ZSgpLCBvcHRpb25zLCBoZWFkZXJzKTtcbiAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICBnZXRSb3dPcHRpb25zID0gKGRhdGEsIG9wdGlvbnMsIGhlYWRlcnMgPSB7fSkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldE9wdGlvbnMoZGF0YSwgMSwgMSwgb3B0aW9ucywgaGVhZGVycyk7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZSxcbiAgICAgICAgICAgIGdldFBhZ2VPcHRpb25zOiBnZXRQYWdlT3B0aW9ucyxcbiAgICAgICAgICAgIGdldFJvd09wdGlvbnM6IGdldFJvd09wdGlvbnMsXG4gICAgICAgICAgICBwYXRjaE9wdGlvbnM6IHBhdGNoT3B0aW9ucyxcbiAgICAgICAgICAgIHBvc3RPcHRpb25zOiBwb3N0T3B0aW9ucyxcbiAgICAgICAgICAgIGRlbGV0ZU9wdGlvbnM6IGRlbGV0ZU9wdGlvbnMsXG4gICAgICAgICAgICBnZXRQYWdlOiBfLmNvbXBvc2UocG9zdGdyZXN0LnJlcXVlc3QsIGdldFBhZ2VPcHRpb25zKSxcbiAgICAgICAgICAgIGdldFJvdzogXy5jb21wb3NlKHBvc3RncmVzdC5yZXF1ZXN0LCBnZXRSb3dPcHRpb25zKSxcbiAgICAgICAgICAgIHBhdGNoOiBfLmNvbXBvc2UocG9zdGdyZXN0LnJlcXVlc3QsIHBhdGNoT3B0aW9ucyksXG4gICAgICAgICAgICBwb3N0OiBfLmNvbXBvc2UocG9zdGdyZXN0LnJlcXVlc3QsIHBvc3RPcHRpb25zKSxcbiAgICAgICAgICAgIGRlbGV0ZVJlcXVlc3Q6IF8uY29tcG9zZShwb3N0Z3Jlc3QucmVxdWVzdCwgZGVsZXRlT3B0aW9ucyksXG4gICAgICAgICAgICBnZXRQYWdlV2l0aFRva2VuOiBfLmNvbXBvc2UocG9zdGdyZXN0LnJlcXVlc3RXaXRoVG9rZW4sIGdldFBhZ2VPcHRpb25zKSxcbiAgICAgICAgICAgIGdldFJvd1dpdGhUb2tlbjogXy5jb21wb3NlKHBvc3RncmVzdC5yZXF1ZXN0V2l0aFRva2VuLCBnZXRSb3dPcHRpb25zKSxcbiAgICAgICAgICAgIHBhdGNoV2l0aFRva2VuOiBfLmNvbXBvc2UocG9zdGdyZXN0LnJlcXVlc3RXaXRoVG9rZW4sIHBhdGNoT3B0aW9ucyksXG4gICAgICAgICAgICBwb3N0V2l0aFRva2VuOiBfLmNvbXBvc2UocG9zdGdyZXN0LnJlcXVlc3RXaXRoVG9rZW4sIHBvc3RPcHRpb25zKSxcbiAgICAgICAgICAgIGRlbGV0ZVdpdGhUb2tlbjogXy5jb21wb3NlKHBvc3RncmVzdC5yZXF1ZXN0V2l0aFRva2VuLCBkZWxldGVPcHRpb25zKSxcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHBvc3RncmVzdDtcbn07XG5cbnBvc3RncmVzdC5maWx0ZXJzVk0gPSBmaWx0ZXJzVk07XG5wb3N0Z3Jlc3QucGFnaW5hdGlvblZNID0gcGFnaW5hdGlvblZNO1xuXG5leHBvcnQgZGVmYXVsdCBwb3N0Z3Jlc3Q7XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBR0EsSUFBTSxZQUFZLFNBQVosU0FBWSxDQUFDLFVBQUQsRUFBZ0I7QUFDOUIsSUFBQSxRQUFJLFFBQVEsRUFBWjtZQUNJLFNBQVMsU0FBVCxNQUFTLEdBQU07QUFDWCxJQUFBLFlBQU0sT0FBTyxFQUFFLElBQUYsQ0FBTyxFQUFQLENBQWI7Z0JBQ0ksYUFBYSxTQUFiLFVBQWEsQ0FBVSxLQUFWLEVBQWlCO0FBQzFCLElBQUEsZ0JBQUksVUFBVSxNQUFWLEdBQW1CLENBQXZCLEVBQTBCO0FBQ3RCLElBQUEscUJBQUssS0FBTDtBQUNBLElBQUEsdUJBQU8sS0FBUDtBQUNILElBQUE7QUFDRCxJQUFBLG1CQUFPLE1BQVA7QUFDSCxJQUFBLFNBUEw7O0FBU0EsSUFBQSxtQkFBVyxRQUFYLEdBQXNCLFlBQU07QUFDeEIsSUFBQSxtQkFBTyxFQUFFLFFBQUYsQ0FBVyxZQUFYLElBQTJCLGFBQWEsSUFBYixFQUEzQixHQUFpRCxZQUF4RDtBQUNILElBQUEsU0FGRDtBQUdBLElBQUEsZUFBTyxVQUFQO0FBQ0gsSUFBQSxLQWZMO1lBaUJJLFVBQVUsRUFBRSxNQUFGLENBQ04sVUFETSxFQUNNLFVBQUMsSUFBRCxFQUFPLFFBQVAsRUFBaUIsSUFBakIsRUFBMEI7Ozs7QUFJbEMsSUFBQSxZQUFJLGFBQWEsU0FBakIsRUFBNEI7QUFDeEIsSUFBQSxpQkFBSyxJQUFMLElBQWE7QUFDVCxJQUFBLHFCQUFLLFFBREk7QUFFVCxJQUFBLHFCQUFLO0FBRkksSUFBQSxhQUFiO0FBSUgsSUFBQSxTQUxELE1BS087QUFDSCxJQUFBLGlCQUFLLElBQUwsSUFBYSxRQUFiO0FBQ0gsSUFBQTtBQUNELElBQUEsZUFBTyxJQUFQO0FBQ0gsSUFBQSxLQWRLLEVBY0g7QUFDQyxJQUFBLGVBQU87QUFEUixJQUFBLEtBZEcsQ0FqQmQ7WUFvQ0kseUJBQXlCLFNBQXpCLHNCQUF5QixHQUFNO0FBQzNCLElBQUEsZUFBTyxFQUFFLE1BQUYsQ0FDSCxPQURHLEVBQ00sVUFBQyxJQUFELEVBQU8sTUFBUCxFQUFlLElBQWYsRUFBd0I7QUFDN0IsSUFBQSxnQkFBSSxTQUFTLE9BQWIsRUFBc0I7QUFDbEIsSUFBQSxvQkFBTSxXQUFXLFdBQVcsSUFBWCxDQUFqQjs7QUFFQSxJQUFBLG9CQUFJLEVBQUUsVUFBRixDQUFhLE9BQU8sUUFBcEIsTUFBa0MsT0FBTyxRQUFQLE9BQXNCLFNBQXRCLElBQW1DLE9BQU8sUUFBUCxPQUFzQixFQUEzRixDQUFKLEVBQW9HO0FBQ2hHLElBQUEsMkJBQU8sSUFBUDtBQUNILElBQUE7Ozs7O0FBS0QsSUFBQSxvQkFBSSxhQUFhLE9BQWIsSUFBd0IsYUFBYSxNQUF6QyxFQUFpRDtBQUM3QyxJQUFBLHlCQUFLLElBQUwsSUFBYSxXQUFXLElBQVgsR0FBa0IsT0FBTyxRQUFQLEVBQWxCLEdBQXNDLEdBQW5EO0FBQ0gsSUFBQSxpQkFGRCxNQUVPLElBQUksYUFBYSxJQUFqQixFQUF1QjtBQUMxQixJQUFBLHlCQUFLLElBQUwsSUFBYSxXQUFXLEdBQVgsR0FBaUIsT0FBTyxRQUFQLEdBQWtCLE9BQWxCLENBQTBCLE1BQTFCLEVBQWtDLEdBQWxDLENBQTlCO0FBQ0gsSUFBQSxpQkFGTSxNQUVBLElBQUksYUFBYSxTQUFqQixFQUE0QjtBQUMvQixJQUFBLHdCQUFJLENBQUMsT0FBTyxHQUFQLENBQVcsUUFBWCxFQUFELElBQTBCLENBQUMsT0FBTyxHQUFQLENBQVcsUUFBWCxFQUEvQixFQUFzRDtBQUNsRCxJQUFBLCtCQUFPLElBQVA7QUFDSCxJQUFBO0FBQ0QsSUFBQSx5QkFBSyxJQUFMLElBQWEsRUFBYjtBQUNBLElBQUEsd0JBQUksT0FBTyxHQUFQLEVBQUosRUFBa0I7QUFDZCxJQUFBLDZCQUFLLElBQUwsRUFBVyxJQUFYLENBQWdCLFNBQVMsT0FBTyxHQUFQLENBQVcsUUFBWCxFQUF6QjtBQUNILElBQUE7QUFDRCxJQUFBLHdCQUFJLE9BQU8sR0FBUCxFQUFKLEVBQWtCO0FBQ2QsSUFBQSw2QkFBSyxJQUFMLEVBQVcsSUFBWCxDQUFnQixTQUFTLE9BQU8sR0FBUCxDQUFXLFFBQVgsRUFBekI7QUFDSCxJQUFBO0FBQ0osSUFBQSxpQkFYTSxNQVdBLElBQUksYUFBYSxTQUFqQixFQUE0QjtBQUMvQixJQUFBLHlCQUFLLElBQUwsSUFBYSxPQUFPLFFBQVAsT0FBc0IsSUFBdEIsR0FBNkIsU0FBN0IsR0FBeUMsYUFBdEQ7QUFDSCxJQUFBLGlCQUZNLE1BRUE7QUFDSCxJQUFBLHlCQUFLLElBQUwsSUFBYSxXQUFXLEdBQVgsR0FBaUIsT0FBTyxRQUFQLEVBQTlCO0FBQ0gsSUFBQTtBQUNKLElBQUE7QUFDRCxJQUFBLG1CQUFPLElBQVA7QUFDSCxJQUFBLFNBbENFLEVBa0NBLEVBbENBLENBQVA7QUFvQ0gsSUFBQSxLQXpFTDtZQTJFSSxhQUFhLFNBQWIsVUFBYSxHQUFNOzs7QUFHZixJQUFBLFlBQU0sUUFBUSxTQUFSLEtBQVEsR0FBTTtBQUNoQixJQUFBLG1CQUFPLFFBQVEsS0FBUixNQUFtQixFQUFFLE1BQUYsQ0FDdEIsUUFBUSxLQUFSLEVBRHNCLEVBQ0wsVUFBQyxJQUFELEVBQU8sU0FBUCxFQUFrQixJQUFsQixFQUEyQjtBQUN4QyxJQUFBLHFCQUFLLElBQUwsQ0FBVSxPQUFPLEdBQVAsR0FBYSxTQUF2QjtBQUNBLElBQUEsdUJBQU8sSUFBUDtBQUNILElBQUEsYUFKcUIsRUFJbkIsRUFKbUIsRUFLeEIsSUFMd0IsQ0FLbkIsR0FMbUIsQ0FBMUI7QUFNSCxJQUFBLFNBUEQ7Z0JBU0ksaUJBQWlCLFVBQVU7QUFDdkIsSUFBQSxtQkFBTztBQURnQixJQUFBLFNBQVYsR0FFYixFQVhSOztBQWFBLElBQUEsZUFBTyxFQUFFLE1BQUYsQ0FBUyxFQUFULEVBQWEsY0FBYixFQUE2Qix3QkFBN0IsQ0FBUDtBQUVILElBQUEsS0E3Rkw7O0FBK0ZBLElBQUEsV0FBTyxFQUFFLE1BQUYsQ0FBUyxLQUFULEVBQWdCLE9BQWhCLEVBQXlCO0FBQzVCLElBQUEsb0JBQVksVUFEZ0I7QUFFNUIsSUFBQSxnQ0FBd0I7QUFGSSxJQUFBLEtBQXpCLENBQVA7QUFJSCxJQUFBLENBcEdEOztJQ0FBLElBQU0sZUFBZSxTQUFmLFlBQWUsQ0FBQyxLQUFELEVBQVEsS0FBUixFQUEwRDtBQUFBLElBQUEsUUFBM0MsWUFBMkMseURBQTVCLEVBQTRCO0FBQUEsSUFBQSxRQUF4QixZQUF3Qix5REFBVCxJQUFTOztBQUMzRSxJQUFBLFFBQUksYUFBYSxFQUFFLElBQUYsQ0FBTyxFQUFQLENBQWpCO1lBQ0ksZUFBZSxTQUFTLFNBRDVCO1lBRUksVUFBVSxFQUFFLElBQUYsQ0FBTztBQUNiLElBQUEsZUFBTztBQURNLElBQUEsS0FBUCxDQUZkO1lBS0ksWUFBWSxFQUFFLElBQUYsQ0FBTyxLQUFQLENBTGhCO1lBTUksT0FBTyxFQUFFLElBQUYsQ0FBTyxDQUFQLENBTlg7WUFPSSxlQUFlLEVBQUUsSUFBRixFQVBuQjtZQVFJLGNBQWMsZUFBZSxNQUFNLGdCQUFyQixHQUF3QyxNQUFNLE9BUmhFO1lBU0ksUUFBUSxFQUFFLElBQUYsRUFUWjs7QUFXQSxJQUFBLFFBQU0sUUFBUSxTQUFSLEtBQVEsR0FBTTtBQUNoQixJQUFBLFlBQUksSUFBSSxFQUFFLFFBQUYsRUFBUjtBQUNBLElBQUEsWUFBTSxXQUFXLFNBQVgsUUFBVyxDQUFDLEdBQUQsRUFBUztBQUN0QixJQUFBLGdCQUFJLENBQUMsR0FBRCxJQUFRLElBQUksTUFBSixLQUFlLENBQTNCLEVBQThCO0FBQzFCLElBQUEsdUJBQU8sS0FBSyxTQUFMLENBQWU7QUFDbEIsSUFBQSwwQkFBTSxJQURZO0FBRWxCLElBQUEsNkJBQVMsSUFGUztBQUdsQixJQUFBLDBCQUFNLENBSFk7QUFJbEIsSUFBQSw2QkFBUztBQUpTLElBQUEsaUJBQWYsQ0FBUDtBQU1ILElBQUE7QUFDRCxJQUFBLGdCQUFJLGNBQWMsSUFBSSxpQkFBSixDQUFzQixlQUF0QixDQUFsQjtBQUNBLElBQUEsZ0JBQUksRUFBRSxRQUFGLENBQVcsV0FBWCxDQUFKLEVBQTZCO0FBQUEsSUFBQSx5Q0FDTyxZQUFZLEtBQVosQ0FBa0IsR0FBbEIsQ0FEUDs7QUFBQSxJQUFBOztBQUFBLElBQUEsb0JBQ3BCLFVBRG9CO0FBQ3JCLElBQUEsb0JBQWEsV0FBYjs7QUFEcUIsSUFBQSx3Q0FFSSxXQUFXLEtBQVgsQ0FBaUIsR0FBakIsQ0FGSjs7QUFBQSxJQUFBOztBQUFBLElBQUEsb0JBRXBCLFVBRm9CO0FBRXJCLElBQUEsb0JBQWEsUUFBYjtBQUNBLElBQUEseUJBQUssU0FBUyxRQUFULElBQXFCLENBQXJCLElBQTBCLENBQS9CO0FBQ0EsSUFBQSwyQkFBTyxTQUFTLFVBQVQsS0FBeUIsQ0FBaEM7O0FBRUosSUFBQSxzQkFBTSxTQUFTLFdBQVQsQ0FBTjtBQUNBLElBQUEsNkJBQWEsS0FBSyxJQUFsQjtBQUNILElBQUE7QUFDRCxJQUFBLGdCQUFJO0FBQ0EsSUFBQSxxQkFBSyxLQUFMLENBQVcsSUFBSSxZQUFmO0FBQ0EsSUFBQSx1QkFBTyxJQUFJLFlBQVg7QUFDSCxJQUFBLGFBSEQsQ0FHRSxPQUFPLEVBQVAsRUFBVztBQUNULElBQUEsdUJBQU8sS0FBSyxTQUFMLENBQWU7QUFDbEIsSUFBQSwwQkFBTSxJQURZO0FBRWxCLElBQUEsNkJBQVMsSUFGUztBQUdsQixJQUFBLDBCQUFNLENBSFk7QUFJbEIsSUFBQSw2QkFBUyxJQUFJO0FBSkssSUFBQSxpQkFBZixDQUFQO0FBTUgsSUFBQTtBQUNKLElBQUEsU0E5QkQ7QUErQkEsSUFBQSxrQkFBVSxJQUFWO0FBQ0EsSUFBQSxvQkFBWSxTQUFaLEVBQXVCLE1BQXZCLEVBQStCO0FBQzNCLElBQUEsd0JBQVksSUFEZTtBQUUzQixJQUFBLHFCQUFTO0FBRmtCLElBQUEsU0FBL0IsRUFHRyxZQUhILEVBR2lCLElBSGpCLENBR3NCLFVBQUMsSUFBRCxFQUFVO0FBQzVCLElBQUEsdUJBQVcsRUFBRSxLQUFGLENBQVEsWUFBUixFQUFzQixJQUF0QixDQUFYO0FBQ0EsSUFBQSxzQkFBVSxLQUFWO0FBQ0EsSUFBQSxjQUFFLE9BQUYsQ0FBVSxZQUFWO0FBQ0EsSUFBQSxjQUFFLE1BQUY7QUFDSCxJQUFBLFNBUkQsRUFRRyxVQUFDLEtBQUQsRUFBVztBQUNWLElBQUEsc0JBQVUsS0FBVjtBQUNBLElBQUEsa0JBQU0sQ0FBTjtBQUNBLElBQUEsY0FBRSxNQUFGLENBQVMsS0FBVDtBQUNBLElBQUEsY0FBRSxNQUFGO0FBQ0gsSUFBQSxTQWJEO0FBY0EsSUFBQSxlQUFPLEVBQUUsT0FBVDtBQUNILElBQUEsS0FqREQ7WUFtREEsWUFBWSxTQUFaLFNBQVksQ0FBQyxVQUFELEVBQWdCO0FBQ3hCLElBQUEsZ0JBQVEsRUFBRSxNQUFGLENBQVM7QUFDYixJQUFBLG1CQUFPO0FBRE0sSUFBQSxTQUFULEVBRUwsVUFGSyxDQUFSO0FBR0EsSUFBQSxtQkFBVyxFQUFYO0FBQ0EsSUFBQSxhQUFLLENBQUw7QUFDQSxJQUFBLGVBQU8sT0FBUDtBQUNILElBQUEsS0ExREQ7WUE0REEsYUFBYSxTQUFiLFVBQWEsR0FBTTtBQUNmLElBQUEsZUFBUSxNQUFNLFFBQU4sS0FBbUIsY0FBM0I7QUFDSCxJQUFBLEtBOUREO1lBZ0VBLFdBQVcsU0FBWCxRQUFXLEdBQU07QUFDYixJQUFBLGFBQUssU0FBUyxDQUFkO0FBQ0EsSUFBQSxlQUFPLE9BQVA7QUFDSCxJQUFBLEtBbkVEOztBQXFFQSxJQUFBLFdBQU87QUFDSCxJQUFBLG9CQUFZLFVBRFQ7QUFFSCxJQUFBLG1CQUFXLFNBRlI7QUFHSCxJQUFBLG1CQUFXLFNBSFI7QUFJSCxJQUFBLGtCQUFVLFFBSlA7QUFLSCxJQUFBLG9CQUFZLFVBTFQ7QUFNSCxJQUFBLGVBQU8sS0FOSjtBQU9ILElBQUEsc0JBQWM7QUFQWCxJQUFBLEtBQVA7QUFTSCxJQUFBLENBMUZEOztJQ0VBLElBQUksWUFBWSxFQUFoQjs7QUFFQSxRQUFNLFFBQVEsRUFBRSxJQUFGLEVBQWQ7UUFFTSxjQUFjLFNBQWQsV0FBYyxDQUFDLE1BQUQsRUFBUyxPQUFULEVBQXFCO0FBQy9CLElBQUEsV0FBTyxXQUFXLEVBQUUsVUFBRixDQUFhLFFBQVEsTUFBckIsQ0FBWCxHQUEwQyxFQUFFLE9BQUYsQ0FBVSxRQUFRLE1BQWxCLEVBQTBCLE1BQTFCLENBQTFDLEdBQThFLE1BQXJGO0FBQ0gsSUFBQSxDQUpQO1FBTU0sYUFBYSxTQUFiLFVBQWEsQ0FBQyxPQUFELEVBQWE7QUFDdEIsSUFBQSxXQUFPLFVBQUMsR0FBRCxFQUFTO0FBQ1osSUFBQSxVQUFFLElBQUYsQ0FBTyxPQUFQLEVBQWdCLFVBQUMsS0FBRCxFQUFRLEdBQVIsRUFBZ0I7QUFDNUIsSUFBQSxnQkFBSSxnQkFBSixDQUFxQixHQUFyQixFQUEwQixLQUExQjtBQUNILElBQUEsU0FGRDtBQUdBLElBQUEsZUFBTyxHQUFQO0FBQ0gsSUFBQSxLQUxEO0FBTUgsSUFBQSxDQWJQO1FBZU0sbUJBQW1CLFNBQW5CLGdCQUFtQixDQUFDLE9BQUQsRUFBVSxPQUFWLEVBQXNCO0FBQ3JDLElBQUEsV0FBTyxFQUFFLE1BQUYsQ0FBUyxFQUFULEVBQWEsT0FBYixFQUFzQjtBQUN6QixJQUFBLGdCQUFRLFlBQVksV0FBVyxPQUFYLENBQVosRUFBaUMsT0FBakM7QUFEaUIsSUFBQSxLQUF0QixDQUFQO0FBR0gsSUFBQSxDQW5CUDtRQXFCTSxlQUFlLFNBQWYsWUFBZSxDQUFDLGVBQUQsRUFBa0IsT0FBbEIsRUFBb0Q7QUFBQSxJQUFBLFFBQXpCLFlBQXlCLHlEQUFWLEtBQVU7O0FBQy9ELElBQUEsUUFBTSxTQUFTLEVBQUUsSUFBRixDQUFPLFlBQVAsQ0FBZjtZQUNNLElBQUksRUFBRSxRQUFGLEVBRFY7QUFFQSxJQUFBLFdBQU8sSUFBUCxHQUFjLFlBQU07QUFDaEIsSUFBQSxlQUFPLElBQVA7QUFDQSxJQUFBLFVBQUUsTUFBRjtBQUNBLElBQUEsd0JBQWdCLEVBQUUsTUFBRixDQUFTLEVBQVQsRUFBYSxPQUFiLEVBQXNCO0FBQ2xDLElBQUEsd0JBQVk7QUFEc0IsSUFBQSxTQUF0QixDQUFoQixFQUVJLElBRkosQ0FFUyxVQUFDLElBQUQsRUFBVTtBQUNmLElBQUEsbUJBQU8sS0FBUDtBQUNBLElBQUEsY0FBRSxPQUFGLENBQVUsSUFBVjtBQUNBLElBQUEsY0FBRSxNQUFGO0FBQ0gsSUFBQSxTQU5ELEVBTUcsVUFBQyxLQUFELEVBQVc7QUFDVixJQUFBLG1CQUFPLEtBQVA7QUFDQSxJQUFBLGNBQUUsTUFBRixDQUFTLEtBQVQ7QUFDQSxJQUFBLGNBQUUsTUFBRjtBQUNILElBQUEsU0FWRDtBQVdBLElBQUEsZUFBTyxFQUFFLE9BQVQ7QUFDSCxJQUFBLEtBZkQ7QUFnQkEsSUFBQSxXQUFPLE1BQVA7QUFDSCxJQUFBLENBekNQO1FBMkNNLHVCQUF1QjtBQUNuQixJQUFBLGNBQVU7QUFEUyxJQUFBLENBM0M3QjtJQStDQSxVQUFVLEtBQVYsR0FBa0IsS0FBbEI7O0FBRUEsSUFBQSxVQUFVLElBQVYsR0FBaUIsVUFBQyxTQUFELEVBQVkscUJBQVosRUFBc0M7QUFDbkQsSUFBQSxjQUFVLE9BQVYsR0FBb0IsVUFBQyxPQUFELEVBQWE7QUFDN0IsSUFBQSxZQUFNLGVBQWUsU0FBZixZQUFlLENBQUMsR0FBRCxFQUFTO0FBQzFCLElBQUEsZ0JBQUk7QUFDQSxJQUFBLHFCQUFLLEtBQUwsQ0FBVyxJQUFJLFlBQWY7QUFDQSxJQUFBLHVCQUFPLElBQUksWUFBWDtBQUNILElBQUEsYUFIRCxDQUdFLE9BQU8sRUFBUCxFQUFXO0FBQ1QsSUFBQSx1QkFBTyxLQUFLLFNBQUwsQ0FBZTtBQUNsQixJQUFBLDBCQUFNLElBRFk7QUFFbEIsSUFBQSw2QkFBUyxJQUZTO0FBR2xCLElBQUEsMEJBQU0sQ0FIWTtBQUlsQixJQUFBLDZCQUFTLElBQUk7QUFKSyxJQUFBLGlCQUFmLENBQVA7QUFNSCxJQUFBO0FBQ0osSUFBQSxTQVpEO0FBYUEsSUFBQSxlQUFPLEVBQUUsT0FBRixDQUFVLEVBQUUsTUFBRixDQUFTLEVBQUMsU0FBUyxZQUFWLEVBQVQsRUFBa0MsT0FBbEMsRUFBMkM7QUFDeEQsSUFBQSxpQkFBSyxZQUFZLFFBQVE7QUFEK0IsSUFBQSxTQUEzQyxDQUFWLENBQVA7QUFHSCxJQUFBLEtBakJEOztBQW1CQSxJQUFBLGNBQVUsWUFBVixHQUF5QixZQUFNO0FBQzNCLElBQUEsWUFBTSxXQUFXLEVBQUUsUUFBRixFQUFqQjtBQUNBLElBQUEsWUFBSSxPQUFKLEVBQWE7QUFDVCxJQUFBLHFCQUFTLE9BQVQsQ0FBaUI7QUFDYixJQUFBLHVCQUFPO0FBRE0sSUFBQSxhQUFqQjtBQUdILElBQUEsU0FKRCxNQUlPO0FBQ0gsSUFBQSxjQUFFLE9BQUYsQ0FBVSxFQUFFLE1BQUYsQ0FBUyxFQUFULEVBQWEscUJBQWIsQ0FBVixFQUErQyxJQUEvQyxDQUFvRCxVQUFDLElBQUQsRUFBVTtBQUMxRCxJQUFBLHNCQUFNLEtBQUssS0FBWDtBQUNBLElBQUEseUJBQVMsT0FBVCxDQUFpQjtBQUNiLElBQUEsMkJBQU87QUFETSxJQUFBLGlCQUFqQjtBQUdILElBQUEsYUFMRCxFQUtHLFVBQUMsSUFBRCxFQUFVO0FBQ1QsSUFBQSx5QkFBUyxNQUFULENBQWdCLElBQWhCO0FBQ0gsSUFBQSxhQVBEO0FBUUgsSUFBQTtBQUNELElBQUEsZUFBTyxTQUFTLE9BQWhCO0FBQ0gsSUFBQSxLQWpCRDs7QUFtQkEsSUFBQSxjQUFVLGdCQUFWLEdBQTZCLFVBQUMsT0FBRCxFQUFhO0FBQ3RDLElBQUEsZUFBTyxVQUFVLFlBQVYsR0FBeUIsSUFBekIsQ0FDSCxZQUFNO0FBQ0YsSUFBQSxtQkFBTyxVQUFVLE9BQVYsQ0FBa0IsaUJBQWlCO0FBQ3RDLElBQUEsaUNBQWlCLFlBQVk7QUFEUyxJQUFBLGFBQWpCLEVBRXRCLE9BRnNCLENBQWxCLENBQVA7QUFHSCxJQUFBLFNBTEUsRUFLQSxZQUFNO0FBQ0wsSUFBQSxtQkFBTyxVQUFVLE9BQVYsQ0FBa0IsT0FBbEIsQ0FBUDtBQUNILElBQUEsU0FQRSxDQUFQO0FBU0gsSUFBQSxLQVZEOztBQVlBLElBQUEsY0FBVSxNQUFWLEdBQW1CLEVBQUUsT0FBRixDQUFVLFlBQVYsRUFBd0IsVUFBVSxPQUFsQyxDQUFuQjs7QUFFQSxJQUFBLGNBQVUsZUFBVixHQUE0QixFQUFFLE9BQUYsQ0FBVSxZQUFWLEVBQXdCLFVBQVUsZ0JBQWxDLENBQTVCOztBQUVBLElBQUEsY0FBVSxLQUFWLEdBQWtCLFVBQUMsSUFBRCxFQUFVO0FBQ3hCLElBQUEsWUFBTSxvQkFBb0IsU0FBcEIsaUJBQW9CLENBQUMsSUFBRCxFQUFPLFFBQVAsRUFBb0I7QUFDMUMsSUFBQSxnQkFBSSxDQUFDLFFBQUwsRUFBZTtBQUNYLElBQUE7QUFDSCxJQUFBOztBQUVELElBQUEsZ0JBQU0sVUFBVSxTQUFWLE9BQVUsR0FBTTtBQUNsQixJQUFBLG9CQUFNLE9BQU8sQ0FBQyxPQUFPLENBQVIsSUFBYSxRQUExQjt3QkFDTSxLQUFLLE9BQU8sUUFBUCxHQUFrQixDQUQ3QjtBQUVBLElBQUEsdUJBQU8sT0FBTyxHQUFQLEdBQWEsRUFBcEI7QUFDSCxJQUFBLGFBSkQ7O0FBTUEsSUFBQSxtQkFBTztBQUNILElBQUEsOEJBQWMsT0FEWDtBQUVILElBQUEseUJBQVM7QUFGTixJQUFBLGFBQVA7QUFJSCxJQUFBLFNBZkQ7Z0JBaUJNLFdBQVcsRUFBRSxJQUFGLENBQU8sRUFBUCxDQWpCakI7Z0JBbUJNLGNBQWM7QUFDVixJQUFBLGlCQUFLLE1BQU07QUFERCxJQUFBLFNBbkJwQjtnQkF1Qk0sYUFBYSxTQUFiLFVBQWEsQ0FBQyxJQUFELEVBQU8sSUFBUCxFQUFhLFFBQWIsRUFBdUIsT0FBdkIsRUFBaUQ7QUFBQSxJQUFBLGdCQUFqQixPQUFpQix5REFBUCxFQUFPOztBQUMxRCxJQUFBLGdCQUFNLGVBQWUsRUFBRSxNQUFGLENBQVMsRUFBVCxFQUFhO0FBQzlCLElBQUEsMEJBQVU7QUFEb0IsSUFBQSxhQUFiLEVBRWxCLE9BRmtCLEVBRVQsa0JBQWtCLElBQWxCLEVBQXdCLFFBQXhCLENBRlMsQ0FBckI7QUFHQSxJQUFBLG1CQUFPLGlCQUFpQixZQUFqQixFQUErQixFQUFFLE1BQUYsQ0FBUyxFQUFULEVBQWEsT0FBYixFQUFzQixXQUF0QixFQUFtQztBQUNyRSxJQUFBLHdCQUFRLEtBRDZEO0FBRXJFLElBQUEsc0JBQU07QUFGK0QsSUFBQSxhQUFuQyxDQUEvQixDQUFQO0FBSUgsSUFBQSxTQS9CUDtnQkFpQ00sY0FBYyxTQUFkLFdBQWMsQ0FBQyxPQUFELEVBQVUsT0FBVixFQUFzQjtBQUNoQyxJQUFBLG9CQUFRLEdBQVIsSUFBZSxNQUFNLEVBQUUsS0FBRixDQUFRLGdCQUFSLENBQXlCLE9BQXpCLENBQXJCO0FBQ0EsSUFBQSxtQkFBTyxPQUFQO0FBQ0gsSUFBQSxTQXBDUDtnQkFzQ00sVUFBVSxpQkFBQyxRQUFELEVBQWE7QUFDbkIsSUFBQSxtQkFBTyxVQUFVLE9BQVYsQ0FBa0IsRUFBRSxNQUFGLENBQVMsRUFBVCxFQUFhLFFBQWIsRUFBc0IsV0FBdEIsRUFBbUM7QUFDeEQsSUFBQSx3QkFBUTtBQURnRCxJQUFBLGFBQW5DLENBQWxCLENBQVA7QUFHSCxJQUFBLFNBMUNQO2dCQTRDTSxjQUFjLFNBQWQsV0FBYyxDQUFDLFVBQUQsRUFBYSxPQUFiLEVBQXVDO0FBQUEsSUFBQSxnQkFBakIsT0FBaUIseURBQVAsRUFBTzs7QUFDakQsSUFBQSxnQkFBTSxlQUFlLEVBQUUsTUFBRixDQUFTLEVBQVQsRUFBYSxvQkFBYixFQUFtQyxPQUFuQyxDQUFyQjtBQUNBLElBQUEsbUJBQU8saUJBQ0gsWUFERyxFQUVILEVBQUUsTUFBRixDQUFTLEVBQVQsRUFDUyxPQURULEVBRVMsV0FGVCxFQUVzQjtBQUNULElBQUEsd0JBQVEsTUFEQztBQUVULElBQUEsc0JBQU07QUFGRyxJQUFBLGFBRnRCLENBRkcsQ0FBUDtBQVVILElBQUEsU0F4RFA7Z0JBMERNLGdCQUFnQixTQUFoQixhQUFnQixDQUFDLE9BQUQsRUFBVSxPQUFWLEVBQW9DO0FBQUEsSUFBQSxnQkFBakIsT0FBaUIseURBQVAsRUFBTzs7QUFDaEQsSUFBQSxnQkFBTSxlQUFlLFdBQVcsRUFBRSxNQUFGLENBQVMsRUFBVCxFQUFhLE9BQWIsQ0FBWCxDQUFyQjtBQUNBLElBQUEsbUJBQU8sWUFBWSxPQUFaLEVBQXFCLGlCQUFpQixZQUFqQixFQUErQixFQUFFLE1BQUYsQ0FBUyxFQUFULEVBQWEsT0FBYixFQUFzQixXQUF0QixFQUFtQztBQUMxRixJQUFBLHdCQUFRO0FBRGtGLElBQUEsYUFBbkMsQ0FBL0IsQ0FBckIsQ0FBUDtBQUdILElBQUEsU0EvRFA7Z0JBaUVNLGVBQWUsU0FBZixZQUFlLENBQUMsT0FBRCxFQUFVLFVBQVYsRUFBc0IsT0FBdEIsRUFBZ0Q7QUFBQSxJQUFBLGdCQUFqQixPQUFpQix5REFBUCxFQUFPOztBQUMzRCxJQUFBLGdCQUFNLGVBQWUsRUFBRSxNQUFGLENBQVMsRUFBVCxFQUFhLG9CQUFiLEVBQW1DLE9BQW5DLENBQXJCO0FBQ0EsSUFBQSxtQkFBTyxZQUNILE9BREcsRUFFSCxpQkFDSSxZQURKLEVBRUksRUFBRSxNQUFGLENBQVMsRUFBVCxFQUNTLE9BRFQsRUFFUyxXQUZULEVBRXNCO0FBQ1QsSUFBQSx3QkFBUSxPQURDO0FBRVQsSUFBQSxzQkFBTTtBQUZHLElBQUEsYUFGdEIsQ0FGSixDQUZHLENBQVA7QUFhSCxJQUFBLFNBaEZQO2dCQWtGTSxpQkFBaUIsU0FBakIsY0FBaUIsQ0FBQyxJQUFELEVBQU8sSUFBUCxFQUFhLE9BQWIsRUFBdUM7QUFBQSxJQUFBLGdCQUFqQixPQUFpQix5REFBUCxFQUFPOztBQUNwRCxJQUFBLG1CQUFPLFdBQVcsSUFBWCxFQUFrQixRQUFRLENBQTFCLEVBQThCLFVBQTlCLEVBQTBDLE9BQTFDLEVBQW1ELE9BQW5ELENBQVA7QUFDSCxJQUFBLFNBcEZQO2dCQXNGTSxnQkFBZ0IsU0FBaEIsYUFBZ0IsQ0FBQyxJQUFELEVBQU8sT0FBUCxFQUFpQztBQUFBLElBQUEsZ0JBQWpCLE9BQWlCLHlEQUFQLEVBQU87O0FBQzdDLElBQUEsbUJBQU8sV0FBVyxJQUFYLEVBQWlCLENBQWpCLEVBQW9CLENBQXBCLEVBQXVCLE9BQXZCLEVBQWdDLE9BQWhDLENBQVA7QUFDSCxJQUFBLFNBeEZQOztBQTBGQSxJQUFBLGVBQU87QUFDSCxJQUFBLHNCQUFVLFFBRFA7QUFFSCxJQUFBLDRCQUFnQixjQUZiO0FBR0gsSUFBQSwyQkFBZSxhQUhaO0FBSUgsSUFBQSwwQkFBYyxZQUpYO0FBS0gsSUFBQSx5QkFBYSxXQUxWO0FBTUgsSUFBQSwyQkFBZSxhQU5aO0FBT0gsSUFBQSxxQkFBUyxFQUFFLE9BQUYsQ0FBVSxVQUFVLE9BQXBCLEVBQTZCLGNBQTdCLENBUE47QUFRSCxJQUFBLG9CQUFRLEVBQUUsT0FBRixDQUFVLFVBQVUsT0FBcEIsRUFBNkIsYUFBN0IsQ0FSTDtBQVNILElBQUEsbUJBQU8sRUFBRSxPQUFGLENBQVUsVUFBVSxPQUFwQixFQUE2QixZQUE3QixDQVRKO0FBVUgsSUFBQSxrQkFBTSxFQUFFLE9BQUYsQ0FBVSxVQUFVLE9BQXBCLEVBQTZCLFdBQTdCLENBVkg7QUFXSCxJQUFBLDJCQUFlLEVBQUUsT0FBRixDQUFVLFVBQVUsT0FBcEIsRUFBNkIsYUFBN0IsQ0FYWjtBQVlILElBQUEsOEJBQWtCLEVBQUUsT0FBRixDQUFVLFVBQVUsZ0JBQXBCLEVBQXNDLGNBQXRDLENBWmY7QUFhSCxJQUFBLDZCQUFpQixFQUFFLE9BQUYsQ0FBVSxVQUFVLGdCQUFwQixFQUFzQyxhQUF0QyxDQWJkO0FBY0gsSUFBQSw0QkFBZ0IsRUFBRSxPQUFGLENBQVUsVUFBVSxnQkFBcEIsRUFBc0MsWUFBdEMsQ0FkYjtBQWVILElBQUEsMkJBQWUsRUFBRSxPQUFGLENBQVUsVUFBVSxnQkFBcEIsRUFBc0MsV0FBdEMsQ0FmWjtBQWdCSCxJQUFBLDZCQUFpQixFQUFFLE9BQUYsQ0FBVSxVQUFVLGdCQUFwQixFQUFzQyxhQUF0QyxDQWhCZDtBQWlCSCxJQUFBLHFCQUFTO0FBakJOLElBQUEsU0FBUDtBQW1CSCxJQUFBLEtBOUdEOztBQWdIQSxJQUFBLFdBQU8sU0FBUDtBQUNILElBQUEsQ0F4S0Q7O0FBMEtBLElBQUEsVUFBVSxTQUFWLEdBQXNCLFNBQXRCO0FBQ0EsSUFBQSxVQUFVLFlBQVYsR0FBeUIsWUFBekI7Ozs7Iiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
;
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,i;function c(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function y(e,t,n,s){return Ot(e,t,n,s,!0).utc()}function g(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=g(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function v(e){var t=y(NaN);return null!=e?_(g(t),e):g(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var r=c.momentProperties=[];function w(e,t){var n,s,i;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),0<r.length)for(n=0;n<r.length;n++)l(i=t[s=r[n]])||(e[s]=i);return e}var t=!1;function M(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,c.updateOffset(this),t=!1)}function S(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function D(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function k(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=D(t)),n}function a(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&k(e[s])!==k(t[s]))&&a++;return a+r}function Y(e){!1===c.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return _(function(){if(null!=c.deprecationHandler&&c.deprecationHandler(null,i),a){for(var e,t=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var s in e+="\n["+n+"] ",arguments[0])e+=s+": "+arguments[0][s]+", ";e=e.slice(0,-2)}else e=arguments[n];t.push(e)}Y(i+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),a=!1}return r.apply(this,arguments)},r)}var s,O={};function T(e,t){null!=c.deprecationHandler&&c.deprecationHandler(e,t),O[e]||(Y(t),O[e]=!0)}function x(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=_({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},_(s[n],e[n]),_(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=_({},s[n]));return s}function P(e){null!=e&&this.set(e)}c.suppressDeprecationWarnings=!1,c.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};var W={};function H(e,t){var n=e.toLowerCase();W[n]=W[n+"s"]=W[t]=e}function R(e){return"string"==typeof e?W[e]||W[e.toLowerCase()]:void 0}function C(e){var t,n,s={};for(n in e)m(e,n)&&(t=R(n))&&(s[t]=e[n]);return s}var F={};function L(e,t){F[e]=t}function U(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},E={};function I(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(E[e]=i),t&&(E[t[0]]=function(){return U(i.apply(this,arguments),t[1],t[2])}),n&&(E[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function A(e,t){return e.isValid()?(t=j(t,e.localeData()),V[t]=V[t]||function(s){var e,i,t,r=s.match(N);for(e=0,i=r.length;e<i;e++)E[r[e]]?r[e]=E[r[e]]:r[e]=(t=r[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,n="";for(t=0;t<i;t++)n+=x(r[t])?r[t].call(e,s):r[t];return n}}(t),V[t](e)):e.localeData().invalidDate()}function j(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;0<=n&&G.test(e);)e=e.replace(G,s),G.lastIndex=0,n-=1;return e}var Z=/\d/,z=/\d\d/,$=/\d{3}/,q=/\d{4}/,J=/[+-]?\d{6}/,B=/\d\d?/,Q=/\d\d\d\d?/,X=/\d\d\d\d\d\d?/,K=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ne=/\d+/,se=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,re=/Z|[+-]\d\d(?::?\d\d)?/gi,ae=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,oe={};function ue(e,n,s){oe[e]=x(n)?n:function(e,t){return e&&s?s:n}}function le(e,t){return m(oe,e)?oe[e](t._strict,t._locale):new RegExp(de(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function de(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var he={};function ce(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),d(n)&&(s=function(e,t){t[n]=k(e)}),t=0;t<e.length;t++)he[e[t]]=s}function fe(e,i){ce(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var me=0,_e=1,ye=2,ge=3,pe=4,ve=5,we=6,Me=7,Se=8;function De(e){return ke(e)?366:365}function ke(e){return e%4==0&&e%100!=0||e%400==0}I("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),H("year","y"),L("year",1),ue("Y",se),ue("YY",B,z),ue("YYYY",ee,q),ue("YYYYY",te,J),ue("YYYYYY",te,J),ce(["YYYYY","YYYYYY"],me),ce("YYYY",function(e,t){t[me]=2===e.length?c.parseTwoDigitYear(e):k(e)}),ce("YY",function(e,t){t[me]=c.parseTwoDigitYear(e)}),ce("Y",function(e,t){t[me]=parseInt(e,10)}),c.parseTwoDigitYear=function(e){return k(e)+(68<k(e)?1900:2e3)};var Ye,Oe=Te("FullYear",!0);function Te(t,n){return function(e){return null!=e?(be(this,t,e),c.updateOffset(this,n),this):xe(this,t)}}function xe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function be(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ke(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Pe(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Pe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?ke(e)?29:28:31-s%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),H("month","M"),L("month",8),ue("M",B),ue("MM",B,z),ue("MMM",function(e,t){return t.monthsShortRegex(e)}),ue("MMMM",function(e,t){return t.monthsRegex(e)}),ce(["M","MM"],function(e,t){t[_e]=k(e)-1}),ce(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[_e]=i:g(n).invalidMonth=e});var We=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,He="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Re="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=k(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Pe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Fe(e){return null!=e?(Ce(this,e),c.updateOffset(this,!0),this):xe(this,"Month")}var Le=ae;var Ue=ae;function Ne(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++)n=y([2e3,t]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++)s[t]=de(s[t]),i[t]=de(i[t]);for(t=0;t<24;t++)r[t]=de(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ge(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ve(e,t,n){var s=7+t-n;return-((7+Ge(e,0,s).getUTCDay()-t)%7)+s-1}function Ee(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+Ve(e,s,i);return o<=0?a=De(r=e-1)+o:o>De(e)?(r=e+1,a=o-De(e)):(r=e,a=o),{year:r,dayOfYear:a}}function Ie(e,t,n){var s,i,r=Ve(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+Ae(i=e.year()-1,t,n):a>Ae(e.year(),t,n)?(s=a-Ae(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function Ae(e,t,n){var s=Ve(e,t,n),i=Ve(e+1,t,n);return(De(e)-s+i)/7}I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),H("week","w"),H("isoWeek","W"),L("week",5),L("isoWeek",5),ue("w",B),ue("ww",B,z),ue("W",B),ue("WW",B,z),fe(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=k(e)});I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),H("day","d"),H("weekday","e"),H("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),ue("d",B),ue("e",B),ue("E",B),ue("dd",function(e,t){return t.weekdaysMinRegex(e)}),ue("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ue("dddd",function(e,t){return t.weekdaysRegex(e)}),fe(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e}),fe(["d","e","E"],function(e,t,n,s){t[s]=k(e)});var je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var $e=ae;var qe=ae;var Je=ae;function Be(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],l=[];for(t=0;t<7;t++)n=y([2e3,1]).day(t),s=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),r=this.weekdays(n,""),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);for(a.sort(e),o.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)o[t]=de(o[t]),u[t]=de(u[t]),l[t]=de(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Qe(){return this.hours()%12||12}function Xe(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ke(e,t){return t._meridiemParse}I("H",["HH",2],0,"hour"),I("h",["hh",2],0,Qe),I("k",["kk",2],0,function(){return this.hours()||24}),I("hmm",0,0,function(){return""+Qe.apply(this)+U(this.minutes(),2)}),I("hmmss",0,0,function(){return""+Qe.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),I("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),I("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),H("hour","h"),L("hour",13),ue("a",Ke),ue("A",Ke),ue("H",B),ue("h",B),ue("k",B),ue("HH",B,z),ue("hh",B,z),ue("kk",B,z),ue("hmm",Q),ue("hmmss",X),ue("Hmm",Q),ue("Hmmss",X),ce(["H","HH"],ge),ce(["k","kk"],function(e,t,n){var s=k(e);t[ge]=24===s?0:s}),ce(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ce(["h","hh"],function(e,t,n){t[ge]=k(e),g(n).bigHour=!0}),ce("hmm",function(e,t,n){var s=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s)),g(n).bigHour=!0}),ce("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s,2)),t[ve]=k(e.substr(i)),g(n).bigHour=!0}),ce("Hmm",function(e,t,n){var s=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s))}),ce("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s,2)),t[ve]=k(e.substr(i))});var et,tt=Te("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:He,monthsShort:Re,week:{dow:0,doy:6},weekdays:je,weekdaysMin:ze,weekdaysShort:Ze,meridiemParse:/[ap]\.?m?\.?/i},st={},it={};function rt(e){return e?e.toLowerCase().replace("_","-"):e}function at(e){var t=null;if(!st[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=et._abbr,require("./locale/"+e),ot(t)}catch(e){}return st[e]}function ot(e,t){var n;return e&&((n=l(t)?lt(e):ut(e,t))?et=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function ut(e,t){if(null!==t){var n,s=nt;if(t.abbr=e,null!=st[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=st[e]._config;else if(null!=t.parentLocale)if(null!=st[t.parentLocale])s=st[t.parentLocale]._config;else{if(null==(n=at(t.parentLocale)))return it[t.parentLocale]||(it[t.parentLocale]=[]),it[t.parentLocale].push({name:e,config:t}),null;s=n._config}return st[e]=new P(b(s,t)),it[e]&&it[e].forEach(function(e){ut(e.name,e.config)}),ot(e),st[e]}return delete st[e],null}function lt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!o(e)){if(t=at(e))return t;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=rt(e[r]).split("-")).length,n=(n=rt(e[r+1]))?n.split("-"):null;0<t;){if(s=at(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&a(i,n,!0)>=t-1)break;t--}r++}return et}(e)}function dt(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[_e]<0||11<n[_e]?_e:n[ye]<1||n[ye]>Pe(n[me],n[_e])?ye:n[ge]<0||24<n[ge]||24===n[ge]&&(0!==n[pe]||0!==n[ve]||0!==n[we])?ge:n[pe]<0||59<n[pe]?pe:n[ve]<0||59<n[ve]?ve:n[we]<0||999<n[we]?we:-1,g(e)._overflowDayOfYear&&(t<me||ye<t)&&(t=ye),g(e)._overflowWeeks&&-1===t&&(t=Me),g(e)._overflowWeekday&&-1===t&&(t=Se),g(e).overflow=t),e}function ht(e,t,n){return null!=e?e:null!=t?t:n}function ct(e){var t,n,s,i,r,a=[];if(!e._d){var o,u;for(o=e,u=new Date(c.now()),s=o._useUTC?[u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()]:[u.getFullYear(),u.getMonth(),u.getDate()],e._w&&null==e._a[ye]&&null==e._a[_e]&&function(e){var t,n,s,i,r,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,a=4,n=ht(t.GG,e._a[me],Ie(Tt(),1,4).year),s=ht(t.W,1),((i=ht(t.E,1))<1||7<i)&&(u=!0);else{r=e._locale._week.dow,a=e._locale._week.doy;var l=Ie(Tt(),r,a);n=ht(t.gg,e._a[me],l.year),s=ht(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r}s<1||s>Ae(n,r,a)?g(e)._overflowWeeks=!0:null!=u?g(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[me]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=ht(e._a[me],s[me]),(e._dayOfYear>De(r)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=Ge(r,0,e._dayOfYear),e._a[_e]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=s[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ge]&&0===e._a[pe]&&0===e._a[ve]&&0===e._a[we]&&(e._nextDay=!0,e._a[ge]=0),e._d=(e._useUTC?Ge:function(e,t,n,s,i,r,a){var o=new Date(e,t,n,s,i,r,a);return e<100&&0<=e&&isFinite(o.getFullYear())&&o.setFullYear(e),o}).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ge]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((\-?\d+)/i;function vt(e){var t,n,s,i,r,a,o=e._i,u=ft.exec(o)||mt.exec(o);if(u){for(g(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(u[1])){i=yt[t][0],s=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){r=(u[2]||" ")+gt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!_t.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),kt(e)}else e._isValid=!1}var wt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Mt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),Re.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}var St={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Dt(e){var t,n,s,i=wt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(i){var r=Mt(i[4],i[3],i[2],i[5],i[6],i[7]);if(t=i[1],n=r,s=e,t&&Ze.indexOf(t)!==new Date(n[0],n[1],n[2]).getDay()&&(g(s).weekdayMismatch=!0,!(s._isValid=!1)))return;e._a=r,e._tzm=function(e,t,n){if(e)return St[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(i[8],i[9],i[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function kt(e){if(e._f!==c.ISO_8601)if(e._f!==c.RFC_2822){e._a=[],g(e).empty=!0;var t,n,s,i,r,a,o,u,l=""+e._i,d=l.length,h=0;for(s=j(e._f,e._locale).match(N)||[],t=0;t<s.length;t++)i=s[t],(n=(l.match(le(i,e))||[])[0])&&(0<(r=l.substr(0,l.indexOf(n))).length&&g(e).unusedInput.push(r),l=l.slice(l.indexOf(n)+n.length),h+=n.length),E[i]?(n?g(e).empty=!1:g(e).unusedTokens.push(i),a=i,u=e,null!=(o=n)&&m(he,a)&&he[a](o,u._a,u,a)):e._strict&&!n&&g(e).unusedTokens.push(i);g(e).charsLeftOver=d-h,0<l.length&&g(e).unusedInput.push(l),e._a[ge]<=12&&!0===g(e).bigHour&&0<e._a[ge]&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[ge]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[ge],e._meridiem),ct(e),dt(e)}else Dt(e);else vt(e)}function Yt(e){var t,n,s,i,r=e._i,a=e._f;return e._locale=e._locale||lt(e._l),null===r||void 0===a&&""===r?v({nullInput:!0}):("string"==typeof r&&(e._i=r=e._locale.preparse(r)),S(r)?new M(dt(r)):(h(r)?e._d=r:o(a)?function(e){var t,n,s,i,r;if(0===e._f.length)return g(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],kt(t),p(t)&&(r+=g(t).charsLeftOver,r+=10*g(t).unusedTokens.length,g(t).score=r,(null==s||r<s)&&(s=r,n=t));_(e,n||t)}(e):a?kt(e):l(n=(t=e)._i)?t._d=new Date(c.now()):h(n)?t._d=new Date(n.valueOf()):"string"==typeof n?(s=t,null===(i=pt.exec(s._i))?(vt(s),!1===s._isValid&&(delete s._isValid,Dt(s),!1===s._isValid&&(delete s._isValid,c.createFromInputFallback(s)))):s._d=new Date(+i[1])):o(n)?(t._a=f(n.slice(0),function(e){return parseInt(e,10)}),ct(t)):u(n)?function(e){if(!e._d){var t=C(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ct(e)}}(t):d(n)?t._d=new Date(n):c.createFromInputFallback(t),p(e)||(e._d=null),e))}function Ot(e,t,n,s,i){var r,a={};return!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new M(dt(Yt(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Tt(e,t,n,s){return Ot(e,t,n,s,!1)}c.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var xt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()}),bt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:v()});function Pt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Tt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ht(e){var t=C(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Ye.call(Wt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,s=0;s<Wt.length;++s)if(e[Wt[s]]){if(n)return!1;parseFloat(e[Wt[s]])!==k(e[Wt[s]])&&(n=!0)}return!0}(t),this._milliseconds=+d+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=lt(),this._bubble()}function Rt(e){return e instanceof Ht}function Ct(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){I(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+U(~~(e/60),2)+n+U(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),ue("Z",re),ue("ZZ",re),ce(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ut(re,e)});var Lt=/([\+\-]|\d\d)/gi;function Ut(e,t){var n=(t||"").match(e);if(null===n)return null;var s=((n[n.length-1]||[])+"").match(Lt)||["-",0,0],i=60*s[1]+k(s[2]);return 0===i?0:"+"===s[0]?i:-i}function Nt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(S(e)||h(e)?e.valueOf():Tt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),c.updateOffset(n,!1),n):Tt(e).local()}function Gt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Vt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}c.updateOffset=function(){};var Et=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,It=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function At(e,t){var n,s,i,r=e,a=null;return Rt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:d(e)?(r={},t?r[t]=e:r.milliseconds=e):(a=Et.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:k(a[ye])*n,h:k(a[ge])*n,m:k(a[pe])*n,s:k(a[ve])*n,ms:k(Ct(1e3*a[we]))*n}):(a=It.exec(e))?(n="-"===a[1]?-1:(a[1],1),r={y:jt(a[2],n),M:jt(a[3],n),w:jt(a[4],n),d:jt(a[5],n),h:jt(a[6],n),m:jt(a[7],n),s:jt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Nt(t,e),e.isBefore(t)?n=Zt(e,t):((n=Zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Tt(r.from),Tt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ht(r),Rt(e)&&m(e,"_locale")&&(s._locale=e._locale),s}function jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Zt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function zt(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(T(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),$t(this,At(e="string"==typeof e?+e:e,t),s),this}}function $t(e,t,n,s){var i=t._milliseconds,r=Ct(t._days),a=Ct(t._months);e.isValid()&&(s=null==s||s,a&&Ce(e,xe(e,"Month")+a*n),r&&be(e,"Date",xe(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&c.updateOffset(e,r||a))}At.fn=Ht.prototype,At.invalid=function(){return At(NaN)};var qt=zt(1,"add"),Jt=zt(-1,"subtract");function Bt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function Qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=lt(e))&&(this._locale=t),this)}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}function en(e,t){I(0,[e,e.length],0,t)}function tn(e,t,n,s,i){var r;return null==e?Ie(this,s,i).year:((r=Ae(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ge(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),en("gggg","weekYear"),en("ggggg","weekYear"),en("GGGG","isoWeekYear"),en("GGGGG","isoWeekYear"),H("weekYear","gg"),H("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),ue("G",se),ue("g",se),ue("GG",B,z),ue("gg",B,z),ue("GGGG",ee,q),ue("gggg",ee,q),ue("GGGGG",te,J),ue("ggggg",te,J),fe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=k(e)}),fe(["gg","GG"],function(e,t,n,s){t[s]=c.parseTwoDigitYear(e)}),I("Q",0,"Qo","quarter"),H("quarter","Q"),L("quarter",7),ue("Q",Z),ce("Q",function(e,t){t[_e]=3*(k(e)-1)}),I("D",["DD",2],"Do","date"),H("date","D"),L("date",9),ue("D",B),ue("DD",B,z),ue("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],ye),ce("Do",function(e,t){t[ye]=k(e.match(B)[0])});var nn=Te("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear"),H("dayOfYear","DDD"),L("dayOfYear",4),ue("DDD",K),ue("DDDD",$),ce(["DDD","DDDD"],function(e,t,n){n._dayOfYear=k(e)}),I("m",["mm",2],0,"minute"),H("minute","m"),L("minute",14),ue("m",B),ue("mm",B,z),ce(["m","mm"],pe);var sn=Te("Minutes",!1);I("s",["ss",2],0,"second"),H("second","s"),L("second",15),ue("s",B),ue("ss",B,z),ce(["s","ss"],ve);var rn,an=Te("Seconds",!1);for(I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),H("millisecond","ms"),L("millisecond",16),ue("S",K,Z),ue("SS",K,z),ue("SSS",K,$),rn="SSSS";rn.length<=9;rn+="S")ue(rn,ne);function on(e,t){t[we]=k(1e3*("0."+e))}for(rn="S";rn.length<=9;rn+="S")ce(rn,on);var un=Te("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var ln=M.prototype;function dn(e){return e}ln.add=qt,ln.calendar=function(e,t){var n=e||Tt(),s=Nt(n,this).startOf("day"),i=c.calendarFormat(this,s)||"sameElse",r=t&&(x(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,Tt(n)))},ln.clone=function(){return new M(this)},ln.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Nt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=R(t)){case"year":r=Bt(this,s)/12;break;case"month":r=Bt(this,s);break;case"quarter":r=Bt(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:D(r)},ln.endOf=function(e){return void 0===(e=R(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ln.format=function(e){e||(e=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var t=A(this,e);return this.localeData().postformat(t)},ln.from=function(e,t){return this.isValid()&&(S(e)&&e.isValid()||Tt(e).isValid())?At({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.fromNow=function(e){return this.from(Tt(),e)},ln.to=function(e,t){return this.isValid()&&(S(e)&&e.isValid()||Tt(e).isValid())?At({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.toNow=function(e){return this.to(Tt(),e)},ln.get=function(e){return x(this[e=R(e)])?this[e]():this},ln.invalidAt=function(){return g(this).overflow},ln.isAfter=function(e,t){var n=S(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=R(l(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},ln.isBefore=function(e,t){var n=S(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=R(l(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},ln.isBetween=function(e,t,n,s){return("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n))},ln.isSame=function(e,t){var n,s=S(e)?e:Tt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=R(t||"millisecond"))?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},ln.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ln.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ln.isValid=function(){return p(this)},ln.lang=Xt,ln.locale=Qt,ln.localeData=Kt,ln.max=bt,ln.min=xt,ln.parsingFlags=function(){return _({},g(this))},ln.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:F[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=C(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(x(this[e=R(e)]))return this[e](t);return this},ln.startOf=function(e){switch(e=R(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ln.subtract=Jt,ln.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ln.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ln.toDate=function(){return new Date(this.valueOf())},ln.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?A(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",A(n,"Z")):A(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ln.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+s+"-MM-DD[T]HH:mm:ss.SSS"+i)},ln.toJSON=function(){return this.isValid()?this.toISOString():null},ln.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ln.unix=function(){return Math.floor(this.valueOf()/1e3)},ln.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ln.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ln.year=Oe,ln.isLeapYear=function(){return ke(this.year())},ln.weekYear=function(e){return tn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ln.isoWeekYear=function(e){return tn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ln.quarter=ln.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ln.month=Fe,ln.daysInMonth=function(){return Pe(this.year(),this.month())},ln.week=ln.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ln.isoWeek=ln.isoWeeks=function(e){var t=Ie(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ln.weeksInYear=function(){var e=this.localeData()._week;return Ae(this.year(),e.dow,e.doy)},ln.isoWeeksInYear=function(){return Ae(this.year(),1,4)},ln.date=nn,ln.day=ln.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},ln.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ln.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=(n=e,s=this.localeData(),"string"==typeof n?s.weekdaysParse(n)%7||7:isNaN(n)?null:n);return this.day(this.day()%7?t:t-7)}return this.day()||7;var n,s},ln.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ln.hour=ln.hours=tt,ln.minute=ln.minutes=sn,ln.second=ln.seconds=an,ln.millisecond=ln.milliseconds=un,ln.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ut(re,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Gt(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?$t(this,At(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Gt(this)},ln.utc=function(e){return this.utcOffset(0,e)},ln.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Gt(this),"m")),this},ln.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ut(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ln.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ln.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ln.isLocal=function(){return!!this.isValid()&&!this._isUTC},ln.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ln.isUtc=Vt,ln.isUTC=Vt,ln.zoneAbbr=function(){return this._isUTC?"UTC":""},ln.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ln.dates=n("dates accessor is deprecated. Use date instead.",nn),ln.months=n("months accessor is deprecated. Use month instead",Fe),ln.years=n("years accessor is deprecated. Use year instead",Oe),ln.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ln.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e={};if(w(e,this),(e=Yt(e))._a){var t=e._isUTC?y(e._a):Tt(e._a);this._isDSTShifted=this.isValid()&&0<a(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var hn=P.prototype;function cn(e,t,n,s){var i=lt(),r=y().set(s,t);return i[n](r,e)}function fn(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return cn(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=cn(e,s,n,"month");return i}function mn(e,t,n,s){"boolean"==typeof e?d(t)&&(n=t,t=void 0):(t=e,e=!1,d(n=t)&&(n=t,t=void 0)),t=t||"";var i,r=lt(),a=e?r._week.dow:0;if(null!=n)return cn(t,(n+a)%7,s,"day");var o=[];for(i=0;i<7;i++)o[i]=cn(t,(i+a)%7,s,"day");return o}hn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return x(s)?s.call(t,n):s},hn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},hn.invalidDate=function(){return this._invalidDate},hn.ordinal=function(e){return this._ordinal.replace("%d",e)},hn.preparse=dn,hn.postformat=dn,hn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return x(i)?i(e,t,n,s):i.replace(/%d/i,e)},hn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return x(n)?n(t):n.replace(/%s/i,t)},hn.set=function(e){var t,n;for(n in e)x(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},hn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||We).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},hn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[We.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},hn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=y([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=y([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},hn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=Ue),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},hn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Le),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},hn.week=function(e){return Ie(e,this._week.dow,this._week.doy).week},hn.firstDayOfYear=function(){return this._week.doy},hn.firstDayOfWeek=function(){return this._week.dow},hn.weekdays=function(e,t){return e?o(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:o(this._weekdays)?this._weekdays:this._weekdays.standalone},hn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},hn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},hn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=y([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=y([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},hn.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=$e),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},hn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},hn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},hn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},hn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ot("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===k(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),c.lang=n("moment.lang is deprecated. Use moment.locale instead.",ot),c.langData=n("moment.langData is deprecated. Use moment.localeData instead.",lt);var _n=Math.abs;function yn(e,t,n,s){var i=At(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function gn(e){return e<0?Math.floor(e):Math.ceil(e)}function pn(e){return 4800*e/146097}function vn(e){return 146097*e/4800}function wn(e){return function(){return this.as(e)}}var Mn=wn("ms"),Sn=wn("s"),Dn=wn("m"),kn=wn("h"),Yn=wn("d"),On=wn("w"),Tn=wn("M"),xn=wn("y");function bn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Pn=bn("milliseconds"),Wn=bn("seconds"),Hn=bn("minutes"),Rn=bn("hours"),Cn=bn("days"),Fn=bn("months"),Ln=bn("years");var Un=Math.round,Nn={ss:44,s:45,m:45,h:22,d:26,M:11};var Gn=Math.abs;function Vn(e){return(0<e)-(e<0)||+e}function En(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Gn(this._milliseconds)/1e3,s=Gn(this._days),i=Gn(this._months);t=D((e=D(n/60))/60),n%=60,e%=60;var r=D(i/12),a=i%=12,o=s,u=t,l=e,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var c=h<0?"-":"",f=Vn(this._months)!==Vn(h)?"-":"",m=Vn(this._days)!==Vn(h)?"-":"",_=Vn(this._milliseconds)!==Vn(h)?"-":"";return c+"P"+(r?f+r+"Y":"")+(a?f+a+"M":"")+(o?m+o+"D":"")+(u||l||d?"T":"")+(u?_+u+"H":"")+(l?_+l+"M":"")+(d?_+d+"S":"")}var In=Ht.prototype;return In.isValid=function(){return this._isValid},In.abs=function(){var e=this._data;return this._milliseconds=_n(this._milliseconds),this._days=_n(this._days),this._months=_n(this._months),e.milliseconds=_n(e.milliseconds),e.seconds=_n(e.seconds),e.minutes=_n(e.minutes),e.hours=_n(e.hours),e.months=_n(e.months),e.years=_n(e.years),this},In.add=function(e,t){return yn(this,e,t,1)},In.subtract=function(e,t){return yn(this,e,t,-1)},In.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=R(e))||"year"===e)return t=this._days+s/864e5,n=this._months+pn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(vn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},In.asMilliseconds=Mn,In.asSeconds=Sn,In.asMinutes=Dn,In.asHours=kn,In.asDays=Yn,In.asWeeks=On,In.asMonths=Tn,In.asYears=xn,In.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12):NaN},In._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864e5*gn(vn(o)+a),o=a=0),u.milliseconds=r%1e3,e=D(r/1e3),u.seconds=e%60,t=D(e/60),u.minutes=t%60,n=D(t/60),u.hours=n%24,o+=i=D(pn(a+=D(n/24))),a-=gn(vn(i)),s=D(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},In.clone=function(){return At(this)},In.get=function(e){return e=R(e),this.isValid()?this[e+"s"]():NaN},In.milliseconds=Pn,In.seconds=Wn,In.minutes=Hn,In.hours=Rn,In.days=Cn,In.weeks=function(){return D(this.days()/7)},In.months=Fn,In.years=Ln,In.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,n,s,i,r,a,o,u,l,d,h,c=this.localeData(),f=(n=!e,s=c,i=At(t=this).abs(),r=Un(i.as("s")),a=Un(i.as("m")),o=Un(i.as("h")),u=Un(i.as("d")),l=Un(i.as("M")),d=Un(i.as("y")),(h=r<=Nn.ss&&["s",r]||r<Nn.s&&["ss",r]||a<=1&&["m"]||a<Nn.m&&["mm",a]||o<=1&&["h"]||o<Nn.h&&["hh",o]||u<=1&&["d"]||u<Nn.d&&["dd",u]||l<=1&&["M"]||l<Nn.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=n,h[3]=0<+t,h[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,h));return e&&(f=c.pastFuture(+this,f)),c.postformat(f)},In.toISOString=En,In.toString=En,In.toJSON=En,In.locale=Qt,In.localeData=Kt,In.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),In.lang=Xt,I("X",0,0,"unix"),I("x",0,0,"valueOf"),ue("x",se),ue("X",/[+-]?\d+(\.\d{1,3})?/),ce("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ce("x",function(e,t,n){n._d=new Date(k(e))}),c.version="2.22.2",e=Tt,c.fn=ln,c.min=function(){return Pt("isBefore",[].slice.call(arguments,0))},c.max=function(){return Pt("isAfter",[].slice.call(arguments,0))},c.now=function(){return Date.now?Date.now():+new Date},c.utc=y,c.unix=function(e){return Tt(1e3*e)},c.months=function(e,t){return fn(e,t,"months")},c.isDate=h,c.locale=ot,c.invalid=v,c.duration=At,c.isMoment=S,c.weekdays=function(e,t,n){return mn(e,t,n,"weekdays")},c.parseZone=function(){return Tt.apply(null,arguments).parseZone()},c.localeData=lt,c.isDuration=Rt,c.monthsShort=function(e,t){return fn(e,t,"monthsShort")},c.weekdaysMin=function(e,t,n){return mn(e,t,n,"weekdaysMin")},c.defineLocale=ut,c.updateLocale=function(e,t){if(null!=t){var n,s,i=nt;null!=(s=at(e))&&(i=s._config),(n=new P(t=b(i,t))).parentLocale=st[e],st[e]=n,ot(e)}else null!=st[e]&&(null!=st[e].parentLocale?st[e]=st[e].parentLocale:null!=st[e]&&delete st[e]);return st[e]},c.locales=function(){return s(st)},c.weekdaysShort=function(e,t,n){return mn(e,t,n,"weekdaysShort")},c.normalizeUnits=R,c.relativeTimeRounding=function(e){return void 0===e?Un:"function"==typeof e&&(Un=e,!0)},c.relativeTimeThreshold=function(e,t){return void 0!==Nn[e]&&(void 0===t?Nn[e]:(Nn[e]=t,"s"===e&&(Nn.ss=t-1),!0))},c.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},c.prototype=ln,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},c});
/* This program is free software. It comes without any warranty, to
 * the extent permitted by applicable law. You can redistribute it
 * and/or modify it under the terms of the Do What The Fuck You Want
 * To Public License, Version 2, as published by Sam Hocevar. See
 * http://sam.zoy.org/wtfpl/COPYING for more details. */

/* Original work by "lehelk" http://lehelk.com/2011/05/06/script-to-remove-diacritics/
   depending of the usecase you may want to add the uppercase letters from this website to the alphabet and change the regex flags */


(function(){
  var alphabet = { a:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/ig,
    aa:/[\uA733]/ig,
    ae:/[\u00E6\u01FD\u01E3]/ig,
    ao:/[\uA735]/ig,
    au:/[\uA737]/ig,
    av:/[\uA739\uA73B]/ig,
    ay:/[\uA73D]/ig,
    b:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/ig,
    c:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/ig,
    d:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/ig,
    dz:/[\u01F3\u01C6]/ig,
    e:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/ig,
    f:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/ig,
    g:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/ig,
    h:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/ig,
    hv:/[\u0195]/ig,
    i:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/ig,
    j:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/ig,
    k:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/ig,
    l:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/ig,
    lj:/[\u01C9]/ig,
    m:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/ig,
    n:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/ig,
    nj:/[\u01CC]/ig,
    o:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/ig,
    oi:/[\u01A3]/ig,
    ou:/[\u0223]/ig,
    oo:/[\uA74F]/ig,
    oe:/[\u0153]/ig,
    p:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/ig,
    q:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/ig,
    r:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/ig,
    s:/[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/ig,
    ss:/[\u00DF\u1E9E]/ig,
    t:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/ig,
    tz:/[\uA729]/ig,
    u:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/ig,
    v:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/ig,
    vy:/[\uA761]/ig,
    w:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/ig,
    x:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/ig,
    y:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/ig,
    z:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/ig,
    '':/[\u0300\u0301\u0302\u0303\u0308]/ig
  };
  replaceDiacritics = function(str) {
    for (var letter in alphabet) {
      str = str.replace(alphabet[letter], letter);
    }
    return str;
  };
}());
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.2
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */

(function(){"use strict";var t=this,i=t.Chart,e=function(t){this.canvas=t.canvas,this.ctx=t;var i=function(t,i){return t["offset"+i]?t["offset"+i]:document.defaultView.getComputedStyle(t).getPropertyValue(i)},e=this.width=i(t.canvas,"Width"),n=this.height=i(t.canvas,"Height");t.canvas.width=e,t.canvas.height=n;var e=this.width=t.canvas.width,n=this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,s.retinaScale(this),this};e.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},e.types={};var s=e.helpers={},n=s.each=function(t,i,e){var s=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var n;for(n=0;n<t.length;n++)i.apply(e,[t[n],n].concat(s))}else for(var o in t)i.apply(e,[t[o],o].concat(s))},o=s.clone=function(t){var i={};return n(t,function(e,s){t.hasOwnProperty(s)&&(i[s]=e)}),i},a=s.extend=function(t){return n(Array.prototype.slice.call(arguments,1),function(i){n(i,function(e,s){i.hasOwnProperty(s)&&(t[s]=e)})}),t},h=s.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),a.apply(null,t)},l=s.indexOf=function(t,i){if(Array.prototype.indexOf)return t.indexOf(i);for(var e=0;e<t.length;e++)if(t[e]===i)return e;return-1},r=(s.where=function(t,i){var e=[];return s.each(t,function(t){i(t)&&e.push(t)}),e},s.findNextWhere=function(t,i,e){e||(e=-1);for(var s=e+1;s<t.length;s++){var n=t[s];if(i(n))return n}},s.findPreviousWhere=function(t,i,e){e||(e=t.length);for(var s=e-1;s>=0;s--){var n=t[s];if(i(n))return n}},s.inherits=function(t){var i=this,e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},s=function(){this.constructor=e};return s.prototype=i.prototype,e.prototype=new s,e.extend=r,t&&a(e.prototype,t),e.__super__=i.prototype,e}),c=s.noop=function(){},u=s.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=s.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=s.amd="function"==typeof define&&define.amd,f=s.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=s.max=function(t){return Math.max.apply(Math,t)},m=s.min=function(t){return Math.min.apply(Math,t)},v=(s.cap=function(t,i,e){if(f(i)){if(t>i)return i}else if(f(e)&&e>t)return e;return t},s.getDecimalPlaces=function(t){return t%1!==0&&f(t)?t.toString().split(".")[1].length:0}),S=s.radians=function(t){return t*(Math.PI/180)},x=(s.getAngleFromPoint=function(t,i){var e=i.x-t.x,s=i.y-t.y,n=Math.sqrt(e*e+s*s),o=2*Math.PI+Math.atan2(s,e);return 0>e&&0>s&&(o+=2*Math.PI),{angle:o,distance:n}},s.aliasPixel=function(t){return t%2===0?0:.5}),y=(s.splineCurve=function(t,i,e,s){var n=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),o=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),a=s*n/(n+o),h=s*o/(n+o);return{inner:{x:i.x-a*(e.x-t.x),y:i.y-a*(e.y-t.y)},outer:{x:i.x+h*(e.x-t.x),y:i.y+h*(e.y-t.y)}}},s.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),C=(s.calculateScaleRange=function(t,i,e,s,n){var o=2,a=Math.floor(i/(1.5*e)),h=o>=a,l=g(t),r=m(t);l===r&&(l+=.5,r>=.5&&!s?r-=.5:l+=.5);for(var c=Math.abs(l-r),u=y(c),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),p=s?0:Math.floor(r/(1*Math.pow(10,u)))*Math.pow(10,u),f=d-p,v=Math.pow(10,u),S=Math.round(f/v);(S>a||a>2*S)&&!h;)if(S>a)v*=2,S=Math.round(f/v),S%1!==0&&(h=!0);else if(n&&u>=0){if(v/2%1!==0)break;v/=2,S=Math.round(f/v)}else v/=2,S=Math.round(f/v);return h&&(S=o,v=f/S),{steps:S,stepValue:v,min:p,max:p+S*v}},s.template=function(t,i){function e(t,i){var e=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):s[t]=s[t];return i?e(i):e}if(t instanceof Function)return t(i);var s={};return e(t,i)}),w=(s.generateLabels=function(t,i,e,s){var o=new Array(i);return labelTemplateString&&n(o,function(i,n){o[n]=C(t,{value:e+s*(n+1)})}),o},s.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:1==(t/=1)?1:(e||(e=.3),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e)))},easeOutElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:1==(t/=1)?1:(e||(e=.3),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),s*Math.pow(2,-10*t)*Math.sin(2*(1*t-i)*Math.PI/e)+1)},easeInOutElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:2==(t/=.5)?1:(e||(e=.3*1.5),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e):s*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e)*.5+1)},easeInBack:function(t){var i=1.70158;return 1*(t/=1)*t*((i+1)*t-i)},easeOutBack:function(t){var i=1.70158;return 1*((t=t/1-1)*t*((i+1)*t+i)+1)},easeInOutBack:function(t){var i=1.70158;return(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},easeInBounce:function(t){return 1-w.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*w.easeInBounce(2*t):.5*w.easeOutBounce(2*t-1)+.5}}),b=s.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),P=s.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),L=(s.animationLoop=function(t,i,e,s,n,o){var a=0,h=w[e]||w.linear,l=function(){a++;var e=a/i,r=h(e);t.call(o,r,e,a),s.call(o,r,e),i>a?o.animationFrame=b(l):n.apply(o)};b(l)},s.getRelativePosition=function(t){var i,e,s=t.originalEvent||t,n=t.currentTarget||t.srcElement,o=n.getBoundingClientRect();return s.touches?(i=s.touches[0].clientX-o.left,e=s.touches[0].clientY-o.top):(i=s.clientX-o.left,e=s.clientY-o.top),{x:i,y:e}},s.addEvent=function(t,i,e){t.addEventListener?t.addEventListener(i,e):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e}),k=s.removeEvent=function(t,i,e){t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent?t.detachEvent("on"+i,e):t["on"+i]=c},F=(s.bindEvents=function(t,i,e){t.events||(t.events={}),n(i,function(i){t.events[i]=function(){e.apply(t,arguments)},L(t.chart.canvas,i,t.events[i])})},s.unbindEvents=function(t,i){n(i,function(i,e){k(t.chart.canvas,e,i)})}),R=s.getMaximumWidth=function(t){var i=t.parentNode;return i.clientWidth},T=s.getMaximumHeight=function(t){var i=t.parentNode;return i.clientHeight},A=(s.getMaximumSize=s.getMaximumWidth,s.retinaScale=function(t){var i=t.ctx,e=t.canvas.width,s=t.canvas.height;window.devicePixelRatio&&(i.canvas.style.width=e+"px",i.canvas.style.height=s+"px",i.canvas.height=s*window.devicePixelRatio,i.canvas.width=e*window.devicePixelRatio,i.scale(window.devicePixelRatio,window.devicePixelRatio))}),M=s.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},W=s.fontString=function(t,i,e){return i+" "+t+"px "+e},z=s.longestText=function(t,i,e){t.font=i;var s=0;return n(e,function(i){var e=t.measureText(i).width;s=e>s?e:s}),s},B=s.drawRoundedRectangle=function(t,i,e,s,n,o){t.beginPath(),t.moveTo(i+o,e),t.lineTo(i+s-o,e),t.quadraticCurveTo(i+s,e,i+s,e+o),t.lineTo(i+s,e+n-o),t.quadraticCurveTo(i+s,e+n,i+s-o,e+n),t.lineTo(i+o,e+n),t.quadraticCurveTo(i,e+n,i,e+n-o),t.lineTo(i,e+o),t.quadraticCurveTo(i,e,i+o,e),t.closePath()};e.instances={},e.Type=function(t,i,s){this.options=i,this.chart=s,this.id=u(),e.instances[this.id]=this,i.responsive&&this.resize(),this.initialize.call(this,t)},a(e.Type.prototype,{initialize:function(){return this},clear:function(){return M(this.chart),this},stop:function(){return P(this.animationFrame),this},resize:function(t){this.stop();var i=this.chart.canvas,e=R(this.chart.canvas),s=this.options.maintainAspectRatio?e/this.chart.aspectRatio:T(this.chart.canvas);return i.width=this.chart.width=e,i.height=this.chart.height=s,A(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(t){return t&&this.reflow(),this.options.animation&&!t?s.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return C(this.options.legendTemplate,this)},destroy:function(){this.clear(),F(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete e.instances[this.id]},showTooltip:function(t,i){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(t){var i=!1;return t.length!==this.activeElements.length?i=!0:(n(t,function(t,e){t!==this.activeElements[e]&&(i=!0)},this),i)}.call(this,t);if(o||i){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var a,h,r=this.datasets.length-1;r>=0&&(a=this.datasets[r].points||this.datasets[r].bars||this.datasets[r].segments,h=l(a,t[0]),-1===h);r--);var c=[],u=[],d=function(){var t,i,e,n,o,a=[],l=[],r=[];return s.each(this.datasets,function(i){t=i.points||i.bars||i.segments,t[h]&&t[h].hasValue()&&a.push(t[h])}),s.each(a,function(t){l.push(t.x),r.push(t.y),c.push(s.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),o=m(r),e=g(r),n=m(l),i=g(l),{x:n>this.chart.width/2?n:i,y:(o+e)/2}}.call(this,h);new e.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else n(t,function(t){var i=t.tooltipPosition();new e.Tooltip({x:Math.round(i.x),y:Math.round(i.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:C(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),e.Type.extend=function(t){var i=this,s=function(){return i.apply(this,arguments)};if(s.prototype=o(i.prototype),a(s.prototype,t),s.extend=e.Type.extend,t.name||i.prototype.name){var n=t.name||i.prototype.name,l=e.defaults[i.prototype.name]?o(e.defaults[i.prototype.name]):{};e.defaults[n]=a(l,t.defaults),e.types[n]=s,e.prototype[n]=function(t,i){var o=h(e.defaults.global,e.defaults[n],i||{});return new s(t,o,this)}}else d("Name not provided for this chart, so it hasn't been registered");return i},e.Element=function(t){a(this,t),this.initialize.apply(this,arguments),this.save()},a(e.Element.prototype,{initialize:function(){},restore:function(t){return t?n(t,function(t){this[t]=this._saved[t]},this):a(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return n(t,function(t,i){this._saved[i]=this[i],this[i]=t},this),this},transition:function(t,i){return n(t,function(t,e){this[e]=(t-this._saved[e])*i+this._saved[e]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}}),e.Element.extend=r,e.Point=e.Element.extend({display:!0,inRange:function(t,i){var e=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(i-this.y,2)<Math.pow(e,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),e.Arc=e.Element.extend({inRange:function(t,i){var e=s.getAngleFromPoint(this,{x:t,y:i}),n=e.angle>=this.startAngle&&e.angle<=this.endAngle,o=e.distance>=this.innerRadius&&e.distance<=this.outerRadius;return n&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,i=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*i,y:this.y+Math.sin(t)*i}},draw:function(t){var i=this.ctx;i.beginPath(),i.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),i.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),i.closePath(),i.strokeStyle=this.strokeColor,i.lineWidth=this.strokeWidth,i.fillStyle=this.fillColor,i.fill(),i.lineJoin="bevel",this.showStroke&&i.stroke()}}),e.Rectangle=e.Element.extend({draw:function(){var t=this.ctx,i=this.width/2,e=this.x-i,s=this.x+i,n=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(e+=o,s-=o,n+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(e,this.base),t.lineTo(e,n),t.lineTo(s,n),t.lineTo(s,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,i){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&i>=this.y&&i<=this.base}}),e.Tooltip=e.Element.extend({draw:function(){var t=this.chart.ctx;t.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var i=this.caretPadding=2,e=t.measureText(this.text).width+2*this.xPadding,s=this.fontSize+2*this.yPadding,n=s+this.caretHeight+i;this.x+e/2>this.chart.width?this.xAlign="left":this.x-e/2<0&&(this.xAlign="right"),this.y-n<0&&(this.yAlign="below");var o=this.x-e/2,a=this.y-n;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-i),t.lineTo(this.x+this.caretHeight,this.y-(i+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(i+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+i+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+i),t.lineTo(this.x+this.caretHeight,this.y+i+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+i+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-e+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}B(t,o,a,e,s,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+e/2,a+s/2)}}}),e.MultiTooltip=e.Element.extend({initialize:function(){this.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=W(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,i=z(this.ctx,this.font,this.labels)+this.fontSize+3,e=g([i,t]);this.width=e+2*this.xPadding;var s=this.height/2;this.y-s<0?this.y=s:this.y+s>this.chart.height&&(this.y=this.chart.height-s),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var i=this.y-this.height/2+this.yPadding,e=t-1;return 0===t?i+this.titleFontSize/2:i+(1.5*this.fontSize*e+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{B(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,s.each(this.labels,function(i,e){t.fillStyle=this.textColor,t.fillText(i,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(e+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[e].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),e.Scale=e.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(C(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?z(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,i=this.endPoint-this.startPoint;for(this.calculateYRange(i),this.buildYLabels(),this.calculateXLabelRotation();i>this.endPoint-this.startPoint;)i=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(i),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,i,e=this.ctx.measureText(this.xLabels[0]).width,s=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=s/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var n,o=z(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)n=Math.cos(S(this.xLabelRotation)),t=n*e,i=n*s,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=n*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(S(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var i=this.drawingArea()/(this.min-this.max);return this.endPoint-i*(t-this.min)},calculateX:function(t){var i=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),e=i/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),s=e*t+this.xScalePaddingLeft;return this.offsetGridLines&&(s+=e/2),Math.round(s)},update:function(t){s.extend(this,t),this.fit()},draw:function(){var t=this.ctx,i=(this.endPoint-this.startPoint)/this.steps,e=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,n(this.yLabels,function(n,o){var a=this.endPoint-i*o,h=Math.round(a),l=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(n,e-10,a),0!==o||l||(l=!0),l&&t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),h+=s.aliasPixel(t.lineWidth),l&&(t.moveTo(e,h),t.lineTo(this.width,h),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(e-5,h),t.lineTo(e,h),t.stroke(),t.closePath()},this),n(this.xLabels,function(i,e){var s=this.calculateX(e)+x(this.lineWidth),n=this.calculateX(e-(this.offsetGridLines?.5:0))+x(this.lineWidth),o=this.xLabelRotation>0,a=this.showVerticalLines;0!==e||a||(a=!0),a&&t.beginPath(),e>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a&&(t.moveTo(n,this.endPoint),t.lineTo(n,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n,this.endPoint),t.lineTo(n,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(s,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*S(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(i,0,0),t.restore()},this))}}),e.RadialScale=e.Element.extend({initialize:function(){this.size=m([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var i=this.drawingArea/(this.max-this.min);return(t-this.min)*i},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(C(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,i,e,s,n,o,a,h,l,r,c,u,d=m([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,g=0;for(this.ctx.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),i=0;i<this.valuesCount;i++)t=this.getPointPosition(i,d),e=this.ctx.measureText(C(this.templateString,{value:this.labels[i]})).width+5,0===i||i===this.valuesCount/2?(s=e/2,t.x+s>p&&(p=t.x+s,n=i),t.x-s<g&&(g=t.x-s,a=i)):i<this.valuesCount/2?t.x+e>p&&(p=t.x+e,n=i):i>this.valuesCount/2&&t.x-e<g&&(g=t.x-e,a=i);l=g,r=Math.ceil(p-this.width),o=this.getIndexAngle(n),h=this.getIndexAngle(a),c=r/Math.sin(o+Math.PI/2),u=l/Math.sin(h+Math.PI/2),c=f(c)?c:0,u=f(u)?u:0,this.drawingArea=d-(u+c)/2,this.setCenterPoint(u,c)},setCenterPoint:function(t,i){var e=this.width-i-this.drawingArea,s=t+this.drawingArea;this.xCenter=(s+e)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var i=2*Math.PI/this.valuesCount;return t*i-Math.PI/2},getPointPosition:function(t,i){var e=this.getIndexAngle(t);return{x:Math.cos(e)*i+this.xCenter,y:Math.sin(e)*i+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(n(this.yLabels,function(i,e){if(e>0){var s,n=e*(this.drawingArea/this.steps),o=this.yCenter-n;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,n,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var a=0;a<this.valuesCount;a++)s=this.getPointPosition(a,this.calculateCenterOffset(this.min+e*this.stepValue)),0===a?t.moveTo(s.x,s.y):t.lineTo(s.x,s.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var h=t.measureText(i).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-h/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,h+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(i,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var i=this.valuesCount-1;i>=0;i--){if(this.angleLineWidth>0){var e=this.getPointPosition(i,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(e.x,e.y),t.stroke(),t.closePath()}var s=this.getPointPosition(i,this.calculateCenterOffset(this.max)+5);t.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,a=this.labels.length/2,h=a/2,l=h>i||i>o-h,r=i===h||i===o-h;t.textAlign=0===i?"center":i===a?"center":a>i?"left":"right",t.textBaseline=r?"middle":l?"bottom":"top",t.fillText(this.labels[i],s.x,s.y)}}}}}),s.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){n(e.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define(function(){return e}):"object"==typeof module&&module.exports&&(module.exports=e),t.Chart=e,e.noConflict=function(){return t.Chart=i,e}}).call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Bar",defaults:s,initialize:function(t){var s=this.options;this.ScaleClass=i.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,i,e){var n=this.calculateBaseWidth(),o=this.calculateX(e)-n/2,a=this.calculateBarWidth(t);return o+a*i+i*s.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*s.barValueSpacing},calculateBarWidth:function(t){var i=this.calculateBaseWidth()-(t-1)*s.barDatasetSpacing;return i/t}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),this.BarClass=i.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,bars:[]};this.datasets.push(s),e.each(i.data,function(e,n){s.bars.push(new this.BarClass({value:e,label:t.labels[n],datasetLabel:i.label,strokeColor:i.strokeColor,fillColor:i.fillColor,highlightFill:i.highlightFill||i.fillColor,highlightStroke:i.highlightStroke||i.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,i,s){e.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,s,i),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){e.each(this.datasets,function(i,s){e.each(i.bars,t,this,s)},this)},getBarsAtEvent:function(t){for(var i,s=[],n=e.getRelativePosition(t),o=function(t){s.push(t.bars[i])},a=0;a<this.datasets.length;a++)for(i=0;i<this.datasets[a].bars.length;i++)if(this.datasets[a].bars[i].inRange(n.x,n.y))return e.each(this.datasets,o),s;return s},buildScale:function(t){var i=this,s=function(){var t=[];return i.eachBars(function(i){t.push(i.value)}),t},n={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(s(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(n,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(n)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:i,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor}))
},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){e.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();this.chart.ctx;this.scale.draw(i),e.each(this.datasets,function(t,s){e.each(t.bars,function(t,e){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,s,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Doughnut",defaults:s,initialize:function(t){this.segments=[],this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=i.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.calculateTotal(t),e.each(t,function(t,i){this.addData(t,i,!0)},this),this.render()},getSegmentsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(s.x,s.y)&&i.push(t)},this),i},addData:function(t,i,e){var s=i||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),e||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),e.each(this.activeElements,function(t){t.restore(["fillColor"])}),e.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,e.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t?t:1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i),t.endAngle=t.startAngle+t.circumference,t.draw(),0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)},this)}}),i.types.Doughnut.extend({name:"Pie",defaults:e.merge(s,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Line",defaults:s,initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s),e.each(i.data,function(e,n){s.points.push(new this.PointClass({value:e,label:t.labels[n],datasetLabel:i.label,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,i){e.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.datasets,function(t){e.each(t.points,function(t){t.inRange(s.x,s.y)&&i.push(t)})},this),i},buildScale:function(t){var s=this,n=function(){var t=[];return s.eachPoints(function(i){t.push(i.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(n(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(o,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new i.Scale(o)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();var s=this.chart.ctx,n=function(t){return null!==t.value},o=function(t,i,s){return e.findNextWhere(i,n,s)||t},a=function(t,i,s){return e.findPreviousWhere(i,n,s)||t};this.scale.draw(i),e.each(this.datasets,function(t){var h=e.where(t.points,n);e.each(t.points,function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},i)},this),this.options.bezierCurve&&e.each(h,function(t,i){var s=i>0&&i<h.length-1?this.options.bezierCurveTension:0;t.controlPoints=e.splineCurve(a(t,h,i),t,o(t,h,i),s),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),s.lineWidth=this.options.datasetStrokeWidth,s.strokeStyle=t.strokeColor,s.beginPath(),e.each(h,function(t,i){if(0===i)s.moveTo(t.x,t.y);else if(this.options.bezierCurve){var e=a(t,h,i);s.bezierCurveTo(e.controlPoints.outer.x,e.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else s.lineTo(t.x,t.y)},this),s.stroke(),this.options.datasetFill&&h.length>0&&(s.lineTo(h[h.length-1].x,this.scale.endPoint),s.lineTo(h[0].x,this.scale.endPoint),s.fillStyle=t.fillColor,s.closePath(),s.fill()),e.each(h,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"PolarArea",defaults:s,initialize:function(t){this.segments=[],this.SegmentArc=i.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new i.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),e.each(t,function(t,i){this.addData(t,i,!0)},this),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.render()},getSegmentsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(s.x,s.y)&&i.push(t)},this),i},addData:function(t,i,e){var s=i||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),e||(this.reflow(),this.update())},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[];e.each(t,function(t){i.push(t.value)});var s=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,s,{size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),e.each(this.segments,function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),e.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),e.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var i=t||1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},i),t.endAngle=t.startAngle+t.circumference,0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers;i.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s),e.each(i.data,function(e,n){var o;this.scale.animation||(o=this.scale.getPointPosition(n,this.scale.calculateCenterOffset(e))),s.points.push(new this.PointClass({value:e,label:t.labels[n],datasetLabel:i.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=e.getRelativePosition(t),s=e.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},i),n=2*Math.PI/this.scale.valuesCount,o=Math.round((s.angle-1.5*Math.PI)/n),a=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),s.distance<=this.scale.drawingArea&&e.each(this.datasets,function(t){a.push(t.points[o])}),a},buildScale:function(t){this.scale=new i.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return e.each(t,function(t){t.data?i=i.concat(t.data):e.each(t.points,function(t){i.push(t.value)})}),i}(),s=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,s)},addData:function(t,i){this.scale.valuesCount++,e.each(t,function(t,e){var s=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:s.x,y:s.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.labels.push(i),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),e.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var i=t||1,s=this.chart.ctx;this.clear(),this.scale.draw(),e.each(this.datasets,function(t){e.each(t.points,function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),i)},this),s.lineWidth=this.options.datasetStrokeWidth,s.strokeStyle=t.strokeColor,s.beginPath(),e.each(t.points,function(t,i){0===i?s.moveTo(t.x,t.y):s.lineTo(t.x,t.y)},this),s.closePath(),s.stroke(),s.fillStyle=t.fillColor,s.fill(),e.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this);
// https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {
        "use strict";
        if (this == null) {
            throw new TypeError();
        }
        var t = Object(this);
        var len = t.length >>> 0;
        if (len === 0) {
            return -1;
        }
        var n = 0;
        if (arguments.length > 1) {
            n = Number(arguments[1]);
            if (n != n) { // shortcut for verifying if it's NaN
                n = 0;
            } else if (n != 0 && n != Infinity && n != -Infinity) {
                n = (n > 0 || -1) * Math.floor(Math.abs(n));
            }
        }
        if (n >= len) {
            return -1;
        }
        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);
        for (; k < len; k++) {
            if (k in t && t[k] === searchElement) {
                return k;
            }
        }
        return -1;
    }
}

// Production steps of ECMA-262, Edition 5, 15.4.4.18
// Reference: http://es5.github.com/#x15.4.4.18
// https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach
if ( !Array.prototype.forEach ) {

  Array.prototype.forEach = function forEach( callback, thisArg ) {

    var T, k;

    if ( this == null ) {
      throw new TypeError( "this is null or not defined" );
    }

    // 1. Let O be the result of calling ToObject passing the |this| value as the argument.
    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get internal method of O with the argument "length".
    // 3. Let len be ToUint32(lenValue).
    var len = O.length >>> 0; // Hack to convert O.length to a UInt32

    // 4. If IsCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if ( {}.toString.call(callback) !== "[object Function]" ) {
      throw new TypeError( callback + " is not a function" );
    }

    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
    if ( thisArg ) {
      T = thisArg;
    }

    // 6. Let k be 0
    k = 0;

    // 7. Repeat, while k < len
    while( k < len ) {

      var kValue;

      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      if ( Object.prototype.hasOwnProperty.call(O, k) ) {

        // i. Let kValue be the result of calling the Get internal method of O with argument Pk.
        kValue = O[ k ];

        // ii. Call the Call internal method of callback with T as the this value and
        // argument list containing kValue, k, and O.
        callback.call( T, kValue, k, O );
      }
      // d. Increase k by 1.
      k++;
    }
    // 8. return undefined
  };
}

// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some
if (!Array.prototype.some)
{
  Array.prototype.some = function(fun /*, thisArg */)
  {
    'use strict';

    if (this === void 0 || this === null)
      throw new TypeError();

    var t = Object(this);
    var len = t.length >>> 0;
    if (typeof fun !== 'function')
      throw new TypeError();

    var thisArg = arguments.length >= 2 ? arguments[1] : void 0;
    for (var i = 0; i < len; i++)
    {
      if (i in t && fun.call(thisArg, t[i], i, t))
        return true;
    }

    return false;
  };
}

// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map
if (!Array.prototype.map) {

  Array.prototype.map = function(callback/*, thisArg*/) {

    var T, A, k;

    if (this == null) {
      throw new TypeError('this is null or not defined');
    }

    // 1. Let O be the result of calling ToObject passing the |this| 
    //    value as the argument.
    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get internal 
    //    method of O with the argument "length".
    // 3. Let len be ToUint32(lenValue).
    var len = O.length >>> 0;

    // 4. If IsCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if (typeof callback !== 'function') {
      throw new TypeError(callback + ' is not a function');
    }

    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
    if (arguments.length > 1) {
      T = arguments[1];
    }

    // 6. Let A be a new array created as if by the expression new Array(len) 
    //    where Array is the standard built-in constructor with that name and 
    //    len is the value of len.
    A = new Array(len);

    // 7. Let k be 0
    k = 0;

    // 8. Repeat, while k < len
    while (k < len) {

      var kValue, mappedValue;

      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty internal 
      //    method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      if (k in O) {

        // i. Let kValue be the result of calling the Get internal 
        //    method of O with argument Pk.
        kValue = O[k];

        // ii. Let mappedValue be the result of calling the Call internal 
        //     method of callback with T as the this value and argument 
        //     list containing kValue, k, and O.
        mappedValue = callback.call(T, kValue, k, O);

        // iii. Call the DefineOwnProperty internal method of A with arguments
        // Pk, Property Descriptor
        // { Value: mappedValue,
        //   Writable: true,
        //   Enumerable: true,
        //   Configurable: true },
        // and false.

        // In browsers that support Object.defineProperty, use the following:
        // Object.defineProperty(A, k, {
        //   value: mappedValue,
        //   writable: true,
        //   enumerable: true,
        //   configurable: true
        // });

        // For best browser support, use the following:
        A[k] = mappedValue;
      }
      // d. Increase k by 1.
      k++;
    }

    // 9. return A
    return A;
  };
}
;
// I18n.js
// =======
//
// This small library provides the Rails I18n API on the Javascript.
// You don't actually have to use Rails (or even Ruby) to use I18n.js.
// Just make sure you export all translations in an object like this:
//
//     I18n.translations.en = {
//       hello: "Hello World"
//     };
//
// See tests for specific formatting like numbers and dates.
//

// Using UMD pattern from
// https://github.com/umdjs/umd#regular-module
// `returnExports.js` version
;(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.
    define("i18n", function(){ return factory(root);});
  } else if (typeof module === 'object' && module.exports) {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory(root);
  } else {
    // Browser globals (root is window)
    root.I18n = factory(root);
  }
}(this, function(global) {
  "use strict";

  // Use previously defined object if exists in current scope
  var I18n = global && global.I18n || {};

  // Just cache the Array#slice function.
  var slice = Array.prototype.slice;

  // Apply number padding.
  var padding = function(number) {
    return ("0" + number.toString()).substr(-2);
  };

  // Improved toFixed number rounding function with support for unprecise floating points
  // JavaScript's standard toFixed function does not round certain numbers correctly (for example 0.105 with precision 2).
  var toFixed = function(number, precision) {
    return decimalAdjust('round', number, -precision).toFixed(precision);
  };

  // Is a given variable an object?
  // Borrowed from Underscore.js
  var isObject = function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object'
  };

  var isFunction = function(func) {
    var type = typeof func;
    return type === 'function'
  };

  // Check if value is different than undefined and null;
  var isSet = function(value) {
    return typeof(value) !== 'undefined' && value !== null;
  };

  // Is a given value an array?
  // Borrowed from Underscore.js
  var isArray = function(val) {
    if (Array.isArray) {
      return Array.isArray(val);
    }
    return Object.prototype.toString.call(val) === '[object Array]';
  };

  var isString = function(val) {
    return typeof val === 'string' || Object.prototype.toString.call(val) === '[object String]';
  };

  var isNumber = function(val) {
    return typeof val === 'number' || Object.prototype.toString.call(val) === '[object Number]';
  };

  var isBoolean = function(val) {
    return val === true || val === false;
  };

  var isNull = function(val) {
    return val === null;
  };

  var decimalAdjust = function(type, value, exp) {
    // If the exp is undefined or zero...
    if (typeof exp === 'undefined' || +exp === 0) {
      return Math[type](value);
    }
    value = +value;
    exp = +exp;
    // If the value is not a number or the exp is not an integer...
    if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {
      return NaN;
    }
    // Shift
    value = value.toString().split('e');
    value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));
    // Shift back
    value = value.toString().split('e');
    return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));
  }

  var lazyEvaluate = function(message, scope) {
    if (isFunction(message)) {
      return message(scope);
    } else {
      return message;
    }
  }

  var merge = function (dest, obj) {
    var key, value;
    for (key in obj) if (obj.hasOwnProperty(key)) {
      value = obj[key];
      if (isString(value) || isNumber(value) || isBoolean(value) || isArray(value) || isNull(value)) {
        dest[key] = value;
      } else {
        if (dest[key] == null) dest[key] = {};
        merge(dest[key], value);
      }
    }
    return dest;
  };

  // Set default days/months translations.
  var DATE = {
      day_names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
    , abbr_day_names: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
    , month_names: [null, "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
    , abbr_month_names: [null, "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
    , meridian: ["AM", "PM"]
  };

  // Set default number format.
  var NUMBER_FORMAT = {
      precision: 3
    , separator: "."
    , delimiter: ","
    , strip_insignificant_zeros: false
  };

  // Set default currency format.
  var CURRENCY_FORMAT = {
      unit: "$"
    , precision: 2
    , format: "%u%n"
    , sign_first: true
    , delimiter: ","
    , separator: "."
  };

  // Set default percentage format.
  var PERCENTAGE_FORMAT = {
      unit: "%"
    , precision: 3
    , format: "%n%u"
    , separator: "."
    , delimiter: ""
  };

  // Set default size units.
  var SIZE_UNITS = [null, "kb", "mb", "gb", "tb"];

  // Other default options
  var DEFAULT_OPTIONS = {
    // Set default locale. This locale will be used when fallback is enabled and
    // the translation doesn't exist in a particular locale.
      defaultLocale: "en"
    // Set the current locale to `en`.
    , locale: "en"
    // Set the translation key separator.
    , defaultSeparator: "."
    // Set the placeholder format. Accepts `{{placeholder}}` and `%{placeholder}`.
    , placeholder: /(?:\{\{|%\{)(.*?)(?:\}\}?)/gm
    // Set if engine should fallback to the default locale when a translation
    // is missing.
    , fallbacks: false
    // Set the default translation object.
    , translations: {}
    // Set missing translation behavior. 'message' will display a message
    // that the translation is missing, 'guess' will try to guess the string
    , missingBehaviour: 'message'
    // if you use missingBehaviour with 'message', but want to know that the
    // string is actually missing for testing purposes, you can prefix the
    // guessed string by setting the value here. By default, no prefix!
    , missingTranslationPrefix: ''
  };

  // Set default locale. This locale will be used when fallback is enabled and
  // the translation doesn't exist in a particular locale.
  I18n.reset = function() {
    var key;
    for (key in DEFAULT_OPTIONS) {
      this[key] = DEFAULT_OPTIONS[key];
    }
  };

  // Much like `reset`, but only assign options if not already assigned
  I18n.initializeOptions = function() {
    var key;
    for (key in DEFAULT_OPTIONS) if (!isSet(this[key])) {
      this[key] = DEFAULT_OPTIONS[key];
    }
  };
  I18n.initializeOptions();

  // Return a list of all locales that must be tried before returning the
  // missing translation message. By default, this will consider the inline option,
  // current locale and fallback locale.
  //
  //     I18n.locales.get("de-DE");
  //     // ["de-DE", "de", "en"]
  //
  // You can define custom rules for any locale. Just make sure you return a array
  // containing all locales.
  //
  //     // Default the Wookie locale to English.
  //     I18n.locales["wk"] = function(locale) {
  //       return ["en"];
  //     };
  //
  I18n.locales = {};

  // Retrieve locales based on inline locale, current locale or default to
  // I18n's detection.
  I18n.locales.get = function(locale) {
    var result = this[locale] || this[I18n.locale] || this["default"];

    if (isFunction(result)) {
      result = result(locale);
    }

    if (isArray(result) === false) {
      result = [result];
    }

    return result;
  };

  // The default locale list.
  I18n.locales["default"] = function(locale) {
    var locales = []
      , list = []
    ;

    // Handle the inline locale option that can be provided to
    // the `I18n.t` options.
    if (locale) {
      locales.push(locale);
    }

    // Add the current locale to the list.
    if (!locale && I18n.locale) {
      locales.push(I18n.locale);
    }

    // Add the default locale if fallback strategy is enabled.
    if (I18n.fallbacks && I18n.defaultLocale) {
      locales.push(I18n.defaultLocale);
    }

    // Locale code format 1:
    // According to RFC4646 (http://www.ietf.org/rfc/rfc4646.txt)
    // language codes for Traditional Chinese should be `zh-Hant`
    //
    // But due to backward compatibility
    // We use older version of IETF language tag
    // @see http://www.w3.org/TR/html401/struct/dirlang.html
    // @see http://en.wikipedia.org/wiki/IETF_language_tag
    //
    // Format: `language-code = primary-code ( "-" subcode )*`
    //
    // primary-code uses ISO639-1
    // @see http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes
    // @see http://www.iso.org/iso/home/standards/language_codes.htm
    //
    // subcode uses ISO 3166-1 alpha-2
    // @see http://en.wikipedia.org/wiki/ISO_3166
    // @see http://www.iso.org/iso/country_codes.htm
    //
    // @note
    //   subcode can be in upper case or lower case
    //   defining it in upper case is a convention only


    // Locale code format 2:
    // Format: `code = primary-code ( "-" region-code )*`
    // primary-code uses ISO 639-1
    // script-code uses ISO 15924
    // region-code uses ISO 3166-1 alpha-2
    // Example: zh-Hant-TW, en-HK, zh-Hant-CN
    //
    // It is similar to RFC4646 (or actually the same),
    // but seems to be limited to language, script, region

    // Compute each locale with its country code.
    // So this will return an array containing
    // `de-DE` and `de`
    // or
    // `zh-hans-tw`, `zh-hans`, `zh`
    // locales.
    locales.forEach(function(locale) {
      var localeParts = locale.split("-");
      var firstFallback = null;
      var secondFallback = null;
      if (localeParts.length === 3) {
        firstFallback = [
          localeParts[0],
          localeParts[1]
        ].join("-");
        secondFallback = localeParts[0];
      }
      else if (localeParts.length === 2) {
        firstFallback = localeParts[0];
      }

      if (list.indexOf(locale) === -1) {
        list.push(locale);
      }

      if (! I18n.fallbacks) {
        return;
      }

      [
        firstFallback,
        secondFallback
      ].forEach(function(nullableFallbackLocale) {
        // We don't want null values
        if (typeof nullableFallbackLocale === "undefined") { return; }
        if (nullableFallbackLocale === null) { return; }
        // We don't want duplicate values
        //
        // Comparing with `locale` first is faster than
        // checking whether value's presence in the list
        if (nullableFallbackLocale === locale) { return; }
        if (list.indexOf(nullableFallbackLocale) !== -1) { return; }

        list.push(nullableFallbackLocale);
      });
    });

    // No locales set? English it is.
    if (!locales.length) {
      locales.push("en");
    }

    return list;
  };

  // Hold pluralization rules.
  I18n.pluralization = {};

  // Return the pluralizer for a specific locale.
  // If no specify locale is found, then I18n's default will be used.
  I18n.pluralization.get = function(locale) {
    return this[locale] || this[I18n.locale] || this["default"];
  };

  // The default pluralizer rule.
  // It detects the `zero`, `one`, and `other` scopes.
  I18n.pluralization["default"] = function(count) {
    switch (count) {
      case 0: return ["zero", "other"];
      case 1: return ["one"];
      default: return ["other"];
    }
  };

  // Return current locale. If no locale has been set, then
  // the current locale will be the default locale.
  I18n.currentLocale = function() {
    return this.locale || this.defaultLocale;
  };

  // Check if value is different than undefined and null;
  I18n.isSet = isSet;

  // Find and process the translation using the provided scope and options.
  // This is used internally by some functions and should not be used as an
  // public API.
  I18n.lookup = function(scope, options) {
    options = options || {}

    var locales = this.locales.get(options.locale).slice()
      , locale
      , scopes
      , fullScope
      , translations
    ;

    fullScope = this.getFullScope(scope, options);

    while (locales.length) {
      locale = locales.shift();
      scopes = fullScope.split(this.defaultSeparator);
      translations = this.translations[locale];

      if (!translations) {
        continue;
      }
      while (scopes.length) {
        translations = translations[scopes.shift()];

        if (translations === undefined || translations === null) {
          break;
        }
      }

      if (translations !== undefined && translations !== null) {
        return translations;
      }
    }

    if (isSet(options.defaultValue)) {
      return lazyEvaluate(options.defaultValue, scope);
    }
  };

  // lookup pluralization rule key into translations
  I18n.pluralizationLookupWithoutFallback = function(count, locale, translations) {
    var pluralizer = this.pluralization.get(locale)
      , pluralizerKeys = pluralizer(count)
      , pluralizerKey
      , message;

    if (isObject(translations)) {
      while (pluralizerKeys.length) {
        pluralizerKey = pluralizerKeys.shift();
        if (isSet(translations[pluralizerKey])) {
          message = translations[pluralizerKey];
          break;
        }
      }
    }

    return message;
  };

  // Lookup dedicated to pluralization
  I18n.pluralizationLookup = function(count, scope, options) {
    options = options || {}
    var locales = this.locales.get(options.locale).slice()
      , locale
      , scopes
      , translations
      , message
    ;
    scope = this.getFullScope(scope, options);

    while (locales.length) {
      locale = locales.shift();
      scopes = scope.split(this.defaultSeparator);
      translations = this.translations[locale];

      if (!translations) {
        continue;
      }

      while (scopes.length) {
        translations = translations[scopes.shift()];
        if (!isObject(translations)) {
          break;
        }
        if (scopes.length == 0) {
          message = this.pluralizationLookupWithoutFallback(count, locale, translations);
        }
      }
      if (message != null && message != undefined) {
        break;
      }
    }

    if (message == null || message == undefined) {
      if (isSet(options.defaultValue)) {
        if (isObject(options.defaultValue)) {
          message = this.pluralizationLookupWithoutFallback(count, options.locale, options.defaultValue);
        } else {
          message = options.defaultValue;
        }
        translations = options.defaultValue;
      }
    }

    return { message: message, translations: translations };
  };

  // Rails changed the way the meridian is stored.
  // It started with `date.meridian` returning an array,
  // then it switched to `time.am` and `time.pm`.
  // This function abstracts this difference and returns
  // the correct meridian or the default value when none is provided.
  I18n.meridian = function() {
    var time = this.lookup("time");
    var date = this.lookup("date");

    if (time && time.am && time.pm) {
      return [time.am, time.pm];
    } else if (date && date.meridian) {
      return date.meridian;
    } else {
      return DATE.meridian;
    }
  };

  // Merge serveral hash options, checking if value is set before
  // overwriting any value. The precedence is from left to right.
  //
  //     I18n.prepareOptions({name: "John Doe"}, {name: "Mary Doe", role: "user"});
  //     #=> {name: "John Doe", role: "user"}
  //
  I18n.prepareOptions = function() {
    var args = slice.call(arguments)
      , options = {}
      , subject
    ;

    while (args.length) {
      subject = args.shift();

      if (typeof(subject) != "object") {
        continue;
      }

      for (var attr in subject) {
        if (!subject.hasOwnProperty(attr)) {
          continue;
        }

        if (isSet(options[attr])) {
          continue;
        }

        options[attr] = subject[attr];
      }
    }

    return options;
  };

  // Generate a list of translation options for default fallbacks.
  // `defaultValue` is also deleted from options as it is returned as part of
  // the translationOptions array.
  I18n.createTranslationOptions = function(scope, options) {
    var translationOptions = [{scope: scope}];

    // Defaults should be an array of hashes containing either
    // fallback scopes or messages
    if (isSet(options.defaults)) {
      translationOptions = translationOptions.concat(options.defaults);
    }

    // Maintain support for defaultValue. Since it is always a message
    // insert it in to the translation options as such.
    if (isSet(options.defaultValue)) {
      translationOptions.push({ message: options.defaultValue });
    }

    return translationOptions;
  };

  // Translate the given scope with the provided options.
  I18n.translate = function(scope, options) {
    options = options || {}

    var translationOptions = this.createTranslationOptions(scope, options);

    var translation;

    var optionsWithoutDefault = this.prepareOptions(options)
    delete optionsWithoutDefault.defaultValue

    // Iterate through the translation options until a translation
    // or message is found.
    var translationFound =
      translationOptions.some(function(translationOption) {
        if (isSet(translationOption.scope)) {
          translation = this.lookup(translationOption.scope, optionsWithoutDefault);
        } else if (isSet(translationOption.message)) {
          translation = lazyEvaluate(translationOption.message, scope);
        }

        if (translation !== undefined && translation !== null) {
          return true;
        }
      }, this);

    if (!translationFound) {
      return this.missingTranslation(scope, options);
    }

    if (typeof(translation) === "string") {
      translation = this.interpolate(translation, options);
    } else if (isArray(translation)) {
      translation = translation.map(function(t) {
        return this.interpolate(t, options);
      }, this);
    } else if (isObject(translation) && isSet(options.count)) {
      translation = this.pluralize(options.count, scope, options);
    }

    return translation;
  };

  // This function interpolates the all variables in the given message.
  I18n.interpolate = function(message, options) {
    if (message === null) {
      return message;
    }

    options = options || {}
    var matches = message.match(this.placeholder)
      , placeholder
      , value
      , name
      , regex
    ;

    if (!matches) {
      return message;
    }

    var value;

    while (matches.length) {
      placeholder = matches.shift();
      name = placeholder.replace(this.placeholder, "$1");

      if (isSet(options[name])) {
        value = options[name].toString().replace(/\$/gm, "_#$#_");
      } else if (name in options) {
        value = this.nullPlaceholder(placeholder, message, options);
      } else {
        value = this.missingPlaceholder(placeholder, message, options);
      }

      regex = new RegExp(placeholder.replace(/\{/gm, "\\{").replace(/\}/gm, "\\}"));
      message = message.replace(regex, value);
    }

    return message.replace(/_#\$#_/g, "$");
  };

  // Pluralize the given scope using the `count` value.
  // The pluralized translation may have other placeholders,
  // which will be retrieved from `options`.
  I18n.pluralize = function(count, scope, options) {
    options = this.prepareOptions({count: String(count)}, options)
    var pluralizer, message, result;

    result = this.pluralizationLookup(count, scope, options);
    if (result.translations == undefined || result.translations == null) {
      return this.missingTranslation(scope, options);
    }

    if (result.message != undefined && result.message != null) {
      return this.interpolate(result.message, options);
    }
    else {
      pluralizer = this.pluralization.get(options.locale);
      return this.missingTranslation(scope + '.' + pluralizer(count)[0], options);
    }
  };

  // Return a missing translation message for the given parameters.
  I18n.missingTranslation = function(scope, options) {
    //guess intended string
    if(this.missingBehaviour == 'guess'){
      //get only the last portion of the scope
      var s = scope.split('.').slice(-1)[0];
      //replace underscore with space && camelcase with space and lowercase letter
      return (this.missingTranslationPrefix.length > 0 ? this.missingTranslationPrefix : '') +
          s.replace('_',' ').replace(/([a-z])([A-Z])/g,
          function(match, p1, p2) {return p1 + ' ' + p2.toLowerCase()} );
    }

    var localeForTranslation = (options != null && options.locale != null) ? options.locale : this.currentLocale();
    var fullScope           = this.getFullScope(scope, options);
    var fullScopeWithLocale = [localeForTranslation, fullScope].join(this.defaultSeparator);

    return '[missing "' + fullScopeWithLocale + '" translation]';
  };

  // Return a missing placeholder message for given parameters
  I18n.missingPlaceholder = function(placeholder, message, options) {
    return "[missing " + placeholder + " value]";
  };

  I18n.nullPlaceholder = function() {
    return I18n.missingPlaceholder.apply(I18n, arguments);
  };

  // Format number using localization rules.
  // The options will be retrieved from the `number.format` scope.
  // If this isn't present, then the following options will be used:
  //
  // - `precision`: `3`
  // - `separator`: `"."`
  // - `delimiter`: `","`
  // - `strip_insignificant_zeros`: `false`
  //
  // You can also override these options by providing the `options` argument.
  //
  I18n.toNumber = function(number, options) {
    options = this.prepareOptions(
        options
      , this.lookup("number.format")
      , NUMBER_FORMAT
    );

    var negative = number < 0
      , string = toFixed(Math.abs(number), options.precision).toString()
      , parts = string.split(".")
      , precision
      , buffer = []
      , formattedNumber
      , format = options.format || "%n"
      , sign = negative ? "-" : ""
    ;

    number = parts[0];
    precision = parts[1];

    while (number.length > 0) {
      buffer.unshift(number.substr(Math.max(0, number.length - 3), 3));
      number = number.substr(0, number.length -3);
    }

    formattedNumber = buffer.join(options.delimiter);

    if (options.strip_insignificant_zeros && precision) {
      precision = precision.replace(/0+$/, "");
    }

    if (options.precision > 0 && precision) {
      formattedNumber += options.separator + precision;
    }

    if (options.sign_first) {
      format = "%s" + format;
    }
    else {
      format = format.replace("%n", "%s%n");
    }

    formattedNumber = format
      .replace("%u", options.unit)
      .replace("%n", formattedNumber)
      .replace("%s", sign)
    ;

    return formattedNumber;
  };

  // Format currency with localization rules.
  // The options will be retrieved from the `number.currency.format` and
  // `number.format` scopes, in that order.
  //
  // Any missing option will be retrieved from the `I18n.toNumber` defaults and
  // the following options:
  //
  // - `unit`: `"$"`
  // - `precision`: `2`
  // - `format`: `"%u%n"`
  // - `delimiter`: `","`
  // - `separator`: `"."`
  //
  // You can also override these options by providing the `options` argument.
  //
  I18n.toCurrency = function(number, options) {
    options = this.prepareOptions(
        options
      , this.lookup("number.currency.format")
      , this.lookup("number.format")
      , CURRENCY_FORMAT
    );

    return this.toNumber(number, options);
  };

  // Localize several values.
  // You can provide the following scopes: `currency`, `number`, or `percentage`.
  // If you provide a scope that matches the `/^(date|time)/` regular expression
  // then the `value` will be converted by using the `I18n.toTime` function.
  //
  // It will default to the value's `toString` function.
  //
  I18n.localize = function(scope, value, options) {
    options || (options = {});

    switch (scope) {
      case "currency":
        return this.toCurrency(value);
      case "number":
        scope = this.lookup("number.format");
        return this.toNumber(value, scope);
      case "percentage":
        return this.toPercentage(value);
      default:
        var localizedValue;

        if (scope.match(/^(date|time)/)) {
          localizedValue = this.toTime(scope, value);
        } else {
          localizedValue = value.toString();
        }

        return this.interpolate(localizedValue, options);
    }
  };

  // Parse a given `date` string into a JavaScript Date object.
  // This function is time zone aware.
  //
  // The following string formats are recognized:
  //
  //    yyyy-mm-dd
  //    yyyy-mm-dd[ T]hh:mm::ss
  //    yyyy-mm-dd[ T]hh:mm::ss
  //    yyyy-mm-dd[ T]hh:mm::ssZ
  //    yyyy-mm-dd[ T]hh:mm::ss+0000
  //    yyyy-mm-dd[ T]hh:mm::ss+00:00
  //    yyyy-mm-dd[ T]hh:mm::ss.123Z
  //
  I18n.parseDate = function(date) {
    var matches, convertedDate, fraction;
    // we have a date, so just return it.
    if (typeof(date) == "object") {
      return date;
    };

    matches = date.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/);

    if (matches) {
      for (var i = 1; i <= 6; i++) {
        matches[i] = parseInt(matches[i], 10) || 0;
      }

      // month starts on 0
      matches[2] -= 1;

      fraction = matches[7] ? 1000 * ("0" + matches[7]) : null;

      if (matches[8]) {
        convertedDate = new Date(Date.UTC(matches[1], matches[2], matches[3], matches[4], matches[5], matches[6], fraction));
      } else {
        convertedDate = new Date(matches[1], matches[2], matches[3], matches[4], matches[5], matches[6], fraction);
      }
    } else if (typeof(date) == "number") {
      // UNIX timestamp
      convertedDate = new Date();
      convertedDate.setTime(date);
    } else if (date.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)) {
      // This format `Wed Jul 20 13:03:39 +0000 2011` is parsed by
      // webkit/firefox, but not by IE, so we must parse it manually.
      convertedDate = new Date();
      convertedDate.setTime(Date.parse([
        RegExp.$1, RegExp.$2, RegExp.$3, RegExp.$6, RegExp.$4, RegExp.$5
      ].join(" ")));
    } else if (date.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)) {
      // a valid javascript format with timezone info
      convertedDate = new Date();
      convertedDate.setTime(Date.parse(date));
    } else {
      // an arbitrary javascript string
      convertedDate = new Date();
      convertedDate.setTime(Date.parse(date));
    }

    return convertedDate;
  };

  // Formats time according to the directives in the given format string.
  // The directives begins with a percent (%) character. Any text not listed as a
  // directive will be passed through to the output string.
  //
  // The accepted formats are:
  //
  //     %a  - The abbreviated weekday name (Sun)
  //     %A  - The full weekday name (Sunday)
  //     %b  - The abbreviated month name (Jan)
  //     %B  - The full month name (January)
  //     %c  - The preferred local date and time representation
  //     %d  - Day of the month (01..31)
  //     %-d - Day of the month (1..31)
  //     %H  - Hour of the day, 24-hour clock (00..23)
  //     %-H - Hour of the day, 24-hour clock (0..23)
  //     %I  - Hour of the day, 12-hour clock (01..12)
  //     %-I - Hour of the day, 12-hour clock (1..12)
  //     %m  - Month of the year (01..12)
  //     %-m - Month of the year (1..12)
  //     %M  - Minute of the hour (00..59)
  //     %-M - Minute of the hour (0..59)
  //     %p  - Meridian indicator (AM  or  PM)
  //     %S  - Second of the minute (00..60)
  //     %-S - Second of the minute (0..60)
  //     %w  - Day of the week (Sunday is 0, 0..6)
  //     %y  - Year without a century (00..99)
  //     %-y - Year without a century (0..99)
  //     %Y  - Year with century
  //     %z  - Timezone offset (+0545)
  //
  I18n.strftime = function(date, format) {
    var options = this.lookup("date")
      , meridianOptions = I18n.meridian()
    ;

    if (!options) {
      options = {};
    }

    options = this.prepareOptions(options, DATE);

    if (isNaN(date.getTime())) {
      throw new Error('I18n.strftime() requires a valid date object, but received an invalid date.');
    }

    var weekDay = date.getDay()
      , day = date.getDate()
      , year = date.getFullYear()
      , month = date.getMonth() + 1
      , hour = date.getHours()
      , hour12 = hour
      , meridian = hour > 11 ? 1 : 0
      , secs = date.getSeconds()
      , mins = date.getMinutes()
      , offset = date.getTimezoneOffset()
      , absOffsetHours = Math.floor(Math.abs(offset / 60))
      , absOffsetMinutes = Math.abs(offset) - (absOffsetHours * 60)
      , timezoneoffset = (offset > 0 ? "-" : "+") +
          (absOffsetHours.toString().length < 2 ? "0" + absOffsetHours : absOffsetHours) +
          (absOffsetMinutes.toString().length < 2 ? "0" + absOffsetMinutes : absOffsetMinutes)
    ;

    if (hour12 > 12) {
      hour12 = hour12 - 12;
    } else if (hour12 === 0) {
      hour12 = 12;
    }

    format = format.replace("%a", options.abbr_day_names[weekDay]);
    format = format.replace("%A", options.day_names[weekDay]);
    format = format.replace("%b", options.abbr_month_names[month]);
    format = format.replace("%B", options.month_names[month]);
    format = format.replace("%d", padding(day));
    format = format.replace("%e", day);
    format = format.replace("%-d", day);
    format = format.replace("%H", padding(hour));
    format = format.replace("%-H", hour);
    format = format.replace("%I", padding(hour12));
    format = format.replace("%-I", hour12);
    format = format.replace("%m", padding(month));
    format = format.replace("%-m", month);
    format = format.replace("%M", padding(mins));
    format = format.replace("%-M", mins);
    format = format.replace("%p", meridianOptions[meridian]);
    format = format.replace("%S", padding(secs));
    format = format.replace("%-S", secs);
    format = format.replace("%w", weekDay);
    format = format.replace("%y", padding(year));
    format = format.replace("%-y", padding(year).replace(/^0+/, ""));
    format = format.replace("%Y", year);
    format = format.replace("%z", timezoneoffset);

    return format;
  };

  // Convert the given dateString into a formatted date.
  I18n.toTime = function(scope, dateString) {
    var date = this.parseDate(dateString)
      , format = this.lookup(scope)
    ;

    if (date.toString().match(/invalid/i)) {
      return date.toString();
    }

    if (!format) {
      return date.toString();
    }

    return this.strftime(date, format);
  };

  // Convert a number into a formatted percentage value.
  I18n.toPercentage = function(number, options) {
    options = this.prepareOptions(
        options
      , this.lookup("number.percentage.format")
      , this.lookup("number.format")
      , PERCENTAGE_FORMAT
    );

    return this.toNumber(number, options);
  };

  // Convert a number into a readable size representation.
  I18n.toHumanSize = function(number, options) {
    var kb = 1024
      , size = number
      , iterations = 0
      , unit
      , precision
    ;

    while (size >= kb && iterations < 4) {
      size = size / kb;
      iterations += 1;
    }

    if (iterations === 0) {
      unit = this.t("number.human.storage_units.units.byte", {count: size});
      precision = 0;
    } else {
      unit = this.t("number.human.storage_units.units." + SIZE_UNITS[iterations]);
      precision = (size - Math.floor(size) === 0) ? 0 : 1;
    }

    options = this.prepareOptions(
        options
      , {unit: unit, precision: precision, format: "%n%u", delimiter: ""}
    );

    return this.toNumber(size, options);
  };

  I18n.getFullScope = function(scope, options) {
    options = options || {}

    // Deal with the scope as an array.
    if (isArray(scope)) {
      scope = scope.join(this.defaultSeparator);
    }

    // Deal with the scope option provided through the second argument.
    //
    //    I18n.t('hello', {scope: 'greetings'});
    //
    if (options.scope) {
      scope = [options.scope, scope].join(this.defaultSeparator);
    }

    return scope;
  };
  /**
   * Merge obj1 with obj2 (shallow merge), without modifying inputs
   * @param {Object} obj1
   * @param {Object} obj2
   * @returns {Object} Merged values of obj1 and obj2
   *
   * In order to support ES3, `Object.prototype.hasOwnProperty.call` is used
   * Idea is from:
   * https://stackoverflow.com/questions/8157700/object-has-no-hasownproperty-method-i-e-its-undefined-ie8
   */
  I18n.extend = function ( obj1, obj2 ) {
    if (typeof(obj1) === "undefined" && typeof(obj2) === "undefined") {
      return {};
    }
    return merge(obj1, obj2);
  };

  // Set aliases, so we can save some typing.
  I18n.t = I18n.translate;
  I18n.l = I18n.localize;
  I18n.p = I18n.pluralize;

  return I18n;
}));

// Using UMD pattern from
// https://github.com/umdjs/umd#regular-module
// `returnExports.js` version
;(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.
    define(["i18n"], factory);
  } else if (typeof module === 'object' && module.exports) {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    factory(require("i18n"));
  } else {
    // Browser globals (root is window)
    factory(root.I18n);
  }
}(this, function(I18n) {
  "use strict";

  I18n.translations = {"en":{"activemodel":{"errors":{"format":"%{attribute} %{message}","messages":{"accepted":"must be accepted","blank":"must not be blank","confirmation":"confirmation does not match","empty":"can not be empty","equal_to":"must be equal to %{count}","even":"must be even","exclusion":"is reserved","greater_than":"must be greater than %{count}","greater_than_or_equal_to":"must be greater than or equal to %{count}","inclusion":"is not included in the list","invalid":"is invalid","less_than":"must be less than %{count}","less_than_or_equal_to":"must be less than or equal to %{count}","not_a_number":"is not a number","not_an_integer":"must be an integer","odd":"must be odd","record_invalid":"Validation failed: %{errors}","taken":"has already been taken","too_long":"is too long (máximo: %{count} characters)","too_short":"is too short (mínimo: %{count} characters)","wrong_length":"is the wrong length (%{count} characters)"},"template":{"body":"There were problems with the following fields:","header":{"one":"Unable to record %{model}: 1 error","other":"Unable to record %{model}: %{count} error."}}}},"activerecord":{"attributes":{"address":{"address_city":"City","address_complement":"2nd Address","address_neighbourhood":"District","address_number":"Number","address_state":"State","address_street":"Address (Street, Avenue, etc.))","address_zip_code":"Zip code","country":"Country","delivery_address":"Estimated Delivery","phone_number":"Telephone","zipcode_unknown":"I do not know my Zip codeCEP"},"bank_account":{"account":"Account No.","account_digit":"Account Digit","account_type":"Account Type","agency":"Agency","agency_digit":"Agency Digit","bank":"Bank","bank_id":"Bank","input_bank_number":"Bank Number","owner_document":"CPF/CNPJ of the holder","owner_name":"Cardholder Name"},"channel":{"description":"Description","ga_code":"Analytics code","how_it_works":"How it works","image":"Image of news","name":"Name","video_url":"Video"},"channel_partner":{"image":"Image","name":"Name","url":"Site"},"channel_post":{"body":"Content","title":"Title","visible":"Publish (Check if you want to publish this news)"},"contribution":{"address_city":"City","address_complement":"2nd Address","address_neighbourhood":"District","address_number":"Number","address_phone_number":"Telephone","address_state":"State","address_street":"Street","address_zip_code":"Zip code","country":"Country","payer_document":"CPF or CNPJ","payer_email":"Email","payer_name":"Full Name / Company Name *","project":"project","reward":"Reward","value":"Value"},"flexible_project":{"about_html":"Project description","all_public_tags":"Tags","all_tags":"Admin Tags","budget":"Project Budget","category":"Category","channels":"Channels","city":"Project Location","expires_at":"Deadline","first_contributions":"Who are the first people you will ask to support your project?","goal":"Amount to be collected","headline":"Headline","image_url":"Image URL","more_links":"Indicate links so people know more about your project and its progress.","name":"Name of Project","online_days":"Deadline for collection","permalink":"Link to your project on oppostarter","service_fee":"OppoStarter Fee","traffic_sources":"How did you heard about OppoStarter?","uploaded_image":"Image of the project","user_id":"User ID","video_url":"Video URL"},"payment":{"state":"Status"},"project":{"about_html":"Project description","all_public_tags":"Tags","all_tags":"Admin Tags","budget":"Project Budget","category":"Category","channels":"Channels","city":"Project Location","expires_at":"Deadline","first_contributions":"Who are the first people you will ask to support your project?","goal":"Amount to be collected","headline":"Headline","image_url":"Image URL","more_links":"Where can we find more about you and your project?","name":"Name","online_days":"Days into the campaign","permalink":"Project URL","service_fee":"Oppostarter","traffic_sources":"How did you hear about us?","uploaded_image":"Image of the project","user_id":"User ID","video_url":"Video URL"},"project_account":{"account":"Account No.","account_digit":"Account Digit","account_type":"Account Type","address_city":"City","address_complement":"2nd Address","address_neighbourhood":"District","address_number":"Number","address_state":"State","address_street":"Address","address_zip_code":"Zip Code","agency":"Agency","agency_digit":"Agency Digit","bank":"Bank","bank_id":"Bank","cpf":"CPF / CNPJ ","email":"Email","full_name":"Full Name / Company Name","owner_document":"CPF of bank account holder","owner_name":"Cardholder Name","phone_number":"Telephone","state_inscription":"Registered State"},"project_post":{"comment":"Text","title":"Title"},"reward":{"deliver_at":"Estimated Delivery","description":"Description","maximum_contributions":"Maximum contributions","minimum_value":"Minimum value"},"unsubscribe":{"update":"Receive project updates"},"user":{"address_city":"City","address_complement":"2nd Address","address_neighbourhood":"District","address_number":"Number","address_state":"State","address_street":"Street","address_zip_code":"Zip code","bio":"Mini Bio","birth_date":"Date of Birth","cover_image":"Profile Cover Image","cpf":"CPF / CNPJ ","cpf_hint":"(?)","cpf_hint_title":"An invoice will be issued for this document.","current_password":"Current password","email":"Email","full_name":"Full name/Company Name","id":"ID","moip_login":"MoIP Login","moip_login_hint":"(How to create an account)","name":"Nickname","newsletter":"I want receive news about OppoStarter","password":"Password","password_confirmation":"Password Confirmation","phone_number":"Mobile phone number","public_name":"Public name","reset_password_token":"Link to reset password","state_inscription":"State Inscription","uploaded_image":"Profile picture"}},"errors":{"format":"%{attribute} %{message}","messages":{"accepted":"must be accepted","blank":"must not be blank","confirmation":"confirmation does not match","empty":"can not be empty","equal_to":"must be equal to %{count}","even":"must be even","exclusion":"is reserved","greater_than":"must be greater than %{count}","greater_than_or_equal_to":"must be greater than or equal to %{count}","inclusion":"is not included in the list","invalid":"is invalid","invalid_event":"cannot transition when %{state}","invalid_transition":"cannot transition via \"%{event}\"","less_than":"must be less than %{count}","less_than_or_equal_to":"must be less than or equal to %{count}","not_a_number":"is not a number","not_an_integer":"must be an integer","odd":"must be odd","record_invalid":"Validation failed: %{errors}","restrict_dependent_destroy":{"many":"Cannot delete record because dependent %{record} exist","one":"Cannot delete record because a dependent %{record} exists"},"taken":"has already been taken","too_long":"is too long (máximo: %{count} characters)","too_short":"is too short (mínimo: %{count} characters)","wrong_length":"is the wrong length (%{count} characters)"},"models":{"bank_account":{"attributes":{"account":{"blank":"Account No. can not be empty","format":"Invalid account number","invalid":"Invalid account number"},"account_digit":{"blank":"Account digit can not be empty","format":"Invalid account digit","invalid":"Invalid account digit"},"account_type":{"blank":"Account type can not be empty"},"agency":{"blank":"User Agency can not be left blank","format":"Invalid Agency","invalid":"Invalid Agency"},"agency_digit":{"blank":"User agency digit can not be empty","format":"Invalid Agency Digit","invalid":"Invalid Agency Digit"},"bank":{"blank":"User bank can not be empty","invalid":"Invalid Bank"},"bank_id":{"blank":"User bank can not be empty","invalid":"Invalid Bank"},"owner_document":{"blank":"CPF/CNPJ can not be empty","invalid":"Invalid CPF/CNPJ"},"owner_name":{"blank":"Username can not be empty","invalid":"Username can not be empty"}}},"contribution":"Error saving support","flexible_project":{"attributes":{"about_html":{"blank":"Project description can not be left blank"},"budget":{"blank":"Project budget can not be left blank"},"category":{"blank":"You must choose a category for your project"},"city":{"blank":"Project location can not be left blank"},"goal":{"blank":"Goal value can not be empty","greater_than":"Goal must be greater than 9","not_a_number":"Collection goal only accepts numbers"},"headline":{"blank":"Project headline can not be left blank","too_long":"The headline is too long. You can use up to 100 characters."},"name":{"blank":"Project name can not be empty","too_long":"Project name is too long (max: 50 characters)"},"online_days":{"blank":"The collection period can not be left blank","greater_than":"The deadline for collection must be greater than 2 days","less_than_or_equal_to":"The collection deadline must be less than or equal to 365 days for flex projects and less than or equal to 60 days for all-or-nothing projects","not_a_number":"The deadline for collection must be a number of days"},"permalink":{"blank":"Project URL can not be empty","invalid":"The project URL is invalid","taken":"This project URL already exists"},"rewards":{"at_least_one":"There must be at least one reward"},"uploaded_image":{"blank":"Project image can not be empty"},"video_url":{"blank":"Project video can not be empty"}}},"payment":{"duplicate":"Your payment is already being processed"},"project":{"attributes":{"about_html":{"blank":"Project description can not be left blank"},"budget":{"blank":"Project budget can not be left blank"},"category":{"blank":"You must choose a category for your project"},"city":{"blank":"Project location can not be left blank"},"goal":{"blank":"Goal amount can not be empty","greater_than":"Goal must be greater than 9","not_a_number":"Collection goal only accepts numbers"},"headline":{"blank":"Project headline can not be left blank","too_long":"The headline is too long. You can use up to 100 characters."},"name":{"blank":"Project name can not be empty","too_long":"Project name is too long (max: 50 characters)"},"online_days":{"blank":"The collection period can not be left blank","greater_than":"The deadline for collection must be greater than 2 days","less_than_or_equal_to":"The deadline for collection must be less than or equal to 60 days for all-or-nothing projects and less than or equal to 365 days for flex projects","not_a_number":"The deadline for collection must be a number of days"},"permalink":{"blank":"Project URL can not be empty","invalid":"Invalid project permalink","taken":"This project URL already exists"},"public_tags":{"less_than_or_equal_to":"Total tags must be less than or equal to 5"},"rewards":{"at_least_one":"There must be at least one reward"},"uploaded_image":{"blank":"Project image can not be empty"},"video_url":{"blank":"Project video can not be empty"}}},"project_account":{"attributes":{"account":{"blank":"User account No. can not be empty","format":"Invalid user account no."},"account_digit":{"blank":"User account digit can not be empty"},"account_type":{"blank":"Account type can not be empty"},"address_city":{"blank":"User city can not be empty"},"address_number":{"blank":"Number at user address can not be empty"},"address_state":{"blank":"User state can not be empty"},"address_street":{"blank":"User address can not be left blank"},"address_zip_code":{"blank":"User zip code can not be left blank"},"agency":{"blank":"User Agency can not be left blank","invalid":"Invalid Agency"},"agency_digit":{"blank":"User agency digit can not be empty"},"bank":{"blank":"User bank can not be empty"},"cpf":{"blank":"User CPF can not be left blank","invalid":"Invalid CPF"},"email":{"blank":"User email can not be left blank","invalid":"Invalid user email"},"full_name":{"blank":"Company Name can not be left blank"},"owner_document":{"blank":"CPF / CNPJ of the user title can not be left blank","not_same":"CPF / CNPJ of the filled bank are not equal."},"owner_name":{"blank":"Username can not be empty"},"phone_number":{"blank":"User phone can not be empty"}},"invalid":"Account is not valid"},"reward":{"attributes":{"description":{"blank":"Description can not be empty"},"minimum_value":{"blank":"Minimum value can not be empty"},"title":{"blank":"Title can not be empty"}}},"shipping_fee":{"attributes":{"destination":{"blank":"Shipping status can not be left blank"},"value":{"blank":"Shipping cost can not be left blank"}}},"user":{"attributes":{"about_html":{"blank":"About you can not be left blank"},"address_city":{"blank":"City can not be left blank"},"address_neighbourhood":{"blank":"District can not be left blank"},"address_number":{"blank":"Number at address can not be empty"},"address_state":{"blank":"State can not be left blank"},"address_street":{"blank":"Address can not be left blank"},"address_zip_code":{"blank":"Zip code can not be empty"},"birth_date":{"blank":"Date of birth can not be left blank"},"country_id":{"blank":"Country can not be left blank"},"cpf":{"blank":"CPF/CNPJ can not be empty","invalid":"Invalid CPF/CNPJ"},"current_password":{"invalid":"Current password is not valid"},"email":{"blank":"Email can not be empty","invalid":"This email address is invalid","not_found":"Email is not registered, check the address or signup","taken":"Email is already registered, sign in"},"name":{"blank":"Username can not be empty"},"password":{"blank":"Password can not be empty","confirmation":"The password and the password confirmation you entered are not the same","too_short":"The password is too short. At least 6 characters."},"phone_number":{"blank":"Phone can not be left blank"},"public_name":{"blank":"Public name can not be empty"},"reset_password_token":{"invalid":"Token has expired. Go to \u003ca href=\"/password/new\" class=\"alt-link\"\u003ereset password\u003c/a\u003e and ask to reset the password again."},"uploaded_image":{"blank":"User image can not be left blank"}}}},"template":{"body":"There were problems with the following fields:","header":{"one":"Unable to record %{model}: 1 error","other":"Unable to record %{model}: %{count} error."}}},"models":{"address":"Address","bank_account":"Bank Details","category":"Category","channel":"Channel","contribution":"Contribution","flexible_project":"Project","project":"Project","reward":"Reward"}},"admin":{"actions":{"confirm":"Confirm"},"balance_transfers":{"admin_notes":{"failed_updated":"Annotation was not saved","success_update":"Annotation saved successfully"}},"confirm_dialog":"Are you sure?","confirmations":{"destroy":"Are you sure you want to delete?"},"contributions":{"index":{"acquirer":"Operator","anonymous":"Anonymous?","between_values":"Values between","by_state":"State","cancel":"Cancel support","confirm_contribution":"Confirm support","confirmed":"Confirmed?","contribution":"Support","credits_html":"Used credits? \u0026nbsp;","details":{"acquirer_name":"Card Operator","acquirer_tid":"TID Operator","created_at":"Started in","installments":"Installments","normal_email":"Email on OppoStarter","payer_email":"Payment medium email","payment_choice":"Payment option","payment_id":"Payment ID","payment_method":"Methods of payment"},"direct_refund":"Direct Refund","id":"ID","key":"Key","last_state":"previous state","menu":"Contribution","no_contributions":"No supporters found.","no_reward":"No reward","payer_email":"Payment medium email","payment_id":"Payment ID","payment_tax":"Methods of payment fee","pending_to_refund":"Refund pending","placeholders":{"acquirer":"Cardholder Name","payment_id":"Key, Payee ID or TID from the operator'","project":"Permalink or project name","user":"ID, Name, E-mail or Payment Email"},"project":"Project","project_state":"Project state","push_to_trash":"Delete support","refund_and_hide":"Do not charge and do not show support.","refund_contribution":"Refund support","refunded":"Refund made?","request_refund":"Request Refund","requested_refund":"Requested refund?","reward":"Reward","send_refund_request_contribution":"Submit Refund Request","state":"current state","submit":"Search","title":"Support Management","total_contributed":"collected","total_contribution":"supports","total_contributions":"supporters","total_users":"Users","unconfirm_contribution":"Unconfirm Support","user":"Users","user_email":"Email used in OppoStarter","value":"Value"},"messages":{"successful":{"cancel":"Support canceled successfully!","change_reward":"Successfully modified reward!","confirm":"Support confirmed successfully!","hide":"Support hidden successfully!","pendent":"Unsuccessful support successfully!","push_to_trash":"Support deleted successfully!","refund":"Support successfully refund!","request_refund":"Refund requested successfully!"}},"show":{"contribution_info":"Contribution information %{key}","created_at":"Started in","payer_email":"Email used in payment method","payment_choice":"Payment option","payment_fee":"Methods of payment fee","payment_id":"Payment ID","payment_method":"Methods of payment","successful":"Successful","user_email":"Email used in OppoStarter"}},"filter":{"between_created_at":"Created between","by_gateway":"Gateway","by_id":"By ID","by_payment_method":"Methodss of payment","order_table":"Order Table","pg_search":"Project","submit":"Filter","title":"Filters","user_name_contains":"User","with_state":"With State"},"financials":{"index":{"between_expires_at":"Expired Between","by_progress":"By process %","by_state":"By State","contribution_report":"Report of supporters","details":{"address":"Address","bank_data":"Bank details","document":"CPF / CNPJ","email":"Email","name":"Company Name","permalink":"Project Permalink","phone_number":"Telephone","state_inscription":"State registration"},"expires_at":"Finish","goal":"Goal","id":"ID","menu":"Financial Relation","name":"Title","online_date":"Entered online","pledged":"Reached","recommended":"Recommended?","repass_value":"Vl. Repass","search_report":"Search Report","state":"State","submit":"filter","title":"Financial reports","total_catarse_fee":"OppoStarter Fee","total_payment_service_fee":"MP fee","total_projects":"projects","user":"MoIP User","user_id":"User ID","zero_fee":"Support without fee?"}},"followers":{"index":{"download":"Download list","title":"Followers"}},"followers_menu":"Followers","management":{"no_partners":"No partner registered","no_posts":"No news registered","title":"Business Management","total":"projects in total"},"menu":"Moderation of Channels","partners":{"back_to_list":"← Back to manage partners","edit":{"edit_title":"Edit Partner"},"form":{"hint_image":"Image size 370x320","save_submit":"Save"},"index":{"new_button":"Add Partner","table":{"actions":"Actions","created_at":"Created at","image":"Image","name":"Name","url":"Site"},"title":"Manage partners"},"new":{"add_partner":"Add Partner"}},"partners_menu":"Edit Partners","posts":{"back_to_list":"← Back to manage news","edit":{"edit_news":"Edit New"},"form":{"save_submit":"Save and view"},"index":{"new_post_button":"Create new","table":{"actions":"Actions","created_at":"Created at","published_at":"Published at","title":"Novelty Title"},"title":"Manage news"},"new":{"create_news":"Create new"},"update":{"published_message":"Your news has been published and e-mailed to followers. of the channel."},"warning_html":"Remembering that every published novel goes directly to the email your followers. So please review your text before sending it."},"posts_menu":"Manage news","profile_menu":"Edit Channel","projects":{"index":{"approve":"Approve!","between_created_at":"Created between","between_expires_at":"Expired between","between_online_at":"Online between","between_updated_at":"Updated between","by_category":"By category","by_user_email":"Director email","category":"Category","expires_at":"expires at","goal":"Goal","goal_between":"Goal between","id":"ID","last_modification":"Last update","menu":"Admin Projects","name":"Title","no_projects":"No projects found","online_date":"Online date","order_asc":"Lowest goal","order_created_at":"Send date","order_date":"Order Date","order_desc":"Highest goal","order_table":"Order table","pledged":"Reached","project":"Project","recommended":"Recommended?","reject":"Reject!","send_to_draft":"Send to DRAFT!","send_to_trash":"Delete","state":"State","submit":"filter","title":"Project Management","total_contributions":"Support","total_projects":"projects","user":"User","user_id":"User ID","with_state":"By state"}},"statistics":{"charts":{"current_period":"Last 8 weeks","last_year":"Last year"},"contributions_by_week":{"title":"Support amount confirmed per week"},"index":{"menu":"Statistics","title":"Statistics","total_contributed":"Collection","total_contributions":"Support","total_contributors":"Supporters","total_projects":"Projects","total_projects_online":"Online","total_projects_success":"Successful","total_users":"Users"},"projects_by_week":{"title":"Drafts created per week"},"projects_in_analysis_by_week":{"title":"Projects submitted for approval per week"},"title":"Channel Stats","total_subscribers":"Total subscribers"},"statistics_menu":"Statistics","table":{"approve":"Approve","category":"Category","confirmation":"Are you sure you want to delete this project? All support will be reimbursed","confirmation_draft":"Are you sure you want to draft this project? All support will be reimbursed","confirmation_reject":"Are you sure you want to reject this project? All supports will be refundeds","contributed_projects":"Support projects","created_projects":"Design created","destroy_action":"Delete","edit_action":"Edit","expires_at":"Term","goal":"Goal","name":"Title","online_date":"Publication","pledged":"Reached","publish_action":"Publish","put_online":"Put online","recommended":"Recommended","reject":"Reject","send_to_draft":"Send to draft","send_to_trash":"DELETE PROJECT","show_action":"Preview","state":"State","total_contributions":"Support","unpublish_action":"Unpublish","user":"User","user_id":"User"},"users":{"index":{"credits":"Credits","credits_view":"Calculated credits","has_credits_difference":"Discrepancy in credits","id":"Id","key":"Key","menu":"Users","payer_email":"Payment Email","provider":"Provider","submit":"Search","title":"Management of supporters","total_contributed":"Total support","total_contributions":"supports","total_credits":"credits","total_credits_view":"calculated credits","total_users":"Users","user":"User","value":"Value"}}},"bank_accounts":{"confirm":{"account_label":"Account: %{content}","agency_label":"Agency: %{content}","answer_no":"NO","answer_yes":"YES","bank_label":"Bank: %{content}","owner_document_label":"CPF: %{content}","owner_name_label":"Name: %{content}","page-title":"Confirm your bank details"},"edit":{"fill_form":"Fill in the bank details","fill_form_text":"You have %{amount} on outstanding repayments. Enter your details and save your money!","input_bank_number_label":"Bank Number (3 numbers)","page-title":"Refund pending fill in the bank details","project":"project","request_refunds":"Request refund","search_bank_btn_html":"Search by name  \u0026nbsp;\u0026gt;"},"show":{"account_label":"Account: %{content}","agency_label":"Agency: %{content}","bank_label":"Bank: %{content}","owner_document_label":"CPF: %{content}","owner_name_label":"Name: %{content}","page-title":"Refund requested successfully","review":"Transaction Summary","success":"Your request was successful.!","success_detail":"We will send you an email with transaction details and instructions on how to proceed if there is a problem in this process.","value_label":"Total refund amount: %{value}"}},"channels":{"accessibility":{"how_it_works":"Click to see how the Channel works and submit your project","link_to_facebook":"Channel facebook link","link_to_twitter":"Channel twitter link","link_to_website":"Channel website","send_your_project":"Click to submit your project"},"admin":{"actions":{"confirm":"Confirm"},"balance_transfers":{"admin_notes":{"failed_updated":"Annotation was not saved","success_update":"Annotation saved successfully"}},"confirm_dialog":"Are you sure?","contributions":{"index":{"acquirer":"Operator","anonymous":"Anonymous?","between_values":"Values between","by_state":"State","cancel":"Cancel support","confirm_contribution":"Confirm support","confirmed":"Confirmed?","contribution":"Support","credits_html":"Used credits? \u0026nbsp;","details":{"acquirer_name":"Card Operator","acquirer_tid":"TID Operator","created_at":"Started in","installments":"Installments","normal_email":"Email on OppoStarter","payer_email":"Payment medium email","payment_choice":"Payment option","payment_id":"Payment ID","payment_method":"Methods of payment"},"direct_refund":"Direct Refund","id":"ID","key":"Key","last_state":"previous state","menu":"Contribution","no_contributions":"No supporters found.","no_reward":"No reward","payer_email":"Payment medium email","payment_id":"Payment ID","payment_tax":"Methods of payment fee","pending_to_refund":"Refund pending","placeholders":{"acquirer":"Cardholder Name","payment_id":"Key, Payee ID or TID from the operator'","project":"Permalink or project name","user":"ID, Name, E-mail or Payment Email"},"project":"Project","project_state":"Project state","push_to_trash":"Delete support","refund_and_hide":"Do not charge and do not show support.","refund_contribution":"Refund support","refunded":"Refund made?","request_refund":"Request Refund","requested_refund":"Requested refund?","reward":"Reward","send_refund_request_contribution":"Submit Refund Request","state":"current state","submit":"Search","title":"Support Management","total_contributed":"collected","total_contribution":"supports","total_contributions":"supporters","total_users":"Users","unconfirm_contribution":"Unconfirm Support","user":"Users","user_email":"Email used in OppoStarter","value":"Value"},"messages":{"successful":{"cancel":"Support canceled successfully!","change_reward":"Successfully modified reward!","confirm":"Support confirmed successfully!","hide":"Support hidden successfully!","pendent":"Unsuccessful support successfully!","push_to_trash":"Support deleted successfully!","refund":"Support successfully refund!","request_refund":"Refund requested successfully!"}},"show":{"contribution_info":"Contribution information %{key}","created_at":"Started in","payer_email":"Email used in payment method","payment_choice":"Payment option","payment_fee":"Methods of payment fee","payment_id":"Payment ID","payment_method":"Methods of payment","successful":"Successful","user_email":"Email used in OppoStarter"}},"filter":{"between_created_at":"Created Between","by_id":"By ID","order_table":"Order table","pg_search":"Project","submit":"Filter","title":"Filter","user_name_contains":"User","with_state":"With state"},"financials":{"index":{"between_expires_at":"Expired Between","by_progress":"By process %","by_state":"By State","contribution_report":"Report of supporters","details":{"address":"Address","bank_data":"Bank details","document":"CPF / CNPJ","email":"Email","name":"Company Name","permalink":"Project Permalink","phone_number":"Telephone","state_inscription":"State registration"},"expires_at":"Finish","goal":"Goal","id":"ID","menu":"Financial Relation","name":"Title","online_date":"Entered online","pledged":"Reached","recommended":"Recommended?","repass_value":"Vl. Repass","search_report":"Search Report","state":"State","submit":"filter","title":"Financial reports","total_catarse_fee":"OppoStarter Fee","total_payment_service_fee":"MP fee","total_projects":"projects","user":"MoIP User","user_id":"User ID","zero_fee":"Support without fee?"}},"management":{"title":"Management","total":"projects"},"menu":"Channel moderation","profile_menu":"Channel profile","projects":{"index":{"approve":"Approve!","between_created_at":"Created between","between_expires_at":"Expired between","between_online_at":"Online between","between_updated_at":"Updated between","by_category":"By category","by_user_email":"Director email","category":"Category","expires_at":"expires at","goal":"Goal","goal_between":"Goal between","id":"ID","last_modification":"Last update","menu":"Admin Projects","name":"Title","no_projects":"No projects found","online_date":"Online date","order_asc":"Lowest goal","order_created_at":"Send date","order_date":"Order Date","order_desc":"Highest goal","order_table":"Order table","pledged":"Reached","project":"Project","recommended":"Recommended?","reject":"Reject!","send_to_draft":"Send to DRAFT!","send_to_trash":"Delete","state":"State","submit":"filter","title":"Project Management","total_contributions":"Support","total_projects":"projects","user":"User","user_id":"User ID","with_state":"By state"}},"statistics":{"charts":{"current_period":"Last 8 weeks","last_year":"Last year"},"contributions_by_week":{"title":"Support amount confirmed per week"},"download":"Download list","index":{"menu":"Statistics","title":"Statistics","total_contributed":"Collection","total_contributions":"Support","total_contributors":"Supporters","total_projects":"Projects","total_projects_online":"Online","total_projects_success":"Successful","total_users":"Users"},"projects_by_week":{"title":"Drafts created per week"},"projects_in_analysis_by_week":{"title":"Projects submitted for approval per week"},"title":"Followers","total_subscribers":"Total subscribers"},"statistics_menu":"Statistics","table":{"approve":"Approve","category":"Category","expires_at":"Finished","goal":"Goal","name":"Title","online_date":"Published","pledged":"Pledged","recommended":"Recommend","reject":"Reject","send_to_draft":"Send to draft","state":"State","total_contributions":"Contributions","user_id":"User"},"users":{"index":{"credits":"Credits","credits_view":"Calculated credits","has_credits_difference":"Discrepancy in credits","id":"Id","key":"Key","menu":"Users","payer_email":"Payment Email","provider":"Provider","submit":"Search","title":"Management of supporters","total_contributed":"Total support","total_contributions":"supports","total_credits":"credits","total_credits_view":"calculated credits","total_users":"Users","user":"User","value":"Value"}}},"back_to_news":"← Back to news","edit":"Update channel","follow":"Follow channel","following":"Following","footer":{"contact":"Contact","how_channels_work":"Understand OppoStarter channels","how_it_works":"How %{name} works","how_works":"How works","privacy_policy":"Privacy","terms":"Terms","what_is_channel":"What is a channel?"},"header":{"contact":"Contact","how_works":"How works","logout":"Logout","my_credits":"My credits","profile":"My profile","signin":"Sign in","signup":"Sign up","submit":"Send project","what_is_channel":"What is a channel?"},"how_it_works":{"title":"How %{channel} works?"},"image_hint":"Maximum size (600x121px)","presentation":{"followers":"followers","link-to-follow":"Follow channel"},"projects":{"how_it_works":"How it works","pledged_html":"\u003cspan\u003e%{value}\u003c/span\u003e pledged","progress_html":"\u003cspan\u003e%{percent}%\u003c/span\u003e funded","see_how_it_works":"See how it works and submit your project.","send":"Submit your project","time_remaining_html":{"one":"\u003cspan\u003e%{count} %{unit}\u003c/span\u003e remaining","other":"\u003cspan\u003e%{count} %{unit}\u003c/span\u003e remaining"}},"send_a_email":"Send a email","send_your_project":"Submit your project","subscribed":"+ %{count} followers","unfollow":"Unfollow"},"channels_subscribers":{"created":"You are now following %{channel}","deleted":"You are no longer following %{channel}"},"click_here":"Click here","click_term":"terms","clicking_here":"clicking here","comment":{"display_time":"%{time_ago} ago"},"contributed_project":{"one":"supported %{count} project","other":"supported %{count} projects","zero":"has not yet supported"},"contribution":{"display_confirmed_at":"%{time_ago} ago","payment_details":{"boleto_bancario":"Bank slip","cartao_de_credito":"Credit card","cartao_debito":"Debit card","carteira_mo_ip":"MoIP Portfolio","creditos":"Credits","debito_bancario":"Bank debit","desconhecido":"","financiamento_bancario":"Financial Services","transferencia_bancaria":"Bank transfer"},"project_should_be_online":"You cannot contribute to a project that is not online","reward_must_be_from_project":"must be from the same project","should_not_contribute_if_maximum_contributions_been_reached":"has reached its maximum contributions","value_must_be_at_least_rewards_value":"must be at least %{minimum_value} for the selected reward"},"contribution_plural":"contributions","contribution_report_to_project_owner":{"address_city":"City","address_complement":"Complement","address_neighbourhood":"Neighborhood","address_number":"Number","address_state":"State","address_street":"Street","address_type":"Type of address","address_zip_code":"Zip code","anonymous":"Anonymous","city":"City","complement":"2nd Address","confirmed_at":"Payment confirmed at","contribution_id":"Support ID","contribution_value":"Value of support","created_at":"Date of support creation","deliver_at":"Reward submission date","gateway":"Methods of payment","multiple_choice_questions":"multiple_choice_questions","neighbourhood":"District","open_questions":"open_questions","payment_method":"Payment method","public_name":"Public name","reward_description":"Reward description","service_fee":"OppoStarter fee","shipping_choice":"Delivery location","shipping_option":"Send","street":"Street","title":"Reward Title","user_email":"OppoStarter user profile email","user_id":"User ID","user_name":"Contribution name","value":"Contribution value","zip_code":"Zip code"},"contribution_singular":"contribution","controllers":{"updates":{"create":{"notice":"Update was successfully created!"}}},"count_contributed_projects":"contributed %{total} projects","created_project":{"one":"%{count} created project","other":"%{count} created projects","zero":"has not yet created projects"},"credits":{"index":{"contribution_date":"Contribution date","current_credits_html":"Your current balance is \u003cspan id=\"current_credits\"\u003e%{credits}\u003c/span\u003e in credits.","important_html":"If you ask for a refund, the value of your payment will be deducted from your credits.","insufficient_credits":"Insufficient credits to request this refund.","project":"Project","refund_expiration_date_html":"Deadline to request refund (\u003ca target='__blank' href='http://suporte.catarse.me/knowledgebase/articles/164746-regras-e-funcionamento-dos-reembolsos-estornos'\u003e?\u003c/a\u003e)","refunded":"Refund request successfully submitted. Our team will contact you within two business days.","refunds_title":"Payments that can be refunded","request_refund":"Request refund","requested_refund":"Requested refund","status":"Status","title":"My credits","value":"Value"},"modal":{"accept_btn":"I want to request the refund","link":"See how the refund works","reject_btn":"I want to keep my credits","text":"Check out how our refund process works:","title":"Do you want to confirm your refund request?"},"refund":{"cannot_refund":"This payment cannot be refunded.","error":"Oops. There was an error while requesting your refund.","no_credits":"Insufficient credits to request this refund.","refunded":"This payment has already been refunded.","requested_refund":"You already requested a refund for this payment."},"title":"My credits"},"curated_pages":{"index":{"title":"Curated pages"},"show":{"contributed":"contributed","reached":"reached"}},"date":{"abbr_day_names":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"abbr_month_names":[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"day_names":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"formats":{"default":"%d/%m/%Y","long":"%B in %d in %Y","short":"%b in %d","with_time":"%d/%m/%Y - %Hh%Mmin"},"month_names":[null,"January","February","March","April","May","June","July","August","September","October","November","December"],"order":["day","month","year"]},"datetime":{"distance_in_words":{"about_x_hours":{"one":"about 1 hour","other":"about %{count} hours"},"about_x_months":{"one":"about 1 month","other":"about %{count} months"},"about_x_years":{"one":"about 1 year","other":"about %{count} years"},"almost_x_years":{"one":"almost 1 year","other":"almost %{count} years"},"half_a_minute":"half a minute","less_than_x_minutes":{"one":"less than a minute","other":"less than %{count} minutes"},"less_than_x_seconds":{"one":"less than 1 second","other":"less than %{count} seconds"},"over_x_years":{"one":"over 1 year","other":"over %{count} years"},"x_days":{"one":"1 day","other":"%{count} days"},"x_dia":"1 day","x_dias":{"one":"1 day","other":"%{count} days"},"x_horas":{"one":"1 hour","other":"%{count} hours"},"x_hours":{"one":"1 hora","other":"%{count} horas"},"x_minutes":{"one":"1 minute","other":"%{count} minutes"},"x_minutos":{"one":"1 minute","other":"%{count} minutes"},"x_months":{"one":"1 month","other":"%{count} months"},"x_seconds":{"one":"1 second","other":"%{count} seconds"},"x_segundos":{"one":"1 second","other":"%{count} seconds"}},"prompts":{"day":"Day","days":"Days","hour":"Hour","hours":"Hours","minute":"Minute","minutes":"Minutes","month":"Month","second":"second","seconds":"Seconds","year":"Year"}},"days":"days","deivse":{"passwords":{"edit":{"form":{"hint":{"password_length":"Must be at least 6 characters."},"inputs":{"submit":"Save and log me in"},"labels":{"password":"New password","password_confirmation":"Re-enter password"}},"titles":{"header":"Setting a password","site":"Setting a password"}}}},"devise":{"confirmations":{"confirmed":"Your account was successfully confirmed. You are now signed in.","send_instructions":"You will receive an email with instructions about how to confirm your account in a few minutes.","send_paranoid_instructions":"If your email address exists in our database, you will receive an email with instructions about how to confirm your account in a few minutes."},"failure":{"already_authenticated":"","inactive":"Your account was not activated yet.","invalid":"Invalid email or password.","invalid_token":"Invalid authentication token.","last_attempt":"You have one more attempt before your account is locked.","locked":"Your account is locked.","not_found_in_database":"Invalid email or password.","password_token":"This password reset link has expired. Enter your email address again","timeout":"Your session expired, please sign in again to continue.","unauthenticated":"","unconfirmed":"You have to confirm your account before continuing."},"feedback_tab":{"blog_button":"Read more","contact_link":"Contact support","form_feedback_link":"Give feedback","header_html":"Welcome to \u003cbr/\u003e Catarse's new login","title":"Feedback and support"},"mailer":{"confirmation_instructions":{"subject":"Confirmation instructions"},"password_change":{"subject":"Password Changed"},"reset_password_instructions":{"subject":"Reset password instructions"},"unlock_instructions":{"subject":"Unlock Instructions"}},"omniauth_callbacks":{"failure":"Could not authenticate you from %{kind} because \"%{reason}\".","success":""},"passwords":{"edit":{"label_new_password":"Type your new password bellow","site_title":"Reset password","submit":"Reset password","subtitle":"Reset password to use your email and password in your Catarse login","title":"Reset password"},"new":{"form":{"inputs":{"submit":"Reset password"},"labels":{"email":"We'll send password reset instructions to the email address associated with your account"}},"links":{"register":"Sign up"},"no_account_html":"Need an account?","site_title":"Forgot my password","submit":"Send instructions to reset my password","title":"Type your email address and ask for a password reset","titles":{"header":"Forgot your password?","site":"Forgot your password?"}},"no_token":"","send_instructions":"This password reset link has expired. Enter your email address again","send_paranoid_instructions":"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.","updated":"","updated_not_active":"Your password was changed successfully."},"registrations":{"destroyed":"Bye! Your account was successfully cancelled. We hope to see you again soon.","new":{"form":{"hint":{"password_length":"Minimum of 6 characters"},"inputs":{"facebook":"Sign in with Facebook","submit":"Forgot your username?"},"labels":{"accept":"By registering, you are accepting our \u003ca href=\"%{terms_url}\" class=\"alt-link\" target=\"_blank\"\u003eTerms of Use\u003c/a\u003e e \u003ca class=\"alt-link\" href=\"%{privacy_url}\" target=\"_blank\"\u003ePrivacy Policy\u003c/a\u003e","name":"Full name","newsletter":"I want to receive news from oppoStarter in my email","password":"Password","show_password":"View password"}},"have_account_html":"Already registered?","links":{"login":"Login"},"titles":{"header":"Register","site":"Register"}},"signed_up":"","signed_up_but_inactive":"You have signed up successfully. However, we could not sign you in because your account is not yet activated.","signed_up_but_locked":"You have signed up successfully. However, we could not sign you in because your account is locked.","signed_up_but_unconfirmed":"A message with a confirmation link has been sent to your email address. Please open the link to activate your account.","update_needs_confirmation":"You updated your account successfully, but we need to verify your new email address. Please check your email and click on the confirm link to finalize confirming your new email address.","updated":"You updated your account successfully."},"sessions":{"already_signed_out":"Signed out successfully.","new":{"form":{"inputs":{"facebook":"Log in with Facebook","password":"Password","submit":"Log me in"},"labels":{"remember_me":"Remember me"}},"google_step_1":"1 - Click in %{link}","google_step_2":"2 - Follow the steps to create a new password.","google_warning_html":"If you were using a \u003cstrong\u003eGoogle\u003c/strong\u003e account:","links":{"forgot_password":"I forgot my password","register":"Sign up"},"login_subtitle":"If you already have an account","login_title":"Login","no_account_html":"Need an account?","register_subtitle":"Use your email address","register_title":"Sign Up","site_title":"Login","submit":"Login","title":"Enter using your email address","titles":{"header":"Log in","site":"Log in"},"with_another_social":"Twitter support will be removed next week","with_another_social_subtitle":"\u003ca target=\"_blank\" href=\"http://blog.catarse.me/mudanca-no-sistema-de-login/\"\u003eRead more\u003c/a\u003e about it (in portuguese only)","with_facebook":"Use your facebook account","with_facebook_subtitle":"A fast way to log in"},"signed_in":"","signed_out":""},"unlocks":{"send_instructions":"You will receive an email with instructions about how to unlock your account in a few minutes.","send_paranoid_instructions":"If your account exists, you will receive an email with instructions about how to unlock it in a few minutes.","unlocked":"Your account has been unlocked successfully. Please sign in to continue."}},"donations":{"confirm":{"amount":"Você está realizando uma doação de %{amount}.","false":"NO","info1":"Seu dinheiro será utilizado para financiar operações do Catarse e um monte de inovações que vem por aí em 2016.","info2":"E claro, você terá destaque em uma página especial, que lançaremos em breve, com a lista de apoiadores que fazem de tudo para espalhar o financiamento coletivo no Brasil!","title":"Confirm your donation to the Catarse?","true":"YES"}},"edit_project":"Edit this project","error":{"messages":{"carrierwave_download_error":"Error downloading file","carrierwave_integrity_error":"File type not allowed","carrierwave_processing_error":"Failed to process file","content_type_blacklist_error":"Type not enabled %{content_type}","content_type_whitelist_error":"Type %{content_type} not recognized","extension_black_list_error":"File not allowed %{extension}, types not allowed: %{prohibited_types}","extension_white_list_error":"Invalid file type: %{extension}, allowed types: %{allowed_types}","max_size_error":"File must be less than %{max_size}","min_size_error":"File must be larger than %{min_size}","mini_magick_processing_error":"Error while handling image, Original Error: %{e}","rmagick_processing_error":"Error while handling image"}},"errors":{"connection_refused":"Oops! Failed to connect to the Web Console middleware.\nPlease make sure a rails development server is running.\n","format":"%{attribute} %{message}","messages":{"accepted":"must be accepted","already_confirmed":"was already confirmed, please try signing in","blank":"must not be blank","carrierwave_download_error":"could not be downloaded","carrierwave_integrity_error":"is not of an allowed file type","carrierwave_processing_error":"failed to be processed","confirmation":"confirmation does not match","confirmation_period_expired":"needs to be confirmed within %{period}, please request a new one","empty":"can not be empty","equal_to":"must be equal to %{count}","even":"must be even","exclusion":"is reserved","expired":"has expired, please request a new one","extension_black_list_error":"You are not allowed to upload %{extension} files, prohibited types: %{prohibited_types}","extension_white_list_error":"You are not allowed to upload %{extension} files, allowed types: %{allowed_types}","greater_than":"must be greater than %{count}","greater_than_or_equal_to":"must be greater than or equal to %{count}","inclusion":"is not included in the list","invalid":"is invalid","less_than":"must be less than %{count}","less_than_or_equal_to":"must be less than or equal to %{count}","max_size_error":"File size should be less than %{max_size}","mime_type_pattern_black_list_error":"You are not allowed to upload %{content_type} files","mime_type_pattern_white_list_error":"You are not allowed to upload %{content_type} files","mime_types_processing_error":"Failed to process file with MIME::Types, maybe not valid content-type? Original Error: %{e}","min_size_error":"File size should be greater than %{min_size}","mini_magick_processing_error":"Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: %{e}","not_a_number":"is not a number","not_an_integer":"must be an integer","not_found":"not found","not_locked":"was not locked","not_saved":{"one":"1 error prohibited this %{resource} from being saved:","other":"%{count} errors prohibited this %{resource} from being saved:"},"odd":"must be odd","other_than":"must be other than %{count}","present":"must be blank","record_invalid":"Validation failed: %{errors}","rmagick_processing_error":"Failed to manipulate with rmagick, maybe it is not an image?","taken":"has already been taken","too_long":"is too long (máximo: %{count} characters)","too_short":"is too short (mínimo: %{count} characters)","wrong_length":"is the wrong length (%{count} characters)"},"not_found":{"text":"You may have typed the wrong address or the page may have been moved.","title":"We did not find this address :("},"template":{"body":"There were problems with the following fields:","header":{"one":"Unable to record %{model}: 1 error","other":"Unable to record %{model}: %{count} error."}},"unacceptable_request":"A supported version is expected in the Accept header.\n","unavailable_session":"Session %{id} is is no longer available in memory.\n\nIf you happen to run on a multi-process server (like Unicorn or Puma) the process\nthis request hit doesn't store %{id} in memory. Consider turning the number of\nprocesses/workers to one (1) or using a different server in development.\n"},"explore":{"index":{"categories":"Categories","expiring":"Expiring","near":"Near me","quick_explore":"Quick search","recent":"Recent","recommended":"Recommended","subtitle":"Explore projects, find ones that inspire you, and help make them happen!","successful":"Successful","title":"Discover amazing projects"},"project":{"empty":"Hey, we did not find any project with the text you searched. Wanna try something else?"},"title":"Explore the projects"},"facebook_locale":"en_US","failure_title":"Please, fix the errors below:","false":"No","flash":{"actions":{"create":{"notice":"%{resource_name} was successfully created."},"destroy":{"alert":"%{resource_name} could not be destroyed.","notice":"%{resource_name} was successfully destroyed."},"update":{"notice":"%{resource_name} was successfully updated."}}},"footer":{"links":{"about":"Who we are","blog":"Blog","contact":"Contact","discover":"Discover projects","expiring":"Expiring","facebook":"Facebook","faq":"Help","feedback":"Feedback","github":"Github","instagram":"Instagram","near":"Near me","press":"Press","privacy":"Privacy","recents":"Recent","recommended":"Recommended","submit":"Send your project","support":"Support","terms":"Terms","twitter":"Twitter"},"texts":{"copyleft":"Made with love."},"titles":{"about":"About us","contact":"Keep in touch","newsletter":"Subscribe to our news","sitemap":"Browse","social":"Social networks"}},"formtastic":{"hints":{"contribution":{"credits":"You have \u003cstrong\u003e%{credits}\u003c/strong\u003e in credits and can support up to this amount without having to make a new payment.","value":"You choose the amount! Starting with US$10, any amount works."},"project":{"about":"Tell us a little about your inspiration to carry out the project, your history and what will be delivered at the end. Be brief and clear, and to the point. No GOAL, JUSTIFICATION, TARGET AUDIENCE ... Present your readers with something that moves them and is very transparent in relation to the expectation about the project.","category":"Before submitting your project, explore and inspire yourself with other projects that is currently receiving support on the site.","expires_at":"Finally, choose how long you want your campaign to last. This is a strategic choice: if you put a lot of time, people will lose interest along the way; if put too little, you may not reach the minimum in time.","first_contributions":"For your campaign to succeed, it is your closest contact network. So, list here who you believe who will be their first 20 supporters","goal":"It is important to remember that much of the support will come from people close to to you (1st and 2nd level of relationship): \u003ca href='http://blog.catarse.me/sua-campanha-no-catarse-precisa-de-um-empurrazinho' target='_blank'\u003eClique aqui!\u003c/a\u003e In this way, by setting the amount you want to collect through the OppoStarter, it is fundamental to think of its ability to mobilize at least 50% of the value within your network.","headline":"Summarize your project in 140 characters. This sentence will be the first people with your project, before even watching the video. Be creative, transparent and direct :)","more_links":"What channels of support will be used? (Place links such as Facebook, Twitter, Blogs ... everything that will help you spread your word project)","name":"The more direct the better. Leave to describe your project in About and in the Video.","online_days":"On average the projects stay online for 40 days.","uploaded_image":"Here you upload an image (.jpg) with size 512x400.","video_url":"The video is the main part of the project. If you have not already, now is the time to add one ... The video need to be a working view of your project!","video_url_edit":"Paste your link of your video hosted on Vimeo or Youtube."},"reward":{"days_to_delivery":"Please tell us how many days after the success of the project you plan to deliver this reward","description":"Describe your reward in a way that attracts people interest in supporting the project","maximum_contributions":"If your reward is limited, let the maximum number of people.","minimum_value":"This is minimum amount of support to choose this reward."}},"labels":{"comment":{"comment":"Leave your comment about this project"},"contribution":{"anonymous":"I want my support to be anonymous.","credits":"I want to use my credits for this support.","reward":"Select your reward","value":"How much do you want to support??"},"project":{"about":"History of your project and how US$ will be used *","category":"Category","expires_at":"How long to reach the minimum? *","first_contributions":"List with the first supporters *","goal":"How much do you intend to raise? (only numbers)*","headline":"Headline *","more_links":"List of Links related to your project *","name":"Project name *","online_days":"How Many Campaign Days?","traffic_sources":"How did you first meet OppoStarter? *","uploaded_image":"Project thumbnail","video_url":"Video"},"reward":{"days_to_delivery":"Estimated Delivery","description":"Description","maximum_contributions":"Maximum number of supporters (optional)","minimum_value":"Minimum Amount"}},"optional":" (optional)"},"found_plural":"Found","found_singular":"Found","helpers":{"page_entries_info":{"entry":{"one":"entry","other":"entries","zero":"entries"},"more_pages":{"display_entries":"Displaying %{entry_name} \u003cb\u003e%{first}\u0026nbsp;-\u0026nbsp;%{last}\u003c/b\u003e of \u003cb\u003e%{total}\u003c/b\u003e in total"},"one_page":{"display_entries":{"one":"Displaying \u003cb\u003e1\u003c/b\u003e %{entry_name}","other":"Displaying \u003cb\u003eall %{count}\u003c/b\u003e %{entry_name}","zero":"No %{entry_name} found"}}},"select":{"prompt":"Please select"},"submit":{"create":"Create %{model}","submit":"Save %{model}","update":"Update %{model}"}},"here":"here","i_contributed":"I contributed the project %{name} on @OppoStarter","i_just_contributed":"I just contributed the project %{name} on @OppoStarter","layouts":{"footer":{"links":{"blog":"Blogs","contact":"Contact","crowdfunding_stats":"Portrait FC Brazil 2013/2014","discover":"Explore Projects","expiring":"Expiring","facebook":"Facebook","faq":"FAQ","feedback":"Feedback","finished":"Finished","flex":"OppoStarter flex","github":"Github","guides":"Guide for Filmmakers","help_support":"Support Center","how_it_works":"How does it work?","instagram":"Instagram","jobs":"Jobs","near":"Near you","novelty":"Novelty","online":"Online","press":"News and Press","privacy":"Privacy \u0026 Policy","rate":"Our Rate","recents":"Recent","recommended":"Recommended","score":"Popular","start":"How does it work?","submit":"Start your Project","team":"Our Team","terms":"Terms of use","twitter":"Twitter"},"texts":{"copyleft":"Made with love.","email":"Your Email address"},"titles":{"about":"Help","contact":"Welcome","newsletter":"Newsletter","sitemap":"Sitemap","social":"Social media"}},"header":{"account":"My account","blog":"Blog","discover":"Discover","faq":"FAQ","hello":"Know More","help":"Help","help_support":"Support Center","profile":"My profile","projects":"My Projects","search":"Search Projects","signin":"Login","signup":"Sign up","submit":"Send your project"},"login":{"login_with_facebook":"sign in with your Facebook account","remember_me":"Remember me and keep me logged in."},"user":{"logout":"Logout","my_contributions":"My Contributions","my_credits":"My credit","refund_link":"Request refund"}},"login":{"forgot_password":{"label":"Enter your email to reset your password","submit":"Reset","welcome":"Reset password"},"placeholder":{"email":"Email","password":"Password"},"registrations":{"password_hint":"Minimum 6 characters","show_password":"Show password","welcome":"Sign up"},"singin":"Log in"},"main":{"banner":"Discover the research","links":{"channels":"Discover Asas Channel","expiring":"Discover expiring projects","near":"Discover projects near you","recents":"Discover recent projects","recommended":"Discover recommended projects"}},"newsletter_error_body":"Your email could not be added to our newsletter list. Please try again later!","newsletter_error_header":"Whoops! There was an error.","newsletter_ok_body":"Your email is now in our newsletter list, thanks for subscribing!","newsletter_ok_header":"You are subscribed to the newsletter!","newsletter_subscribe":"subscribe","not_filled":"Not filled","not_informed":"not informed","notifications":{"contributions":{"to_contribution":{"subject":"Thank you! Your contribution to %{project} has been confirmed!","text":"Success! \u003cbr /\u003eYour contribution has just been confirmed.\u003cbr /\u003e\u003cbr /\u003eCheck: %{contribution_name}\u003cbr /\u003e%{contribution_value}\u003cbr /\u003e%{reward}\u003cbr /\u003e\u003cbr /\u003e%{project_name}"}},"updates":{"subject":"If the league! Update of %{project_name} by %{project_owner}: %{update_title}","text":"%{update_title}\u003cbr /\u003e%{update_text}\u003cbr /\u003eComments? Send them on in the project page: \u003ca href='%{project_link}'\u003e%{project_name}\u003c/a\u003e."}},"notify_locale":"We identified your language through your browser. If you prefer another one, click on one of the flags on the right.","number":{"currency":{"format":{"delimiter":",","format":"%n %u","precision":0,"separator":".","significant":false,"strip_insignificant_zeros":false,"unit":"US$"}},"format":{"delimiter":",","precision":2,"separator":".","significant":false,"strip_insignificant_zeros":false},"human":{"decimal_units":{"format":"%n %u","units":{"billion":{"one":"Billion","other":"Billion"},"million":{"one":"million","other":"million"},"quadrillion":{"one":"quadrillion","other":"quadrillion"},"thousand":"thousand","trillion":{"one":"trillion","other":"trillion"},"unit":null}},"format":{"delimiter":".","precision":2,"significant":true,"strip_insignificant_zeros":true},"storage_units":{"format":"%n %u","units":{"byte":{"one":"Byte","other":"Bytes"},"gb":"GB","kb":"KB","mb":"MB","tb":"TB"}}},"percentage":{"format":{"delimiter":".","format":"%n%"}},"precision":{"format":{"delimiter":"."}}},"on_the_spot":{"cancel":"Cancel","ok":"OK","tooltip":"Click to edit..."},"or":"or","pages":{"assets":{"title":"Brands and seals"},"bad_browser":{"text":"To use OppoStarter and make sure everything works that you use a more current version of your browser or install one of the browsers below:","title":"Update your browser"},"explore":{"categories":"Categories","expiring":"Expiring Soon","follow":"follow","following":"followers","header_html":"Explore amazing projects \u0026nbsp;","in_funding":"Online","near":"Near Me","quick_explore":"Quick search","recent":"Recent","recommended":"Popular","subtitle":"Explore the projects, find the ones that move your heart, and make it happen!","success_follow":"Thank you! We will send you a weekly email with recent projects in the category %{name}.","success_unfollow":"You have stop following the category %{name}.","successful":"Successful","title":"Find incredible projects","unfollow":"Unfollow"},"flex":{"description":"Collective financing for all! Raise money in a simple and agile way with flex, new mode of crowdfunding on OppoStarter.","tagline":"Let's build a new mode of crowdfunding! Register your email and learn how to register your project in flex!","title":"OppoStarter flex - Flexible crowdfunding campaigns are in OppoStarter"},"guides":{"title":"Producers Guide"},"hello":{"allornothing":{"subtitle":"The principle is to beat the goal in time to receive the amount raised or all supporters receive the money back. Planning the Campaign is the Secret!","title":"All or Nothing!"},"campaign":{"subtitle":"Directors have up to 60 days to reach the financial goal they have determined for the project to take place. In exchange for the supports, they offer creative rewards.","title":"Collection Campaigns"},"cta":{"backer-cta":"Become a supporter, help people, and receive unique rewards","backer-link":"Support a project","maker-cta":"Be a director, show your project to the world and grow your StartUp","maker-link":"Start your project","title":"Understand our Policies"},"details":{"allornothing":{"text_html":"We believe in the model \u0026#8220;All or Nothing\u0026#8221; because in addition to campaigns raising more, this is one way to ensure that a project will only happen if it can be delivered as it has been described and promised to the supporters.","title":"Why All or Nothing?"},"fees":{"text":"We charge 5% of the total value of projects that have met or exceeded the collection goal. Plus 3-5% Stripe processing fees, payment method used in OppoStarter. Projects that did not reach the goal do not have any cost and all the supporters receive the money back.","title":"Our Fees"},"fund":{"text":"Two names for the same practice in which people contribute small sums of money to make projects viable.","title":"Collective or Crowdfunding Financing?"},"services":{"text":"OppoStarter provides support to site users and makes it possible for projects to capture resources quickly and easily using the internet. Anyone over 18 (or younger, but with a legal representative) can use our services and run a crowdfunding campaign as long as the project meets our selection criteria.","title":"Our services"},"work":{"text":"OppoStarter is independent, and built with love. Our passion is to build an environment where more and more projects can come to life. Today we are a team of 9 people very willing to help distribute more resources to project.","title":"We work with purpose and love."}},"fund":{"subtitle":"At OppoStarter, this is possible. Multi-category project managers connect to supporters interested in contributing small donations.","title":"Collective Financing"},"hero":{"money":"Donated to projects published here","money_html":"Donated to projects \u003cbr\u003epublished here","people_html":"People have already supported at least \u003cbr\u003e1 project on OppoStarter","projects_html":"Projects have already been \u003cbr\u003efunded on OppoStarter","success":"Projects have already been funded on OppoStarter","title":"Take your project off the paper!"},"idea":{"subtitle":"But having a project is not enough. You need access to the people you care about and the resources you need to make it come true.","title":"It all starts with a project!"},"page-title":"Know More","staff":"These are some of us waiting for you to take a project off the paper...","success":{"subtitle":"Supporters want to see the project happen. With the success of the campaign, creators produce the project and prepare the delivery of rewards to supporters!","title":"The project becoming a reality."},"testimonial":{"humberto":{"credentials":"supported more than 150 projects in OppoStarter","name":"Humberto Figueira","text_html":"\u0026#8220; It is a fascinating opportunity to be invited to share a person's dream and still receive a reward for the experience. \u0026#8221;"}}},"jobs":{"cta":"Start your project","info":"At the moment there are no vacancies open in OppoStarter. But rest assured that when we have we will publish here and through our social networks. In the meantime, how about doing a project? Try creating a free draft for your OppoStarter campaign!","title":"Work with us"},"press":{"abstract":{"title":"OppoStarter is the first and largest crowdfunding site, or collective financing. We are the meeting point of a growing community of people interested in, together, contribute financially to take out projects of various categories."},"assets":{"cta_html":"Download our brands \u0026gt;","title":"Needs high-resolution files from our brand and seals?"},"email":{"cta":"communication@oppostarter.com","title":"Want to talk with us?"},"hero":{"title":"Press room"},"history":{"cta_html":"Read the full story \u0026gt;","subtitle":"First collective funding platform for creative projects, OppoStarter was launched on January 17, 2018. The foundation manifesto said that the site was born with the desire: to see brilliant people with projects become successful...","title":"History of the OppoStarter Foundation"},"page-title":"Press room","social":{"news":"Subscribe to our weekly newsletter","title":"Follow Our Stories"},"stats":{"cta_html":"View full details separated by category \u0026gt;","money_html":"Donated to projects \u003cbr\u003epublished here","people_html":"People have already supported at least \u003cbr\u003e1 project on OppoStarter","projects_html":"Projects have already been \u003cbr\u003efunded on OppoStarter","subtitle":"Many artists, designers, researchers, gamers, scientists, entrepreneurs and activists have found on the platform a powerful tool to make their actions and projects financially viable. This story can be told in numbers.","title":"Our numbers"}},"privacy_policy":{"content":{"email":"Email","email_text":"Nós nos comunicamos com você apenas se você quiser que isso aconteça. \u003cbr\u003e Enviamos a você emails relativos às suas transações pessoais e anúncios relacionados a serviços, porém só o fazemos quando necessário. \u003cbr\u003e Você também receberá algumas notificações, que poderão ser dispensadas caso opte (por meio do opt-out). \u003cbr\u003e Os criadores dos projetos terão acesso ao endereço e email dos seus apoiadores, assim como aos valores apoiados e recompensas selecionadas.","explanation":"Explaining in a simple way","explanation_text":"Nós trabalhamos para lhe oferecer o melhor serviço possível – para tornar mais fácil organizar uma angariação de fundos e o gerenciamento de seu projeto. \u003cbr\u003e Sua conta no Catarse: \u003col\u003e\u003cli\u003e\u003cp class='prg2'\u003e1.  Apoiadores – as pessoas que se cadastrarem para serem apoiadores (que irão contribuir financeiramente com os projetos) precisarão informar seu nome completo, CPF, e-mail, endereço completo,  telefone fixo e celular, dados do cartão de crédito se for esta a modalidade de pagamento escolhida e/ou dados bancários (banco, agência e conta corrente). Esta última informação só será obrigatória para aqueles apoiadores que utilizarem boleto bancário como forma de pagamento.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp class='prg2'\u003e2.  Criadores de projetos – as pessoas que tiverem interesse em apresentar um projeto precisarão disponibilizar as seguintes informações: nome completo/Razão Social, endereço completo, telefone e e dados bancários (banco, agência e conta corrente) para recebimento dos recursos captados caso o projeto seja bem sucedido. Elas serão requisitadas pela equipe do Catarse após o envio do projeto, apenas se o projeto for selecionado para ir ao ar.\u003c/p\u003e\u003c/li\u003e\u003c/ol\u003e","explanation_text_cont":"Nós respeitamos o seu direito à privacidade, por isso, não fornecemos qualquer informação pessoal dos Apoiadores e Criadores de Projetos para terceiros, exceto em caso de ordem judicial nesse sentido ou a pedido dos Apoiadores, quando houver fraude, tentativa de fraude ou descumprimento dos Termos de Serviço por parte dos Criadores de Projetos. Nesse sentido, o Catarse esclarece que, tanto os dados bancários, como os dados do cartão de crédito dos Apoiadores serão armazenados em local seguro, nos servidores do Catarse ou nos servidores do meio de pagamento utilizado, para facilitar e agilizar futuros apoios, bem como eventuais estornos de valores, caso o(s) Projeto(s) apoiado(s) não seja(m) bem sucedido(s).","update":"Atualização da política de privacidade","update_text":"O Catarse reserva-se no direito de atualizar sua política de privacidade a qualquer momento. As informações sobre as atualizações serão enviadas ao endereço de email fornecido ou serão colocadas em local de destaque do site. \u003cbr\u003e Nós nos reservamos o direito de divulgar suas informações pessoais conforme exigido por lei e quando acreditarmos que a divulgação é necessária para proteger os nossos direitos. \u003cbr\u003e Para modificar ou excluir qualquer ou todas as informações pessoais que você forneceu para nós, faça o login e atualize seu perfil. \u003cbr\u003e Qualquer dúvida sobre a Política de Privacidade deve ser aberta uma solicitação através do email \u003ca href='mailto:contato@catarse.me'\u003econtato@catarse.me\u003c/a\u003e"},"title":"Privacy Policy"},"start":{"banner":{"1":"Supporters","2":"Your friends, family and project supporters.","3":"Rewards","4":"What you offer in exchange for the supports.","5":"Goal","6":"How much do you want to collect on OppoStarter.","7":"Time","8":"The period when your campaign will be open to receiving support."},"categories":{"loading_featured":"loading featured project...","no_featured":"No Featured Projects.","pledged":"Raised US$ {{pledged}} with {{contributors}} support for the project ","title":"OppoStarter has room for several types of projects! About us!"},"categoryProjects":{"1":{"category_id":23,"sample_project_ids":{"primary":4142,"secondary":1550}},"10":{"category_id":15,"sample_project_ids":{"primary":9521,"secondary":15004}},"11":{"category_id":20,"sample_project_ids":{"primary":11366,"secondary":8024}},"12":{"category_id":7,"sample_project_ids":{"primary":14391,"secondary":11694}},"13":{"category_id":19,"sample_project_ids":{"primary":11113,"secondary":12138}},"14":{"category_id":16,"sample_project_ids":{"primary":11812,"secondary":15251}},"15":{"category_id":9,"sample_project_ids":{"primary":22454,"secondary":20105}},"16":{"category_id":29,"sample_project_ids":{"primary":11470,"secondary":6997}},"17":{"category_id":27,"sample_project_ids":{"primary":18964,"secondary":8583}},"18":{"category_id":3,"sample_project_ids":{"primary":11847,"secondary":10800}},"19":{"category_id":4,"sample_project_ids":{"primary":6519,"secondary":14762}},"2":{"category_id":1,"sample_project_ids":{"primary":6914,"secondary":9438}},"20":{"category_id":8,"sample_project_ids":{"primary":9531,"secondary":13592}},"21":{"category_id":12,"sample_project_ids":{"primary":2073,"secondary":9744}},"22":{"category_id":28,"sample_project_ids":{"primary":14594,"secondary":16322}},"23":{"category_id":11,"sample_project_ids":{"primary":13425,"secondary":7391}},"3":{"category_id":18,"sample_project_ids":{"primary":17453,"secondary":1705}},"30":{"category_id":30,"sample_project_ids":{"primary":2895,"secondary":8389}},"4":{"category_id":13,"sample_project_ids":{"primary":10519,"secondary":17219}},"5":{"category_id":31,"sample_project_ids":{"primary":9670,"secondary":16012}},"6":{"category_id":21,"sample_project_ids":{"primary":14610,"secondary":10786}},"7":{"category_id":17,"sample_project_ids":{"primary":7917,"secondary":12993}},"8":{"category_id":10,"sample_project_ids":{"primary":16912,"secondary":7695}},"9":{"category_id":14,"sample_project_ids":{"primary":5710,"secondary":15915}}},"description":"OppoStarter is a crowdfunding platform, or collective financing, in the UK. Come and take projects from paper!!","features":{"feature_1":"Easy Approval","feature_2":"Fast and responsive service","feature_3":"Complete control panel","feature_4":"Campaign Blog","feature_5":"Subscription","feature_6":"Easy transfer","subtitle":"Know the solutions we have developed for you to finance your idea!","title":"The ideal platform for your campaign"},"form":{"select_default":"Select a category","submit":"Start your draft","title":"I want to start a campaign called"},"header":{"money":"They have invested in ideas published on OppoStarter","people":"People have already supported at least 01 project on OppoStarter","success":"Projects have already been funded here"},"header_html":"OppoStarter - Official Site","learn-more":"Learn More","mode":{"aon":{"info":"At the end of the campaign, you only get the money if you have reached the collection goal.","info_2":"Deadline online: 60 days"},"failed_info":"All or Nothing campaigns that do not reach the goal pay nothing. ","flex":{"info":"At the end of the campaign, you receive all the money, even without reaching the collection goal.","info_2":"Deadline online: 12 months"},"more_link":"\u003ca href=\"http://fazum.catarse.me/tudoounada-ou-flex?utm_source=start\u0026utm_medium=link\u0026utm_content=Saiba%20mais%20sobre%20as%20taxas%20e%20modalidades\u0026utm_campaign=ebook-tudoounada-flex\" class=\"alt-link\" target-\"_blank\"\u003eLearn more about rates and modalities\u003c/a\u003e","subtitle":"At OppoStarter you choose the ideal mode of collective financing for your campaign, without paying anything more for this!","tax_info":"Fees: 5% of total collected, plus 3 - 5% Stripe processing fee","title":"Two models. One Fee."},"page-subtitle":"Know the basics of OppoStarter","page-title":"How OppoStarter works?","panes":{"1":{"label":"Project opened to the world","src":"/assets/start-publicar.gif"},"2":{"label":"Fast and responsive service","src":"/assets/start-atendimento-ui.gif"},"3":{"label":"Complete control panel","src":"/assets/start-painel-ui.gif"},"4":{"label":"Campaign Blog","src":"/assets/start-blog-ui.gif"},"5":{"label":"Subscription","src":"/assets/start-apoio.gif"},"6":{"label":"Easy transfer","src":"/assets/start-repasse.gif"}},"qa":{"col_1":{"1":{"answer":"Firstly because we are extremely committed and passionate about what we do and want to see your project funded. But also because we are the first and largest platform in action in the UK. We are working independently to develop the project financing scenario in the UK and enable more people to realize their ideas, dreams and visions.","question":"Why Campaign in OppoStarter?"},"2":{"answer":"Each project in OppoStarter has its own particularity and the amount of work varies. Registering a project on OppoStarter is very easy, but a campaign has its challenges. The key is to have good campaign planning! We can help you! \u003ca href=\"#start-form\"\u003eJust start your draft.\u003c/a\u003e","question":"It is a lot of work to have an OppoStarter campaign?"},"3":{"answer":"No. You create your draft and publish your campaign directly through the site, whenever you want. However, there are some \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos\"\u003erules for creating projects\u003c/a\u003e that you must follow so that your project has no risk of being reported by the community after the publication.","question":"OppoStarter selects designs that go online?"},"4":{"answer":"OppoStarter provides support to site users and makes it possible for projects to capture resources quickly and easily using the internet. Anyone over 18 (or younger, but with a legal representative) can use our services and run a crowdfunding campaign.","question":"Who can use OppoStarter?"}},"col_2":{"1":{"answer":"It depends on the type of financing you choose. In the \"All or Nothing\" model, you only get the money if you reach the collection goal in the campaign time stipulated by you. If the project does not meet the collection goal, we will fully refund the money to your supporters, at no cost to you or to anyone who supported you. \u003cbr\u003e\u003cbr\u003eAlready in the flexible financing mode, affectionately called \"Flex\", you get all the money you can get regardless of hitting the target or not. You can better understand the difference between the models and what is the ideal for your project in this \u003ca href=\"http://fazum.catarse.me/tudoounada-ou-flex?ref=ctrse_start\"\u003eebook we prepare.\u003c/a\u003e","question":"I need to reach the goal to receive my money?"},"2":{"answer":"In the All or Nothing model, OppoStarter charges only 5% of the total amount collected if you reach 100% or more of your goal. Otherwise, we will refund the money to the supporters and will not charge anyone anything..\u003cbr\u003e\u003cbr\u003eIn the Flex model, Catarse charges 5% of the total collected by the campaign. If the project does not raise anything, there will be no charge.\u003cbr\u003e\u003cbr\u003eIf you want to know why we charge this commission and where we invest our money, check out our \u003ca href=\"http://crowdfunding.catarse.me/nossa-taxa?ref=ctrse_start\"\u003especial page (and transparent!) talking about our rate.\u003c/a\u003e","question":"What are our fees?"},"3":{"answer":"Family, friends, fans and members of communities that you are part of are your greatest contributors. You shake this network, win support and promote the project. Supporters publicize and recommend their campaign to others they know, and so the circle of supporters grows and the campaign gets support. The key is to build a good project, plan your campaign well and know how to direct your outreach efforts to those who really care about what you are proposing in your crowdfunding campaign.","question":"Where does the money from my project come from??"},"4":{"answer":"\u003ca href=\"https://support.oppostarter.com/en/topics/new\"\u003eAccess our Support Center\u003c/a\u003e or contact us through email: contact@oppostarter.com","question":"I have more questions. How do I do?"}}},"qa_title":"Still with doubts?","slogan":"Take your projects off the paper","submit":"Get started for free","tagline":"Crowdfunding and collective financing in the UK on OppoStarter","testimonials":{"1":{"content":"I have started the genome of the golden mussel. And jointly financed my PhD research. This model could change the world.","name":"Joyce Lewis","thumb":"/assets/start/thumb-marcela.jpg","totals":"It raised £ 40,736 with the help of 344 people to enable the Golden Mussel Genome project."},"2":{"content":"The best crowdfunding alternative.","name":"Tiago Vieira","thumb":"/assets/start/thumb-tiago.jpg","totals":"It raised £34,260 with the help of 203 people to make feasible the project \"When I stopped worrying about Canalhas\". The film went to Cannes. ;)"},"3":{"content":"A good reporter knows how hard it is to get money to fund the story of his dreams and still have editorial independence to actually write what he has discovered.","name":"Natalia Smith","thumb":"/assets/start/thumb-natalia.png","totals":"It raised £129,159 when receiving 1771 support to carry out 2 projects of the Public Agency of Investigative Journalism"},"4":{"content":"We have other possibilities to finance our project, but we choose OppoStarter crowdfunding.","name":"Kevin Johnson (Only Catcher)","thumb":"/assets/start/thumb-apanhador.jpg","totals":"It raised £163,600 when receiving 2181 supports to carry out 2 projects"},"5":{"content":"I know that there are 200 more people there with me, sending positive energy.","name":"Larissa Juk","thumb":"/assets/start/thumb-larissa.png","totals":"It raised £28,532 when receiving 218 support for the Larissa Juk project"}},"testimonials_title":"What are they saying there?...","title":"Finance your project collectively","video":{"src":"z7FBAjkcLG8","subtitle":"Submit your Project...","title":"A collective financing campaign for all types of projects. "}},"terms_of_use":{"content":{"access":"Registro e Acesso","access_text":"Qualquer pessoa maior de idade pode utilizar os serviços do CATARSE. NÃO É AUTORIZADA a participação de USUÁRIOS menores de dezoito anos de idade. Caso seja verificada eventual infração desta disposição, o CATARSE poderá cancelar, de imediato, o cadastro do USUÁRIO e quaisquer PROJETOS sob responsabilidade do USUÁRIO. Lembramos que a informação incorreta de dados pessoais, tais como a idade, é crime punido pela legislação brasileira com pena de 1 a 5 anos de reclusão e multa (art. 299 do Código Penal Brasileiro). \u003cbr\u003e Você pode acessar o CATARSE de duas maneiras: \u003cbr\u003e (a) cadastrando-se diretamente no CATARSE, através da criação de uma ID e senha, prestando as informações solicitadas; ou \u003cbr\u003e (b) utilizando a rede social Facebook e efetuando posteriormente seu cadastro no CATARSE. Neste caso, o USUÁRIO autoriza o CATARSE a utilizar suas informações de registro naquela rede social exclusivamente para completar seu cadastro no CATARSE. O CATARSE tem acesso apenas às informações públicas do usuário no Facebook. \u003cbr\u003e O USUÁRIO é o único responsável pela segurança de seu nome de USUÁRIO e senha. É por meio desses dados que o USUÁRIO pode acessar e alterar suas informações pessoais e outros dados de seu cadastro. \u003cbr\u003e Caso haja qualquer suspeita de uso indevido ou não autorizado de sua conta, o USUÁRIO deve notificar imediatamente o CATARSE através do \u003ca href='mailto:contato@catarse.me' class='alt-link'\u003econtato@catarse.me\u003c/a\u003e \u003cbr\u003e O CATARSE obriga-se a utilizar as informações cadastrais fornecidas pelo USUÁRIO exclusivamente na forma e nos limites do quanto necessário para a realização da aproximação entre APOIADORES e CRIADORES DE PROJETOS na forma aqui prevista. \u003cbr\u003e O USUÁRIO concorda em: \u003cbr\u003e 1. Fornecer informações verdadeiras, exatas, atuais e completas quando for realizar seu cadastro para acesso ao site; \u003cbr\u003e 2. Conservar e atualizar suas informações de forma a mantê-las verdadeiras, exatas, atuais e completas; \u003cbr\u003e 3. Ser responsabilizado por qualquer informação falsa, incorreta, desatualizada ou incompleta fornecida. Caso o CATARSE tenha razões suficientes para suspeitar da veracidade e/ou da exatidão de tais informações, terá o direito de suspender ou cancelar, imediatamente e independente de qualquer aviso ou notificação, a conta do USUÁRIO e quaisquer PROJETOS sob  responsabilidade do USUÁRIO. \u003cbr\u003e 4. Permitir que o CATARSE entregue os dados cadastrais dos CRIADORES DE PROJETO, disponíveis nos servidores do CATARSE ou dos meios de pagamento, aos APOIADORES, em caso de violação aos Termos de Uso, falha no cumprimento do PROJETO ou atraso na entrega das recompensas, ou Denúncias reiteradas (mais de 3 denúncias sobre o mesmo PROJETO ou o mesmo CRIADOR DE PROJETOS). Os dados cadastrais que poderão ser fornecidos são: nome completo ou razão social, endereço, CPF ou CNPJ, telefone e e-mail, nos limites do inciso VIII, do art. 7º da Lei 12.965 (“ Marco Civil da Internet”).\u003cbr\u003e","catarse_responsabilities":"Responsabilidade do CATARSE","catarse_responsabilities_text":" O CATARSE tem por objetivo apenas aproximar CRIADORES DE PROJETOS e APOIADORES, através de sua plataforma online. A utilização do CATARSE não gera relação de trabalho, vínculo empregatício, associação nem sociedade entre quaisquer USUÁRIOS (APOIADORES e CRIADORES) e o CATARSE, nem tampouco representa transação comercial ou venda de produtos ou serviços. \u003cbr\u003e O CATARSE é responsável pelo bom funcionamento de seu website. Entretanto, o CATARSE não garante que os PROJETOS serão executados, nem que os incentivos/recompensas oferecidos pelos CRIADORES DE PROJETOS serão honrados. \u003cbr\u003e É de responsabilidade única e exclusiva dos CRIADORES DE PROJETOS o resultado do PROJETO proposto, a entrega das eventuais recompensas prometidas e o ressarcimento por eventual dano experimentado pelos APOIADORES, oriundo de ação ou omissão dos CRIADORES DE PROJETOS. \u003cbr\u003e ","chargeback":"Contestação de Pagamentos","chargeback_text":"O CATARSE não se responsabiliza por eventuais contestações de pagamento ou cancelamento de apoios. Assim, sempre que um apoio for, por alguma razão, frustrado, seja por causas imputadas ao CRIADOR DE PROJETO, aos APOIADORES ou a terceiros, o CATARSE fica autorizado a deduzir, a qualquer tempo, do saldo do CRIADOR DE PROJETO os valores referentes a transações de algum modo bloqueadas, canceladas ou contestadas. Na eventualidade de inexistir saldo do CRIADOR DE PROJETO suficiente para cobrir o valor do apoio frustrado, o CRIADOR DE PROJETO será responsável por providenciar o ressarcimento do valor para o CATARSE.\u003cbr\u003e","content":"Conteúdo do Catarse","content_removal":"Preservação e Remoção de Conteúdo","content_removal_text":" Considerando que o CATARSE não é criador do conteúdo produzido e publicado pelos USUÁRIOS e que não há controle editorial prévio, o CATARSE, nos termos da legislação aplicável, não é objetivamente responsável pelo que é divulgado na plataforma. Ainda assim, o CATARSE oferece mecanismos eficientes para que qualquer pessoa que entenda ter tido algum direito seu violado possa fazer denúncias e busque resolver suas disputas, conforme abaixo indicado. \u003cbr\u003e Caso alguém entenda que algum conteúdo publicado na plataforma viole seus direitos de personalidade (a honra, a imagem, a voz, o nome, a intimidade etc.) ou seus direitos de propriedade intelectual (direitos autorais, marca, patente, desenhos industriais) poderá enviar uma reclamação através do contato@catarse.me. \u003cbr\u003e Uma vez enviada a reclamação e constatada a violação alegada, o CATARSE providenciará a remoção, integral ou parcial, do conteúdo no prazo de até 7 (sete) dias, dando ciência ao notificante e informando ao denunciado a sanção a ele aplicável, que poderá ser até o cancelamento definitivo do seu PROJETO ou cadastro, a critério exclusivo do CATARSE. \u003cbr\u003e Caso a violação alegada não seja objetivamente constatada, o CATARSE não estará obrigado a providenciar a remoção do conteúdo, e as partes serão cientificadas que foi instaurada uma disputa cuja decisão está além das prerrogativas do CATARSE, e que a remoção do conteúdo só será efetivada mediante ordem judicial nesse sentido. \u003cbr\u003e Notificar a plataforma a respeito de uma violação de direitos é um assunto sério com consequências jurídicas. Em caso de dúvida sobre a infração, recomenda-se buscar orientação jurídica. Antes de enviar uma notificação, o USUÁRIO deve sempre lembrar que existem exceções e limitações aos direitos de cada um. O envio de denúncias enganosas sobre infrações pode ser punível por lei. \u003cbr\u003e ","content_text":"O CATARSE é uma plataforma online que permite a publicação de conteúdo de USUÁRIOS tais como projetos e comentários, sem monitoramento nem análise prévia. O CATARSE não assume responsabilidade pelo conteúdo gerado por seus USUÁRIOS, nem tem qualquer obrigação de monitorar esse conteúdo. \u003cbr\u003e O CRIADOR DE PROJETOS autoriza o CATARSE a utilizar vídeos, textos e conteúdo inserido na página do respectivo PROJETO para fins não comerciais, tais como: materiais de divulgação do site, peças gráficas, publicações e vídeos do CATARSE, inscrições em editais públicos ou privados, concursos, prêmios e afins. O CATARSE não está autorizado a fazer uso comercial deste material, ou expor o CRIADOR DE PROJETOS e/ou os PROJETOS a situações inapropriadas ou pejorativas. \u003cbr\u003e O CATARSE reserva-se o direito de acessar, ler, preservar e divulgar quaisquer informações necessárias para cumprir estes Termos de Uso, obedecer disposições legais ou atender a ordens judiciais, com o que desde já concordam os USUÁRIOS, autorizando expressamente o CATARSE a acessar, ler, preservar e divulgar tais informações para os fins e nas circunstâncias aqui descritas. \u003cbr\u003e O CATARSE também se reserva o direito de remover ou não veicular, integral ou parcialmente, qualquer conteúdo de USUÁRIO, a seu exclusivo critério, especialmente se suspeitar ou tiver indícios de que o USUÁRIO tenha violado direito de terceiros.\u003cbr\u003e O CATARSE reserva-se, ainda, o direito de, a seu exclusivo critério e uma vez notificado a respeito, excluir informações de projetos consideradas por terceiros  como ilícitas, conforme detalhado abaixo: \u003cbr\u003e ","guidelines":"Definições","guidelines_text":"USUÁRIO: é toda e qualquer pessoa física ou jurídica que navegue ou faça uso do site do CATARSE, incluindo o CRIADOR DE PROJETOS e o APOIADOR DE PROJETOS.\u003cbr\u003e CATARSE TUDO OU NADA: é a forma de aproximação de CRIADORES DE PROJETOS e APOIADORES com objetivo de arrecadar, dentro de um prazo máximo de 60 dias, determinado valor para a realização de PROJETO específico, com a possibilidade de ter ou não recompensas vinculadas a cada PROJETO.\u003cbr\u003e CATARSE FLEX: é a forma de aproximação de CRIADORES DE PROJETOS e APOIADORES com objetivo de arrecadar, dentro de um prazo máximo de 365 dias, determinado valor para a realização de PROJETO específico, com a possibilidade de levantar a quantia arrecadada, mesmo que não alcançado o valor total desejado, e com a possibilidade de ter ou não recompensas vinculadas a cada PROJETO;\u003cbr\u003e\nCRIADOR DE PROJETOS: é o USUÁRIO do CATARSE interessado em angariar fundos para realização de um PROJETO\u003cbr\u003e\nAPOIADOR: é o USUÁRIO do CATARSE interessado em contribuir financeiramente com os PROJETOS de um ou mais CRIADORES DE PROJETOS, podendo receber recompensas, de acordo com as regras estabelecidas em cada projeto.\u003cbr\u003e\nPROJETO TUDO OU NADA: é um PROJETO divulgado na plataforma CATARSE pelo CRIADOR DE PROJETOS com o objetivo de alcançar, dentro de um prazo máximo de 60 dias, determinado valor para a realização de PROJETO específico, e com a possibilidade de ter ou não recompensas vinculadas.\u003cbr\u003e\nPROJETO FINANCIADO TUDO OU NADA: é o PROJETO TUDO OU NADA que alcança ou supera o valor pleiteado no prazo determinado pelo CRIADOR DO PROJETO.\u003cbr\u003e\nPROJETO FLEX: é um projeto divulgado na plataforma CATARSE pelo CRIADOR DE PROJETOS com objetivo de alcançar, dentro de um prazo máximo de 365 dias, determinado valor para a realização de PROJETO específico com a possibilidade de levantar a quantia arrecadada, mesmo que não alcançado o valor total desejado, e com a possibilidade de ter ou não recompensas vinculadas a cada PROJETO.\u003cbr\u003e PROJETO FINANCIADO FLEX: é o PROJETO FLEX que alcança qualquer quantia do valor pleiteado.\u003cbr\u003e REEMBOLSO. Devolução dos valores desembolsados pelos APOIADORES, a título de APOIO, caso o PROJETO TUDO OU NADA não seja FINANCIADO. O REEMBOLSO será realizado pelo CATARSE por meio de estorno do valor na próxima fatura ou fatura subsequente em caso de APOIO através de cartão de crédito, ou transferência bancária do valor em caso de APOIO através de boleto bancário. O comprovante de depósito ou a fatura do cartão de crédito, conforme o caso, equivalerão a um recibo pelo qual o APOIADOR dá plena geral e irrevogável quitação ao CATARSE, para nada mais reclamar a título de reembolso.\u003cbr\u003e DIRETRIZES: São as orientações e regras que devem ser seguidas pelos CRIADORES DE PROJETO ao decidirem publicar qualquer PROJETO no CATARSE, sendo certo que qualquer PROJETO que estiver em desacordo com tais diretrizes, poderá ser removido da plataforma pelo CATARSE.\u003cbr\u003e ","how_works":"O que é e como funciona o Catarse Tudo ou Nada","how_works_flex":"O que é e como funciona o Catarse Flex","how_works_flex_text":"Nessa modalidade, o objetivo dos CRIADORES DE PROJETOS continua sendo o financiamento coletivo, mas agora, com mais flexibilidade.\u003cbr\u003e Diferentemente do que ocorre no CATARSE TUDO OU NADA, optando pelo CATARSE FLEX o CRIADOR DE PROJETOS poderá realizar campanhas mais duradouras. Para ser criado, o PROJETO FLEX não precisa de uma previsão de data de encerramento. A campanha poderá ficar aberta por até 365 dias da data da publicação do PROJETO.\u003cbr\u003e Ao contrário do CATARSE TUDO OU NADA, o CRIADOR DE PROJETOS recebe tudo o que tiver conseguido arrecadar até o momento em que o PROJETO FLEX for encerrado, desde que o valor arrecadado supere o montante exigido pelo CATARSE como repasse mínimo.\u003cbr\u003e No CATARSE FLEX, além disso,  o APOIADOR poderá receber recompensas, desde que essa possibilidade esteja clara no PROJETO FLEX, mas o APOIADOR não receberá de volta, em nenhuma hipótese, os valores destinados àquele PROJETO, exceto em casos específicos a critério do CATARSE.\u003cbr\u003e ","how_works_text":"O CATARSE é uma plataforma online que se destina a aproximar CRIADORES DE PROJETOS e APOIADORES, com o objetivo de ANGARIAÇÃO COLETIVA DE FUNDOS (“crowd funding”), para viabilizar PROJETOS. O CATARSE permite que um CRIADOR DE PROJETOS apresente uma ideia de PROJETO e angarie fundos de APOIADORES interessados em contribuir com esse PROJETO. Os CRIADORES DE PROJETOS também poderão oferecer aos APOIADORES recompensas, que serão definidas pelo CRIADOR DE PROJETOS em cada um desses PROJETOS. O CATARSE reúne os valores desembolsados pelos APOIADORES destinados a cada um desses PROJETOS até o prazo final determinado pelos respectivos CRIADORES DE PROJETOS.\u003cbr\u003e\n\nQuando um PROJETO TUDO OU NADA alcança ou supera o montante estipulado para sua viabilização, no prazo estipulado no PROJETO, o valor total angariado dos APOIADORES ficará disponível para ser resgatado pelo CRIADOR DO PROJETO, descontados o percentual devido ao CATARSE, desde que o valor arrecadado supere o montante exigido pelo CATARSE como repasse mínimo. Em contrapartida, se um PROJETO TUDO OU NADA não alcança o montante solicitado, não será financiado e o CATARSE providenciará o REEMBOLSO das quantias pagas. Para as quantias pagas por meio de cartão de crédito, o REEMBOLSO será realizado na próxima fatura ou na fatura subsequente do cartão de crédito. Se o pagamento tiver sido feito através de boleto bancário, o REEMBOLSO será realizado através de depósito na conta bancária indicada pelo APOIADOR, assim que solicitado pelo CATARSE. Caso não seja fornecida a conta bancária para REEMBOLSO, o CATARSE manterá os valores disponíveis para REEMBOLSO pelo prazo máximo de 90 dias, conforme detalhado no item “Taxas e Pagamentos” adiante.\u003cbr\u003e\n","last_update":"Última atualização: 20/06/2016","law":"Lei aplicável","law_text":"Estes termos de serviço são regidos única e exclusivamente pelas leis brasileiras, sendo que qualquer ação judicial relativa à sua interpretação ou aplicação deverá ser processada e julgada pelo Poder Judiciário Brasileiro. \u003cbr\u003e Em caso de conflito de leis estaduais ou municipais, para a interpretação de qualquer dúvida ou litígio, deverá sempre prevalecer a legislação do Estado de São Paulo. \u003cbr\u003e O foro eleito para resolução de eventuais conflitos é Foro Central da cidade de São Paulo, com exclusão de qualquer outro, por mais privilegiado que seja.\u003c/p\u003e\u003cbr\u003e","penalty":"Penalidade","penalty_text":"O CATARSE poderá alterar projetos, cancelar projetos e encerrar as contas de CRIADORES DE PROJETOS que violem ou sejam suspeitos pelo CATARSE ou pelos seus USUÁRIOS de violar os direitos de propriedade intelectual de terceiros ou outros direitos, assegurados pela legislação brasileira. \u003cbr\u003e","responsabilities":"Quais as responsabilidades dos criadores e apoiadores?","responsabilities_text":"O CRIADOR DE PROJETOS: \u003cbr\u003e\n1. Escolhe a modalidade de PROJETO que pretende criar, se PROJETO TUDO OU NADA ou PROJETO FLEX; \u003cbr\u003e\n2. Descreve o PROJETO que pretende desenvolver, que deve ser necessariamente lícito e de acordo com a legislação brasileira; \u003cbr\u003e\n3. Estipula o valor total que deseja obter para financiar o PROJETO; \u003cbr\u003e\n4. Estipula o prazo em que deseja obter o valor total para iniciar o PROJETO, obrigatoriamente para a modalidade TUDO OU NADA e caso queira na modalidade FLEX; \u003cbr\u003e\n5. Estabelece, caso queira, recompensas aos APOIADORES que contribuírem com seu PROJETO, determinando as condições de sua obtenção, prazo e forma de recebimento, bem como o número de APOIADORES que poderão se beneficiar dessas recompensas. \u003cbr\u003e\n5.1. Ao estabelecer incentivos e/ou recompensas no PROJETO, assume as obrigações previstas no artigo 854 e seguintes do Código Civil Brasileiro, tornando-se diretamente responsável pelo cumprimento de sua promessa perante os APOIADORES que preencherem as condições estipuladas, sem qualquer responsabilidade, direta ou indireta, por parte do CATARSE; \u003cbr\u003e\n6. Concorda que o PROJETO apresentado pode não ser divulgado pelo CATARSE, a exclusivo critério deste; \u003cbr\u003e\n7. Assume a responsabilidade integral e exclusiva por tributos de quaisquer natureza incidentes sobre o PROJETO ou sobre sua atividade, inclusive quanto a tributos incidentes sobre pagamentos relativos à sua arrecadação, isentando expressamente o CATARSE, conforme o ajuste entre as partes, de qualquer responsabilidade tributária, trabalhista ou previdenciária relativas à sua atividade e/ou arrecadação; \u003cbr\u003e\n8. Compromete-se a solicitar o resgate dos valores arrecadados através da plataforma no prazo máximo de 90 dias a contar da data de encerramento do PROJETO, seja TUDO OU NADA, seja FLEX. Passado esse período, os valores em questão serão considerados irrevogavelmente e irretratavelmente cedidos ao CATARSE e poderão ser utilizados pelo CATARSE da forma como o CATARSE julgar mais conveniente; \u003cbr\u003e\n9. Neste ato, outorga mandato específico ao CATARSE, que fica desde já expressamente autorizado a gerenciar os valores dos apoios e emitir, em nome do CRIADOR DO PROJETO recibo ao APOIADOR, com a indicação do projeto apoiado, da data do pagamento, do valor angariado, do e-mail, do endereço, do nome completo ou razão social, CPF ou CNPJ do CRIADOR DO PROJETO e do APOIADOR; \u003cbr\u003e\n10. Indica meios através dos quais o APOIADOR pode acompanhar o desenvolvimento do PROJETO e reclamar diretamente ao CRIADOR DO PROJETO as recompensas eventualmente prometidas e não cumpridas nos prazos e condições previamente estipulados; \u003cbr\u003e 11. Fornece previamente ao início da captação seus dados bancários para a transferência dos recursos captados em caso de PROJETO FINANCIADO, descontadas as taxas previamente acordadas; \u003cbr\u003e \u003cbr\u003e\nO APOIADOR: \u003cbr\u003e\n1. Escolhe livremente o(s) PROJETO(S) que deseja apoiar; \u003cbr\u003e\n2. Estipula o(s) valor(es) com que deseja contribuir para o(s) PROJETO(S); \u003cbr\u003e\n3. Quando for oferecida recompensa, seleciona, se desejar, qual(is) recompensa(s) deseja receber diretamente do CRIADOR DE PROJETOS, nos termos e condições estabelecidas pelo próprio CRIADOR DE PROJETOS para o PROJETO selecionado; \u003cbr\u003e\n4. Efetua o pagamento por meio de cartão de crédito ou boleto bancário. \u003cbr\u003e\n4.1  Ao optar  pagamentos por meio de boleto bancário, caso o boleto gerado não seja pago na data de vencimento nele estipulada, o apoio não será efetivado e portanto não dará direito ao APOIADOR à recompensa eventualmente definida no PROJETO; \u003cbr\u003e 4.2  Ao realizar o apoio mediante cartão de crédito, seu ato será considerado irretratável e irrevogável, respondendo o APOIADOR por eventuais danos causados ao CATARSE ou a terceiros pelo não reconhecimento da operação junto à operadora do cartão de crédito; \u003cbr\u003e 4.3. Ao cumprir as condições estipuladas para o recebimento dos incentivos e/ou das recompensas prometidos pelo CRIADOR DE PROJETOS, o APOIADOR adquire os direitos previstos no artigo 855 e seguintes do Código Civil brasileiro, devendo exigir diretamente do CRIADOR DE PROJETOS, dependendo do caso, o cumprimento de sua promessa, estando ciente de que não há qualquer responsabilidade, direta ou indireta, por parte do CATARSE a esse respeito; \u003cbr\u003e 4.3. Ao decidir apoiar determinado projeto, destinando recursos para o mesmo, o APOIADOR assume a responsabilidade de manter cadastro atualizado e indicar conta bancária para eventual REEMBOLSO, caso decida realizar apoios por boleto bancário; \u003cbr\u003e 4.4. Ao apoiar um projeto, o APOIADOR outorga mandato específico ao CATARSE, que fica expressamente autorizado a gerenciar os valores dos apoios durante todo o período em que os PROJETOS permanecerem em aberto e até que sejam feitos o regaste pelo CRIADOR DO PROJETO, os REEMBOLSOS aos APOIADORES ou fique configurada a cessão de crédito dos valores pelo CRIADOR DO PROJETO ou pelos APOIADORES ao CATARSE que não mantiverem seus dados atualizados para a entrega dos valores pelo CATARSE; \u003cbr\u003e\n5. É o único responsável pelo acompanhamento do desenvolvimento do PROJETO, por meio de informações prestadas diretamente pelo CRIADOR DO PROJETO e, subsidiariamente, pelo CATARSE, estando ciente e de acordo que o CATARSE não tem qualquer obrigação de monitorar o PROJETO e tampouco qualquer responsabilidade, direta ou indireta, sobre as informações prestadas pelo CRIADOR DE PROJETOS, seja em relação à veracidade e/ou tempestividade das mesmas, seja em relação ao desenvolvimento do PROJETO, a incentivos e/ou recompensas ou com relação a qualquer outro tipo de dado vinculado ao PROJETO e seu desenvolvimento. O CATARSE envidará seus melhores esforços para manter o APOIADOR informado acerca do sucesso ou insucesso do PROJETO por ele apoiado, tal esforço, contudo, não representa qualquer responsabilidade por parte do CATARSE, com o que expressamente concorda o APOIADOR;\u003cbr\u003e 6. Poderá enviar ao CATARSE, através do \u003ca href='mailto:contato@catarse.me'\u003econtato@catarse.me\u003c/a\u003e, sugestões ou críticas à forma como um PROJETO divulgado pelo CATARSE está estruturado, bem como Denunciar um Projeto, utilizando o campo “Denúncia” ao final da página de cada PROJETO, seguindo as Diretrizes de Denúncia, denunciando a violação de quaisquer direitos de terceiros assegurados pela legislação brasileira; \u003cbr\u003e\n\u003cbr\u003e\n","rights":"Direitos de propriedade intelectual","rights_text":"O CATARSE é titular dos direitos de propriedade intelectual referentes a seu próprio serviço, que são protegidos pelas leis brasileiras e por tratados internacionais. Os direitos do CATARSE não incluem quaisquer direitos relacionados ao conteúdo criado pelos USUÁRIOS e exibidos no CATARSE. \u003cbr/\u003e OS CRIADORES DE PROJETOS declaram possuir os direitos de propriedade intelectual de seus próprios PROJETOS, sem qualquer participação dos APOIADORES ou do CATARSE, gozando de toda a proteção do sistema jurídico brasileiro, notadamente da lei de direitos autorais (Lei n° 9.610/98) e lei de propriedade industrial (Lei n° 9.279/96).\u003cbr/\u003e Entretanto, os CRIADORES DE PROJETOS estão cientes de que, ao utilizar o CATARSE, estão tentando angariar fundos para seu PROJETO publicamente e, com isso, assumem o risco de que sua ideia seja copiada e desenvolvida por terceiros. O CATARSE não pode impedir que isso ocorra, nem tem responsabilidade sobre essa situação, que foge completamente de seu controle.\u003cbr/\u003e ","start":"Começando","start_text":"Leia com atenção os termos de uso que passam a valer para apoios e projetos iniciados  partir de 20/06/2016.\u003cbr\u003e Bem-vindo ao Catarse! Vale lembrá-lo que o acesso ao conteúdo deste website dependerá de sua prévia e expressa concordância com os Termos de Uso e Políticas de Privacidade.\u003cbr\u003e \u003cbr\u003e\nOs Termos de Uso apresentam as \"Condições Gerais\" aplicáveis ao uso da plataforma online disponibilizada pelo GRUPO COMUM CONSULTORIA E INTERMEDIAÇÃO DE NEGÓCIOS LTDA - ME, sociedade limitada, inscrita no CNPJ sob n.º 14.512.425/0001-94, com endereço a Rua Itapeva, 220, conjunto 42, doravante denominada \"CATARSE\"","tax":"Taxas e pagamentos","tax_text":"O APOIADOR e o CRIADOR DO PROJETO estão plenamente cientes e concordam que todos os valores destinados ao apoio de projetos só poderão ser arrecadados por meio de cartão de crédito ou boleto bancário, (conforme opção do APOIADOR), sendo depositados em conta de titularidade do CATARSE.\u003cbr/\u003e\nNo caso de apoio por meio do CATARSE FLEX, encerrado o PROJETO pelo CRIADOR DE PROJETOS, o valor total arrecadado para esse PROJETO ficará disponível para ser resgatado pelo CRIADOR DO PROJETO por 90 dias contados a partir da data de encerramento do PROJETO, descontando-se o montante de 13% (treze por cento) referente à taxa de intermediação do CATARSE e às tarifas cobradas pelos meios de pagamento. No período em que os valores arrecadados permanecerem sob a gestão do CATARSE, eventuais rendimentos de aplicações financeiras poderão ser incorporados ao valor arrecadado e compor a base sobre a qual incidirá, no momento do resgate, a taxa acima mencionada. Reitera-se que, não haverá possibilidade de devolução aos APOIADORES dos valores destinados aos PROJETOS FLEX. A data de disponibilização dos valores arrecadados poderá variar de acordo com a forma e o meio com que os apoios tenham sido efetuados.\u003cbr/\u003e\nNo caso de apoio para PROJETO  TUDO OU NADA, a partir da efetivação do apoio, surgem duas possibilidades: \u003cbr/\u003e\nSe o PROJETO FOR FINANCIADO, o valor total arrecadado para esse PROJETO (ainda que superior ao valor originalmente solicitado pelo CRIADOR DO PROJETO) ficará disponível para ser resgatado pelo CRIADOR DO PROJETO por 90 dias contados a partir da data de encerramento do PROJETO, descontando-se o montante de 13% (treze por cento) referente à taxa de intermediação do CATARSE e às tarifas cobradas pelos meios de pagamento. No período em que os valores arrecadados permanecerem sob a gestão do CATARSE, eventuais rendimentos de aplicações financeiras poderão ser incorporados ao valor arrecadado e compor a base sobre a qual incidirá, no momento do resgate, a taxa acima mencionada. A data de disponibilização dos valores arrecadados poderá variar de acordo com a forma e o meio com que os apoios tenham sido efetuados.\u003cbr/\u003e Se o PROJETO NÃO FOR FINANCIADO, os APOIADORES que tiverem realizado o APOIO por meio de cartão de crédito, receberão automaticamente o REEMBOLSO do valor originalmente oferecido ao PROJETO, na próxima fatura ou na fatura subsequente à data de encerramento do PROJETO. Já os APOIADORES que tiverem realizado o APOIO mediante boleto bancário, serão informados pelo CATARSE que o PROJETO não foi financiado e deverão fornecer os dados de sua conta bancária para que o REEMBOLSO possa ser realizado. O CATARSE destaca que nesse caso o REEMBOLSO não pode ser feito automaticamente, considerando que no momento da realização do APOIO não são solicitados dados bancários dos APOIADORES que pagam via boleto bancário. \u003cbr\u003e O APOIADOR está ciente que, caso não forneça seus dados bancários quando informado pelo CATARSE que o PROJETO apoiado não foi FINANCIADO, não será possível ao CATARSE realizar o REEMBOLSO. Nesse caso, por mera liberalidade, o CATARSE manterá os valores disponíveis para resgate por 90 dias a contar da data de encerramento do PROJETO. Passado esse período, considerar-se-á efetivada uma cessão do crédito irrevogável e irretratável do APOIADOR ao CATARSE, que portanto fica expressamente autorizado pelo APOIADOR a dar a destinação que melhor lhe aprouver aos valores mantidos na plataforma, momento a partir do qual o APOIADOR perderá a possibilidade de reclamar tais quantias a qualquer título e a qualquer tempo. \u003cbr\u003e Salvo disposição em contrário, todas as taxas são cotadas em Reais (R$). O USUÁRIO é o responsável pelo pagamento de todas as taxas e impostos associados com o uso do CATARSE, incluindo, mas não se limitando à taxa de intermediação do CATARSE e taxas ou tarifas praticadas pelos meios de pagamento, assim como quaisquer impostos ou tributos que incidam ou venham a incidir sobre o PROJETO ou sobre a aproximação entre o APOIADOR e CRIADOR DE PROJETOS. Caso um PROJETO seja retirado do CATARSE por violação dos Termos de Uso, violação de normas legais ou por ordem judicial, os valores pagos pelos APOIADORES poderão não ser reembolsados, caso o APOIADOR, tendo conhecimento de tal violação, não a tenha denunciado ao CATARSE através do contato@catarse.me. \u003cbr\u003e Tendo em vista que os serviços bancários e de cartões de crédito são independentes do CATARSE, estes possuem exclusiva responsabilidade pelos pagamentos processados e respondem pelas falhas na utilização de seus meios de pagamento. \u003cbr\u003e\n"},"title":"Termos de uso"}},"passwords":{"edit":{"label_new_password":"New password","site_title":"Change password","submit":"Change password","subtitle":"You requested to reset your password. Fill your new password below and click \"Change Password\". If you did not request this password reset, just skip this page and your password will remain unchanged.","title":"Reset password"},"email":{"content_html":" \u003cp\u003eSomeone has requested a link to change your password, and you can do this through the link below.\u003c/p\u003e\u003cp\u003e%{link}\u003c/p\u003e\u003cp\u003eIf you didn't request this, please ignore this email.\u003c/p\u003e\u003cp\u003eYour password won't change until you access the link above and create a new one.\u003c/p\u003e ","title":"Reset password instructions."},"new":{"site_title":"Recover password","submit":"Send instructions to reset my password","title":"Forgot password?"}},"payment":{"state":{"chargeback":"Chargeback","paid":"Confirmed in %{date}","pending":"Awaiting payment confirmation","pending_refund":"Refund requested in %{date}","refunded":"Refunded on %{date}","refused":"Payment declined in %{date}"}},"project":{"delete":{"posts":"New successfully deleted"},"display_status":{"draft":"draft","expired":"expired","failed":"not funded","not_reached_goal":"waiting","reached_goal":"funded","successful":"funded","waiting_confirmation":"waiting","waiting_funds":"waiting"},"finish":{"successful":{"email_subject":"Hooray! The project %{project_name} was successful on OppoStarter!","email_text":"The project %{project_link}, that you have contributed to, was successfully funded! Let's celebrate o/\u003cbr\u003e\u003cbr\u003eThe project has, including yours, %{project_total_contributions} wonderful contributions, raised %{project_pledged} and reached %{project_process}% of its goal =D\u003cbr\u003e\u003cbr\u003eSomething that is important to know: the OppoStarter team takes 3 days to send to the project creator the list of all the contributions. So the project creator should be in touch with you to thank you and talk about the rewards delivery in a few days.\u003cbr\u003e\u003cbr\u003eIn the meantime, why don't you share this success with all your friends?\u003cbr\u003e\u003cbr\u003e\u003cdiv style='text-align:center;'\u003e%{facebook_button}%{twitter_button}\u003c/div\u003e\u003cbr\u003e\u003cbr\u003eIf you want to get in touch with %{project_owner_name}, send an email to %{project_owner_email}.\u003cbr\u003e\u003cbr\u003eIf you have any questions about OppoStarter, access our FAQ: \u003ca href='https://www.oppostarter.com/faq' style='color: #008800';\u003ewww.oppostarter.com/faq\u003c/a\u003e or send an email to \u003ca href='mail_to:contact@oppostarter.com' style='color:#008800;'\u003econtact@oppostarter.com\u003c/a\u003e\u003cbr\u003e","facebook_text":"Hooray! The project '%{name}', which I contributed to, was successful on OppoStarter!","notification_text":"Hooray! The project %{link} that you contributed to was successful! Spread the word!","reward_notification_text":"Soon, %{link} will contact you to deliver your reward. Enjoy!","twitter_text":"Hooray! The project '%{name}', which I contributed to, was successful on @OppoStarter! %{short_url}"},"unsuccessful":{"email_subject":"The project %{project_name} wasn't funded on OppoStarter.","email_text":"Unfortunately the project %{project_link}, that you contributed to, did not reached its goal and was not funded at OppoStarter.\u003cbr\u003e\u003cbr\u003eSo, you have received \u003cstrong\u003e%{value}\u003c/strong\u003e in credits to contribute to other projects. You can find other %{project_category} projects in %{explore_category_link}.\u003cbr\u003e\u003cbr\u003eYou also can ask for your refund by clicking in %{credits_link}. Remember that you signed up in OppoStarter using %{user_provider}. If you have some difficulty in this process, do not hesitate to send an email to financeiro@catarse.me with the subject \"Refund - login issue\".\u003cbr\u003e\u003cbr\u003eIf, for any reason, you want to contact %{project_owner_name}, send an email to %{project_owner_email}.\u003cbr\u003e\u003cbr\u003eIf you have any otherquestions, access our FAQ or send an email to \u003ca href=\"mail_to:contact@oppostarter.com\" style=\"color: #008800;\"\u003econtact@oppostarter.com\u003c/a\u003e.\u003cbr\u003e","notification_text":"You received %{value} in credits to contribute to other projects. If you prefer, you can request a refund %{link}.","unsuccessful_text":"The project %{link} that you contributed to wasn't funded. Maybe next time!"}},"start":{"email_subject":"Your project has been received by OppoStarter team","email_text":"Thanks for trusting your project to OppoStarter :)\u003cbr\u003e\u003cbr\u003eWe are going to take a look at your project as quickly as we can, but we are a small team, so please give us up to 4 days to respond. We may get back to you sooner though, so pay attention to your inbox!\u003cbr\u003e\u003cbr\u003eIn the meantime, you should try to get to know the projects that are online (\u003ca href='%{explore_link}' style='color: #E75297 !important;'\u003e%{explore_link}\u003c/a\u003e) and - if you like any of them - contribute! This is a great way to show support for the crowdfunding culture in Brazil and to feed the ecosystem that keeps growing around OppoStarter.\u003cbr\u003e\u003cbr\u003eYou may get some inspiration for your own project...\u003cbr\u003e\u003cbr\u003eStay tuned for updates in \u003ca href='%{facebook}' style='color: #E75297 !important;'\u003eFacebook\u003c/a\u003e and get some deeper knowledge about OppoStarter by reading our \u003ca href='%{blog}' style='color: #E75297 !important;'\u003eblog\u003c/a\u003e.\u003cbr\u003e\u003cbr\u003eIf you have any questions, send an email to: %{email}","notification_text":"Your project has been received by the OppoStarter team"},"update":{"failed":"Your information has not been saved, please verify that all fields have been filled out correctly","success":"Information was updated"},"video_regex_validation":"only Vimeo URLs are allowed"},"project_by":"project by","project_plural":"projects","project_singular":"project","projects":{"about_mobile":{"back":"\u003c Back","by":"by"},"announce_expiration":"Your project is ending soon.","announce_expiration_error":"Ending soon already defined!","aon_nav_actions":{"publish":"Continue","send":"Submit"},"card":{"by":"by","contributed":"raised","display_status":{"approved":"Approved","draft":"Draft","expired":"Finished","failed":"Not Funded","flex_successful":"Funded Flex","in_analysis":"Under analysis","not_reached_goal":"Waiting","reached_goal":"Funded","rejected":"Rejected","successful":"Funded","waiting_funds":"Deadline closed"},"pledged_html":"\u003cspan\u003e%{value}\u003c/span\u003e raised","progress_html":"\u003cspan\u003e%{percent}%\u003c/span\u003e financed","reached":"reached","remaining":{"one":"remaining","other":"remaining"},"time_remaining_html":{"one":"\u003cspan\u003e%{count} %{unit}\u003c/span\u003e remaining","other":"\u003cspan\u003e%{count} %{unit}\u003c/span\u003e remaining"}},"contributions":{"backed_projects":"Supported %{count} projects","checkout":{"no_credits":"You don't have enough credits to contribute to this project.","success":"Your contribution was successfully made. Thanks a lot!"},"contribute_text":{"credits_tab":"My credits"},"contribution":{"anonymous_contribution":"Anonymous contribution","anonymous_description":"Opted to remain incognito","no_reward":"This contribution has not chosen to receive a reward"},"contribution_warning":{"info":"The execution of the proposal and the delivery of the rewards is the sole responsibility of the project director.","link":"http://suporte.catarse.me/hc/pt-br/articles/115002214043-Responsabilidades-e-Seguran%C3%A7a","link_label":"Learn About Responsibilities and Security","subtitle":"Supporting a project is believing and trusting in its potential to become a reality..","title":"OppoStarter is not a store."},"created_projects":"Created %{count} projects","edit":{"anonymous_confirmation":"Choosing this option your support will not be public for other OppoStarter users. Only you and the Project Director will have access to your support information.","anonymous_confirmation_title":"Are you sure you want your support to be anonymous?","anonymous_contribution":"I want my support to be anonymous","brazil_address_title":"Fill in your Brazilian billing address","choose_boleto":"Payments from the UK","choose_credit_card":"PayPal","choose_payment":"How do you want to pay?","choose_payment_subtitle":"Select below a payment method","cpf":"To proceed, please report:","credit_card":{"cvv":"Security Code (CVV / CVV2)* ","cvv_tip":"The 3 digits (when in front) or 4 digits (when behind) of your card","cvv_tooltip":"The 3 or 4 digits on the back of the VISA, MASTER, DINERS, and front AMEX cards.","document":"CPF/CPNJ of the holder *","document_tip":"CPF/CNPJ of the credit card holder used","expiry":"Expiration (mm / yyyy)* ","expiry_tip":"The expiration date, usually on the front of the card","finish_payment":"Finish payment","installments":"Installments","loading":"Loading Card Information...","name":"Full name of card holder *","name_tip":"Name printed on front of your credit card","number":"Credit card number *","number_tip":"The number usually 16 digits in front of your credit card","save_card":"I want to save my credit card to facilitate future support.","terms_of_use_agreement":"By supporting, you agree with the \u003ca class=\"alt-link\" href=\"/en/terms-of-use\"\u003eTerms of Use\u003c/a\u003e e \u003ca class=\"alt-link\" href=\"/en/privacy-policy\"\u003ePrivacy Policy\u003c/a\u003e.","use_another":"Use another credit card."},"credit_card_select":"Credit card","credits_notice_html":"This contribution will be paid with your credits. After the confirmation, you will have \u003cstrong\u003e%{credits}\u003c/strong\u003e in credits to contribute other projects.","credits_preview_html":"You have \u003cstrong\u003e%{credits}\u003c/strong\u003e in credits for this support \u003cstrong\u003euntil the 10/11\u003c/strong\u003e, according \u003ca href='http://blog.catarse.me/simplificacao-dos-reembolsos-e-o-fim-dos-creditos/' target='__blank'\u003enew rules\u003c/a\u003e disclosed by OppoStarter.","credits_submit":"Make the payment","credits_title":"Payment with credits","debit_card_info":"(Debit card not accepted)","delivery_address":"Address","error":"Oops. There was an error while registering your contribution. Please try again.","errors":{"global":"Please review the fields below before proceeding.","inline":{"creditcard_cvv":"Security code is invalid.","creditcard_expiry":"Invalid expiration date.","creditcard_name":"Invalid name.","creditcard_number":"Invalid credit card number."},"submission":{"card_invalid":"Invalid credit card data. Please review your credit card information and try again..","encryption_error":"Please try again in a few moments..","error":"\u003cspan\u003eThere was a problem processing your payment..\u003c/span\u003e\u003cbr\u003e\u003cbr\u003eError: \u003ci\u003e%{message}\u003c/i\u003e","payment_failed":"Please review your credit card information and try again in a few moments..","slip_submission":"There was an error while trying to generate the ticket. Please try again in a few moments..","slip_validation":"Error validating form data. Please review and try again.."},"validation":{"email":"Invalid email.","empty_field":"Field can not be empty.","phone":"Invalid phone number.","state":"State is required."}},"fields":{"anonymous":"I want my support to be anonymous","city":"City *","complete_name":"Full name *","email":"Email *","neighbourhood":"District *","owner_document":"CPF/CNPJ *","phone":"Telephone *","state":"State *","street":"Street *","street_complement":"2nd Address","street_number":"Number *","zipcode":"Zip code *"},"form_labels":{"payment_card_date":"Expiration (mm/yyyy)","payment_card_flag":"Flag","payment_card_installments":"Installments","payment_card_name":"Name printed on credit card","payment_card_number":"Card Number","payment_card_source":"Security Code","payment_card_source_short":"CVC","user_another_card":"Use another credit card"},"installment_with_tax":"Interest-free","insufficient_credits":"You have %{credits} in credits. This amount is not enough to support, please choose another payment method.","international":{"description":"You can use PayPal to make international payments","important_html":"\u003cp\u003eYou can use PayPal for international payments. Note that you'll have 60 days to receive a refund without paying any fees.\u003c/p\u003e\u003cp\u003eIf you can make the regular payment through MoIP, we recommend you do so.\u003c/p\u003e\u003cp\u003eBut if that's not possible, don't worry: you'll always be able to receive your money back. Note that if your refund is made more than 60 days after your payment, you'll have to pay PayPal's fee, which is 5.4% per transaction.\u003c/p\u003e","submit":"Proceed to PayPal's checkout","title":"Want to make an international payment?"},"live_in_brazil":"If you live in Brazil, please check this box","next_step":"Next step","number_card":"Card Details","owner_card":"Card holder details","pagarme_warning_html":"OppoStarter is in the test phase of a new means of payment that will facilitate the financial support and the possible reimbursement of the values to the supporters. Therefore, we caution that extra details, besides those mentioned in the Terms of Use, may be required to support this project. Any questions or difficulties, please contact us by email %{mailto} . Thank you.","page-title":"Support the %{name}","pay":"Finish payment","pay_with":"Pay With","payment_account":"Debit Account Payment","payment_boleto":"Payment with Ticket","payment_card":"Payment with Card","payment_info":"Choose the payment method","payment_save_card":"I want to save my credit card to facilitate future support.","payment_slip_disclaimer":"If the project is not successful, we will repay your support. The bank details reported here will be used for this.","print_slip":"Print Ticket","required":"* Required field","review_errors":"Some information is missing or not entered correctly, correct all fields marked in red and try again","review_errors_title":"Check the reported details","review_slip_email":"You will also receive an email with this ticket.","review_subtitle":"These details will be informed to the project director","review_title":"Fill in and review the payment data","review_with_reward_html":"You will contribute with \u003cstrong\u003e%{value}\u003c/strong\u003e and receive the following reward:","review_without_reward_html":"You will contribute with \u003cstrong\u003e%{value}\u003c/strong\u003e but are declining any reward.","reward_sold_out":"That reward is limited. Start new support.","safe_payment":" SECURE PAYMENT","select_account":"You will be redirected to your bank website:","select_boleto":"To proceed, please select:","selected_reward":{"edit":"Edit","review_without_reward_html":"You will support with \u003cstrong\u003e%{value}\u003c/strong\u003e and does not want any reward for your support.","reward":"Reward selected","value":"Value of support"},"slip_expiration":"This bank slip expires on %{date}.","slip_message":"In generating the ticket, the director is already counting on his support.","submit":{"credits":"Confirm","moip":"Proceed to MoIP's checkout"},"subtitle":"This is the last step to become part of this project.","title":"Fill in and review your data","transaction_error":"Transaction declined, please double check your data or contact the bank / card issuer for more information.","you_are_about_html":"You're about to become part of the group that makes %{link} happen."},"edit_international":{"anonymous_confirmation":"Choosing this option your name won't be shown on the public backers section area. Only you and this project creator will have access to your name and contribution details.","anonymous_confirmation_title":"Are you sure you want to make you contribution non-public?","credit_card":{"cvv":"Security code (CVV / CVV2) * ","cvv_tip":"The 3 digit (when on the front) or 4 digit (when on the back) of your card","cvv_tooltip":"The 3 or 4 digits that are on the back of the VISA, MASTER, DINERS and ELO cards or on the front of the AMEX card.","document":"","document_tip":"","expiry":"Expiration (mm/aaaa) * ","expiry_tip":"The validity date, usually on the front of your card","finish_payment":"Finish payment","installments":"Instalments","loading":"Loading credit card info...","name":"Name on the credit card *","name_tip":"Name printed on the front of your card","number":"Credit card number *","number_tip":"Usually a 16 digit number printed on the front of your card","save_card":"I want to save my credit card for future payments.","terms_of_use_agreement":"By paying, you agree to OppoStarter \u003ca class='alt-link' href='/en/terms-of-use'\u003eTerms of Use\u003c/a\u003e and \u003ca class='alt-link' href='/en/privacy-policy'\u003ePrivacy Policy\u003c/a\u003e.","use_another":"Use another card."},"credit_card_select":"Credit card","debit_card_info":"(Debit card not accepted)","errors":{"global":"Please, take a look at the following errors: ","inline":{"creditcard_cvv":"Security code is not valid.","creditcard_expiry":"Expiration date is not valid.","creditcard_name":"Name is not valid.","creditcard_number":"Credit card number is not valid."},"submission":{"card_invalid":"Credit card information is not valid. Please review your credit card info and try again.","encryption_error":"Please try again in a few moments.","error":"\u003cspan\u003eAn error ocurred while trying to process your payment.\u003c/span\u003e\u003cbr\u003e\u003cbr\u003eError: \u003ci\u003e%{message}\u003c/i\u003e","payment_failed":"Please review your credit card info and try again in a few moments."},"validation":{"email":"Email is not valid.","empty_field":"The field cannot be empty."}},"fields":{"anonymous":"Do not show my name on the public backers section","city":"City *","complete_name":"Full name *","email":"Email *","neighbourhood":"District *","owner_document":"CPF/CNPJ *","phone":"Phone *","state":"State *","street":"Address *","street_complement":"Compliment","street_number":"Number *","zipcode":"Zip Code *"},"next_step":"Next step","payment_info":"Payment information","required":"* Required fields","safe_payment":" SECURE PAYMENT","selected_reward":{"edit":"Edit","review_without_reward_html":"You are going to back with \u003cstrong\u003e%{value}\u003c/strong\u003e and you do not want any reward.","reward":"Selected reward","value":"Contribution details"},"title":"Contact details and address"},"existing_payment":{"check_email":"Check in your email box if the temporary receipt of support has been sent. If it has not been, contact %{mail_to_link} conosco, informando o código identificador do seu apoio (%{gateway_id}), que iremos te ajudar no que for preciso.","click_here":"click here","contact":"contact","new_contribution":"If you have accessed this page in error and want to make a new backup, %{link}","page_title":"Your support for %{name} was performed","warning":"Attention","warning_subtitle":"You are trying to access an address for an already started support:"},"faq":{"all_or_nothing":{"common_questions":"Frequently Asked Questions","explanation":"If this project does not reach the goal, you get back 100% of what you paid through a refund.","how_contribute":"How do I support this project?","how_contribute_answer":"Fill in the details of your support as well as all your payment information to finalize the support","when_about_my_payment_data":"What others can see from my support?","when_about_my_payment_data_answer":"The project will be added to your support history on your profile, but the amount you have backed and the reward you choose will not go public.","when_made_payment":"When the payment is made? ","when_made_payment_answer":"If you paid with a credit card, confirmation should be the same day. If you went with a ticket, within 4 business days.","when_project_fails":"And if the project does not reach the goal?","when_project_fails_answer":"In that case, you get back 100% of what you paid through a refund.","when_project_funded":"If the project is funded, how do I get my reward??","when_project_funded_answer":"When your reward is ready, %{name} will contact you to arrange delivery."},"flexible":{"common_questions":"Frequently Asked Questions","explanation":"This project will get all the features when finalizing ","how_contribute":"How do I support this project?","how_contribute_answer":"Fill in the details of your support as well as all your payment information to finalize the support","when_about_my_payment_data":"What others can see from my support?","when_about_my_payment_data_answer":"The project will be added to your support history on your profile, but the amount you have backed and the reward you choose will not go public.","when_made_payment":"When the payment is made?","when_made_payment_answer":"If you paid with a credit card, confirmation should be the same day. If you went with a ticket, within 4 business days.  ","when_project_funded":"How do I receive my reward??","when_project_funded_answer":"When your reward is ready, %{name} will contact you to arrange delivery.","when_project_owner":"Who is responsible for the project?","when_project_owner_answer":"OppoStarter is only an intermediary, if you want to understand more about the project, contact the %{name}"}},"new":{"cannot_contribute":"It's not possible to contribute to this project right now. Please consider contributing to another project.","choose_reward":"Choose the reward and then the value of the support","choose_value":"Enter the amount of your support.","header":{"subtitle":"You're just a few steps away from making a difference and becoming a part of this project.","title":"Ohh yeah!"},"minimum_disclaimer":"From US$ \u003cspan id=\"minimum-value\"\u003e10\u003c/span\u003e It is great ;)","next_step":"Review and make payment","no_reward":"Thanks. I just want to help the project.","no_rewards":{"label_btn":"Continue","label_description":"You can support this project from US$10","label_error":"Support amount is incorrect","label_title":"Value of your support"},"page-title":"Support the %{name}","submit":"Review and proceed to checkout","title":"Contribution %{name}","you_have_credits":"You have \u003cstrong\u003e%{credits}\u003c/strong\u003e in credits for this support."},"no_account_refund":{"fill_form_text":"You have %{amount} outstanding repayments of unfunded projects."},"no_estimate":"Not available","report":{"info":"Info","profile":"Profile"},"review":{"Credits":"Credits","MoIP":"MoIP","PayPal":"PayPal","error":"Oops. There was an error. Please try again."},"selected_reward":{"edit":"Edit","review_without_reward_html":"You will support with \u003cstrong\u003e%{value}\u003c/strong\u003e and does not want any reward for your support.","reward":"Reward selected","value":"Value of support"},"shipping_options":{"free":"Free","international":"For everyone","national":"Only for the UK ","presential":"PickUp"},"show":{"error":"Oops. You can only access this page after contributing to a project.","header_subtitle":"With your help, this project is getting closer to success. Welcome to the team!","header_title":"Thank you! :D","moip_message":"Your transaction is “Authorized” and your MoIP code is “%{code}″.\u003cbr\u003eIf you have any questions about this transaction, contact MoIP directly.","recommended_projects":"You may like these other projects:","text_subtitle":"Tell your friends about your contribution","text_title_html":"You are now part of the group trying to make %{link} happen.","title":"Thank you"},"survey":{"address_neighbourhood":"District:","address_title":"Name and address","answered_at":"Answered in %{date}","survey":"Questionnaire"},"thank_you":{"follow":"Follow","follow_category":"Follow the category %{category}? You can receive first-hand and directly in your email when new projects go online!","profile_link":"through your profile","project_recommendations":"Project recommendations for you","share":"Share","share_back":"Share with your friends and help this project hit the goal!","thank_you":"Thanks! Your support is being processed.","thank_you_text_html":"\u003cdiv class='fontsize-base'\u003eOnce the payment is completed, we will send the confirmation of your support to the registered email:\u003c/div\u003e\u003cdiv class='fontsize-large u-marginbottom-10'\u003e%{email}\u003c/div\u003e\u003ca class='alt-link fontsize-small' href='%{link_email}'\u003eIf this is not your contact email, change here\u003c/a\u003e","tweet":"Tweet"},"thank_you_slip":{"thank_you":"I am counting on your support....","thank_you_text_html":"\u003cdiv class='fontsize-base'\u003eYou also received this ticket in the email:\u003c/div\u003e\u003cdiv class='fontsize-large u-marginbottom-10'\u003e%{email}\u003c/div\u003e\u003ca class='alt-link fontsize-small' href='%{link_email}'\u003eIf this is not your contact email, change here\u003c/a\u003e"},"user_since":"Account is not credited since %{date}","you_selected":"You Selected!"},"contributions_report":{"legend_labels":{"failed":{"paid":{"label":"Refund not started","text":"Supporters has not yet provided bank details for OppoStarter to make the refund or the data provided is incorrect."},"pending_refund":{"label":"Refund in progress","text":"Supporter already provided bank details and refund is in progress."},"refunded":{"label":"Refunded","text":"Credit card support: the amount has already been reversed on the card used by the supporter and should appear as credit on up to 2 invoices. \u003cbr/\u003e Supports made with Bank slip: the amount has already been transferred to the sponsor BALANCE so that it realizes the service. \u003cbr/\u003e \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/202365507-Regras-e-funcionamento-dos-reembolsos-estornos-cancelamentos\" target=\"blank\"\u003e(know more)\u003c/a\u003e"}},"online":{"paid":{"label":"Confirmed","text":"Credit card or ticket support, which has been paid for and confirmed by the system."},"pending":{"label":"Started","text":"Ticket supports that have not yet been paid or that have not yet been accounted for in the system.\u003cbr/\u003e Note: Once paid, the ticket may take up to 2 business days to be confirmed in the system."},"refunded":{"label":"Answered","text":"Supports that were canceled by the supporter after payment."}},"successful":{"paid":{"label":"Confirmed","text":"Credit card or ticket support, which has been paid for and confirmed by the system."},"refunded":{"label":"Answered","text":"Supports that were canceled by the supporter after payment."}}}},"create":{"success":"Your project was successfully created! We'll contact you shortly. Thanks a lot!"},"dashboard_analysis_success":{"next_steps":"While waiting for your response, you can continue editing your project! We also recommend that you go collecting feedback with people close to you and planning how your campaign will be.","subtitle":"You will receive our response within 4 business days in the email:","title":"%{name}, your project was submitted for review!"},"dashboard_announce_expiration":{"explanation_01":"Once the project is expiring, we will open a 7 day countdown. You can receive support until:","explanation_02":"This is an irreversible action. Once the project duration is set, you will no longer be able to change its deadline for funding. At the end of the term, you receive all the amount collected."},"dashboard_basics":{"admin_tags":"Admin Tags","admin_tags_hint":"Insert tags separated by commas","category":"Category","category_hint":"Choose the one that best fits your project.","category_label":"Explore and be inspired by other projects of the same category as your.","city":"Project Location","city_hint":"Where will your project be carried out? If it happens in more than one place, one tip is to put the city where your network of potential supporters is larger.","form":{"submit":"Save"},"name":"Project name","name_hint":"Give a name that people will remember easily. Do not exceed 50 characters.","name_label":"The more direct the better. Do not exceed 50 characters","online_date":"Days online","online_days":"Deadline for collection","online_days_label":"You can choose between 1 and 60 days for your campaign. Check out the directors guide for tips on deadlines.","permalink":"Link to your project on OppoStarter","permalink_hint":"You can edit it until the project goes online. Choose something simple, straightforward, and identify your project well. Try not to use hyphen, underline etc..","service_fee":"OppoStarter Fee","tags":"Tags","tags_hint":"List up to 5 keywords related to your campaign and facilitate discovery by supporters.","tags_max_error":"You can use up to 5 tagss","tracker_snippet_html":"Tracker snippet html","url":"Project URL","url_label":"This is the address of your project, it should be easy to memorize. Avoid underline, hyphen and symbols","user_id":"User ID","value":"Amount to be collected","value_secondary":"Plan a goal that is consistent with what your project proposes. Review your budget and be sure to include the 5% fee charged by OppoStarter if your project is successful"},"dashboard_budget":{"budget_alert":"\u003cspan class=\"fa fa-fw fa-lightbulb-o\"\u003e\u003c/span\u003eSee how-to tips\u003ca class=\"alt-link\" href=\"http://fazum.catarse.me/agradecimento-video-tutorial-orcamento-basico?ref=ctrse_dashboard\" target=\"_blank\"\u003e determine the goal of your project!\u003c/a\u003e ","budget_label":"Project budget","submit":"Save"},"dashboard_card":{"card_label":"Project Card","headline_label":"Headline","headline_label_hint":"Phrase on the project card to call supporters. Must have a maximum of 100 characters and summarize the project well.","submit":"Save","uploaded_image_hint":"This image will be used as the thumbnail of your project (PNG, JPG size 720 x 400)","uploaded_image_label":"Image of the project"},"dashboard_contribution_reports":{"help_link":"Learn to use the \u003ca href=\"https://suporte.catarse.me/hc/pt-br/articles/115003361423-Relat%C3%B3rio-de-apoios\" target=\"_blank\" class=\"alt-link\"\u003eSupport report!\u003c/a\u003e","subtitle_html":"Track support for your campaign and manage rewards delivery.","title":"Support report"},"dashboard_description":{"description_alert":"\u003cspan class=\"fa fa-fw fa-lightbulb-o\"\u003e\u003c/span\u003e Know how \u003ca class=\"alt-link\" href=\"https://catarse.attach.io/BJmQVOiR\" target=\"blank\"\u003e create a captivating description!\u003c/a\u003e","description_hint":"Speak with passion and clarity about what will be accomplished. Clarify possible questions about how the money will be used, who is behind the project, how and when the project will be delivered. Transparency attracts more supporters. Remember: your project will be accessed by ordinary people who will decide whether or not to support your project.","description_label":"Project description","submit":"Save"},"dashboard_goal":{"aon_diff_html":"\u003cspan class=\"fontweight-semibold\"\u003eCommitment\u0026nbsp;\u003c/span\u003e\u003cbr\u003eYou agree to execute the project and deliver the rewards only \u003cspan class=\"fontweight-semibold\"\u003eif the revenue reaches or exceeds the target.\u003c/span\u003e\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"fontweight-semibold\"\u003eHow it works?\u003c/span\u003e\u003cbr\u003eYou only receive the amount collected if, at the end of the term,\u0026nbsp;has reached the collection goal. Otherwise, all your supporters receive their payments back.\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"fontweight-semibold\"\u003eDeadline for the project online: \u003c/span\u003e60 days\u0026nbsp;\u0026nbsp;\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"fontweight-semibold\"\u003eFees: \u003c/span\u003e5% of total collected","flex":{"kind_text":"You are participating in the flexible model trial period. Your participation is essential to understand how we can expand this model for all users. %{link}"},"flex_diff_html":"\u003cspan class=\"fontweight-semibold\"\u003eCommitment\u0026nbsp;\u003cbr\u003e\u003c/span\u003eYou agree to create your project and deliver the rewards (if you have chosen to offer them), \u003cspan class=\"fontweight-semibold\"\u003eregardless of the amount collected\u003c/span\u003e\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"fontweight-semibold\"\u003eHow it works?\u003c/span\u003e\u003cbr\u003eYou receive, at the end of the term, all that you have collected (discounting only the rate of OppoStarter), regardless of reaching the collection goal.\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"fontweight-semibold\"\u003eDeadline for the project online: \u003c/span\u003e12 months\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"fontweight-semibold\"\u003eFees: \u003c/span\u003e5% of total collected","goal_aon_taxes_hint":"It is the amount that will be deducted from your collection at the end of the campaign, regarding the services of OppoStarter and the methods of payment. If your project reaches or exceeds the target, 5% of the total collected at the end of the campaign will be charged. If your project does not reach the goal, all the money backed will be returned to your supporters after the campaign ends, at no cost to you. It is all or nothing! ","goal_flex_taxes_hint":"It is the amount that will be deducted from your collection at the end of the campaign, regarding the services of OppoStarter and the means of payment. 5% of the total collected at the end of the campaign will be charged, regardless of whether the target is reached or not.","goal_hint":"How much do you need to raise? Set a goal consistent with what your project proposes. Do not forget to include administrative fees in your calculation.","goal_label":"Goal of collection","goal_taxes_label":"OppoStarter Fee","goal_taxes_link":"Understand OppoStarter Fee","goal_taxes_watch_video_html":"\u003ca class=\"fontsize-small\" href=\"http://fazum.catarse.me/agradecimento-video-tutorial-orcamento-basico\" target=\"_blank\"\u003eWatch our \u003cspan class=\"fontweight-bold\"\u003eBasic budget video lesson\u003c/span\u003e\u003c/a\u003e","kind_label":"Type of financing","kind_link":"If you want to know more, click here","mode_diff_ebook":"\u003ca class=\"fontsize-small\" href=\"https://catarse.attach.io/BkLCRfXyg\" target=\"_blank\"\u003eDownload our \u003cspan class=\"fontweight-bold\"\u003eebook Flex vs All or Nothing\u003c/span\u003e\u003c/a\u003e","mode_diff_link":"See the difference between the models","mode_hint":"Choose the template for your collective financing campaign. After starting your campaign, you will not be allowed to.","mode_label":"Type of financing","online_days_aon_hint":"This is the period when your project will be online, open to fundraising. In All or Nothing, you can choose between 1 and 60 days.\u0026nbsp;\u003ca class=\"alt-link\" href=\" https://catarse.attach.io/HJGoCzmJl\" target=\"_blank\"\u003eKnow our tips for setting your deadline.\u003c/a\u003e","online_days_closed":"Days Expiring","online_days_closed_hint":"Your project is already in the air with the capture time already defined. You can choose between 1 and 365 days. After publishing the project, you can not change this deadline.","online_days_flex_hint":"This is the period when your project will be online, open to fundraising. In Flex, you choose whether to publish your project with an already defined deadline or with an open deadline. \u003ca class=\"alt-link\" href=\" https://catarse.attach.io/HJGoCzmJl\" target=\"_blank\"\u003eKnow our tips for setting your deadline.\u003c/a\u003e","online_days_label":"Collection time","online_days_open":"Days Online","online_days_open_hint":"Your project goes online without a set deadline. You will have the option to set a project end date (minimum of 1 day) at any time within a period of 12 months after publication.","submit":"Save","want_more":"Want to understand more?"},"dashboard_home_templates":{"approved":{"subtitle_html":"For your project to go live, it is only necessary that you fill in the necessary details in the %{link1}. It is important to know that we charge the rate of 5% plus 3-5% Stripe processing fee of the total amount collected only for successful projects. Understand %{link2}. ","title":"%{name}, your project was approved!"},"draft":{"study_title":"Did you feel you need to work harder to build your project? Check the links in the box next to.","subtitle":"The more careful and well-formatted a project, the greater the chances of it being successful in its campaign. Before submitting your project for our analysis, fill all the adjacent fields with care. You can save the changes and go back to the draft project as many times as you like. When everything is ready, click on the SEND button and we will contact you to evaluate your project.","subtitle_flex":"The more careful and well-formatted a project, the greater the chances of it being successful in its campaign. Before publishing your project, fill all the adjacent fields with care. You can save the changes and go back to the draft project as many times as you like. When everything is ready, click on the SEND button and we will contact you to evaluate your project.","title":"%{name}, build your project!"},"failed":{"questions":"Enviamos também um email para você com duas perguntinhas. Se você tiver tempo e cabeça, seria ótimo se pudesse dar uma olhada. Seu feedback nos ajuda a construir um Catarse melhor e mais legal pra você.","subtitle_html":"Your project did not reached the target and we know that this is not the best of sensations. But do not be discouraged. Take the process as an apprenticeship and be sure to consider a second try. Do not worry, all your supporters will get the money back.. %{link}.","title":"%{name}, do not get discouraged!"},"in_analysis":{"subtitle_html":"Thank you! Our team will evaluate all the content of your project and within 4 business days you will receive an email informing if it has been Approved, Declined or if it will continue in Analysis for some more time so that you can make suggested adjustments. Take advantage of this time to gather feedback with people close to you!","title":"%{name}, you submitted your project for review and will receive our response within 4 business days"},"online":{"explanation_html":"\u003cdiv class='fontsize-base u-marginbottom-40 card card-terciary'\u003e\n  \u003cp class='fontweight-bold'\u003e\n    With the project online, some information can no longer be edited\n  \u003c/p\u003e\n  \u003cp\u003e\n    You can no longer change:\u003cbr\u003e - your goal after approval;\u003cbr\u003e - the deadline;\u003cbr\u003e - the project URL;\u003cbr\u003e - the user who owns the project.\n  \u003c/p\u003e\n  \u003cp class='fontweight-bold'\u003e\n    Need more information about campaign processes? See the box next to it.\n  \u003c/p\u003e\n  \u003cp\u003e\n    The search\u0026nbsp;%{link1} is also a good source of data on the UK scenario. A good read on the\u0026nbsp; %{link2} can be inspiring. There you will find stories of successful projects and campaign tips.\n  \u003c/p\u003e\n\u003c/div\u003e\n","subtitle_html":"Your project is on the air and your campaign will close at 11:59:39 p.m. %{date}. Until that day and time you can receive support. Remember, it is all-or-nothing and you will only take the funds raised if you hit the goal that was intended. Access our %{link2} for other questions!","title":"%{name}, Your campaign is online.!"},"project_numbers":{"backed":"raised","contributions":"supports","financed":"financed","left":"remaining"},"rejected":{"subtitle_html":"You have submitted your project for approval to OppoStarter and we understand that it is not in accordance with the site profile. Having a rejected project does not prevent you from submitting new projects for evaluation or reformulating your current project. Chat with our customer service! We recommend that you take a good look at the %{link1}  and in the %{link2}.","title":"%{name}, unfortunately it was not this time."},"status":"Status:","successful":{"header1":"And do not forget: transparency is everything.","header2":"Be sure to read:","subtitle_html":"Your project was successful and now is the time to start working with your supporters! Special attention to the delivery of rewards. Delivered! Be sure to look at the post-project section of %{link1} and to inquire about %{link2}. ","title":"%{name}, comemore que você merece!","transparent_html":"Keeping an informed supporter is keeping a supporter happy. Even if you are updating on a fault or setback. Happy supporters are %{link} . Therefore, use the field (always in moderation) of the news tab. Your updates will be send to your supporters' email box. Already starting to deliver rewards? In the field \"reports\" you can download information so that you can manage your project rewards delivery."},"waiting_funds":{"failed":"Project Unsuccessful:","good_luck":"Good luck!","header":"From here your project can reach the target or not. See what happens in each case:","subtitle_html":"Your project was finalized in %{expires} and is awaiting confirmation of tickets and payments. Due to the expiration date of tickets, projects that had last-minute support stay for up to 4 business days in that status, counted from the project end date. %{link}.","success":"Project Successful:","title":"%{name}, we are processing the last payments."}},"dashboard_insights":{"finish_explanation":"Your campaign is still open. In order to receive the funds in your bank account, you must set an end date for collection.","know_more":" Know More."},"dashboard_nav":{"announce_expiration":"Set deadline","edit_project":" Edit project ","leave_link_html":"\u0026nbsp; Exit Control Panel","posts_tab":" News ","preview_tab":"Preview","publish":"Continue","reports_tab":" Support reports","send":"Submit","start_tab":" My Campaign","surveys_tab":" Questionnaires"},"dashboard_nav_links":{"about_you_tab":"Public Profile","account_tab":"Registration Details","basics_tab":"Basic","budget_tab":"Budget","card_tab":"Project Card","description_tab":"Description","goal_tab":"Financing","preview_tab":"Preview","rewards_tab":"Rewards \u003cspan class='fontsize-smallest fontcolor-secondary'\u003e(optional)\u003c/span\u003e","video_tab":"Video \u003cspan class='fontsize-smallest fontcolor-secondary'\u003e(optional)\u003c/span\u003e"},"dashboard_posts":{"discard":"Discard","old_posts":"Old news","only_to_backers":"I want this news to be visible only to supporters.","publish":"Publish novelty","warning":"All news releases are sent directly to their supporters by email. Please review the post before posting."},"dashboard_preview":{"aon":{"header_subtitle":"It is time for feedbacks!","header_text":"Share the link below with your friends and take the time to make fine adjustments to help your campaign."},"flex":{"header_subtitle":"It is time to listen to suggestions!","header_text":"Share the link %{link} with your friends and take the time to make fine adjustments to help your campaign.","publish_btn_html":"I am satisfied! \u003cbr\u003eI want to publish my project now"}},"dashboard_reward":{"add_reward":"Add Reward","reward":"Reward","submit":"Save"},"dashboard_surveys":{"create_survey":"Create questionnaire","help_link":"Learn how to use \u003ca href=\"https://suporte.catarse.me/hc/pt-br/articles/115003402146-Question%C3%A1rios-Como-envi%C3%A1-los-aos-seus-apoiadores\" target=\"_blank\" class=\"alt-link\"\u003eQuestionnaires in rewards management!\u003c/a\u003e","online_explanation":" Since your project has not yet been finalized, you can only submit questionnaires to out-of-pocket rewards. After completion of the project, you can submit questionnaires to all supporters.","subtitle":"Please check your supporters delivery addresses and ask other questions related to your rewards.","title":"Questionnaires"},"dashboard_user_about":{"about_hint":"Use this space if you want to better describe you, your company or your institution. Want to give credit to partners? Use some institutional video? This space is yours and use it any way you want. All this information will appear on the Tab About in your Public Profile.","about_label":"About you","email_hint":"Email for you to log on to OppoStarter and communicate with our team and its supporters","email_label":"Registration Email","facebook_link_hint":"Paste your profile link","facebook_link_label":"Facebook profile","name_hint":"This is the name that users will see on your profile.","name_label":"Name","other_link_hint":"Include links that help supporters understand why you are the right person to do this project. ","other_link_label":"Presence on the internet","submit":"Save","twitter_hint":"Paste your profile link","twitter_label":"Twitter profile","uploaded_image_hint":"This image will be used as your profile thumbnail (PNG, JPG 280x280 ideal size)","uploaded_image_label":"Profile picture"},"dashboard_user_settings":{"account_edit_disabled_html":"The information below was informed by you at the time of publication of your project. To avoid mistakes in passing on resources, the editing of this details was blocked as soon as your project went online. If you want to change them, it's just %{link} the changes you want to make.","account_subtitle_html":"We need the detail below to make the financial transfer to successful projects. \u003cb\u003eATTENTION: The CPF / CNPJ listed in the registration data and banking data must be the same.\u003c/b\u003e","juridical":"Company Title","natural":"Full name of holder","owner_document_juridical":"CNPJ of the bank account holder","owner_document_natural":"CPF of bank account holder","submit":"Save","subtitle_html":"With the data below complete, your project will be ready to air. After you complete the fill, click Save. Check it out. If everything is ok, just hit the Publish button and start your campaign!","title":"Registration and banking details","user_data_subtitle_html":"This detail will be used for the issuance of our Nota Fiscal and for the transfer of the money, in case your project is successful.","user_data_title":"Bank details"},"dashboard_video":{"aon":{"card_label":"Video","video_url":"Project video","video_url_hint":"","video_url_subtitle":"Link to Vimeo or Youtube. This is the main video for your campaign."},"flex":{"card_label":"Video","video_url":"Project video","video_url_hint":"","video_url_subtitle":"Link to Vimeo or Youtube. This is the main video for your campaign. "},"submit":"Save","video_alert":"\u003cspan class=\"fa fa-fw fa-lightbulb-o\"\u003e\u003c/span\u003eSee examples of \u003ca class=\"alt-link\" href=\"http://crowdfunding.catarse.me/videomakers?ref=ctrse_dashboard_video\" target=\"_blank\"\u003e videos by OppoStarter!\u003c/a\u003e","video_hint":"Link to Vimeo or Youtube. This is the main video for your campaign.","video_label":"Project video"},"edit":{"announce_expiration":"Deadline for collection","announce_expiration_subtitle":"Choose the date well because you can not change it later. Once your deadline has expired, you will need to confirm your bank details. We will then deposit the money into your account within 10 business days.","basics":"Fill in the information below","basics_subtitle":"The details reported in this section can not be modified when the project is aired. Please complete and review before launching the project.. ","budget":"Budget","budget_subtitle":"How will your money be used? The more transparency the better. Show what steps and processes will be involved in using these resources. A list with the main budget items or even a pie chart go super well here.","card":"Project Card","card_subtitle":"The project will appear on the homepage and in the search. Well, it makes it beautiful because they say the first impression is the one that stays ;)","description":"About Your Project!","description_subtitle":"Take a good look at the narrative of the project. Share your project with people and bring back supporters. A good video and description are differential!","goal":"Financing","goal_subtitle":"Please fill out the section below carefully as this information can no longer be changed once the project is online.","posts":"Write a new story","reports":"Support reports","reward_html":"Rewards \u003cspan class='fontcolor-terciary'\u003e(optional)\u003c/span\u003e","reward_subtitle":"If you want to start the project without reward and add later also, feel free!","user_about":"About You!","user_about_subtitle":"Supporters want to get to know project managers better. Links that help tell your story are always welcome. ","user_settings":"Registration Details","user_settings_subtitle":"\u003cstrong\u003ePlease fill in the fields below!\u003c/strong\u003e They must identify the person responsible for the project and the receipt of the money (\u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/213142846-tudo-sobre-CRIAR-UMA-CAMPANHA-NO-CATARSE#responsabilidade-realizador\" target=\"blank\"\u003eknow more\u003c/a\u003e). After completing this data, review and click SAVE. When everything is ready, just press the CONTINUE button to continue with the campaign publication..","video_html":"Video \u003cspan class='fontcolor-terciary'\u003e(optional)\u003c/span\u003e","video_subtitle":"Video is optional, but we highly recommend it! A good video makes the difference and can be largely responsible for the success of your project."},"faq":{"aon":{"description":"If this project does not reach the goal, you get back 100% of what you paid through a refund.","questions":{"1":{"answer":"Fill in the details of your support as well as all your payment information to finalize the support","question":"How do I support this project?"},"2":{"answer":"If you paid with a credit card, confirmation should be the same day. If you went with a ticket, within 4 business days.","question":"When the payment is made?"},"3":{"answer":"The project will be added to your support history on your profile, but the amount you've backed and the reward you choose will not go public.","question":"What others can see from my support?"},"4":{"answer":"In that case, you get back 100% of what you paid through a refund.","question":"And if the project does not reach the goal?"},"5":{"answer":"When your reward is ready, \u003ca href=\"%{userLink}\" target=\"_blank\"\u003e%{userName}\u003c/a\u003e will contact you to arrange delivery.","question":"If the project is funded, how do I get my reward??"}}},"flex":{"description":"This project will get all the features when finalizing","questions":{"1":{"answer":"Fill in the details of your support as well as all your payment information to finalize the support","question":"How I support this project?"},"2":{"answer":"If you paid with a credit card, confirmation should be the same day. If you went with a ticket, within 4 business days.","question":"When the payment is made?"},"3":{"answer":"The project will be added to your support history on your profile, but the amount you've backed and the reward you choose will not go public.","question":"What others can see from my support?"},"4":{"answer":"OppoStarter is only an intermediary, if you want to understand more about the project, contact \u003ca href=\"%{userLink}\" target=\"_blank\"\u003e%{userName}\u003c/a\u003e","question":"Who is responsible for the project?"},"5":{"answer":"When your reward is ready, \u003ca href=\"%{userLink}\" target=\"_blank\"\u003e%{userName}\u003c/a\u003e will contact you to arrange delivery.","question":"How do I receive my reward??"}}},"international":{"aon":{"description":"If this project can't reach its goal by its deadline, you will get 100% of your payment refunded to your credit card.","questions":{"1":{"answer":"Fill the contact details, address and your credit card details and click on Finish payment. If everything is right, you will be redirected to a 'Thank you' page (in Portuguese).","question":"How do I back this project?"},"2":{"answer":"The confirmation of your payment should be sent to your email on the same day.","question":"When is my card charged?"},"3":{"answer":"This project will be added to you Backed projects history on your public profile. The selected reward and the contribution amount won't be public.","question":"What can others see about my contribution?"},"4":{"answer":"You will have your payment 100% refunded to your credit card.","question":"What if the project can't reach its goal?"},"5":{"answer":"When your reward is ready, \u003ca href=\"%{userLink}\" target=\"_blank\"\u003e%{userName}\u003c/a\u003e will get in touch with you to arrange the delivery.","question":"If this project is funded, how do I get my reward?"}}},"flex":{"description":"The project will get all the money when it finishes.","questions":{"1":{"answer":"Fill the contact details, address and your credit card details and click on Finish payment. If everything is right, you will be redirected to a 'Thank you' page (in Portuguese).","question":"How do I back this project?"},"2":{"answer":"The confirmation of your payment should be sent to your email on the same day.","question":"When is my card charged?"},"3":{"answer":"This project will be added to you Backed projects history on your public profile. The selected reward and the contribution amount won't be public.","question":"What can others see about my contribution?"},"4":{"answer":"Catarse is just a link between you and the creator. If you want to know more about the project, please get in touch with \u003ca href=\"%{userLink}\" target=\"_blank\"\u003e%{userName}\u003c/a\u003e","question":"Who is the responsible for this project?"},"5":{"answer":"When your reward is ready, \u003ca href=\"%{userLink}\" target=\"_blank\"\u003e%{userName}\u003c/a\u003e will get in touch with you to arrange the delivery.","question":"If this project is funded, how do I get my reward?"}}}},"international_title":"FAQ","title":"Frequently Asked Questions"},"flex_dashboard_explanation":{"flex":{"expiration_text":"In Flexible Campaign, your campaign active for up to 1 year! Once it is online, you will have the option to set a project end date (minimum of 2 days). After the campaign ends, you receive everything you've collected (discounted rates) within 10 business days.","expiration_title":"Deadline for collection","kind_text":"You are participating in the flexible model trial period. Your participation is essential to understand how we can expand this model for all users. %{link}"}},"flex_nav_actions":{"announce_expiration":"Set deadline","publish":"Continue"},"form":{"add_reward":"Add reward","important_html":"Please note that OppoStarter charges 5% if your project is successful. Factor this into your budget now so you can execute without any surprises.","permalink_hint":"Simplify the URL of your project. Remember that your sponsors have to remember the address so they can share your project.","project_warning":{"content_html":"Want to have your project selected? Don't forget to read %{link}.","help_link":"our guide"},"rewards_description":"We believe that the best way to inspire people to contribute a project is offering excellent – and creative! – rewards. Everybody loves limited editions, unique things and joyful experiences (parties, candies, balloon travelling!). Spend some time coming up with creative rewards and people will be more excited to take part.","rewards_title":"Rewards","submit":"Save draft"},"home":{"banners":{"1":{"cta":"Start your campaign","image":"https://s3.amazonaws.com/cdn.catarse/assets/banner-home-fctodos.jpg","link":"/start?ref=home_banner","subtitle":"","title":"Collective financing for all"},"2":{"cta":"See the project","image":"https://s3.amazonaws.com/cdn.catarse/assets/banner-home-mancha.jpg","link":"https://www.catarse.me/mancha?ref=home_banner","subtitle":"Freedom to paint and experience without worry. Keep out of the reach of children.!","title":"Organic Stain"},"3":{"cta":"See the project","image":"https://s3.amazonaws.com/cdn.catarse/assets/banner-home-ocupapolitica.jpg","link":"https://www.catarse.me/ocupapolitica?ref=home_banner","subtitle":"A meeting for those considering the renewal of the policy.","title":"Occupy Policy"},"4":{"cta":"Learn More","image":"https://s3.amazonaws.com/cdn.catarse/assets/banner-home-assinaturas.jpg","link":"https://crowdfunding.catarse.me/assinaturas?ref=home_banner","subtitle":"Our recurrent collective financing is here!","title":"\u003cimg src=\"https://daks2k3a4ib2z.cloudfront.net/573a70f6d5c3cb6532f8b1a7/59c3980fd03bd6000107e99c_logo-assinaturas.png\" width=\"400\"\u003e"},"5":{"cta":"Learn More","image":"https://s3.amazonaws.com/cdn.catarse/assets/banner-home-landing-publicacoes.jpg","link":"https://crowdfunding.catarse.me/publicacoes-independentes-financiamento-coletivo?ref=home_banner","subtitle":"Join a community of authors and publishers and publish your independent book with the help of readers","title":"Collective funding for Books and Magazines"},"6":{"cta":"See the Project","image":"https://s3.amazonaws.com/cdn.catarse/assets/banner-home-terraadentro.jpg","link":"https://www.catarse.me/terraadentro?ref=home_banner","subtitle":"A book on the Adventures of the Inland by the Americas.","title":"Between the Ends of the Americas"},"7":{"cta":"Learn More","image":"https://s3.amazonaws.com/cdn.catarse/assets/banner-home-catarse-musica.jpg","link":"https://crowdfunding.catarse.me/financiamento-coletivo-musica-independente?ref=home_banner","subtitle":"Join a vibrant community of artists, pick up your project and make history with your fans","title":"Music on OppoStarter!"}},"header_html":"Crowdfunding and collective financing on OppoStarter","row_title":"Popular"},"index":{"back_a_project":"Support a project","banner":"Know the research","banner_after":" Off Paper","banner_before":"Remove ","banner_subtitle":"Music, comics, cinema, social impact, technology and more. Get to know, inspire and support projects.","banner_words":{"0":"dreams","1":"discos","10":"passions","11":"encounters","12":"music","13":"products","14":"attitudes","15":"films","16":"comic books","17":"ideas","2":"exhibitions","3":"researches","4":"carnivals","5":"photos","6":"theater performances","7":"documentaries","8":"books","9":"shows"},"blog":"OppoStarter Blog","box":{"by":"per","when":"in"},"expiring":"Ending Soon","explore":"Explore projects","explore_categories":{"16":{"cta":"Learn how","icon":"https://s3.amazonaws.com/cdn.catarse/assets/icon-music.png","link":"http://crowdfunding.catarse.me/financiamento-coletivo-musica-independente","title":"Launch your music on OppoStarter!"},"20":{"cta":"Learn how","icon":"https://s3.amazonaws.com/cdn.catarse/assets/icon-publicacoes.png","link":"https://crowdfunding.catarse.me/publicacoes-independentes-financiamento-coletivo","title":"Launch your book or magazine on OppoStarter!"}},"links":{"channels":"Discover the OppoStarter Channel","expiring":"Discover projects ending soon","near":"Discover projects near you","recents":"Discover recent projects","recommended":"Discover Recommended Projects"},"near_you":"Near Me","recents":"Recents","recommended":"Recommended","sections":{"channels":{"title":"Channel"},"expiring":{"title":"End Soon"},"near":{"title":"Near Me"},"recents":{"title":"Recents"},"recommended":{"title":"Recommended"}},"see_all":"See all","sidebar":{"buttons":{"newsletter":"Submit"},"placeholders":{"email":"Type your e-mail"},"titles":{"blog":"blog","facebook":"Already like our Facebook?","faq":"Frequent Question","newsletter":"Subscribe to our news","schedule":"schedule"}},"title":"OppoStarter"},"index_header":{"subtitle":"Fund projects collaboratively and become part of something bigger. Promote an inspiring project on OppoStarter! The next story is waiting for your help.","subtitle_html":"Fund projects collaboratively and become part of something bigger.\u003cbr/\u003ePromote an inspiring project on OppoStarter! The next story is waiting for your help.","title":"Bring projects you believe in to life"},"insights":{"amount_per_day_empty":"As soon as the supports begin to appear you will have access to a chart here with the total US$ collected day by day. With this you will have a daily control of how much you need to reach your collection goal.","amount_per_day_label":"US$ collected per day","campaign":{"aon":{"approved":"\u003cspan class=\"fontweight-semibold\"\u003e%{username} your project was approved!\u003c/span\u003e To put your project online it is only necessary that you fill in the necessary details in the \u003ca class=\"alt-link\" href=\"#user_settings\"\u003eAccount\u003c/a\u003e. It is important to know that we charge the rate of 5% of the total amount collected only for successful projects. Understand \u003ca class=\"alt-link\" href=\"http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-\" target=\"_blank\"\u003eHow do we transfer the money?\u003c/a\u003e.","draft":"\u003cspan class=\"fontweight-semibold\"\u003eWelcome to the draft %{username}\u003c/span\u003e\u003cbr/\u003e\u003cbr/\u003eThis is the time for you to build your page and plan your campaign! Before publishing your project, fill all the adjacent flaps with care. As you fill out your page, save your changes. You can work on your draft for as long as you want. When everything is ready for launch, click the CONTINUE button.\u003cbr/\u003e\u003cbr/\u003e\u003cspan class=\"card u-radius\"\u003e\u003cspan class=\"fa fa-lightbulb-o\"\u003e\u003c/span\u003e Learn to plan \u003ca class=\"alt-link\" target=\"_blank\" href=\"https://catarse.attach.io/HySxkQXkg\"\u003eyour collective financing campaign!\u003c/a\u003e\u003c/span\u003e","failed":"\u003cspan class=\"fontweight-semibold\"\u003e%{username} do not get discouraged!\u003c/span\u003e your project was not funded :-( But do not be discouraged! Take the process as learning and plan a new campaign.\u003cbr/\u003e\u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/202365507-Regras-e-funcionamento-dos-reembolsos-estornos\" target=\"blank\"\u003eAlso understand how we make rebates and refunds from your supporters.\u003c/a\u003e","in_analysis":"\u003cspan class=\"fontweight-semibold\"\u003e%{username} you submitted your project for review on %{sent_to_analysis_at} and will receive our evaluation within 4 business days after submission!\u003c/span\u003e While waiting for your response, you can continue editing your project. We also recommend that you go collecting feedback with people close to you and planning how your campaign will be.","online":"You can receive support until 23:59:45 %{expires_at}. Remember, it is all-or-nothing and you will only take the funds raised if you hit your financial goal within that time frame. \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/217916143-tudo-sobre-REPASSE\" target=\"blank\"\u003eLearn more about how the transfer process works.\u003c/a\u003e","rejected":"\u003cspan class=\"fontweight-semibold\"\u003e%{username}, this project was canceled. If you have any questions about the reason for the cancellation, please contact our service.","successful":"\u003cspan class=\"fontweight-semibold\"\u003e%{username} Congratulation!\u003c/span\u003e Your project was successful and now is the time to start working with your supporters! Special attention to the delivery of rewards. Delivered! Be sure to look at the post-project section of \u003ca class=\"alt-link\" href=\"/guides\"\u003eGuide to Project Creators\u003c/a\u003e and to inquire about \u003ca class=\"alt-link\" href=\"http://suporte.catarse.me/hc/pt-br/articles/217916143\" target=\"_blank\"\u003ehow the money transfer will be raised\u003c/a\u003e.","waiting_funds":"\u003cspan class=\"fontweight-semibold\"\u003e%{username}\u003cspan\u003e we are processing the last payments! Your campaign was finalized in %{expires_at} and is awaiting the latest confirmations of support payments. Due to the expiration date of tickets, projects that had last-minute endorsements stay for up to 4 business days with the status \"Waiting\". \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/217916143\" target=\"blank\"\u003eUnderstand how the transfer of money is made.\u003c/a\u003e"},"flex":{"draft":"\u003cspan class=\"fontweight-semibold\"\u003eWelcome to the draft %{username}\u003c/span\u003e\u003cbr/\u003e\u003cbr/\u003eThis is the time for you to build your page and plan your campaign! Before publishing your project, fill all the adjacent fields with care. As you fill out your page, save your changes. You can work on your draft for as long as you want. When everything is ready for launch, click the CONTINUE button.\u003cbr/\u003e\u003cbr/\u003e\u003cspan class=\"card u-radius\"\u003e\u003cspan class=\"fa fa-lightbulb-o\"\u003e\u003c/span\u003e Learn to plan \u003ca class=\"alt-link\" target=\"_blank\" href=\"https://catarse.attach.io/HySxkQXkg\"\u003eyour collective financing campaign!\u003c/a\u003e\u003c/span\u003e","failed":"\u003cspan class=\"fontweight-semibold\"\u003e%{username} do not get discouraged!\u003c/span\u003e your project was not funded :-( But do not be discouraged! Take the process as learning and plan a new campaign.\u003cbr/\u003e\u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/202365507-Regras-e-funcionamento-dos-reembolsos-estornos\" target=\"blank\"\u003eAlso understand how we make rebates and refunds from your supporters.\u003c/a\u003e","online":"You can receive support until 23:59:45 %{expires_at}. Understand how the flow of \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/217916143\" target=\"blank\"\u003eTransfer of funds after the end of your campaign.\u003c/a\u003e","rejected":"\u003cspan class=\"fontweight-semibold\"\u003e%{username}, this project was canceled. If you have any questions about the reason for the cancellation, please contact our service.","successful":"\u003cspan class=\"fontweight-semibold\"\u003e%{username} Congratulation!\u003c/span\u003e Your project was successful and now is the time to start working with your supporters! Special attention to the delivery of rewards. Delivered! Be sure to look at the post-project section of \u003ca class=\"alt-link\" href=\"/guides\"\u003eGuide to Project Creators\u003c/a\u003e and to inquire about \u003ca class=\"alt-link\" href=\"http://suporte.catarse.me/hc/pt-br/articles/217916143\" target=\"_blank\"\u003ehow the money transfer will be made\u003c/a\u003e.","waiting_funds":"\u003cspan class=\"fontweight-semibold\"\u003e%{username}\u003cspan\u003e we are processing the last payments! Your campaign was finalized in %{expires_at} and is awaiting the latest confirmations of support payments. Due to the expiration date of tickets, projects that had last-minute support stay for up to 4 business days with status \"Waiting\". Understand how \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/217916143\" target=\"blank\"\u003emoney transfer is made.\u003c/a\u003e"}},"campaign_title":"My Campaign","contributions_per_day_empty":"You do not have any support for your project yet. As soon as the backups start appearing you will have access to a chart here with the total of support confirmed day by day. Good luck!","contributions_per_day_label":"Support confirmed per day","contributions_per_location_empty":"As soon as the supports start appearing you will have access to a table here with the geographical location of your supporters. With this you can know from which part of the country are coming its main collaborators!","contributions_per_ref_empty":"Once the backups begin to appear you will have access to a table here with the source of your backups. This will allow you to measure your campaign communication and marketing actions!","finish_explanation":"Your campaign is still with the collection deadline open. In order to receive the funds in your bank account, you must set an end date for collection. Learn more about how \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/213783503-tudo-sobre-Prazo-da-campanha\"\u003eset a deadline\u003c/a\u003e and how does it work? \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/217916143-tudo-sobre-REPASSE\" target=\"blank\"\u003etransfer process.\u003c/a\u003e","has_cancelation_request_explanation":"Your campaign has been canceled for you. Within 24 hours, it will expire and your \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/202365507-Regras-e-funcionamento-dos-reembolsos-estornos-cancelamentos\" target=\"__blank\"\u003esupporters will be reimbursed\u003c/a\u003e.","know_more":" Learn More.","location_origin_title":"Geographical location of the supports","ref_origin_title":"Origin of the supports","ref_table":{"header":{"amount":"US$ supported (% do total)","contributions":"Support","origin":"Source"},"help_url":"https://suporte.catarse.me/hc/pt-br/articles/115002214463-Projeto-online-acompanhamento-e-divulga%C3%A7%C3%A3o#origem-apoio"},"referral":{"banner_home":"Featured banner on the homepage","credits_warning_less_group":"Credit notification","credits_warning_more_group":"Credit notification","ctrse_blog":"OppoStarter Blog","ctrse_catraca":"Catraca Livre (OppoStarter Partnership)","ctrse_embed":"Project Card (embed)","ctrse_explore":"OppoStarter Search","ctrse_explore_featured_big":"Big featured project to explore","ctrse_explore_featured_medium":"Medium featured project to explore","ctrse_facebook":"OppoStarter on Facebook","ctrse_hello":"Learn More about OppoStarter Page","ctrse_hypeness":"Hypeness (OppoStarter Partnership)","ctrse_instagram":"OppoStarter on Instagram","ctrse_newsletter":"OppoStarter Newsletter","ctrse_patrocinado_facebook":"OppoStarter on Facebook","ctrse_thankyou":"Support thanks page","ctrse_twitter":"OppoStarter on Twitter","ctrse_universohq":"HQ Universe (OppoStarter Partnership)","ctrse_youtube":"Oppostarter on Youtube","home_banner":"Featured banner on the homepage","home_banner_explore":"Featured banner on the homepage","home_expiring":"Projects in the final stretch on the home page","home_near":"Projects next to me on the home page","home_near_of":"Projects near to me on the home page","home_recent":"Recent projects on the home page","home_recommended":"Recommended projects on the homepage","hotsitepesquisa3anos":"RFCBR OppoStarter Search","notificacao_cancelado":"Canceled support notification","notificacao_pending":"Notification of pending support","notificacao_projeto_nao_financiado":"Non-funded project notification","notificacao_reminder":"Reminder Notification 48 hours","notificacao_subscription_category":"Notification of Following Category","notification_pending":"Notification of pending support","notificação_resgate_botao":"Credit redemption notice","notificação_resgate_rascunho":"Creation notification created","others":"Direct","profile_contributed_projects":"Public User Profile (supported projects))","profile_created_projects":"User Public Profile (created projects)","profile_dashboard_created_projects":"Private user profile (projects created)","project_post":"Project News Post","user_contributions":"User profile (supported projects))","user_menu_my_contributions":"User menu","user_menu_my_projects":"User menu","user_projects":"User profile (projects created)"},"tooltip":"Tell us where your project came from. Learn how to use this table and better plan your communication actions ","visitors_per_day_empty":"Once visitors start appearing you will have access to a chart here with the number of visitors per day. With this, you will have a daily control of how many people visit your project.","visitors_per_day_label":"Visitors per day"},"metrics":{"titles":{"address_state":"Total support confirmed by State","confirmed_amount_by_day":"Total collected per day","confirmed_by_day":"Total supports confirmed per day"}},"mobile_video":{"read_more":"Read More"},"new":{"about":"Describe your project and how much funding you'll need","about_hint":"Tell us a little about what you want to do, how much you need and what for. Be brief and to-the-point, but don't forget to give the readers something that moves them. After all, it's your creation, and they need to see your passion!","about_important":"Don't make it too long! Add links so people can get to know more about you","blog":"Have a blog about the project?","category":"Project category","contact":"Leave us your email address so we can contact you","facebook":"Have Facebook account?","faq":{"links":{"all_or_nothing":"Why All or Nothing??","criteria":"Selection Criteria","how_it_works":"How OppoStarter works?","money":"How will I receive the money??","selection":"How projects are selected?","suport_central":"Support Center","support_contact":"Contact us"},"titles":{"know_more":"Know More","support":"Support"}},"first_contributions_important":"These people are fundamental to the success of your project.","form":{"blocks":{"first":{"description":"Fill in the information below to start the draft of your project.","title":"Welcome!"}},"info":{"goal":"US$","online_days":"days","permalink":"https://oppostarter.com/"},"submit":"Save and continue"},"headline_important":"It's a summary of your project. 140 characters tops! :D","how_much_you_need":"How much do you want to raise?","how_works":"How to mobilize contributions to raise $ needed for enforcement?","important_html":"Keep in mind the 5% fee OppoStarter charges if you reach your goal. Just multiply your final budget by 0.87 to know your final amount.","know_us_via":"How did you find OppoStarter?","legend_html":"After filling in the form below, you'll receive a project page in Draft mode. In this draft you can add rewards for your contributors. You can also share the page with your friends to collect feedback and sharpen your project even more.\u003cbr\u003e\u003cbr\u003eThe information filled in below isn't definitive, but remember that the more consistent you are in your project submission, the faster it'll go live.\u003cbr\u003e\u003cbr\u003e\u003cb\u003eVery Important:\u003c/b\u003e \u003ci\u003eOppoStarter is curated platform, which means that our board will evaluate the focus, feasibility and consistency of your project during the Draft phase. If we determine that your project does not comply with our \u003ca href='https://docs.google.com/a/catarse.me/document/d/1wLDS2lphQ6monovg9rEaTIDcxBD3FRZV9dfGKmajyj8/edit' target='_blank' \u003eselection criteria\u003c/a\u003e, it may be refused by our team of curators.\u003c/i\u003e","links":"Where can we find more about you and your project?","links_hint":"Leave us as many links as you have, so we can get to know your work and your project better. Doesn't have to be anything fancy, just a few useful links.","more_links_important":"It's very important to use social media to spread the word about your project and engage your network. It's them who will make this a success!","name_important":"Do not exceed 50 characters","online_days_important":"60 days is the maximum","page-title":"Start your project","permalink_hint":"Go simple. Your contributions should be able to remember the URL to your project ;)","permalink_important":"Try not to use underline, hyphens, etc.","project_warning":{"content_html":"Want to have your project selected? Don't forget to read %{link}.","help_link":"our guide"},"rewards":"What rewards do you want to offer?","rewards_hint":"We believe that the best way to inspire people to contribute a project is offering excellent – and creative! – rewards. Everybody loves limited editions, unique things and joyful experiences (parties, candies, balloon travelling!). Spend some time coming up with creative rewards and people will be more excited to take part.","send_project":"I want to submit my project.","submit":"Save draft","subtitle":"The time to make it happen is now! We really want to know what you're up to...","tags_important":"Check other projects in your category \u003ca href='%{href}' target='_blank'\u003ehere!\u003c/a\u003e!.","title":"Submit your project","traffic_sources_important":"Yay! We reached the final question.","twitter":"Have Twitter account?","video":"Does your project already have a video?","video_hint":"A Vimeo / Youtube link","video_important":"The video must be hosted by Vimeo or Youtube. Paste the URL here!"},"new_feature_badge":"Novelty","no_projects":"%{name} hasn't started any project on OppoStarter yet. We wonder if inspiration will hit them one of these days!","no_projects_current_user_html":"You haven't submitted any project to OppoStarter yet. Let the inspiration flow and %{link} to start!","payment":{"chargeback":"Chargeback","deleted":"Deleted","paid":"Confirmed","pending":"Pending","pending_refund":"Refund pending","refunded":"Refunded","refused":"Refused"},"pending":{"can_finish":"Can finish?","finished":"Finished?","home_page":"Home page?","id":"Id","name":"Name","no_projects":"No projects found.","order":"Order","project":"Project","recommended":"Recommended?","rejected":"Rejected?","slug":"Slug","submit":"Search","title":"Project management","user":"User","visible":"Visible?"},"pending_contributions":{"anonymous":"Anonymous?","confirmed":"Confirmed?","credits":"Used credits?","id":"Id","key":"Key","no_contributions":"No contributions found.","project":"Project","refunded":"Refunded?","requested_refund":"Requested refund?","reward":"Reward","submit":"Search","title":"Contributions management","total_contributed":"contributed","total_contributions":"contributions","total_contributors":"contributors","total_users":"users","user":"User","value":"Value"},"posts":{"empty":"\u003cspan class=\"fontweight-semibold\"\u003e%{project_user_name}\u003c/span\u003e has not posted any news yet. \u003ca href=\"/projects/%{project_id}/contributions/new\" class=\"alt-link\"\u003eMake a support\u003c/a\u003e and receive in your email all project news as soon as they are published!","new":{"comment":"Comments of your news","exclusive":"Visible only to supporters","notice":"New successfully sent!","submit":"Submit News","title":"Title of your news","warning":"Remember that every news goes directly to the email of their supporters. So please review your text before sending it."},"project_post":{"contribute":"Support","destroy":"Remove news","destroy_confirmation":"Do you want to remove this news?","exclusive":"Exclusive post for supporters.","unavailable":"This news is only available to supporters.","unavailable_contribute":"this project to preview it."}},"project":{"contributed":"contributed","display_status":{"approved":"approved","draft":"draft","expired":"finalized","failed":"not funded","in_analysis":"under analysis","not_reached_goal":"waiting","online":"online","reached_goal":"financed","rejected":"rejected","successful":"financed","waiting_confirmation":"waiting","waiting_funds":"waiting"},"pledged_html":"\u003cspan\u003e%{value}\u003c/span\u003e raised","progress_html":"\u003cspan\u003e%{percent}%\u003c/span\u003e financed","reached":"reached","time_remaining_html":{"one":"\u003cspan\u003e%{count} %{unit}\u003c/span\u003e remaining","other":"\u003cspan\u003e%{count} %{unit}\u003c/span\u003e remaining"},"time_remaining_small_html":{"one":"\u003cdiv class='fontsize-smallest lineheight-tightest'\u003e%{count} %{unit}\u003c/div\u003e \u003cdiv class='fontsize-smallest lineheight-tightest'\u003eremaining\u003c/div\u003e","other":"\u003cdiv class='fontsize-smallest lineheight-tightest'\u003e%{count} %{unit}\u003c/div\u003e \u003cdiv class='fontsize-smallest lineheight-tightest'\u003eremaining\u003c/div\u003e"}},"project_about":{"active_btn":" Remind me of this project","deactive_btn":" I do not want to be remembered anymore","embed":"\u003c embed \u003e","embed_title":"Embed this project on your website"},"project_contributions":{"confirmed":"Confirmed","empty":"Nobody has contributed this project yet. Will you be the first?","pending":"Pending"},"project_embed":{"insert":"Insert a widget on your site"},"project_header":{"subtitle_html":"A project by %{link}","with_city":"A project in %{category_name}, in %{city}, by %{author}","without_city":"A project in"},"project_main":{"contribution_states":{"confirmed":"Confirmed","pending":"Pending"},"funding_period":"Campaign period","menu":{"about":"About","add_reward":"Add Reward","comments":"Comments","contributions":"Support","edit":"Edit","metrics":"Metrics","posts":"News","reports":"Reports"},"no_rewards_warning":"Think about how you will deliver them and put everything this in the budget.","no_rewards_warning_title":"Create your rewards here","post_call":"All news published in OppoStarter is sent directly to the email of those who have already supported your project and is also available for viewing on the site. You can choose to leave it public, or visible only to your supporters here on this tab.","project_by":"project by","project_header":{"subtitle_html":"A project of %{link}","with_city":"A project of %{category_name} by %{author} in %{city}","without_city":"A project of"},"send_post":"Writing news","share":"Share","sidebar":{"contributions":"supports","goal":"reached from %{total}"},"tweet":"Tweet"},"project_reports":{"all_contributions_without_reward":"Download report from all supporters who did not select a reward","link_reports_confirmed":"Download report of all confirmed supporters","link_reports_waiting_confirmation":"Download report from all supporters with printed ticket","link_reward":"Download report of the supporters of the %{value}"},"project_sidebar":{"contributors_call":"supported by ","contributors_count":{"one":"1 person","other":"{{count}} persons"},"display_status":{"approved":"This project has already been approved by OppoStarter. Soon it will be online and ready to receive support.","draft":"This project is only a draft and still can not receive support.","failed":"This project has not reached the %{goal} up until %{date} and was not funded","in_analysis":"This project is under analysis and is not yet open to receive support.","online":"You can support this project until the %{date} at 11:50 p.m.","rejected":"This project has been canceled. Can not support..","successful":"This project was successful and was funded in %{date}","waiting_funds":"The funding deadline for this project is now closed. We are awaiting confirmation of the latest payments."},"remaining_time":{"days":{"one":" day remaining","other":" days remaining"},"dia":" day remaining","dias":{"one":" day remaining","other":" days remaining"},"hora":" hour remaining","horas":{"one":" hour remaining","other":" hours remaining"},"hours":{"one":" hour remaining","other":" hours remaining"},"minutes":{"one":" minute remaining","other":" minutes remaining"},"minuto":" minute remaining","minutos":{"one":" minute remaining","other":"minutes remaining"},"seconds":{"one":" second remaining","other":" seconds remaining"},"segundo":" second remaining","segundos":{"one":" second remaining","other":" seconds remaining"}},"submit":"Support this project"},"project_updates":{"comment":"Update text","destroy":"Remove update","destroy_confirmation":"Do you want to remove the update?","empty":"This project doesn't have any updates yet. Keep checking back!","exclusive":"Visible for contributions only","submit":"Send update","title":"Title of the update","warning":"Remember, every new post gets emailed to all supporters. So be sure to review your message until you're sure it's ready to send."},"publish":{"aon":"All or Nothing","flex":"Flexible"},"push_to_online":"Your project is online!","push_to_online_error":"Error putting the project online. Fill in all required fields.","recommended_header":{"guidelines":"How it Works","guidelines_subtitle":"Getting to know OppoStarter","highlight_project":"featured project","suggest_for_you":"suggested for you"},"reminder":{"active_btn":"Remind me of this project","deactive_btn":"I do not want to be remembered anymore","ok":"Ok! We will email you a reminder 48 hours before the end of the campaign"},"reward_fields":{"add_reward":"+ Add reward","available":"Available quantity","deliver_at":"Delivery forecast:","delivery":"Send: ","delivery_estimation":"Estimated delivery: ","description":"Description:","edit":"Edit reward","faq":{"1":{"description":"They help supporters understand what you are offering. Be open and transparent! Learn more in this article \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/212191546-Recompensas-realizadores-#o-que-oferecer\" target=\"_blank\" class=\"alt-link\"\u003ewhat you can and can not offer\u003c/a\u003e  and get inspired with \u003ca href=\"http://blog.catarse.me/mais-de-30-ideias-de-recompensa-para-seu-crowdfunding/\" target=\"_blank\" class=\"alt-link\"\u003erewards ideas\u003c/a\u003e.","title":"Reward Description and Title:"},"2":{"description":"Indicates how much the supporter must contribute to receive the reward. Try to offer a fair and realistic value. To help you define these values, we recommend \u003ca href=\"http://blog.catarse.me/meta-crowdfunding-calculadora-orcamento/\" target=\"_blank\" class=\"alt-link\"\u003eBudget Calculator\u003c/a\u003e.","title":"Reward Amount:"},"3":{"description":"Indicates when the supporter will receive the chosen reward. Be careful when setting this date so as not to frustrate your supporters. When in doubt, be conservative on time.","title":"Estimated Delivery:"},"4":{"description":"How will the reward be sent and how much will it cost to the supporter. If you add a shipping cost, it will be added when the supporter selects the reward and the locale. \u003ca href=\"http://blog.catarse.me/o-calculo-de-envio-de-recompensas-financiamento-coletivo/\" target=\"_blank\" class=\"alt-link\"\u003eKnow more\u003c/a\u003e.","title":"Type of delivery:"},"5":{"description":"You can also limit the rewards to a certain number of supports and change the order that rewards appear in your project. \u003ca href=\"http://suporte.catarse.me/hc/pt-br/articles/212191546-tudo-sobre-RECOMPENSAS#como-editar\" target=\"_blank\" class=\"alt-link\"\u003eKnow more\u003c/a\u003e.","title":"Number of rewards:"}},"index":{"contributions_to_confirm":{"one":"1 support in confirmation period.","other":"%{count} support in confirmation period."},"display_remaining":"%{remaining} in %{maximum} available","dont_want":"I do not want any reward","edit_reward":"Edit reward","limited":"Limited","new_reward":"New Reward","reward_deliver_time":"\u003cb\u003eDelivery Estimate:\u003c/b\u003e %{estimate}","reward_title":"For %{minimum} or more","select_reward":"Select this reward","sold_out":"Out of stock"},"info_box":"Describe the reward amount and place a real delivery date forecast for the supporters. You can also limit a reward and when the limit is reached it appears as SOLD. If you want to change the order that the rewards appear in your project, simply do this by dragging them up or down.","limit_reward":"Limit reward","minimum_value":"Amount:","minimum_value_title":"For US$ %{minimum_value} or more","paid_contributors":"%{count} supporters","reward":"Reward","reward_available":" (%{available} in %{maximum} available)","reward_faq_intro":"Before offering a reward, it is important to have all production and delivery processes planned.","reward_faq_sub_intro":"Tips for completing:","reward_gone":"Out of stock","reward_know_more_cta_html":"\u0026nbsp;Know How\u0026nbsp;\u003ca target=\"_blank\" href=\"https://catarse.attach.io/Hk5H9HKeZ\" class=\"alt-link\"\u003eplan your rewards.\u003c/a\u003e","reward_limited":"Limited","reward_limited_input":"Limited Reward","reward_link_hint":"The link below leads to the contribution page with this reward already selected.","reward_link_label":"Link to direct support","shipping_options":{"free":"No Shipping","international":"National and International Shipping","national":"National Shipping","presential":"Pickup"},"status":{"delivered":"Sent","error":"Sending error","received":"Received"},"submit":"Save"},"rewards":{"contributions_to_confirm":{"one":"1 contribution in time to confirm.","other":"%{count} contributions in time to confirm."},"reward_deliver_time":"Estimated delivery: %{estimate}","reward_title":"For %{minimum} or more","title":"Contribute and receive..."},"send_mail":{"success":"Your project was successfully sent! We'll soon contact you. Thanks a lot!"},"send_to_analysis":"Your project was sent to our team..","send_to_analysis_error":"Error submitting project for review. Fill in all required fields.","show":{"about_title":"About this project","contribute_project":{"display_status":{"draft":"This project is in draft mode and is not open to contributions yet.","failed":"This project didn't reach the goal of %{goal} until %{date} and wasn't funded","not_reached_goal":"This project will only be funded if at least %{goal} is contributed until %{date}","reached_goal":"This project will be successful and funded on %{date}","successful":"This project was successful and was funded on %{date}","waiting_funds":"Waiting confirmation from payments to determine whether this project will be funded."},"reached_of":"Reached of","submit":"Back this project"},"menu":{"about":"About","add_reward":"Add Rewards","comments":"Comments","contributions":"Contributions","edit":"Edit","metrics":"Metrics","panel_html":"\u0026nbsp;\u0026nbsp;Control panel","posts":"News","reports":"Reports","updates":"Updates"},"no_rewards_warning":"Don't go nuts! Think about how you're going to deliver these and include their costs in your budget. People are putting their trust in you, don't take that lightly!","no_rewards_warning_title":"Create your rewards","rejected":"This project does not fit our \u003ca href='https://docs.google.com/document/d/1Heh9LlvoSoD0lUfbmV5WlISJ3nqmGpEQiw15TBuCn-0/edit' target='_blank'\u003eselection criteria.\u003c/a\u003e","reports":{"all_contributions":"all contributions","all_contributions_without_reward":"all contributions that didn't want any reward","link_reports":"Download report of ","link_reward":"Download the report of contributions that selected the reward","no_contributions":"This project doesn't have any contributions yet."},"share":"Share","waiting":"This project is waiting for approval! How exciting... keep checking back. :)","waiting_owner":"To edit the project info, click on 'Edit project' tab. You can edit the rewards in the rewards column."},"successful_onboard":{"confirm_account":{"accept":{"cta":"Confirm","info":"Any incorrect information may delay the transfer of funds!","title":"Are you sure?"},"person":{"address":"Address: ","bank":{"account":"Account: ","account_type":{"conta_corrente":"Checking Account","conta_corrente_conjunta":"Joint Current Account","conta_poupanca":"Savings account","conta_poupanca_conjunta":"Joint Savings Account"},"agency":"Agency: ","name":"Bank: "},"city":"City: ","label":"Person: ","mei":{"document":"CNPJ of the bank account holder: ","label":"Legal MEI","name":"Company Name: "},"neighbourhood":"District: ","pf":{"document":"CPF of bank account holder: ","label":"Physical","name":"Full name of holder: "},"pj":{"document":"CNPJ of the bank account holder: ","label":"Legal","name":"Company Name: "},"state":"State: ","state_inscription":"State registration: ","zip_code":"Zip code: "},"refuse":{"cta":"Submit","placeholder":"Help us by filling in everything! This will make our work easier and save your time..","title":"What is wrong with your details?"},"title":"Your details is correct?"},"error_account":{"icon":"https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/56c350fabfc50aef5095c67d_transfer-pending-icon.png","text":"There is an error with your bank details and we have already been notified about this problem! Keep an eye on \u003cspan class=\"fontweight-semibold\"\u003e%{user_email}\u003c/span\u003e, because we will solve this problem via email within 5 business days.","title":"Transferência bancária pendente"},"finished":{"icon":"https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/56c3511ee7d136a016bc34fa_succesful-icon.png","text":"Always work on your relationship with your supporters! Even after the end of the project, continue using the \u003ca href=\"%{link_news}\"\u003eNews tab\u003c/a\u003e. To confirm the delivery address and other issues related to the delivery of the rewards, use the \u003ca href=\"%{link_surveys}\"\u003eQuestionnaire tab\u003c/a\u003e.","title":"Good luck in your project.!"},"pending_transfer":{"icon":"https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/56c350c5e7d136a016bc34a4_transfer-ok-icon.png","text":"The transfer of US$%{total_amount} shall be made to the Bank account %{bank_name}, Agency: %{agency}, Account: %{account}. If there is any problem, we will contact you by email %{user_email}.\u003cbr/\u003e\u003cbr/\u003e \u003ca href=\"http://fazum.catarse.me/calculadora-repasse\" target=\"blank\"\u003eVeja aqui\u003c/a\u003e como calcular a data em que o dinheiro deverá entrar na sua conta!","title":"Bank transfer in progress"},"start":{"cta":"View balance","href":"#confirm_account","icon":"https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/56c3508dbfc50aef5095c66a_finish-icon.png","text":"Your project has successfully completed and your balance is now available to be transferred to your bank account.","title":"Congratulations!"}},"title":"%{name}'s projects","title_current_user":"My projects","twitter":{"take_a_look":"Check out the project %{name} on @OppoStarter"},"update":{"success":"Updated"},"video_embed":{"a_project_by_html":"A project by %{link} on"}},"projects_mailer":{"start_project_email":{"subject":"Project sent by %{name}","subject_html":"Project sent by %{link}"}},"registrations":{"new":{"site_title":"Sign up","submit":"Sign Up","title":"Sign up using you email"}},"remaining_plural":"left","remaining_singular":"left","remove":"remove","require_admin":"You must be an admin to perform this action.","require_login":"You must be logged in to perform this action.","require_permission":"You don't have permission to perform this action.","reward":{"display_remaining":"%{remaining} of %{maximum} available","dont_want":"I don't want a reward","limited":"Limited","sold_out":"Sold out"},"rewards":{"form":{"available":"Available quantity","deliver_at":"Delivery forecast:","description":"Description:","edit":"Edit reward","info_box":"You can limit the available amount of a reward. Once the limit is reached, the reward will be marked SOLD OUT. The delivery forecast is the date you intend to deliver the reward to supporters. If you want to change the order of the rewards, just drag them here. try it!","limit_reward":"Limit reward","minimum_value":"Minimum value:","reward":"Reward","submit":"Save"},"index":{"contributions_to_confirm":{"one":"1 support in confirmation period.","other":"%{count} apoios em prazo de confirmação."},"display_remaining":"%{remaining} in %{maximum} available","dont_want":"I only want to support the campaign","edit_reward":"Edit reward","limited":"Limited","link_tip":"The link below leads to the contribution page with this reward already selected.","new_reward":"New Reward","or_more":"or more","reward_deliver_time":"\u003cb\u003eDelivery Estimate:\u003c/b\u003e %{estimate}","reward_title":"For %{minimum} or more","select_reward":"Select this reward","sold_out":"Out of stock"}},"sections":{"channels":{"title":"Asas Channel"},"expiring":{"title":"Expiring"},"near":{"title":"Near me"},"recents":{"title":"Recent"},"recommended":{"title":"Recommended"}},"sending":"Sending...","sessions":{"auth":{"success":"Successfully logged in. Welcome, %{name}!"},"destroy":{"success":"Successfully logged out. See you!"},"failure":{"error":"There was an error while logging in. Please try again."}},"share_my_contributions":"See the projects that I support in OppoStarter!","share_my_projects":"See my projects in OppoStarter!","shared":{"accept_terms_html":"I have read and accept the %{link}.","account_type_value":"We only accept checking account","alerts":{"pending_payment_link_text":"Decide what to do with your money here!","pending_payment_text":"You have outstanding repayments on OppoStarter."},"back_text":"Back","confirm_text":"Confirm","currency":"US$ %{amount}","failed_update":"Error saving information.","feedback":{"button":"Give feedback","inputs":{"close":"Close","submit":"Send feedback"},"placeholders":{"email":"Email","text":"Write your feedback"},"texts":{"content":"In recent months we have been working day and night on a series of platform changes, which are detailed in this \u003ca target='_blank' href='http://blog.catarse.me/os-passos-para-um-novo-catarse/' class='link-underline'\u003e special post\u003c/a\u003e. It would be incredible if we could hear from you what you think of this transformation. \u003cbr\u003e Thank you!","response":{"content":"We value every feedback received. We were unable to respond to each individually, but we listened carefully to every criticism and suggestion. Your comment will certainly be very important in our walk, and will help us to continuously improve your experience here at OppoStarter.","title":"Wow! \u003cbr\u003e Thank you ;)"},"title":"Share your thoughts!"}},"footer_channel":{"contact":"Contact","how_channels_work":"Understand OppoStarter Channels","how_it_works":"How it works %{name}","how_works":"How it works","privacy_policy":"Privacy Policy","terms":"Terms of use","what_is_channel":"What are channels?"},"header_big":{"projects":"My Projects"},"header_channel":{"contact":"Contact","how_work":"How it works","logout":"Logout","my_credits":"My credits","partners":"Partners","posts":"News","profile":"My profile","signin":"Login","signup":"Register","submit":"Submit project"},"load_more":"Load more","menus":{"user":{"about":"Public Profile","access_address":"Registration Details","activity":"Activity","banking":"Bank and cards","contributions_history":"My history","contributions_history_nav":"Support history","find_friends":"Find friends","logged_as":"You are logged in as","notifications":"Notifications","project_contributions":"Support Projects","projects_created":"Projects Created","update_email":" Change e-mail","your_email":"Your registration email is: "}},"no_bank_label":"Other","save_text":"Save","shipping_options":{"free":"No Shipping","international":"National and International Shipping","national":"National Shipping","presential":"Pickup"},"successful_update":"Your information has been updated","terms":"Terms of use","value_text":"Amount"},"sidebar":{"buttons":{"newsletter":"Submit"},"placeholders":{"email":"Enter your email"},"titles":{"blog":"blog","facebook":"have you liked our Facebook page yet?","faq":"have a question?","newsletter":"subscribe to our news","schedule":"calendar"}},"simple_form":{"collections":{"project":{"traffic_sources":{"eight":"I did an internet search on collective financing / alternative forms of startup funding","five":"article in a blog","four":"from a project on the platform","nine":"Other","one":"I already had another project in OppoStarter","seven":"in a class/course/lecture/event","six":"a newspaper article (Internet news portal, TV, newspaper, magazine)","three":"friend / colleague / professional contact","two":"a supporter on OppoStarter"}}},"error_notification":{"default_message":"Please review the problems below:"},"hints":{"flexible_project":{"about_html":"Speak with passion and clarity about what will be accomplished. Clarify possible questions about how the money will be used, who is behind the project, how and when the project will be delivered. Transparency attracts more supporters. Remember: your project will be accessed by ordinary people who will decide whether or not to support your project. ","all_public_tags":"List up to 5 keywords related to your campaign and facilitate discovery by supporters.","all_tags":"Fill in tags separated by commas","category":"Choose the one that best fits your project.","city":"Where will your project be carried out? If it happens in more than one place, one tip is to put the city where your network of potential supporters is larger.","goal":"Plan a goal that is consistent with what your project proposes. Review your budget and be sure to include the 5% OppoStarter fee plus 3-5% Stripe processing fee.","headline":"Project Card headline. Must have a maximum of 100 characters and summarize the project well.","name":"Give a name that people will remember easily. Do not exceed 50 character","online_days":"You can choose between 1 and 60 days for your campaign. Check out the directors guide for tips on deadlines.","permalink":"You can edit it until the project goes online. Choose something simple, straightforward, and identify your project well. Try not to use hyphen, underline etc.","select":"Select an option","traffic_sources":"How did you heard about OppoStarter?","uploaded_image":"This image will be used as the thumbnail of your project (PNG, JPG size 600 x 340)","video_url":"Link of your video on Vimeo or \u003cbr/\u003e Youtube."},"project":{"about_html":"Speak with passion and clarity about what will be accomplished. Clarify possible questions about how the money will be used, who is behind the project, how and when the project will be delivered. Transparency attracts more supporters. Remember: your project will be accessed by ordinary people who will decide whether or not to support your project. ","all_public_tags":"List up to 5 keywords related to your campaign and facilitate discovery by supporters.","all_tags":"Fill in tags separated by commas","category":"Choose the one that best fits your project.","city":"Where will your project be carried out? If it happens in more than one place, one tip is to put the city where your network of potential supporters is larger.","goal":"Plan a goal that is consistent with what your project proposes. Review your budget and be sure to include the 5% OppoStarter fee plus 3-5% Stripe processing fee.","headline":"Project Card headline. Must have a maximum of 100 characters and summarize the project well.","name":"Give a name that people will remember easily. Do not exceed 50 characters.","online_days":"You can choose between 1 and 60 days for your campaign. Check out the directors guide for tips on deadlines.","permalink":"You can edit it until the project goes online. Choose something simple, straightforward, and identify your project well. Try not to use hyphen, underline etc.","select":"Select an option","traffic_sources":"How did you heard about OppoStarter?","uploaded_image":"This image will be used as the thumbnail of your project (PNG, JPG size 600 x 340)","video_url":"Link of your video on Vimeo or \u003cbr/\u003e Youtube."}},"no":"No","prompts":{"project":{"category":"Select a category","select":"Select an option","traffic_sources":"How did you heard about OppoStarte?"}},"required":{"mark":"*","text":"required"},"validation_texts":{"bank_account":{"account":"What is the account number??","account_digit":"What is the check digit?","agency":"What is the agency number??","agency_digit":"What is the digit of the agency??","bank_id":"Select a bank","input_bank_number":"Invalid bank number","owner_document":"Enter a valid CPF or CNPJ for the account holder","owner_name":"Enter a name with a minimum of 5 and a maximum of 30 letters"},"contribution":{"address_city":"Enter the name of the city","address_neighbourhood":"Enter the name of the district","address_number":"Enter the address number","address_phone_number":"Enter phone number","address_state":"Selecione um estado","address_street":"Enter street name","address_zip_code":"Enter the zip code","payer_document":"Please enter a valid CPF or CNPJ","payer_email":"Please type a valid email","payer_name":"Please enter the name of the supporter"},"reward":{"description":"Please provide a description of the reward","minimum_value":"Enter a minimum value greater than or equal to 10"}},"yes":"Yes"},"site":{"description":"OppoStarter is a crowdfunding platform, or collective financing, in the UK. Come and take projects off the paper!","keywords":"crowdfunding, collective funding, project, OppoStarter, community, supporters, contribution, StartUps, technology, funding, backers, backing, small business. company","meta_title":"%{title} · %{company_name}","title":"OppoStarter - Official Site"},"static":{"about":{"introduction":"Who are they? What do they eat? How are they networked? You’ll see all of it now on “Who are we?”.","name_eight":"Adriano Benin","name_five":"Rodrigo Maia","name_four":"Renato Garcia","name_nine":"Antônio Roberto","name_one":"Luis Otávio Ribeiro","name_seven":"Evelise Luz","name_six":"Diogo Biazus","name_three":"Luciana Masini","name_two":"Diego Reeberg","subtitle":"Meet the lovely gang that makes this whole thing happen \u003c3","text_eight":"When not programming he likes designing circuits and risking the piano.","text_five":"Pragmatist who loves improvisation, has a deep voice and artistic outbursts. Fascinated by people and all forms of moving images.","text_four":"Collectivist. Believes in collaboration one by one, with no authority, for a fairer world. Football and skateboarding fanatic. All this accompanied by a good samba or nacinal rap soundtrack.","text_nine":"A fellow crazy about development who lives in Tonland","text_one":"Uberabense. Laziness enthusiast, is addicted to maintaining creative structures running and promoting encounters between people.","text_seven":"Completely crazy, likes venturing into books, singing in the shower and loves exploring fig jam jars.","text_six":"Data Architect. Likes self-explanatory, self-referential and self-cleaning structures.","text_three":"Color and contrast enthusiast, poet and artist by nature, curious about culture, curator by accident.","text_two":"Apprentice poet, musician, tango dancer and addict to Calvino and Saramago, likes to dig beautiful things and talented people in the dusty corners of the internet.","title":"Who We Are?","title_eight":"Programmer","title_five":"Information Remixer","title_four":"OppoStarter’s Silvio Santos (a Brazilian host and entrepreneur)","title_nine":"Fireman","title_one":"Fisher of Killer Projects","title_seven":"Footer Designer","title_six":"Database Archbishop","title_three":"Apprentice of Making it happen","title_two":"Philosopher who lives in a Barrel"},"faq":{"title":"Frequently asked questions"},"guidelines":{"explore_curious":"CONTRIBUTING A PROJECT","explore_projects":"Understand how to contribute a project","introduction_html":"OppoStarter is a space of exchange among individuals who together \u003cbr \u003eenable the realization of creative projects.","legend_html":"We believe that connecting people that share a cause, an idea, a project, is one of the best ways to bring them to fruition. \u003cbr\u003e\u003cbr\u003e Make yourself at home! This is your space as much as it is ours. After all, catharsis comes from people like you, searching for new ways to give life to their society. We believe this is a new alternative to government resources, company sponsorships and bank loans. It is by the people, for the people. =)","send_project":"Understand how to submit your project","submit":"SUBMITTING A PROJECT","subtitle":"Get to know OppoStarter better.","title":"How it works"},"guidelines_contributions":{"contribution":"You will receive a confirmation email. And stay tuned on the contributions tab at the page of the project you supported.","credits":"You will receive credits on OppoStarter. The moment you choose to contribute to another project, there will be a field on the payment page where you can use your credits.","explore_curious":"I’M ON BOARD!","explore_projects":"I want to contribute a project","intro":"Get to know different ways to help projects you believe in","introduction":"OppoStarter is a great way to engage in a cause you believe in","legend_html":"We believe that supporting a project is one of those small ways to do a lot of darn good in the world.","money":"No problem! You just need to enter in your profile (My credits) and request a chargeback. If you paid with debit or ticket (Boleto), you’ll need to open an account at MoIP. If you used a credit card the money will show up on your next bill.","more_questions":"I'm dying to support a project, is there anything else I need to know?","not_funded":"You'll receive credits on your account on OppoStarter. Whenever you choose to contribute another project, there will be a field on the payment page where you can use your credits.","not_success":"The full amount of your contribution is returned to you in the form of credit (to support another project). If you'd prefer another form of refund, you can request your money back according to the rules of the \u003ca href='%{terms}' target='_blank'\u003eterms of use\u003c/a\u003e.","not_success_title":"If the project does not meet the target ...","other_contributions":"I WANT MORE! CAN I HELP IN OTHER WAYS?","other_five":"Send an e-mail to the project creator asking how can you help even more.","other_four":"Make a contributing video to broadcast your belief in the project. Take these guys for example: https://vimeo.com/46233018","other_one":"Bring two other friends to contribute with the same amount you did","other_three":"Do you have a friend who’s a journalist? Encourage them to post something about it on their blog.","other_two":"Spread the word to every one. Tell them how great the project you supported on OppoStarter is.","rewards":"It's the project creator's duty to contact you and arrange delivery of the reward. If not, you need to send an email to him/her to claim it! If you get no answer… contact us and we'll give them an earfull =D","send_project":"I want to submit my project ","step_four":"Now you and the project creator are in this together. Spread the word through your networks and stay tuned on the updates.","step_one":"The first step is to understand the project. Watch the video, read the description, browse the links. If you're convinced that this project needs to come to life, then take the nex step!","step_three":"Fill in your information and review it! Then, decide what form of payment meets your needs.","step_two":"A good way to decide how much to contribute is to take a look at the rewards on offer. (And you might consult your wallet too.)","submit":"VERY COOL!","subtitle":"Understand step-by-step how to contribute to a project on OppoStarter.","successful":"The project is considered successful! The creator gets the money and contacts all supporters.","successful_title":"If the project meets or exceeds its financial target ...","title":"I want to contribute to a project!","title_contribution":"How do I know that my support was successful?","title_credits":"If the project does not achieve the goal, how do I use my credits?","title_four":"Spread the word!","title_money":"What if I don't want to use the credits?","title_not_funded":"If the project does not achieve the goal, how do I use my credits?","title_one":"Explore the Project","title_requirements":"Remember: in OppoStarter it’s “all or nothing”","title_rewards":"If the project is funded, how do I get my rewards?","title_three":"Finalize your contribution","title_two":"Decide how much you’ll contribute"},"guidelines_start":{"accept":"I have read and understand how OppoStarter works.","collective":"Collective Benefits","costs":"Submitting your project is completely free. When your project is approved and has reached its goal, OppoStarter will apply a 13% fee (this value includes both the OppoStarter fee and the payment gateway fee).","creative":"Creative and Finite","donation":"No philanthropic or “fund my life” projects","explore_curious":"Just looking around!","explore_projects":"I want to explore the projects.","intro":"First of all, there are tons of benefits to this new way of financing projects:","introduction":"OppoStarter is a different - and collaborative - way to make your projects become reality.","legend_html":"Use this guide to decide if OppoStarter is the right tool for the job.","magic":"We believe that providing a meeting place for people that share common values is the best way to turn projects into reality. Use OppoStarter as a channel to direct your network towards a COMMON objective.","money":"At least 50% generally comes from your own network of contacts. In this way, OppoStarter is a way for you to get closer to the people around you. You can expand that network by sharing your OppoStarter project through social networks, newspapers, blogs and, of course, your local bar.","more_questions":"Ok, but tell me more about this OppoStarter...","nonprofit":"Non-financial rewards","send_project":"I want to submit my project.","step_four":"If your project doesn't reach its goal before time runs out, all contributors will receive their pledges back in the form of credits. They can also ask for direct refunds if they want.","step_one":"Projects are actions! And we receive them with open arms whether they are small, big, funny, serious, traditional, innovative... We love projects that require little money and have a big impact in their communities.","step_three":"When your project is ready, it's time to go live and plan your campaign. During this period, you will need to engage as many people as possible to reach your goal.","step_two":"After we receive your project, it will be screened by our team of reviewers. The objective here is to give you tips in order to maximize the chances of your project becoming successful, as well as filtering inappropriate projects. Remember, we want your project to be successful as much as you do ;)","submit":"Next step!","subtitle":"Understand step-by-step how to finance your project through OppoStarter.","title":"How does OppoStarter work?","title_costs":"How much does it cost to use OppoStarter?","title_four":"It's all-or-nothing","title_magic":"Our magic formula","title_money":"Where does the money to finance projects come from?","title_one":"Submit your project","title_requirements":"Requirements to submit your project to OppoStarter","title_three":"Let's go live!?","title_two":"Review","title_work":"Does it take a lot of work?","video":"Make a video","why":"Why OppoStarter?","why_one":"By creating a strong bond with your network, your campaign will open doors to new projects, partnerships and other unexpected connections.","why_three":"Minimum red tape and low financial risk. No interest rate, no entry fees... and lots of fun and excitement.","why_two":"If you work hard to promote it, your project can quickly spread to a lot of people, expanding your network and strengthening the base of supporters around your cause.","work":"You bet it does! There's no such thing as easy money on the Internet. You'll have to work a lot during your project, but the experience will be worth it, we promise :D And you will have a much stronger network behind your project after OppoStarter."},"guidelines_tips":{"explore_curious":"Just looking around!","explore_projects":"I want to explore the projects.","guide":"Download here a complete guide with all the tips to plan your project in OppoStarter.","introduction_html":"We know you're excited to have your project go live, but first answer \u003cbr\u003e (on a piece of paper) the following questions.","legend_html":"Having clear answers to these questions will help tremendously in structuring your project, \u003cbr\u003eincreasing the chances that it will be successful.","send_project":"I want to submit my project.","submit":"Next step!","subtitle":"Before submitting your project, it's good to think over a few important points.","tip_eight":"Create a GOOGLE DOCS spreadsheet and open your budget to show everyone how the money will be used. Transparency is everything!","tip_five":"Remember that rewards are public promises. So, think very carefully when elaborating them and consider the logistics in  how you'll deliver them to your contributors. Our suggestion: consider offering immaterial rewards: downloads, experiences, that sort of thing.","tip_four":"Don't underestimate the work that goes into a campaign. You will have to work hard during the entire time the project is live, so we don't want you to tire yourself out too much during this process. Our recommendation: 40 days of campaigning.","tip_one":"People only engage when they realize the importance of a cause. either to society, or to you. So be very clear about your inspiration. and let it flow into your project.","tip_seven":"You need to have a clear idea on how you will engage your network and convince them to contribute to your project. Distribute updates weekly, and be thoughtful about your approach to win your community's attenion and support.","tip_six":"The video is your project's business card. It's through your video that supporters will get in touch with your cause. So take special care in the script, audio and image quality. HD video tends to help.","tip_three":"Calculate all costs for the project execution and rewards delivery. Also take into account your ability to engage people before you define your financial goal.","tip_two":"OppoStarter is an excellent way to take the first steps. Therefore, define very discretely the purpose of your project, as well as who will benefit from it. Clearly defining your objectives is one of the best ways to make people envision your project and come on board.","title":"Almost there!","title_eight":"How will the money be used?","title_five":"Have you thought about the project rewards?","title_four":"What is your deadline for the fundraising?","title_one":"What inspired you to make this project?","title_seven":"How will you mobilize your network?","title_six":"Is your video ready?","title_three":"What is your goal?","title_two":"What is the focus?"},"privacy":{"title":"Privacy Policy"},"terms":{"title":"Terms of use"}},"statistics":{"contributions":{"subtitle":"contributions"},"goal":{"subtitle":"total of %{total}"}},"support":{"array":{"last_word_connector":" e ","two_words_connector":" e ","words_connector":", "}},"tell_about_this_contribution":"Tell the world about your support!","tell_about_this_project":"Tell the world about your project!","terms":"terms of use","time":{"am":"am","formats":{"default":"%A, %d de %B de %Y, %H:%M h","estimate":"%B/%Y","long":"%A, %d de %B de %Y, %H:%M h","posts":"%d %b %Y","short":"%d/%m, %H:%M h","simple":"%d/%m/%Y, %H:%M h"},"pm":"pm"},"true":"Yes","user":{"contributions_text":{"many":"Contributed to this and other %{total} projects","one":"Contributed to only this project until now","two":"Contributed to this and 1 other project"},"google_account":"Google Account","no_name":"Unnamed"},"users":{"balance":{"bank":{"account":"Account:","agency":"Agency","bank_name":"Bank:","cpf_cnpj":"CPF / CNPJ:","name":"Name / Company Name:"},"credit":"Credit","day_balance":"Balance of the day","debit":"Debit","event_names":{"balance_transfer_error":"Error in transfer to bank account","balance_transfer_project":"Transfer request to bank account","balance_transfer_request":"Transfer request to bank account","catarse_contribution_fee":"Oppostarter Service Fee (%{service_fee}%)","catarse_project_service_fee":"OppoStarter Service Fee (%{service_fee}%)","contribution_refund":"Project reimbursement %{project_name}","irrf_tax_project":"Taxes generated from the invoice of OppoStarter for PJ","project_contribution_chargeback":"Payment disputed by the supporter: %{contributor_name}","project_contribution_confirmed_after_finished":"Payment confirmed after completed project: %{project_name}","project_contribution_reverse_chargeback":"Payment confirmed after request by the supporter: %{contributor_name}","refund_contributions":"Reimbursement for project supporters %{project_name}","successful_project_pledged":"Collection of financed project %{project_name}"},"request_fund":"Request withdrawal","success_message":"Your draft has been successfully requested. In up to 10 business days, your money will be in your bank account!","totals":"Balance ","totals_transactions_title":"Extract ( balance in account: US$ %{value} )","value":"value","value_text":"Value","withdraw":"Withdraw money","withdraw_cta":"US$ Perform Withdrawal"},"card":{"author_website":"Site","contact_author":"Send Message","facebook_profile":"Facebook Profile","twitter_profile":"Twitter Profile"},"contribution_row":{"anonymous":"I want my support to be anonymous","answer_survey":"Answer the questionnaire","contact_author":"Send Message","contributed_projects":"Projects I supported","contribution_status":"Support Status","contribution_value":"Value of support","delivery_estimate":"Estimated delivery:","delivery_status":"Delivery status:","no_reward":"You have not selected a reward","print_slip":"Print Ticket","request_refund":"Request refund","reward":"Reward","show_receipt":"View Receipt","slip_copy":"Generate 2nd via","status":"Status"},"contributions":{"anonymous":"Anonymous contribution.","no_contributions":"%{name} hasn't contributed to any project yet. But we know it's just a matter of time! :D","no_contributions_current_user_html":"You haven't contributed tp any projects yet. Don't you think it's \u003ca href=\"/\"\u003etime to start\u003c/a\u003e?","no_reward":"You didn't pick a reward","title":"Projects %{name} has contributed","title_current_user":"Projects I've contributed to","your_reward":"Your reward"},"credit_cards":{"index":{"brand":"Operator","last_digits":"Card","remove":"Remover","title":"Credit cards"}},"credits":{"index":{"contribution_date":"Date of support","current_credits_html":"Your current balance is \u003cspan id=\"current_credits\"\u003e%{credits}\u003c/span\u003e in credits.","important_html":"To know all the refund working rules, \u003ca href='http://suporte.catarse.me/hc/pt-br/articles/202365507-Regras-e-funcionamento-dos-reembolsos-estornos' target='_blank'\u003eclick here\u003c/a\u003e. Any questions, access our \u003ca href='https://support.oppostarter.com' target='_blank'\u003esupport\u003c/a\u003e.","insufficient_credits":"You do not have enough credits to make this chargeback.","project":"Project","refunded":"Request confirmed. We will contact you within 4 working days.","refunds_title":"Supports that can be refund","request_refund":"Requested refunded","requested_refund":"Requested refunded","status":"Status","title":"MMy Credits","value":"Amount"},"modal":{"accept_btn":"Yes, I would like to request a refund of my","link":"Rules and How Reimbursements Work / chargebacks","reject_btn":"No, I want to keep my credits","text":"Learn how the reimbursement process works in Oppostarter:","title":"Do you really want to claim reimbursement for your support??"},"refund":{"cannot_refund":"This support can not be refunded.","error":"Oops. There was an error requesting your chargeback.","no_credits":"You do not have enough credits to make this refund.","refunded":"This support has already been refunded.","requested_refund":"You have already requested a chargeback for this support."},"title":"My credits"},"current_user_fields":{"bank_account_hint":"Your bank details will be used to make full refund of your support, if the project does not reach 100% of the established goal.","bank_account_title":"Bank Details","bio_limit":"only 140 characters","change_password":"Change my password","current_password_hint":"\u003ci\u003eWe need your current password to confirm your changes.\u003c/i\u003e","deactivate":"Disable my account","deactivate_confirm":"You want to disable this account?","deactivate_hint":"All your support will be converted into anonymous details, your daetails will no longer be visible, you will automatically be remove from the system and your account will be permanently disabled.","deactivate_notice":"The account for %{name} was deactivated.","email_hint":"Your email will only be used for communications from OppoStarter and the projects you contributed to. It won't be visible in your profile. When you contribute a project, we will give your email to the project owner so they can provide your rewards.","email_tooltip":"Click here to fill your email...","facebook_link":"Facebook profile (full link)","gravatar_hint_html":"Want to change your picture? Use %{link} with your email. It's as simple as uploading an image and works for other sites as well ;)","local_avatar":"My avatar","my_data":"My profile","my_facebook":"Facebook integration","newsletter":"I want to receive news from OppoStarter via email","other_link":"another Internet page","password_hint":"\u003ci\u003eLeave blank if you don't want to change this.\u003c/i\u003e","social_info":"Contact info","submit":"Submit","submit_text":"Choose your picture","twitter":"Twitter ( username )","update_social_info":"Update info","updated":"Your information has been updated"},"edit":{"about_fields":{"about":"About","about_description":"Tell us about yourself and try to provide the most relevant information so visitors can get to know you better..","add_link":"+ Add link","cover_description":"This image will be used as the background of your public profile header (PNG or JPG). If you do not submit any images here, we will use your profile image as an alternative.","cover_title":"Profile Cover Image","facebook_description":"Paste your profile link","faceebook":"Facebook Profile","homepage":"Presence on the internet","homepage_description":"Include links to help other users get to know you better.\u0026nbsp;","image_description":"This image will be used as the thumbnail of your profile (PNG, JPG size 280 x 280)","image_title":"Profile picture","name":"Name","name_description":"This is the name that users will see in your public profile","profil_address_description":"Your public profile may have a custom URL.","profil_address_title":"Your profile address","twitter":"Twitter Profile","twitter_description":"Paste your profile link"},"about_me":"About you","billing":"Bank and cards","billing_fields":{"bank_account":"Bank details","bank_account_message":"If any project you have supported \u003cb\u003ewith Bank slip\u003c/b\u003e is not successful, we will refund your payment \u003cb\u003eautomatically\u003c/b\u003e in the account indicated below.","card":"Card","card_message":"If any project you have supported \u003cb\u003eWith credit card\u003c/b\u003e is not successful, we will refund you \u003cb\u003eautomatically\u003c/b\u003e on the card used to make the support.","credit_card":"Credit cards","operator":"Operator"},"contributions":"Supported","contributions_fields":{"contribute":"Support now!","no-project":"You have not yet supported any project on\u0026nbsp;OppoStarter..."},"email_confirmation":{"confirmed_sub":"Check your SPAM and authorize OppoStarter emails.","confirmed_title":"Be sure to check out our emails!","hello":"Hello %{name}","hello_email":"This is your contact email.? %{email}","hello_sub":"We are having trouble contacting you...."},"feeds":"Activities","notification":"Notifications","notifications_fields":{"newsletters":{"1370135":{"description":"Comics, boardgames, technology and digital games, inside and outside OppoStarter.","image_src":"http://uploads.webflow.com/5849f4f0a275a2a744efd93e/59a713dde51ca0000149ae85_geek-news-img.jpg","title":"Geek News"},"750382":{"description":"Featured projects and tips from our Blog, selected with care by our team.","image_src":"http://uploads.webflow.com/5849f4f0a275a2a744efd93e/59a714d438c73b0001ee8d83_news-img.jpg","title":"News of the week"}}},"profil":"Go to the public profile","projects":"Created","settings":"Details and address","settings_tab":{"account_types":{"mei":"Legal Entity (Micro Entrepreneur Individual - MEI)","pf":"Physical person","pj":"Legal person"},"address_subtitle":"The address details will be used for billing, if applicable.","address_title":"Address","credit_cards":{"card_label":"Card","provider_label":"Operator","remove_label":"Remove","subtitle":"If any project you have supported \u003cstrong\u003ewith credit card\u003c/strong\u003e is not successful, we will refund you \u003cstrong\u003eautomatically\u003c/strong\u003e on the card used to make the support.","title":"Credit cards"},"label_address_city":"City","label_address_complement":"2nd Address","label_address_neighbourhood":"District","label_address_number":"Number","label_address_phone":"Telephone","label_address_state":"State","label_address_street":"Address (Street, Avenue...)","label_address_zipcode":"Zip Code","label_birth_date":"Date of birth","label_country":"País","label_other_option":"Other / other","label_state_inscription":"State registration","legal_subtitle":"\u003cstrong\u003eIMPORTANT\u003c/strong\u003e Full name/Corporate name and CPF/CNPJ \u003cstrong\u003ecan not be modified\u003c/strong\u003e after being saved.","legal_title":"Responsible","pf_label_document":"CPF","pf_label_name":"Full name","pj_label_document":"CNPJ","pj_label_name":"Full Name / Company Name","update_success_msg":"Your information has been updated"},"submit":"Save"},"failed_reactivation":"The reactivation link is invalid, please contact our team.","header":{"bio_tooltip":"Click here to write about yourself...","name_tooltip":"Click here to fill in your name..."},"profile":{"multiple_project_contribution":"Supported %{n_projects} projects","multiple_project_created":" and already created %{n_projects} projects","no_project_contribution":"Has not yet supported projects","single_project_contribution":"Supported 1 project","single_project_created":" and already created 1 project","user_since":"Joined since %{date}"},"project":{"confirmed":"Confirmed","refunded":"Refunded","requested_refund":"Refund requested","tell_about_this_contribution":"Tell the world about your support!","waiting_confirmation":"Waiting confirmation"},"reactivated":"Welcome back, your account has been reactivated.","set_email":{"site_title":"Enter your email address","submit":"Save my email and continue","title":"Enter your email address"},"show":{"attention":"Attention","contributions":{"anonymous":"Anonymous support.","contribution_col":"Support","no_contributions":"%{name} has not yet supported any project. But we know it is just a matter of time! :D","no_contributions_current_user_html":"You have not yet supported any projects. What about \u003ca href=\"/\"\u003estarting now\u003c/a\u003e?","no_reward":"You have not selected any reward","project_col":"Project","reward_col":"Reward","survey_col":"Questionnaire","title":"Projects that %{name} already supported","title_current_user":"Projects I have already supported","your_reward":"Your reward"},"projects":{"here":"here","no_projects":"%{name} has not yet done any project in OppoStarter. Will inspiration be hitting this hour??","no_projects_current_user_html":"You have not done any projects in OppoStarter yet. Let the inspiration hit and click %{link} to begin!","title":"Projects of %{name}","title_current_user":"My Projects"},"tabs":{"comments":"Comments","contributed_projects":"Contributed projects","created_projects":"Created projects","credit_cards":"Credit cards","credits":"Credits","settings":"Settings","unsubscribes":"Notifications"},"user_social":{"email":"Send me an email","facebook":"Profile on Facebook","twitter":"Profile on Twitter"}},"unsubscribes":{"posts":"I want to receive project updates","projects_in_reminder":"Projects with active reminder:","title":"Choose which projects you want to receive update notifications on:","updates":"I want to receive project updates"}},"uservoice_gadget":{"user":{"confirmed_contributions":"Confirmed contributions","created_projects":"Created projects","location":"City / State","name":"User"}},"views":{"pagination":{"first":"\u0026laquo; First","last":"last","next":"next","previous":"\u0026lsaquo; Prev","truncate":"..."}},"will_paginate":{"next":"Next »","page_gap":"...","previous":"« Previous"}}};
}));



//evitamos criar duas vezes...
//tem q ser não dependente de outros codigos
window.CatarseAnalytics = window.CatarseAnalytics || (function(){
    /*!
   * cookie-monster - a simple cookie library
   * v0.3.0
   * https://github.com/jgallen23/cookie-monster
   * copyright Greg Allen 2014
   * MIT License
  */
  var monster={set:function(name,value,days,path,secure,domain){var date=new Date(),expires='',type=typeof(value),valueToUse='',secureFlag='';path=path||"/";if(days){date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toUTCString();}if(type==="object"&&type!=="undefined"){if(!("JSON"in window))throw"Bummer, your browser doesn't support JSON parsing.";valueToUse=encodeURIComponent(JSON.stringify({v:value}));}else{valueToUse=encodeURIComponent(value);}if(secure){secureFlag="; secure";}domain=domain?"; domain="+encodeURIComponent(domain):"";document.cookie=name+"="+valueToUse+expires+"; path="+path+secureFlag+domain;},get:function(name){var nameEQ=name+"=",ca=document.cookie.split(';'),value='',firstChar='',parsed={};for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0){value=decodeURIComponent(c.substring(nameEQ.length,c.length));firstChar=value.substring(0,1);if(firstChar=="{"){try{parsed=JSON.parse(value);if("v"in parsed)return parsed.v;}catch(e){return value;}}if(value=="undefined")return undefined;return value;}}return null;},remove:function(name){this.set(name,"",-1);},increment:function(name,days){var value=this.get(name)||0;this.set(name,(parseInt(value,10)+1),days);},decrement:function(name,days){var value=this.get(name)||0;this.set(name,(parseInt(value,10)-1),days);}};
  var ajax = (function(){
    //based on https://raw.githubusercontent.com/yanatan16/nanoajax/v0.2.4/index.js
    function getRequest() {
      if (window.XMLHttpRequest)
        return new window.XMLHttpRequest;
      else
        try { return new window.ActiveXObject("MSXML2.XMLHTTP.3.0"); } catch(e) {}
      throw new Error('no xmlhttp request able to be created')
    }

    function setDefault(obj, key, value) {
      obj[key] = obj[key] || value
    }

    return function (params, callback) {
      if (typeof params == 'string') params = {url: params}
      var headers = params.headers || {}
        , body = params.body
        , method = params.method || (body ? 'POST' : 'GET')
        , withCredentials = params.withCredentials || false

      var req = getRequest();

      // has no effect in IE
      // has no effect for same-origin requests
      // has no effect in CORS if user has disabled 3rd party cookies
      req.withCredentials = withCredentials

      req.onreadystatechange = function () {
        if (req.readyState == 4)
          callback(req.status, req.responseText, req)
      }

      if (body) {
        setDefault(headers, 'X-Requested-With', 'XMLHttpRequest')
        setDefault(headers, 'Content-Type', "application/json; charset=utf-8")//'application/x-www-form-urlencoded')
      }

      req.open(method, params.url, true)

      for (var field in headers)
        req.setRequestHeader(field, headers[field])

      req.send(body)
    }
  })();

  var ctrse_sid=(function(cookie){
    var sid=cookie.get('ctrse_sid');
    if(!sid) {
      /*based on https://github.com/makeable/uuid-v4.js*/
      var UUID=function(){for(var dec2hex=[],i=0;15>=i;i++)dec2hex[i]=i.toString(16);return function(){for(var uuid="",i=1;36>=i;i++)uuid+=9===i||14===i||19===i||24===i?"-":15===i?4:20===i?dec2hex[4*Math.random()|8]:dec2hex[15*Math.random()|0];return uuid}}();
      sid=UUID();
    }
    cookie.set('ctrse_sid',sid,180,'/',false,'.oppostarter.com');
    return sid;
  })(monster);

  var _apiHost,_user,_project;
  var _analyticsOneTimeEventFired={};
  try {
    function _actualRequest() {
      var location = window.location;
      var domain = location.origin || (location.protocol + '//' + location.hostname);
      return {
        referrer: document.referrer||undefined,
        url: location.href,
        protocol: location.protocol.substr(0,location.protocol.length-1),
        hostname: location.hostname,
        domain: domain,
        pathname: location.pathname || location.href.substr(domain.length).replace(/[\?\#].*$/,''),
        userAgent: typeof navigator!=='undefined' ? navigator.userAgent : undefined,
        hash: location.hash.replace(/^\#/,''),
        query: (function parseParams() {
            if(location.search) {
              try {
                return location.search.replace(/^\?/,'').split('&').reduce(function (params, param) {
                    var paramSplit = param.split('=').map(function (value) {
                        return decodeURIComponent(value.replace('+', ' '));
                    });
                    params[paramSplit[0]] = paramSplit[1];
                    return params;
                }, {});
              } catch(e) {
                return location.search;
              }
            }
        })()
      };
    };

    var origin = (function(request,cookie) {
      try {
        var o = JSON.parse(cookie.get('ctrse_origin')||null) || {createdAt: new Date()};
      } catch(e) {
        o = {createdAt: new Date()};
      }
      var fromCatarse=request.referrer && /^https?:\/\/([^\\/]+\.)?oppostarter\.com/.test(request.referrer);
      if(fromCatarse) {
        //Só pega o ultimo ref. Não atualiza utms...
        o.ref = (request.query&&request.query.ref) || o.ref; //preferencia para a query.
      } else if(/*!fromCatarse && */ request.referrer || (!o._time || new Date().getTime()-o._time>10*60*1000/*10min*/)) {
        var m=request.referrer && request.referrer.match(/https?:\/\/([^\/\?#]+)/);
        var refDomain=(m && m[1]) || undefined;
        var query=request.query;
        //se, e somente se, tem algum utm na query...
        if(query && ['utm_campaign','utm_source','utm_medium','utm_content','utm_term'].some(function(p){
          return !!query[p];
        })) {//então, substitui todos, mesmo os q nao tem, pois são um conjunto de informações...
          o.domain  = refDomain;
          o.campaign=query.utm_campaign;
          o.source=  query.utm_source;
          o.medium=  query.utm_medium;
          o.content= query.utm_content;
          o.term=    query.utm_term;
        } else if (refDomain && !['domain','utm_campaign','utm_source','utm_medium','utm_content','utm_term'].some(function(p){
          return !!o[p];
        })) {//se tem refDomain e não tem no origin algum utm ou domain anterior...
          o.domain  = refDomain;
        }

        if(!o.campaign && query && query.ref) {
          //nesse caso, como veio de outro dominio, sem utm params, mas com ref, assumimos q esse ref é um campaign.
          o.campaign = query.ref;
        }
      }
      //fazemos o _time aqui por causa da verificação acima !o._time, indicando q foi criado agora.
      o._time=new Date().getTime();
      cookie.set('ctrse_origin',JSON.stringify(o),180,'/',false,'.oppostarter.com');
      return o;
    })(_actualRequest(),monster);
  } catch(e) {
    console.error('[CatarseAnalytics] error',e);
  }
  //Metodos semelhantes ao modulo "h"
  function _getApiHost() {
    if(window.CatarseAnalyticsURL)
      return window.CatarseAnalyticsURL;
    if(_apiHost)
      return _apiHost;

    var el=document.getElementById('api-host');
    _apiHost = (el && el.getAttribute('content'));
    if(_apiHost)
      _apiHost=_apiHost+'/rpc/track';
    return _apiHost;
  }
  function _getUser() {
    if(_user)
      return _user;

    var body = document.getElementsByTagName('body'),
        data = body && body[0] && body[0].getAttribute('data-user');
    if(data) {
      try {
        return _user=JSON.parse(data);
      } catch(e) {
        console.error('[CatarseAnalytics._getUser] error parsing data '+JSON.stringify(data), e);
      }
    }
  }
  function _getProject() {
    if(_project)
      return _project;
    var el = document.getElementById('project-show-root')||document.getElementById('project-header'),//pode não existir
        data = el && (el.getAttribute('data-parameters')||el.getAttribute('data-stats'));
    if(data) {
      try {
        return  _project=JSON.parse(data);
      } catch(e) {
        console.error('[CatarseAnalytics._getProject] error parsing data '+JSON.stringify(data), e);
      }
    }//else return undefined
  }

  function _event(eventObj, fn, ignoreGA) {
    if (eventObj) {
      try {
        var project = eventObj.project||_getProject(),
            user = eventObj.user||_getUser();
        var ga = window.ga;//o ga tem q ser verificado aqui pq pode não existir na criaçaõ do DOM
        var gaTracker = (typeof ga==='function' && ga.getAll && ga.getAll() && ga.getAll()[0]) || null;
        ignoreGA = ignoreGA || typeof ga!=='function';

        var data = eventObj.extraData&&typeof eventObj.extraData==='object' ? JSON.parse(JSON.stringify(eventObj.extraData)) : {};
        data.ctrse_sid=ctrse_sid;
        data.origin=origin;
        data.category=eventObj.cat;
        data.action=eventObj.act;
        data.label=eventObj.lbl;
        data.value=eventObj.val;
        data.request=_actualRequest();
        if(user&&user.user_id) {
          data.user={
            id: user.user_id,
            contributions: user.contributions,
            published_projects: user.published_projects
          };
        }
        if(project&&(project.id||project.project_id)) {
          data.project={
            id: project.id||project.project_id,
            user_id: project.user_id||project.project_user_id,
            category_id: project.category_id,
            state: project.address && project.address.state_acronym,
            city: project.address && project.address.city
          };
        }
        if(gaTracker) {
          data.ga={clientId: gaTracker.get('clientId')};
        }

        try {
          var apiUrl=_getApiHost();
          if(apiUrl) {
            var sendData = {
              event: data
            };

            ajax({
                url: apiUrl,
                // The key needs to match your method's input parameter (case-sensitive).
                body: JSON.stringify(sendData),
                headers: {
                  'Content-Type': "application/json; charset=utf-8"
                }
            }, function(status, responseText, req){
              if(status!==200)
                console.error(status,responseText,req);
            });
          }
        } catch(e) {
          console.error('[CatarseAnalytics.event] error:', e);
        }

        if(!ignoreGA && typeof ga!='undefined') {
          //https://developers.google.com/analytics/devguides/collection/analyticsjs/sending-hits#the_send_method
          ga('send', 'event', eventObj.cat, eventObj.act, eventObj.lbl, eventObj.val, {
            nonInteraction: eventObj.nonInteraction!==false,//default é true,e só será false se, e somente se, esse parametro for definido como false
            transport: 'beacon'
          });
        }
      } catch(e) {
        console.error('[CatarseAnalytics.event] error:',e);
      }
    }
    fn && fn();
  }

  /*function _lastOrigin() {
    var origin=localStorage
    if(documnet.referrer && /https?:\/\/[^\/]*catarse\.me/.test(document.referrer)) {

    }
  }*/
  var pvto;
  function _pageView(ignoreGA) {
    pvto&&clearTimeout(pvto);
    pvto=setTimeout(function() {
      _event({cat:'navigation',act:'pageview',lbl:location.pathname}, null, true);
      if(!ignoreGA && typeof ga!='undefined') {
        ga('set','page',location.pathname);
        ga('send', 'pageview', location.pathname);
      }
    });
  }
  _pageView(true);//Na primeira vez q carrega a página, o pageview do GA será enviado na pagina mesmo.

  function _checkout(transactionId, prodName, sku, category, price, fee) {
    try {
      if(typeof ga==='function') {
        ga('ecommerce:addTransaction', {
          'id': transactionId,                     // Transaction ID. Required.
          //'affiliation': 'Acme Clothing',   // Affiliation or store name.
          'revenue': price,               // Grand Total.
          //'shipping': ,                  // Shipping.
          'tax': fee,                     // Tax.  Nossa porcentagem
          'current': 'BRL'
        });
        ga('ecommerce:addItem', {
          'id': transactionId,                     // Transaction ID. Required.
          'name': prodName,    // Product name. Required.
          'sku': sku,                 // SKU/code.
          'category': category,         // Category or variation.
          'price': price,                 // Unit price.
          'quantity': '1'                   // Quantity.
        });
        ga('ecommerce:send');
      }
    } catch(e) {
      console.error('[CatarseAnalytics.checkout]',e);
    }
  }

  return {
    origin: origin,
    event: _event,
    pageView: _pageView,
    oneTimeEvent: function(eventObj, fn) {
        if (!eventObj) {
            return fn;
        }
        try {
          if (!eventObj.cat && !eventObj.act) {
            throw new Error('Should inform cat or act');
          }
          var eventKey = eventObj.cat && eventObj.act ? eventObj.cat+'_'+eventObj.act : (eventObj.cat || eventObj.act);
          if (!_analyticsOneTimeEventFired[eventKey]) {
              //console.log('oneTimeEvent',eventKey);
              _analyticsOneTimeEventFired[eventKey] = true;
              _event(eventObj, fn);
          }
        } catch(e) {
          console.error('[CatarseAnalytics.oneTimeEvent] error:',e);
        }
    },
    checkout: _checkout
  };
})();
var apiMeta = document.getElementById("api-host");
postgrest.init(apiMeta.getAttribute('content'), {method: "GET", url: "/api_token"});

var c = (function (m,I18n$1,_$1,moment,$,postgrest$1,CatarseAnalytics$1,replaceDiacritics,Chart,select) {
'use strict';

m = m && m.hasOwnProperty('default') ? m['default'] : m;
I18n$1 = I18n$1 && I18n$1.hasOwnProperty('default') ? I18n$1['default'] : I18n$1;
_$1 = _$1 && _$1.hasOwnProperty('default') ? _$1['default'] : _$1;
moment = moment && moment.hasOwnProperty('default') ? moment['default'] : moment;
$ = $ && $.hasOwnProperty('default') ? $['default'] : $;
postgrest$1 = postgrest$1 && postgrest$1.hasOwnProperty('default') ? postgrest$1['default'] : postgrest$1;
CatarseAnalytics$1 = CatarseAnalytics$1 && CatarseAnalytics$1.hasOwnProperty('default') ? CatarseAnalytics$1['default'] : CatarseAnalytics$1;
replaceDiacritics = replaceDiacritics && replaceDiacritics.hasOwnProperty('default') ? replaceDiacritics['default'] : replaceDiacritics;
Chart = Chart && Chart.hasOwnProperty('default') ? Chart['default'] : Chart;
select = select && select.hasOwnProperty('default') ? select['default'] : select;

var models = {
    country: postgrest$1.model('countries'),
    state: postgrest$1.model('states'),
    contributionDetail: postgrest$1.model('contribution_details'),
    contributionActivity: postgrest$1.model('contribution_activities'),
    projectDetail: postgrest$1.model('project_details'),
    userDetail: postgrest$1.model('user_details'),
    balance: postgrest$1.model('balances'),
    balanceTransaction: postgrest$1.model('balance_transactions'),
    balanceTransfer: postgrest$1.model('balance_transfers'),
    user: postgrest$1.model('users'),
    survey: postgrest$1.model('surveys'),
    userCreditCard: postgrest$1.model('user_credit_cards'),
    bankAccount: postgrest$1.model('bank_accounts'),
    bank: postgrest$1.model('banks'),
    rewardDetail: postgrest$1.model('reward_details'),
    projectReminder: postgrest$1.model('project_reminders'),
    projectReport: postgrest$1.model('project_reports'),
    contributions: postgrest$1.model('contributions'),
    directMessage: postgrest$1.model('direct_messages'),
    teamTotal: postgrest$1.model('team_totals'),
    recommendedProjects: postgrest$1.model('recommended_projects'),
    projectAccount: postgrest$1.model('project_accounts'),
    projectAccountError: postgrest$1.model('project_account_errors'),
    projectContribution: postgrest$1.model('project_contributions'),
    projectContributiorsStat: postgrest$1.model('project_stat_contributors'),
    projectPostDetail: postgrest$1.model('project_posts_details'),
    projectContributionsPerDay: postgrest$1.model('project_contributions_per_day'),
    projectContributionsPerLocation: postgrest$1.model('project_contributions_per_location'),
    projectContributionsPerRef: postgrest$1.model('project_contributions_per_ref'),
    projectVisitorsPerDay: postgrest$1.model('project_visitors_per_day'),
    projectTransfer: postgrest$1.model('project_transfers'),
    project: postgrest$1.model('projects'),
    adminProject: postgrest$1.model('admin_projects'),
    projectSearch: postgrest$1.model('rpc/project_search'),
    publicTags: postgrest$1.model('public_tags'),
    category: postgrest$1.model('categories'),
    categoryTotals: postgrest$1.model('category_totals'),
    categoryFollower: postgrest$1.model('category_followers'),
    teamMember: postgrest$1.model('team_members'),
    notification: postgrest$1.model('notifications'),
    statistic: postgrest$1.model('statistics'),
    successfulProject: postgrest$1.model('successful_projects'),
    finishedProject: postgrest$1.model('finished_projects'),
    userFriend: postgrest$1.model('user_friends'),
    userFollow: postgrest$1.model('user_follows'),
    followAllCreators: postgrest$1.model('rpc/follow_all_creators'),
    sentSurveyCount: postgrest$1.model('rpc/sent_survey_count'),
    answeredSurveyCount: postgrest$1.model('rpc/answered_survey_count'),
    followAllFriends: postgrest$1.model('rpc/follow_all_friends'),
    contributor: postgrest$1.model('contributors'),
    userFollower: postgrest$1.model('user_followers'),
    creatorSuggestion: postgrest$1.model('creator_suggestions'),
    userContribution: postgrest$1.model('user_contributions'),
    shippingFee: postgrest$1.model('shipping_fees'),
    deleteProject: postgrest$1.model('rpc/delete_project'),
    cancelProject: postgrest$1.model('rpc/cancel_project'),
    city: postgrest$1.model('cities'),
    mailMarketingList: postgrest$1.model('mail_marketing_lists')
};

models.teamMember.pageSize(40);
models.rewardDetail.pageSize(false);
models.shippingFee.pageSize(false);
models.projectReminder.pageSize(false);
models.project.pageSize(30);
models.category.pageSize(50);
models.contributionActivity.pageSize(40);
models.successfulProject.pageSize(9);
models.finishedProject.pageSize(9);
models.country.pageSize(false);
models.state.pageSize(false);
models.publicTags.pageSize(false);
models.projectContribution.pageSize(9);
models.contributor.pageSize(9);
models.recommendedProjects.pageSize(3);
models.bank.pageSize(400);
models.city.pageSize(200);
models.balanceTransfer.pageSize(9);

var currentContribution = m.prop({});

var getUserProjectContributions = function getUserProjectContributions(userId, projectId, states) {
    var vm = postgrest$1.filtersVM({
        user_id: 'eq',
        project_id: 'eq',
        state: 'in'
    });

    vm.user_id(userId);
    vm.project_id(projectId);
    vm.state(states);

    var lProjectContributions = postgrest$1.loaderWithToken(models.userContribution.getPageOptions(vm.parameters()));

    return lProjectContributions.load();
};

var getCurrentContribution = function getCurrentContribution() {
    var root = document.getElementById('application'),
        data = root && root.getAttribute('data-contribution');

    if (data) {
        currentContribution(JSON.parse(data));

        m.redraw(true);

        return currentContribution;
    }
    return false;
};

var wasConfirmed = function wasConfirmed(contribution) {
    return _$1.contains(['paid', 'pending_refund', 'refunded'], contribution.state);
};

var canShowReceipt = function canShowReceipt(contribution) {
    return wasConfirmed(contribution);
};

var canShowSlip = function canShowSlip(contribution) {
    return contribution.payment_method === 'BoletoBancario' && moment(contribution.gateway_data.boleto_expiration_date).isAfter(moment());
};

var canGenerateSlip = function canGenerateSlip(contribution) {
    return contribution.payment_method === 'BoletoBancario' && contribution.state === 'pending' && contribution.project_state === 'online' && !contribution.reward_sold_out && !moment(contribution.gateway_data.boleto_expiration_date).isAfter(moment());
};

var canBeDelivered = function canBeDelivered(contribution) {
    return contribution.state === 'paid' && contribution.reward_id && contribution.project_state !== 'failed';
};

var contributionVM = {
    getCurrentContribution: getCurrentContribution,
    canShowReceipt: canShowReceipt,
    canGenerateSlip: canGenerateSlip,
    canShowSlip: canShowSlip,
    getUserProjectContributions: getUserProjectContributions,
    canBeDelivered: canBeDelivered
};

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};



















var defineProperty = function (obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
};





















var slicedToArray = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if (Symbol.iterator in Object(arr)) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();













var toConsumableArray = function (arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

    return arr2;
  } else {
    return Array.from(arr);
  }
};

//      
var _dataCache = {};
var hashMatch = function hashMatch(str) {
    return window.location.hash === str;
};
var mobileScreen = function mobileScreen() {
    return window.screen && window.screen.width <= 767;
};
var paramByName = function paramByName(name) {
    var normalName = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]'),
        regex = new RegExp('[\\?&]' + normalName + '=([^&#]*)'),
        results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
};
var selfOrEmpty = function selfOrEmpty(obj) {
    var emptyState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    return obj || emptyState;
};
var setMomentifyLocale = function setMomentifyLocale() {
    moment.locale('en', {
        months: 'Jannuary_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
        monthsShort: 'jan_feb_mar_apr_may_jun_jul_aug_sep_oct_nov_dec'.split('_')
    });
};
var existy = function existy(x) {
    return x != null;
};
var slugify = function slugify(str) {
    return replaceDiacritics(str.toLowerCase().replace(/ /g, '-').replace(/[^\w-]+/g, ''));
};
var momentify = function momentify(date, format) {
    format = format || 'DD/MM/YYYY';
    return date ? moment(date).locale('en').format(format) : 'no date';
};
var getRandomInt = function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
};
var storeAction = function storeAction(action, value) {
    if (!sessionStorage.getItem(action)) {
        return sessionStorage.setItem(action, String(value));
    }
};
var storeObject = function storeObject(sessionKey, obj) {
    return sessionStorage.setItem(sessionKey, JSON.stringify(obj));
};
var getStoredObject = function getStoredObject(sessionKey) {
    if (sessionStorage.getItem(sessionKey)) {
        return JSON.parse(String(sessionStorage.getItem(sessionKey)));
    }
    return null;
};
var callStoredAction = function callStoredAction(action) {
    var item = sessionStorage.getItem(action);

    if (item) {
        sessionStorage.removeItem(action);
        return item;
    }
    return null;
};
var capitalize = function capitalize(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
};
var discuss = function discuss(page, identifier) {
    var d = document,
        s = d.createElement('script');
    window.disqus_config = function () {
        this.page.url = page;
        this.page.identifier = identifier;
    };
    s.src = '//catarseflex.disqus.com/embed.js';
    s.setAttribute('data-timestamp', String(+new Date()));
    (d.head || d.body).appendChild(s);
    return m('');
};
var validateEmail = function validateEmail(email) {
    var re = /^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;
    return re.test(email);
};
var validateCnpj = function validateCnpj(cnpjStr) {
    var tamanho = void 0,
        numeros = void 0,
        digitos = void 0,
        soma = void 0,
        pos = void 0,
        resultado = void 0;
    var cnpj = cnpjStr.replace(/[^\d]+/g, '');

    if (cnpj == '') {
        return false;
    }

    if (cnpj.length != 14) {
        return false;
    }

    if (cnpj == '00000000000000' || cnpj == '11111111111111' || cnpj == '22222222222222' || cnpj == '33333333333333' || cnpj == '44444444444444' || cnpj == '55555555555555' || cnpj == '66666666666666' || cnpj == '77777777777777' || cnpj == '88888888888888' || cnpj == '99999999999999') {
        return false;
    }

    tamanho = cnpj.length - 2;
    numeros = cnpj.substring(0, tamanho);
    digitos = cnpj.substring(tamanho);
    soma = 0;
    pos = tamanho - 7;

    for (var i = tamanho; i >= 1; i--) {
        soma += Number(numeros.charAt(tamanho - i)) * pos--;
        if (pos < 2) {
            pos = 9;
        }
    }
    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
    if (String(resultado) != digitos.charAt(0)) {
        return false;
    }

    tamanho += 1;
    numeros = cnpj.substring(0, tamanho);
    soma = 0;
    pos = tamanho - 7;
    for (var _i = tamanho; _i >= 1; _i--) {
        soma += Number(numeros.charAt(tamanho - _i)) * pos--;
        if (pos < 2) {
            pos = 9;
        }
    }
    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
    if (String(resultado) != digitos.charAt(1)) {
        return false;
    }

    return true;
};
var validateCpf = function validateCpf(strCPF) {
    var sum = 0,
        remainder = void 0;

    if (strCPF == '00000000000') return false;

    for (var i = 1; i <= 9; i++) {
        sum += parseInt(strCPF.substring(i - 1, i)) * (11 - i);
    }
    remainder = sum * 10 % 11;

    if (remainder == 10 || remainder == 11) {
        remainder = 0;
    }

    if (remainder != parseInt(strCPF.substring(9, 10))) {
        return false;
    }

    sum = 0;

    for (var _i2 = 1; _i2 <= 10; _i2++) {
        sum += parseInt(strCPF.substring(_i2 - 1, _i2)) * (12 - _i2);
    }

    remainder = sum * 10 % 11;

    if (remainder == 10 || remainder == 11) {
        remainder = 0;
    }

    if (remainder != parseInt(strCPF.substring(10, 11))) {
        return false;
    }

    return true;
};
var validationErrors = m.prop([]);
var resetValidations = function resetValidations() {
    return validationErrors([]);
};
var validate = function validate() {
    var errorFields = m.prop([]);

    return {
        submit: function submit(fields, fn) {
            return function () {
                resetValidations();

                _$1.map(fields, function (field) {
                    if (field.rule === 'email') {
                        if (!validateEmail(field.prop())) {
                            validationErrors().push({ field: field.prop, message: 'Invalid email.' });
                        }
                    }

                    if (field.rule === 'text') {
                        if (field.prop().trim() === '') {
                            validationErrors().push({ field: field.prop, message: 'Field can not be empty.' });
                        }
                    }
                });

                return !validationErrors().length > 0 ? fn() : false;
            };
        },
        hasError: function hasError(fieldProp) {
            return _$1.reduce(validationErrors(), function (memo, fieldError) {
                return fieldError.field() === fieldProp() || memo;
            }, false);
        }
    };
};
var momentFromString = function momentFromString(date, format) {
    var european = moment(date, format || 'DD/MM/YYYY');
    return european.isValid() ? european : moment(date);
};
var translatedTimeUnits = {
    days: 'days',
    minutes: 'minutes',
    hours: 'hours',
    seconds: 'seconds'
};
var translatedTime = function translatedTime(time) {
    var translatedTime = translatedTimeUnits,
        unit = function unit() {
        var projUnit = translatedTime[time.unit || 'seconds'];

        return Number(time.total) <= 1 ? projUnit.slice(0, -1) : projUnit;
    };

    return {
        unit: unit(),
        total: time.total
    };
};
var generateFormatNumber = function generateFormatNumber(s, c) {
    return function (number, n, x) {
        if (!_$1.isNumber(number)) {
            return null;
        }

        var re = '\\d(?=(\\d{' + (x || 3) + '})+' + (n > 0 ? '\\D' : '$') + ')',
            num = number.toFixed(Math.max(0, ~~n));
        return (c ? num.replace(',', c) : num).replace(new RegExp(re, 'g'), '$&' + (s || '.'));
    };
};
var formatNumber = generateFormatNumber(',', '.');
var toggleProp = function toggleProp(defaultState, alternateState) {
    var p = m.prop(defaultState);
    p.toggle = function () {
        return p(p() === alternateState ? defaultState : alternateState);
    };

    return p;
};
var idVM = postgrest$1.filtersVM({
    id: 'eq'
});
var getCurrentProject = function getCurrentProject() {
    if (_dataCache.currentProject) {
        return _dataCache.currentProject;
    }

    var root = document.getElementById('application'),
        data = root && root.getAttribute('data-parameters');
    if (data) {
        return _dataCache.currentProject = JSON.parse(data);
    }
    return null;
};
var getRdToken = function getRdToken() {
    if (_dataCache.rdToken) {
        return _dataCache.rdToken;
    }

    var meta = _$1.first(document.querySelectorAll('[name=rd-token]'));
    return meta ? _dataCache.rdToken = meta.getAttribute('content') : null;
};
var getSimilityCustomer = function getSimilityCustomer() {
    if (_dataCache.similityCustomer) {
        return _dataCache.similityCustomer;
    }

    var meta = _$1.first(document.querySelectorAll('[name=simility-customer]'));
    return meta ? _dataCache.similityCustomer = meta.getAttribute('content') : null;
};
var getNewsletterUrl = function getNewsletterUrl() {
    if (_dataCache.newsletterUrl) {
        return _dataCache.newsletterUrl;
    }

    var meta = _$1.first(document.querySelectorAll('[name=newsletter-url]'));
    return meta ? _dataCache.newsletterUrl = meta.getAttribute('content') : null;
};
var getUser = function getUser() {
    if (_dataCache.user) {
        return _dataCache.user;
    }

    var body = document.getElementsByTagName('body'),
        data = _$1.first(body).getAttribute('data-user');
    if (data) {
        return _dataCache.user = JSON.parse(data);
    }
    return null;
};
var getUserID = function getUserID() {
    var user = getUser();
    return user == null || user.user_id == null ? null : user.user_id;
};
var userSignedIn = function userSignedIn() {
    return !_$1.isNull(getUserID());
};
var getBlogPosts = function getBlogPosts() {
    if (_dataCache.blogPosts) {
        return _dataCache.blogPosts;
    }

    var posts = _$1.first(document.getElementsByTagName('body')).getAttribute('data-blog');

    if (posts) {
        return _dataCache.blogPosts = JSON.parse(posts);
    }
    return null;
};
var getApiHost = function getApiHost() {
    if (_dataCache.apiHost) {
        return _dataCache.apiHost;
    }

    var el = document.getElementById('api-host');
    return _dataCache.apiHost = el && el.getAttribute('content');
};
var locationActionMatch = function locationActionMatch(action) {
    var act = window.location.pathname.split('/').slice(-1)[0];
    return action === act;
};
var useAvatarOrDefault = function useAvatarOrDefault(avatarPath) {
    return avatarPath || '/assets/catarse_bootstrap/user.jpg';
};
var loader = function loader() {
    return m('.u-text-center.u-margintop-30 u-marginbottom-30', [m('img[alt="Loader"][src="https://s3.amazonaws.com/catarse.files/loader.gif"]')]);
};
var newFeatureBadge = function newFeatureBadge() {
    return m('span.badge.badge-success.margin-side-5', I18n$1.t('projects.new_feature_badge'));
};
var fbParse = function fbParse() {
    var tryParse = function tryParse() {
        try {
            window.FB.XFBML.parse();
        } catch (e) {
            //console.log(e);
        }
    };

    return window.setTimeout(tryParse, 500); // use timeout to wait async of facebook
};
var pluralize = function pluralize(count, s, p) {
    return count > 1 ? count + p : count + s;
};
var strip = function strip(html) {
    var tmp = document.createElement('div');
    tmp.innerHTML = html;
    return tmp.textContent || tmp.innerText || '';
};
var simpleFormat = function simpleFormat() {
    var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

    str = str.replace(/\r\n?/, '\n');
    if (str.length > 0) {
        str = str.replace(/\n\n+/g, '</p><p>');
        str = str.replace(/\n/g, '<br />');
        str = '<p>' + str + '</p>';
    }
    return str;
};
var rewardSouldOut = function rewardSouldOut(reward) {
    return reward.maximum_contributions > 0 ? reward.paid_count + reward.waiting_payment_count >= reward.maximum_contributions : false;
};
var rewardRemaning = function rewardRemaning(reward) {
    return reward.maximum_contributions - (reward.paid_count + reward.waiting_payment_count);
};
var parseUrl = function parseUrl(href) {
    var l = document.createElement('a');
    l.href = href;
    return l;
};
var UIHelper = function UIHelper() {
    return function (el, isInitialized) {
        if (!isInitialized && window.$ && window.UIHelper) {
            window.UIHelper.setupResponsiveIframes($(el));
        }
    };
};
var toAnchor = function toAnchor() {
    return function (el, isInitialized) {
        if (!isInitialized) {
            var hash = window.location.hash.substr(1);
            if (hash === el.id) {
                window.location.hash = '';
                setTimeout(function () {
                    window.location.hash = el.id;
                });
            }
        }
    };
};
var navigateToDevise = function navigateToDevise() {
    window.location.href = '/en/login';
    return false;
};
var navigateTo = function navigateTo(path) {
    window.location.href = path;
    return false;
};
var cumulativeOffset = function cumulativeOffset(element) {
    var top = 0,
        left = 0;
    do {
        top += element.offsetTop || 0;
        left += element.offsetLeft || 0;
        element = element.offsetParent;
    } while (element);

    return {
        top: top,
        left: left
    };
};
var closeModal = function closeModal() {
    // Temp for rails unstyled close links
    var close = function close(elm, selector) {
        var all = document.getElementsByClassName(selector);
        var cur = elm.parentNode;
        while (cur && !_$1.contains(all, cur)) {
            cur = cur.parentNode;
        }
        if (cur) {
            cur.style.display = 'none';
        }
        return cur;
    };

    var elById = document.getElementById('modal-close');
    if (_$1.isElement(elById)) {
        elById.onclick = function (event) {
            event.preventDefault();
            close(elById, 'modal-backdrop');
        };
    }

    var els = document.getElementsByClassName('modal-close');
    _$1.map(els, function (el) {
        if (_$1.isElement(el)) {
            el.onclick = function (event) {
                event.preventDefault();
                close(el, 'modal-backdrop');
            };
        }
    });
};
var closeFlash = function closeFlash() {
    var el = document.getElementsByClassName('icon-close')[0];
    if (_$1.isElement(el)) {
        el.onclick = function (event) {
            event.preventDefault();
            if (el.parentElement) {
                el.parentElement.remove();
            }
        };
    }
};
var i18nScope = function i18nScope(scope, obj) {
    obj = obj || {};
    return _$1.extend({}, obj, { scope: scope });
};
var redrawHashChange = function redrawHashChange(before) {
    var callback = _$1.isFunction(before) ? function () {
        before();
        m.redraw();
    } : m.redraw;

    window.addEventListener('hashchange', callback, false);
};
var authenticityToken = function authenticityToken() {
    var meta = _$1.first(document.querySelectorAll('[name=csrf-token]'));
    return meta ? meta.getAttribute('content') : null;
};
var authenticityParam = function authenticityParam() {
    var meta = _$1.first(document.querySelectorAll('[name=csrf-param]'));
    return meta ? meta.getAttribute('content') : null;
};
var animateScrollTo = function animateScrollTo(el) {
    var scrolled = window.scrollY;

    var offset = cumulativeOffset(el).top,
        duration = 300,
        dFrame = (offset - scrolled) / duration,

    // EaseInOutCubic easing function. We'll abstract all animation funs later.
    eased = function eased(t) {
        return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;
    },
        animation = setInterval(function () {
        var pos = eased(scrolled / offset) * scrolled;

        window.scrollTo(0, pos);

        if (scrolled >= offset) {
            clearInterval(animation);
        }

        scrolled += dFrame;
    }, 1);
};
var scrollTop = function scrollTop() {
    return window.scrollTo(0, 0);
};
var scrollTo = function scrollTo() {
    var setTrigger = function setTrigger(el, anchorId) {
        el.onclick = function () {
            var anchorEl = document.getElementById(anchorId);

            if (_$1.isElement(anchorEl)) {
                animateScrollTo(anchorEl);
            }

            return false;
        };
    };

    return function (el, isInitialized) {
        if (!isInitialized) {
            setTrigger(el, el.hash.slice(1));
        }
    };
};
var projectStateTextClass = function projectStateTextClass(state, has_cancelation_request) {
    var statusText = {
        online: {
            cssClass: 'text-success',
            text: 'Online'
        },
        successful: {
            cssClass: 'text-success',
            text: 'FINANCED'
        },
        failed: {
            cssClass: 'text-error',
            text: 'NOT FINANCED'
        },
        waiting_funds: {
            cssClass: 'text-waiting',
            text: 'WAITING'
        },
        rejected: {
            cssClass: 'text-error',
            text: 'CANCELLED'
        },
        draft: {
            cssClass: '',
            text: 'DRAFT'
        },
        in_analysis: {
            cssClass: '',
            text: 'IN ANALYSIS'
        },
        approved: {
            cssClass: 'text-success',
            text: 'APPROVED'
        }
    };

    if (has_cancelation_request) {
        return {
            cssClass: 'text-error',
            text: 'WAITING FOR CANCELLATION'
        };
    } else {
        return statusText[state];
    }
};
var RDTracker = function RDTracker(eventId) {
    return function (el, isInitialized) {
        if (!isInitialized) {
            var integrationScript = document.createElement('script');
            integrationScript.type = 'text/javascript';
            integrationScript.id = 'RDIntegration';

            if (!document.getElementById(integrationScript.id)) {
                document.body.appendChild(integrationScript);
                integrationScript.onload = function () {
                    return window.RdIntegration.integrate(getRdToken(), eventId);
                };
                integrationScript.src = 'https://d335luupugsy2.cloudfront.net/js/integration/stable/rd-js-integration.min.js';
            }

            return false;
        }
    };
};
var analyticsEvent = function analyticsEvent(eventObj) {
    var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Function.prototype;

    // https://developers.google.com/analytics/devguides/collection/analyticsjs/command-queue-reference#send
    if (!eventObj) {
        return fn;
    }

    return function () {
        try {
            if (!eventObj.project) {
                eventObj.project = getCurrentProject();
            }
            if (!eventObj.user) {
                eventObj.user = getUser();
            }
            CatarseAnalytics$1.event(eventObj);
        } catch (e) {
            //console.error('[h.analyticsEvent] error:', e);
        }
        fn();
    };
};
var _analyticsOneTimeEventFired = {};
var analyticsOneTimeEvent = function analyticsOneTimeEvent(eventObj, fn) {
    if (!eventObj) {
        return fn;
    }

    var eventKey = _$1.compact([eventObj.cat, eventObj.act]).join('_');
    if (!eventKey) {
        throw new Error('Should inform cat or act');
    }
    return function () {
        if (!_analyticsOneTimeEventFired[eventKey]) {
            // console.log('oneTimeEvent',eventKey);
            _analyticsOneTimeEventFired[eventKey] = true;
            var fireEvent = analyticsEvent(eventObj, fn);
            fireEvent();
        }
    };
};
var monetaryToFloat = function monetaryToFloat(propValue) {
    return parseFloat(propValue().replace(',', '').replace('.', ','));
};
var applyMonetaryMask = function applyMonetaryMask(number) {
    var onlyNumbers = String(number).replace(/[^0-9]|[.]/g, ''),
        integerPart = onlyNumbers.slice(0, onlyNumbers.length - 2),
        decimalPart = onlyNumbers.slice(onlyNumbers.length - 2);

    integerPart = integerPart.replace(/\B(?=(\d{3})+(?!\d))/g, ',');

    return integerPart + '.' + decimalPart;
};
var noNumbersMask = function noNumbersMask(value) {
    return value.replace(/[0-9]/g, '');
};
var numbersOnlyMask = function numbersOnlyMask(value) {
    return value.replace(/[^0-9]/g, '');
};
var addChar = function addChar(position, maskChar) {
    return function (char) {
        return function (string) {
            if (string.length === position && char !== maskChar) {
                return string + maskChar;
            }
            return string;
        };
    };
};
var readMaskDefinition = function readMaskDefinition(maskCharDefinitions) {
    return function (maskDefinition) {
        return _$1.compact(_$1.map(maskDefinition, function (letter, index) {
            return letter in maskCharDefinitions ? null : [index, letter];
        }));
    };
};
var isCharAllowed = function isCharAllowed(maskCharDefinitions) {
    return function (maskDefinition) {
        return function (position, newChar) {
            if (position >= maskDefinition.length) {
                return false;
            }

            var maskChar = maskDefinition.charAt(position);
            if (maskChar in maskCharDefinitions) {
                return maskCharDefinitions[maskChar].test(newChar);
            }
            return newChar === maskChar || isCharAllowed(maskCharDefinitions)(maskDefinition)(position + 1, newChar);
        };
    };
};
var applyMask = function applyMask(maskDefinition) {
    var maskFunctions = _$1.map(maskDefinition, function (maskChar) {
        return addChar(maskChar[0], maskChar[1]);
    });
    return function (string, newChar) {
        var addNewCharFunctions = _$1.map(maskFunctions, function (el) {
            return el(newChar);
        });
        var applyMaskFunctions = _$1.reduce(addNewCharFunctions, function (memo, f) {
            return _$1.isFunction(memo) ? _$1.compose(f, memo) : f;
        });
        return applyMaskFunctions(string);
    };
};
var mask = function mask(maskDefinition, value) {
    var maskCharDefinitions = {
        '9': /\d/, // String key needed to avoid flowType error
        A: /[a-zA-Z]/
    },
        readMask = readMaskDefinition(maskCharDefinitions),
        isStrCharAllowed = isCharAllowed(maskCharDefinitions),
        applyValueMask = applyMask(readMask(maskDefinition)),
        restrictInput = isStrCharAllowed(maskDefinition);

    return _$1.reduce(value, function (memo, chr) {
        if (restrictInput(memo.length, chr)) {
            memo = applyValueMask(memo, chr) + chr;
        }
        return memo;
    }, '');
};
var removeStoredObject = function removeStoredObject(sessionKey) {
    return sessionStorage.removeItem(sessionKey);
};
var currentProject = m.prop();
var setProject = function setProject(project) {
    currentProject(project);
};
var getProject = function getProject() {
    return currentProject;
};
var currentReward = m.prop();
var setReward = function setReward(reward) {
    currentReward(reward);
};
var getReward = function getReward() {
    return currentReward;
};
var buildLink = function buildLink(link, refStr) {
    return '/' + link + (refStr ? '?ref=' + refStr : '');
};
var analyticsWindowScroll = function analyticsWindowScroll(eventObj) {
    if (eventObj) {
        var fired = false;
        window.addEventListener('scroll', function (e) {
            // console.log('windowScroll');
            if (!fired && window.$ && $(document).scrollTop() > $(window).height() * (3 / 4)) {
                fired = true;
                var fireEvent = analyticsEvent(eventObj);
                fireEvent();
            }
        });
    }
};
var analytics = {
    event: analyticsEvent,
    oneTimeEvent: analyticsOneTimeEvent,
    windowScroll: analyticsWindowScroll
};
var projectFullPermalink = function projectFullPermalink(project) {
    var permalink = void 0;
    if (typeof project === 'function') {
        permalink = project().permalink;
    } else {
        permalink = project.permalink;
    }

    return 'https://www.oppostarter.com/' + permalink;
};
var isHome = function isHome() {
    var path = window.location.pathname;

    return path == '/en' || path == '/';
};
var isProjectPage = function isProjectPage() {
    var path = window.location.pathname,
        isOnInsights = path.indexOf('/insights') > -1,
        isOnEdit = path.indexOf('/edit') > -1,
        isOnContribution = path.indexOf('/contribution') > -1;

    return !isOnEdit && !isOnInsights && !isOnContribution;
};
var setPageTitle = function setPageTitle(title) {
    return function (el, isInitialized) {
        var titleEl = document.getElementsByTagName('title')[0],
            currentTitle = titleEl.innerText;

        if (currentTitle !== title) {
            return titleEl.innerText = title;
        }
    };
};
var checkReminder = function checkReminder() {
    var reminder = sessionStorage.getItem('reminder');

    if (reminder && isHome()) {
        window.location.href = '/projects/' + reminder;
    }
};
var rootUrl = function rootUrl() {
    if (_dataCache.rootUrl) {
        return _dataCache.rootUrl;
    }

    var meta = _$1.first(document.querySelectorAll('[name=root-url]'));

    return meta ? _dataCache.rootUrl = meta.getAttribute('content') : null;
};
var redactorConfig = function redactorConfig(params) {
    return {
        source: false,
        formatting: ['p'],
        formattingAdd: [{
            tag: 'blockquote',
            title: 'Quote',
            class: 'fontsize-base quote',
            clear: true
        }, {
            tag: 'p',
            title: 'Header 1',
            class: 'fontsize-larger fontweight-semibold',
            clear: true
        }, {
            tag: 'p',
            title: 'Header 2',
            class: 'fontsize-large',
            clear: true
        }],
        lang: 'pt_br',
        maxHeight: 800,
        minHeight: 300,
        convertVideoLinks: true,
        convertUrlLinks: true,
        convertImageLinks: false,
        // You can specify, which ones plugins you need.
        // If you want to use plugins, you have add plugins to your
        // application.js and application.css files and uncomment the line below:
        // "plugins": ['fontsize', 'fontcolor', 'fontfamily', 'fullscreen', 'textdirection', 'clips'],
        plugins: ['video'],
        imageUpload: '/redactor_rails/pictures?' + params,
        imageGetJson: '/redactor_rails/pictures',
        path: '/assets/redactor-rails',
        css: 'style.css'
    };
};
var setRedactor = function setRedactor(prop) {
    return function (el, isInit) {
        if (!isInit) {
            var $editor = window.$(el);
            var csrf_token = authenticityToken();
            var csrf_param = authenticityParam();
            var params = '';
            if (csrf_param && csrf_token) {
                params = csrf_param + '=' + encodeURIComponent(csrf_token);
            }
            $editor.redactor(redactorConfig(params));
            $editor.redactor('code.set', prop());
            // If we need to get redactor values and send it to js objects we'll have to add
            // a hook on the change.callback.redactor event. e.g.:
            // $editor.on('change.callback.redactor', () => prop($editor.redactor('code.get')) );
            // TODO: workaround to get redactor data
            window.$('.redactor-editor').on('blur', function () {
                return prop($editor.redactor('code.get'));
            });
        }
    };
};
var redactor = function redactor(name, prop) {
    return m('textarea.input_field.redactor.w-input.text-field.bottom.jumbo.positive', {
        name: name, config: setRedactor(prop)
    });
};
var setCsrfToken = function setCsrfToken(xhr) {
    if (authenticityToken()) {
        xhr.setRequestHeader('X-CSRF-Token', authenticityToken());
    }
};
var contributionStatusBadge = function contributionStatusBadge(contribution) {
    var status = {
        delivered: m('span.fontsize-smallest.badge.badge-success', 'Sent'),
        received: m('span.fontsize-smallest.badge.badge-success', 'Received'),
        undelivered: m('span.fontsize-smallest.badge.badge-light', 'Not sent'),
        error: m('span.fontsize-smallest.badge.badge-attention', 'Sending error')
    };

    return contributionVM.canBeDelivered(contribution) ? status[contribution.delivery_status] : '';
};
var getParams = function getParams(searchKey) {
    var query = window.location.href;
    var queryParams = (/^[?#]/.test(query) ? query.slice(1) : query).split('?');

    return queryParams.length > 1 ? queryParams[1].split('&').reduce(function (params, param) {
        var _param$split = param.split('='),
            _param$split2 = slicedToArray(_param$split, 2),
            key = _param$split2[0],
            value = _param$split2[1];

        params[key] = value ? decodeURIComponent(value.replace(/\+/g, ' ')) : '';
        return params;
    }, {})[searchKey] : null;
};

setMomentifyLocale();
closeFlash();
closeModal();
checkReminder();

var h = {
    authenticityParam: authenticityParam,
    authenticityToken: authenticityToken,
    buildLink: buildLink,
    contributionStatusBadge: contributionStatusBadge,
    cumulativeOffset: cumulativeOffset,
    discuss: discuss,
    existy: existy,
    slugify: slugify,
    validateEmail: validateEmail,
    validateCpf: validateCpf,
    validateCnpj: validateCnpj,
    momentify: momentify,
    momentFromString: momentFromString,
    formatNumber: formatNumber,
    idVM: idVM,
    getUser: getUser,
    getUserID: getUserID,
    getSimilityCustomer: getSimilityCustomer,
    getApiHost: getApiHost,
    getNewsletterUrl: getNewsletterUrl,
    getCurrentProject: getCurrentProject,
    getParams: getParams,
    toggleProp: toggleProp,
    loader: loader,
    newFeatureBadge: newFeatureBadge,
    fbParse: fbParse,
    pluralize: pluralize,
    simpleFormat: simpleFormat,
    translatedTime: translatedTime,
    rewardSouldOut: rewardSouldOut,
    rewardRemaning: rewardRemaning,
    parseUrl: parseUrl,
    hashMatch: hashMatch,
    mobileScreen: mobileScreen,
    redrawHashChange: redrawHashChange,
    useAvatarOrDefault: useAvatarOrDefault,
    locationActionMatch: locationActionMatch,
    navigateToDevise: navigateToDevise,
    navigateTo: navigateTo,
    storeAction: storeAction,
    callStoredAction: callStoredAction,
    UIHelper: UIHelper,
    toAnchor: toAnchor,
    capitalize: capitalize,
    paramByName: paramByName,
    i18nScope: i18nScope,
    RDTracker: RDTracker,
    selfOrEmpty: selfOrEmpty,
    animateScrollTo: animateScrollTo,
    scrollTo: scrollTo,
    scrollTop: scrollTop,
    getRandomInt: getRandomInt,
    projectStateTextClass: projectStateTextClass,
    validationErrors: validationErrors,
    validate: validate,
    analytics: analytics,
    strip: strip,
    storeObject: storeObject,
    getStoredObject: getStoredObject,
    removeStoredObject: removeStoredObject,
    setProject: setProject,
    getProject: getProject,
    setReward: setReward,
    getReward: getReward,
    applyMonetaryMask: applyMonetaryMask,
    noNumbersMask: noNumbersMask,
    numbersOnlyMask: numbersOnlyMask,
    monetaryToFloat: monetaryToFloat,
    mask: mask,
    projectFullPermalink: projectFullPermalink,
    isProjectPage: isProjectPage,
    setPageTitle: setPageTitle,
    rootUrl: rootUrl,
    redactor: redactor,
    setCsrfToken: setCsrfToken,
    userSignedIn: userSignedIn
};

var userListVM = postgrest.paginationVM(models.user, 'id.desc', { Prefer: 'count=exact' });

var vm = postgrest.filtersVM({
    full_text_index: '@@',
    deactivated_at: 'is.null'
});
var paramToString = function paramToString(p) {
    return (p || '').toString().trim();
};

// Set default values
vm.deactivated_at(null).order({
    id: 'desc'
});

vm.deactivated_at.toFilter = function () {
    var filter = JSON.parse(vm.deactivated_at());
    return filter;
};

vm.full_text_index.toFilter = function () {
    var filter = paramToString(vm.full_text_index());
    return filter && replaceDiacritics(filter) || undefined;
};

var filterMain = {
    view: function view(ctrl, args) {
        var inputWrapperClass = args.inputWrapperClass || '.w-input.text-field.positive.medium',
            btnClass = args.btnClass || '.btn.btn-large.u-marginbottom-10';

        return m('.w-row', [m('.w-col.w-col-8', [m('input' + inputWrapperClass + '[placeholder="' + args.placeholder + '"][type="text"]', {
            onchange: m.withAttr('value', args.vm),
            value: args.vm()
        })]), m('.w-col.w-col-4', [m('input#filter-btn' + btnClass + '[type="submit"][value="Search"]')])]);
    }
};

var adminFilter = {
    controller: function controller() {
        return {
            toggler: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        var filterBuilder = args.filterBuilder,
            data = args.data,
            label = args.label || '',
            main = _$1.findWhere(filterBuilder, {
            component: filterMain
        });

        return m('#admin-contributions-filter.w-section.page-header', [m('.w-container', [m('.fontsize-larger.u-text-center.u-marginbottom-30', label), m('.w-form', [m('form', {
            onsubmit: args.submit
        }, [main ? m.component(main.component, main.data) : '', m('.u-marginbottom-20.w-row', m('button.w-col.w-col-12.fontsize-smallest.link-hidden-light[style="background: none; border: none; outline: none; text-align: left;"][type="button"]', {
            onclick: ctrl.toggler.toggle
        }, 'Advanced Filters  >')), ctrl.toggler() ? m('#advanced-search.w-row.admin-filters', [_$1.map(filterBuilder, function (f) {
            return f.component !== filterMain ? m.component(f.component, f.data) : '';
        })]) : ''])])])]);
    }
};

var adminItem = {
    controller: function controller(args) {
        return {
            displayDetailBox: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        var item = args.item,
            listWrapper = args.listWrapper || {},
            selectedItem = _$1.isFunction(listWrapper.isSelected) ? listWrapper.isSelected(item.id) : false;

        return m('.w-clearfix.card.u-radius.u-marginbottom-20.results-admin-items', {
            class: selectedItem ? 'card-alert' : ''
        }, [m.component(args.listItem, {
            item: item,
            listWrapper: args.listWrapper,
            key: args.key
        }), m('button.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary', {
            onclick: ctrl.displayDetailBox.toggle
        }), ctrl.displayDetailBox() ? m.component(args.listDetail, {
            item: item,
            key: args.key
        }) : '']);
    }
};

var adminList = {
    controller: function controller(args) {
        var list = args.vm.list;

        if (!list.collection().length && list.firstPage) {
            list.firstPage(args.filterVM ? args.filterVM.parameters() : null).then(null, function (serverError) {
                args.vm.error(serverError.message);
            });
        }
    },
    view: function view(ctrl, args) {
        var list = args.vm.list,
            error = args.vm.error,
            label = args.label || '',
            itemComponent = args.itemComponent || adminItem;

        return m('.w-section.section', [m('.w-container', error() ? m('.card.card-error.u-radius.fontweight-bold', error()) : [m('.w-row.u-marginbottom-20', [m('.w-col.w-col-9', [m('.fontsize-base', list.isLoading() ? 'Loading ' + label.toLowerCase() + '...' : [m('.w-row', [m('.w-col.w-col-3', [m('.fontweight-semibold', list.total()), ' ' + label.toLowerCase() + ' found']), args.vm && args.vm.hasInputAction ? m('.w-col-9.w-col', args.vm.inputActions()) : ''])])])]), m('#admin-contributions-list.w-container', [list.collection().map(function (item) {
            return m.component(itemComponent, {
                listItem: args.listItem,
                listDetail: args.listDetail,
                listWrapper: args.vm,
                item: item,
                key: item.id
            });
        }), m('.w-section.section', [m('.w-container', [m('.w-row', [m('.w-col.w-col-2.w-col-push-5', [list.isLoading() ? h.loader() : m('button#load-more.btn.btn-medium.btn-terciary', {
            onclick: list.nextPage
        }, 'Load more')])])])])])])]);
    }
};

var adminUser = {
    view: function view(ctrl, args) {
        var user = args.item;

        return m('.w-row.admin-user', [m('.w-col.w-col-3.w-col-small-3.u-marginbottom-10', [m('img.user-avatar[src="' + h.useAvatarOrDefault(user.profile_img_thumbnail) + '"]')]), m('.w-col.w-col-9.w-col-small-9', [m('.fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10', [m('a.alt-link[target="_blank"][href="/users/' + user.id + '/edit"]', user.name || user.email)]), m('.fontsize-smallest', 'User: ' + user.id), m('.fontsize-smallest.fontcolor-secondary', 'Email: ' + user.email), args.additional_data])]);
    }
};

var adminUserItem = {
    view: function view(ctrl, args) {
        return m('.w-row', [m('.w-col.w-col-4', [m.component(adminUser, args)])]);
    }
};

var projectFiltersVM = function projectFiltersVM() {
    var filtersVM = postgrest$1.filtersVM,
        all = filtersVM({
        state: 'eq'
    }).state('online'),
        nearMe = filtersVM({
        near_me: 'eq',
        open_for_contributions: 'eq'
    }).open_for_contributions('true').near_me(true),
        expiring = filtersVM({
        expires_at: 'lte',
        open_for_contributions: 'eq'
    }).open_for_contributions('true').expires_at(moment().add(14, 'days').format('YYYY-MM-DD')),
        recent = filtersVM({
        online_date: 'gte',
        open_for_contributions: 'eq'
    }).open_for_contributions('true').online_date(moment().subtract(5, 'days').format('YYYY-MM-DD')),
        score = filtersVM({
        score: 'gte',
        open_for_contributions: 'eq'
    }).score('1').open_for_contributions('true'),
        online = filtersVM({
        open_for_contributions: 'eq'
    }).open_for_contributions('true'),
        contributed_by_friends = filtersVM({
        open_for_contributions: 'eq',
        contributed_by_friends: 'eq'
    }).open_for_contributions('true').contributed_by_friends(true),
        successful = filtersVM({
        state: 'eq'
    }).state('successful'),
        finished = filtersVM({}),
        filters = {
        all: {
            title: 'All Categories',
            filter: all,
            nicename: 'Online',
            isContextual: false,
            keyName: 'all'
        },
        score: {
            title: 'All Categories',
            filter: score,
            nicename: 'Popular',
            isContextual: false,
            keyName: 'score'
        },
        contributed_by_friends: {
            title: 'Friends',
            filter: contributed_by_friends,
            nicename: 'Friends',
            isContextual: false,
            keyName: 'contributed_by_friends'
        },
        online: {
            title: 'Online',
            filter: online,
            isContextual: false,
            keyName: 'online'
        },
        expiring: {
            title: 'Expiring',
            filter: expiring,
            isContextual: false,
            keyName: 'expiring'
        },
        successful: {
            title: 'All Categories',
            filter: successful,
            nicename: 'Financed',
            isContextual: false,
            keyName: 'successful'
        },
        finished: {
            title: 'All Categories',
            filter: finished,
            nicename: 'Financed',
            isContextual: false,
            keyName: 'finished'
        },
        recent: {
            title: 'Recent',
            filter: recent,
            isContextual: false,
            keyName: 'recent'
        },
        near_me: {
            title: 'Near Me',
            filter: nearMe,
            isContextual: false,
            keyName: 'near_me'
        }
    };

    var setContextFilters = function setContextFilters(contextFilters) {
        _.map(contextFilters, function (filterKey) {
            return filters[filterKey].isContextual = true;
        });

        return filters;
    },
        getContextFilters = function getContextFilters() {
        return _.filter(filters, function (filter) {
            return filter.isContextual;
        });
    },
        removeContextFilter = function removeContextFilter(filter) {
        filters[filter.keyName].isContextual = false;

        return filters;
    };

    return {
        filters: filters,
        setContextFilters: setContextFilters,
        getContextFilters: getContextFilters,
        removeContextFilter: removeContextFilter
    };
};

var idVM$1 = h.idVM;
var currentUser = m.prop({});
var createdVM = postgrest$1.filtersVM({ project_user_id: 'eq' });

var getUserCreatedProjects = function getUserCreatedProjects(user_id) {
    var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;

    createdVM.project_user_id(user_id).order({ project_id: 'desc' });

    models.project.pageSize(pageSize);

    var lUserCreated = postgrest$1.loaderWithToken(models.project.getPageOptions(createdVM.parameters()));

    return lUserCreated.load();
};

var getPublicUserContributedProjects = function getPublicUserContributedProjects(user_id) {
    var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;

    var contextVM = postgrest$1.filtersVM({
        user_id: 'eq'
    });

    contextVM.user_id(user_id);

    models.contributor.pageSize(pageSize);

    var lUserContributed = postgrest$1.loaderWithToken(models.contributor.getPageOptions(contextVM.parameters()));

    return lUserContributed.load();
};

var getUserBalance = function getUserBalance(user_id) {
    var contextVM = postgrest$1.filtersVM({
        user_id: 'eq'
    });
    contextVM.user_id(user_id);

    var loader = postgrest$1.loaderWithToken(models.balance.getPageOptions(contextVM.parameters()));
    return loader.load();
};

var getUserBankAccount = function getUserBankAccount(user_id) {
    var contextVM = postgrest$1.filtersVM({
        user_id: 'eq'
    });

    contextVM.user_id(user_id);

    var lUserAccount = postgrest$1.loaderWithToken(models.bankAccount.getPageOptions(contextVM.parameters()));
    return lUserAccount.load();
};

var getUserProjectReminders = function getUserProjectReminders(user_id) {
    var contextVM = postgrest$1.filtersVM({
        user_id: 'eq',
        without_notification: 'eq'
    });

    contextVM.user_id(user_id).without_notification(true);

    models.projectReminder;

    var lUserReminders = postgrest$1.loaderWithToken(models.projectReminder.getPageOptions(contextVM.parameters()));

    return lUserReminders.load();
};

var getMailMarketingLists = function getMailMarketingLists() {
    var l = postgrest$1.loaderWithToken(models.mailMarketingList.getPageOptions({ order: 'id.asc' }));

    return l.load();
};

var getUserCreditCards = function getUserCreditCards(user_id) {
    var contextVM = postgrest$1.filtersVM({
        user_id: 'eq'
    });

    contextVM.user_id(user_id);

    models.userCreditCard.pageSize(false);

    var lUserCards = postgrest$1.loaderWithToken(models.userCreditCard.getPageOptions(contextVM.parameters()));

    return lUserCards.load();
};

var toggleDelivery = function toggleDelivery(projectId, contribution) {
    return m.request({
        method: 'GET',
        config: h.setCsrfToken,
        url: '/projects/' + projectId + '/contributions/' + contribution.contribution_id + '/toggle_delivery'
    });
};

var toggleAnonymous = function toggleAnonymous(projectId, contribution) {
    return m.request({
        method: 'GET',
        config: h.setCsrfToken,
        url: '/projects/' + projectId + '/contributions/' + contribution.contribution_id + '/toggle_anonymous'
    });
};

var getUserContributedProjects = function getUserContributedProjects(user_id) {
    var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;

    var contextVM = postgrest$1.filtersVM({
        user_id: 'eq',
        state: 'in'
    });

    contextVM.user_id(user_id).order({
        created_at: 'desc'
    }).state(['refunded', 'pending_refund', 'paid']);

    models.userContribution.pageSize(pageSize);

    var lUserContributed = postgrest$1.loaderWithToken(models.userContribution.getPageOptions(contextVM.parameters()));

    return lUserContributed.load();
};

var fetchUser = function fetchUser(user_id) {
    var handlePromise = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    var customProp = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : currentUser;

    idVM$1.id(user_id);

    var lUser = postgrest$1.loaderWithToken(models.userDetail.getRowOptions(idVM$1.parameters()));

    return !handlePromise ? lUser.load() : lUser.load().then(_$1.compose(customProp, _$1.first));
};

var getCurrentUser = function getCurrentUser() {
    fetchUser(h.getUserID());
    return currentUser;
};

var displayName = function displayName(user) {
    var u = user || { name: 'no name' };
    return _$1.isEmpty(u.public_name) ? u.name : u.public_name;
};

var displayImage = function displayImage(user) {
    var defaultImg = 'https://catarse.me/assets/catarse_bootstrap/user.jpg';

    if (user) {
        return user.profile_img_thumbnail || defaultImg;
    }

    return defaultImg;
};

var displayCover = function displayCover(user) {
    if (user) {
        return user.profile_cover_image || displayImage(user); //
    }

    return displayImage(user);
};

var getUserRecommendedProjects = function getUserRecommendedProjects(contribution) {
    var sample3 = _$1.partial(_$1.sample, _$1, 3),
        loaders = m.prop([]),
        collection = m.prop([]),
        _h$getUser = h.getUser(),
        user_id = _h$getUser.user_id;


    var loader = function loader() {
        return _$1.reduce(loaders(), function (memo, curr) {
            var _memo = _$1.isFunction(memo) ? memo() : memo,
                _curr = _$1.isFunction(curr) ? curr() : curr;

            return _memo && _curr;
        }, true);
    };

    var loadPopular = function loadPopular() {
        var filters = projectFiltersVM().filters;
        var popular = postgrest$1.loaderWithToken(models.project.getPageOptions(_$1.extend({}, { order: 'score.desc' }, filters.score.filter.parameters())));

        loaders().push(popular);

        popular.load().then(_$1.compose(collection, sample3));
    };

    var pushProject = function pushProject(_ref) {
        var project_id = _ref.project_id;

        var project = postgrest$1.loaderWithToken(models.project.getPageOptions(postgrest$1.filtersVM({ project_id: 'eq' }).project_id(project_id).parameters()));

        loaders().push(project);
        project.load().then(function (data) {
            collection().push(_$1.first(data));
        });
    };

    var projects = postgrest$1.loaderWithToken(models.recommendedProjects.getPageOptions(postgrest$1.filtersVM({ user_id: 'eq' }).user_id(user_id).parameters()));

    projects.load().then(function (recommended) {
        if (recommended.length > 0) {
            _$1.map(recommended, pushProject);
        } else {
            loadPopular();
        }
    });

    return {
        loader: loader,
        collection: collection
    };
};

var userVM = {
    getUserCreatedProjects: getUserCreatedProjects,
    getUserCreditCards: getUserCreditCards,
    toggleDelivery: toggleDelivery,
    toggleAnonymous: toggleAnonymous,
    getUserProjectReminders: getUserProjectReminders,
    getUserRecommendedProjects: getUserRecommendedProjects,
    getUserContributedProjects: getUserContributedProjects,
    getUserBalance: getUserBalance,
    getUserBankAccount: getUserBankAccount,
    getPublicUserContributedProjects: getPublicUserContributedProjects,
    displayImage: displayImage,
    displayCover: displayCover,
    displayName: displayName,
    fetchUser: fetchUser,
    getCurrentUser: getCurrentUser,
    getMailMarketingLists: getMailMarketingLists
};

/**
 * window.c.AdminResetPassword component
 * Makes ajax request to update User password.
 *
 * Example:
 * m.component(c.AdminResetPassword, {
 *     data: {},
 *     item: rowFromDatabase
 * })
 */
var adminResetPassword = {
    controller: function controller(args) {
        var builder = args.data,
            complete = m.prop(false),
            error = m.prop(false),
            fail = m.prop(false),
            key = builder.property,
            data = {},
            item = args.item;

        builder.requestOptions.config = function (xhr) {
            if (h.authenticityToken()) {
                xhr.setRequestHeader('X-CSRF-Token', h.authenticityToken());
            }
        };

        var l = m.prop(false),
            load = function load() {
            return m.request(_$1.extend({}, { data: data }, builder.requestOptions));
        },
            newPassword = m.prop(''),
            error_message = m.prop('');

        var requestError = function requestError(err) {
            l(false);
            error_message(err.errors[0]);
            complete(true);
            error(true);
        };
        var updateItem = function updateItem(res) {
            l(false);
            _$1.extend(item, res[0]);
            complete(true);
            error(false);
        };

        var submit = function submit() {
            l(true);
            data[key] = newPassword();
            load().then(updateItem, requestError);
            return false;
        };

        var unload = function unload(el, isinit, context) {
            context.onunload = function () {
                complete(false);
                error(false);
            };
        };

        return {
            complete: complete,
            error: error,
            error_message: error_message,
            l: l,
            newPassword: newPassword,
            submit: submit,
            toggler: h.toggleProp(false, true),
            unload: unload
        };
    },
    view: function view(ctrl, args) {
        var data = args.data,
            btnValue = ctrl.l() ? 'please wait...' : data.callToAction;

        return m('.w-col.w-col-2', [m('button.btn.btn-small.btn-terciary', {
            onclick: ctrl.toggler.toggle
        }, data.outerLabel), ctrl.toggler() ? m('.dropdown-list.card.u-radius.dropdown-list-medium.zindex-10', {
            config: ctrl.unload
        }, [m('form.w-form', {
            onsubmit: ctrl.submit
        }, !ctrl.complete() ? [m('label', data.innerLabel), m('input.w-input.text-field[type="text"][name="' + data.property + '"][placeholder="' + data.placeholder + '"]', {
            onchange: m.withAttr('value', ctrl.newPassword),
            value: ctrl.newPassword()
        }), m('input.w-button.btn.btn-small[type="submit"][value="' + btnValue + '"]')] : !ctrl.error() ? [m('.w-form-done[style="display:block;"]', [m('p', 'Password changed successfully.')])] : [m('.w-form-error[style="display:block;"]', [m('p', ctrl.error_message())])])]) : '']);
    }
};

var adminInputAction = {
    controller: function controller(args) {
        var builder = args.data,
            complete = m.prop(false),
            error = m.prop(false),
            fail = m.prop(false),
            data = {},
            item = args.item,
            key = builder.property,
            forceValue = builder.forceValue || null,
            newValue = m.prop(forceValue);

        h.idVM.id(item[builder.updateKey]);

        var l = postgrest.loaderWithToken(builder.model.patchOptions(h.idVM.parameters(), data));

        var updateItem = function updateItem(res) {
            _.extend(item, res[0]);
            complete(true);
            error(false);
        };

        var submit = function submit() {
            data[key] = newValue();
            l.load().then(updateItem, function () {
                complete(true);
                error(true);
            });
            return false;
        };

        var unload = function unload(el, isinit, context) {
            context.onunload = function () {
                complete(false);
                error(false);
                newValue(forceValue);
            };
        };

        return {
            complete: complete,
            error: error,
            l: l,
            newValue: newValue,
            submit: submit,
            toggler: h.toggleProp(false, true),
            unload: unload
        };
    },
    view: function view(ctrl, args) {
        var data = args.data,
            btnValue = ctrl.l() ? 'please wait...' : data.callToAction;

        return m('.w-col.w-col-2', [m('button.btn.btn-small.btn-terciary', {
            onclick: ctrl.toggler.toggle
        }, data.outerLabel), ctrl.toggler() ? m('.dropdown-list.card.u-radius.dropdown-list-medium.zindex-10', {
            config: ctrl.unload
        }, [m('form.w-form', {
            onsubmit: ctrl.submit
        }, !ctrl.complete() ? [m('label', data.innerLabel), data.forceValue === undefined ? m('input.w-input.text-field[type="text"][placeholder="' + data.placeholder + '"]', {
            onchange: m.withAttr('value', ctrl.newValue),
            value: ctrl.newValue()
        }) : '', m('input.w-button.btn.btn-small[type="submit"][value="' + btnValue + '"]')] : !ctrl.error() ? [m('.w-form-done[style="display:block;"]', [m('p', data.successMessage)])] : [m('.w-form-error[style="display:block;"]', [m('p', 'There was a problem with the request. ' + data.errorMessage)])])]) : '']);
    }
};

/**
 * window.c.AdminNotificationHistory component
 * Return notifications list from an User object.
 *
 * Example:
 * m.component(c.AdminNotificationHistory, {
 *     user: user
 * })
 */
var adminNotificationHistory = {
    controller: function controller(args) {
        var notifications = m.prop([]),
            getNotifications = function getNotifications(user) {
            var notification = models.notification;
            notification.getPageWithToken(postgrest.filtersVM({
                user_id: 'eq',
                sent_at: 'is.null'
            }).user_id(user.id).sent_at(!null).order({
                sent_at: 'desc'
            }).parameters()).then(notifications);
        };

        getNotifications(args.user);

        return {
            notifications: notifications
        };
    },
    view: function view(ctrl) {
        return m('.w-col.w-col-4', [m('.fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20', 'Notification history'), ctrl.notifications().map(function (cEvent) {
            return m('.w-row.fontsize-smallest.lineheight-looser.date-event', [m('.w-col.w-col-24', [m('.fontcolor-secondary', h.momentify(cEvent.sent_at, 'DD/MM/YYYY, HH:mm'), ' - ', m('a[target="blank"][href="/notifications/' + cEvent.relation + '/' + cEvent.id + '"]', cEvent.template_name), cEvent.origin ? ' - ' + cEvent.origin : '')])]);
        })]);
    }
};

var I18nScope = _$1.partial(h.i18nScope, 'users.balance');

var adminUserBalanceTransactionsList = {
    controller: function controller(args) {
        var userBalance = m.prop({}),
            transactionsListVM = postgrest$1.paginationVM(models.balanceTransaction, 'created_at.desc', { Prefer: 'count=exact' });

        models.balanceTransaction.pageSize(2);
        userVM.getUserBalance(args.user_id).then(_$1.compose(userBalance, _$1.first));
        transactionsListVM.firstPage({ user_id: 'eq.' + args.user_id });

        return {
            userBalance: userBalance,
            transactionsListVM: transactionsListVM
        };
    },
    view: function view(ctrl, args) {
        var collection = ctrl.transactionsListVM.collection(),
            userBalance = ctrl.userBalance() || { amount: 0 };

        return m(args.wrapperClass || '.w-col.w-col-8', [m('.fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20', I18n.t('totals_transactions_title', I18nScope({
            value: h.formatNumber(userBalance.amount, 2, 3)
        }))), _$1.map(collection, function (item, intex) {
            return m('.divider.fontsize-smallest.lineheight-looser', [m('.w-row.fontweight-semibold', [m('.w-col.w-col-2', [m('.fontcolor-secondary', h.momentify(item.created_at))]), m('.w-col.w-col-6', [I18n.t('day_balance', I18nScope())]), m('.w-col.w-col-2', m.trust('&nbsp;')), m('.w-col.w-col-2', [m('span', I18n.t('shared.currency', {
                amount: h.formatNumber(item.total_amount, 2, 3) }))])]), m('.w-row', [_$1.map(item.source, function (source, index) {
                var negativeV = source.amount < 0;
                return m('.divider.fontsize-smallest.lineheight-looser.w-row', [m('.w-col.w-col-2', []), m('.w-col.w-col-6', [m('div', I18n.t('event_names.' + source.event_name, I18nScope({
                    service_fee: source.origin_objects.service_fee ? source.origin_objects.service_fee * 100.0 : '',
                    project_name: source.origin_objects.project_name,
                    contributitor_name: source.origin_objects.contributor_name
                })))]), m('.w-col.w-col-2', [m(negativeV ? '.text-error' : '.text-success', [negativeV ? '- ' : '+ ', I18n.t('shared.currency', {
                    amount: h.formatNumber(Math.abs(source.amount), 2, 3)
                })])])]);
            })])]);
        }), m('.w-row', [m('.w-col.w-col-3.w-col-push-4', [ctrl.transactionsListVM.isLoading() ? h.loader() : m('button#load-more.btn.btn-terciary', {
            onclick: ctrl.transactionsListVM.nextPage
        }, I18n.t('shared.load_more'))])])]);
    }
};

/**
 * window.c.AdminUserDetail component
 * Return action inputs to be used inside AdminList component.
 *
 * Example:
 * m.component(c.AdminList, {
 *     data: {},
 *     listDetail: c.AdminUserDetail
 * })
 */
var adminUserDetail = {
    controller: function controller(args) {
        return {
            actions: {
                reset: {
                    property: 'password',
                    callToAction: 'Reset',
                    innerLabel: 'New User Password:',
                    outerLabel: 'Reset password',
                    placeholder: 'ex: 123mud@r',
                    model: models.user
                },
                reactivate: {
                    property: 'deactivated_at',
                    updateKey: 'id',
                    callToAction: 'Reactivate',
                    innerLabel: 'Are you sure you want to reactivate this user?',
                    successMessage: 'User reactivated successfully!',
                    errorMessage: 'User could not be reactivated!',
                    outerLabel: 'Reactivate user',
                    forceValue: null,
                    model: models.user
                }
            }
        };
    },
    view: function view(ctrl, args) {
        var actions = ctrl.actions,
            item = args.item,
            details = args.details,
            addOptions = function addOptions(builder, id) {
            return _$1.extend({}, builder, {
                requestOptions: {
                    url: '/users/' + id + '/new_password',
                    method: 'POST'
                }
            });
        };

        return m('#admin-contribution-detail-box', [m('.divider.u-margintop-20.u-marginbottom-20'), m('.w-row.u-marginbottom-30', [m.component(adminResetPassword, {
            data: addOptions(actions.reset, item.id),
            item: item
        }), item.deactivated_at ? m.component(adminInputAction, { data: actions.reactivate, item: item }) : '']), m('.w-row.card.card-terciary.u-radius', [m(adminNotificationHistory, {
            user: item,
            wrapperClass: '.w-col.w-col-4'
        }), m(adminUserBalanceTransactionsList, { user_id: item.id })])]);
    }
};

var dropdown = {
    view: function view(ctrl, args) {
        var opts = _$1.isFunction(args.options) ? args.options() : args.options;

        return m('select' + args.classes + '[id="' + args.id + '"]', {
            onchange: function onchange(e) {
                args.valueProp(e.target.value);args.onchange();
            },
            value: args.valueProp()
        }, _$1.map(opts, function (data) {
            return m('option', { value: data.value }, data.option);
        }));
    }
};

var filterDropdown = {
    view: function view(ctrl, args) {
        var wrapper_c = args.wrapper_class || '.w-col.w-col-3.w-col-small-6';
        return m(wrapper_c, [m('label.fontsize-smaller[for="' + args.index + '"]', args.custom_label ? m.component(args.custom_label[0], args.custom_label[1]) : args.label), m.component(dropdown, {
            id: args.index,
            onchange: _.isFunction(args.onchange) ? args.onchange : Function.prototype,
            classes: '.w-select.text-field.positive',
            valueProp: args.vm,
            options: args.options
        })]);
    }
};

var adminUsers = {
    controller: function controller() {
        var listVM = userListVM,
            filterVM = vm,
            error = m.prop(''),
            itemBuilder = [{
            component: adminUser,
            wrapperClass: '.w-col.w-col-4'
        }],
            filterBuilder = [{ // name
            component: filterMain,
            data: {
                vm: filterVM.full_text_index,
                placeholder: 'Search by name, email, user IDs...'
            }
        }, { // status
            component: filterDropdown,
            data: {
                label: 'With the status',
                index: 'status',
                name: 'deactivated_at',
                vm: filterVM.deactivated_at,
                options: [{
                    value: '',
                    option: 'Any'
                }, {
                    value: null,
                    option: 'active'
                }, {
                    value: !null,
                    option: 'deactivate'
                }]
            }
        }],
            submit = function submit() {
            listVM.firstPage(filterVM.parameters()).then(null, function (serverError) {
                error(serverError.message);
            });
            return false;
        };

        return {
            filterVM: filterVM,
            filterBuilder: filterBuilder,
            listVM: {
                list: listVM,
                error: error
            },
            submit: submit
        };
    },
    view: function view(ctrl) {
        var label = 'Users';

        return m('', [m.component(adminFilter, {
            form: ctrl.filterVM.formDescriber,
            filterBuilder: ctrl.filterBuilder,
            label: label,
            submit: ctrl.submit
        }), m.component(adminList, {
            vm: ctrl.listVM,
            label: label,
            listItem: adminUserItem,
            listDetail: adminUserDetail
        })]);
    }
};

models.adminProject.pageSize(9);
var projectListVM = postgrest.paginationVM(models.adminProject, 'pledged.desc', { Prefer: 'count=exact' });

var vm$1 = postgrest.filtersVM({
    full_text_index: '@@',
    state: 'eq',
    mode: 'eq',
    recommended: 'eq',
    created_at: 'between',
    project_expires_at: 'between',
    updated_at: 'between',
    goal: 'between',
    progress: 'between',
    category_name: 'eq'
});
var paramToString$1 = function paramToString(p) {
    return (p || '').toString().trim();
};

vm$1.state('online');
vm$1.mode('');
vm$1.recommended('');
vm$1.category_name('');
vm$1.order({
    project_id: 'desc'
});

vm$1.updated_at.lte.toFilter = function () {
    var filter = paramToString$1(vm$1.updated_at.lte());
    return filter && h.momentFromString(filter).endOf('day').format('');
};

vm$1.updated_at.gte.toFilter = function () {
    var filter = paramToString$1(vm$1.updated_at.gte());
    return filter && h.momentFromString(filter).format();
};

vm$1.project_expires_at.lte.toFilter = function () {
    var filter = paramToString$1(vm$1.project_expires_at.lte());
    return filter && h.momentFromString(filter).endOf('day').format('');
};

vm$1.project_expires_at.gte.toFilter = function () {
    var filter = paramToString$1(vm$1.project_expires_at.gte());
    return filter && h.momentFromString(filter).format();
};

vm$1.created_at.lte.toFilter = function () {
    var filter = paramToString$1(vm$1.created_at.lte());
    return filter && h.momentFromString(filter).endOf('day').format('');
};

vm$1.created_at.gte.toFilter = function () {
    var filter = paramToString$1(vm$1.created_at.gte());
    return filter && h.momentFromString(filter).format();
};

vm$1.full_text_index.toFilter = function () {
    var filter = paramToString$1(vm$1.full_text_index());
    return filter && replaceDiacritics(filter) || undefined;
};

var I18nScope$1 = _$1.partial(h.i18nScope, 'projects.card');
var progressMeter = {
    controller: function controller(args) {
        var project = args.project;
        var progress = args.progress;
        var isFinished = function isFinished(project) {
            return _$1.contains(['successful', 'failed', 'waiting_funds'], project.state);
        };
        var cardMeter = function cardMeter() {
            var failed = function failed() {
                return project.state === 'failed' || project.state === 'waiting_funds' ? 'card-secondary' : '';
            };

            return '.card-project-meter.' + project.mode + '.' + project.state + '.' + (progress > 100 ? 'complete' : 'incomplete') + '.' + failed();
        };
        return {
            project: project,
            progress: progress,
            cardMeter: cardMeter,
            isFinished: isFinished
        };
    },
    view: function view(ctrl) {
        var project = ctrl.project;
        return m(ctrl.cardMeter(), [ctrl.isFinished(project) ? m('div', project.state === 'successful' && ctrl.progress < 100 ? I18n$1.t('display_status.flex_successful', I18nScope$1()) : I18n$1.t('display_status.' + project.state, I18nScope$1())) : m('.meter', [m('.meter-fill', {
            style: {
                width: (ctrl.progress > 100 ? 100 : ctrl.progress) + '%'
            }
        })])]);
    }
};

var error = m.prop('');
var rewards = m.prop([]);
var states = m.prop([]);
var fees = m.prop([]);
var noReward = {
    id: null,
    description: 'Thank you. I just want to help the project..',
    shipping_options: null,
    minimum_value: 10
};
var contributionValue = m.prop(noReward.minimum_value + '0.00');
var selectedReward = m.prop(noReward);
var vm$3 = postgrest$1.filtersVM({
    project_id: 'eq'
});

var rewardsLoader = function rewardsLoader(projectId) {
    vm$3.project_id(projectId);

    return postgrest$1.loaderWithToken(models.rewardDetail.getPageOptions(vm$3.parameters()));
};

var rewardLoader = function rewardLoader(rewardId) {
    var rewardvm = postgrest$1.filtersVM({
        id: 'eq'
    });
    rewardvm.id(rewardId);

    return postgrest$1.loaderWithToken(models.rewardDetail.getPageOptions(rewardvm.parameters()));
};

var fetchRewards = function fetchRewards(projectId) {
    return rewardsLoader(projectId).load().then(rewards);
};

var getFees = function getFees(reward) {
    var feesFilter = postgrest$1.filtersVM({
        reward_id: 'eq'
    });

    feesFilter.reward_id(reward.id);
    var feesLoader = postgrest$1.loader(models.shippingFee.getPageOptions(feesFilter.parameters()));
    return feesLoader.load();
};

var getSelectedReward = function getSelectedReward() {
    var root = document.getElementById('application'),
        data = root && root.getAttribute('data-contribution');

    if (data) {
        var contribution = JSON.parse(data);

        selectedReward(contribution.reward);
        m.redraw(true);

        return selectedReward;
    }

    return false;
};

var selectReward = function selectReward(reward) {
    return function () {
        if (selectedReward() !== reward) {
            error('');
            selectedReward(reward);
            contributionValue(h.applyMonetaryMask(reward.minimum_value + '0.00'));

            if (reward.id) {
                getFees(reward).then(fees);
            }
        }
    };
};

var applyMask$1 = _$1.compose(contributionValue, h.applyMonetaryMask);

var statesLoader = postgrest$1.loader(models.state.getPageOptions());
var getStates = function getStates() {
    statesLoader.load().then(states);
    return states;
};

var locationOptions = function locationOptions(reward, destination) {
    var options = m.prop([]),
        mapStates = _$1.map(states(), function (state) {
        var fee = void 0;
        var feeState = _$1.findWhere(fees(), {
            destination: state.acronym
        });
        var feeOthers = _$1.findWhere(fees(), {
            destination: 'others'
        });
        if (feeState) {
            fee = feeState.value;
        } else if (feeOthers) {
            fee = feeOthers.value;
        }

        return {
            name: state.name,
            value: state.acronym,
            fee: fee
        };
    });
    if (reward.shipping_options === 'national') {
        options(mapStates);
    } else if (reward.shipping_options === 'international') {
        var fee = void 0;
        var feeInternational = _$1.findWhere(fees(), {
            destination: 'international'
        });
        if (feeInternational) {
            fee = feeInternational.value;
        }
        options(_$1.union([{
            value: 'international',
            name: 'Outside the UK',
            fee: fee
        }], mapStates));
    }

    options(_$1.union([{ value: '', name: 'Select Option', fee: 0 }], options()));

    return options();
};

var shippingFeeById = function shippingFeeById(feeId) {
    return _$1.findWhere(fees(), {
        id: feeId
    });
};

var getOtherNationalStates = function getOtherNationalStates() {
    return _$1.reject(states(), function (state) {
        return !_$1.isUndefined(_$1.findWhere(fees(), { destination: state.acronym }));
    });
};

var feeDestination = function feeDestination(reward, feeId) {
    var fee = shippingFeeById(feeId) || {};
    var feeState = _$1.findWhere(states(), { acronym: fee.destination });

    if (feeState) {
        return feeState.acronym;
    } else if (reward.shipping_options === 'national' && fee.destination === 'others') {
        return _$1.pluck(getOtherNationalStates(fees), 'acronym').join(', ');
    }

    return fee.destination;
};

var shippingFeeForCurrentReward = function shippingFeeForCurrentReward(selectedDestination) {
    var currentFee = _$1.findWhere(fees(), {
        destination: selectedDestination()
    });

    if (!currentFee && _$1.findWhere(states(), { acronym: selectedDestination() })) {
        currentFee = _$1.findWhere(fees(), {
            destination: 'others'
        });
    }

    return currentFee;
};

var createReward = function createReward(projectId, rewardData) {
    return m.request({
        method: 'POST',
        url: '/projects/' + projectId + '/rewards.json',
        data: { reward: rewardData },
        config: h.setCsrfToken
    });
};

var updateReward = function updateReward(projectId, rewardId, rewardData) {
    return m.request({
        method: 'PATCH',
        url: '/projects/' + projectId + '/rewards/' + rewardId + '.json',
        data: { reward: rewardData },
        config: h.setCsrfToken
    });
};

var canEdit = function canEdit(reward, projectState, user) {
    return (user || {}).is_admin || projectState === 'draft' || projectState === 'online' && reward.paid_count() <= 0 && reward.waiting_payment_count() <= 0;
};

var canAdd = function canAdd(projectState, user) {
    return (user || {}).is_admin || projectState === 'draft' || projectState === 'online';
};

var hasShippingOptions = function hasShippingOptions(reward) {
    return !(_$1.isNull(reward.shipping_options) || reward.shipping_options === 'free' || reward.shipping_options === 'Pickup');
};

var rewardVM = {
    canEdit: canEdit,
    canAdd: canAdd,
    error: error,
    getStates: getStates,
    getFees: getFees,
    rewardLoader: rewardLoader,
    fees: fees,
    rewards: rewards,
    applyMask: applyMask$1,
    noReward: noReward,
    fetchRewards: fetchRewards,
    selectReward: selectReward,
    getSelectedReward: getSelectedReward,
    selectedReward: selectedReward,
    contributionValue: contributionValue,
    updateReward: updateReward,
    createReward: createReward,
    rewardsLoader: rewardsLoader,
    locationOptions: locationOptions,
    shippingFeeForCurrentReward: shippingFeeForCurrentReward,
    shippingFeeById: shippingFeeById,
    statesLoader: statesLoader,
    feeDestination: feeDestination,
    getValue: contributionValue,
    setValue: contributionValue,
    hasShippingOptions: hasShippingOptions
};

var currentProject$1 = m.prop();
var userDetails = m.prop();
var projectContributions = m.prop([]);
var vm$2 = postgrest$1.filtersVM({ project_id: 'eq' });
var idVM$2 = h.idVM;

var setProject$1 = function setProject(project_user_id) {
    return function (data) {
        currentProject$1(_$1.first(data));

        if (!project_user_id) {
            userVM.fetchUser(currentProject$1().user_id, true, userDetails);
        }

        return currentProject$1;
    };
};

var init = function init(project_id, project_user_id) {
    vm$2.project_id(project_id);

    var lProject = postgrest$1.loaderWithToken(models.projectDetail.getRowOptions(vm$2.parameters()));

    fetchParallelData(project_id, project_user_id);

    return lProject.load().then(setProject$1(project_user_id));
};

var resetData = function resetData() {
    userDetails({});
    rewardVM.rewards([]);
};

var fetchParallelData = function fetchParallelData(projectId, projectUserId) {
    if (projectUserId) {
        userVM.fetchUser(projectUserId, true, userDetails);
    }

    rewardVM.fetchRewards(projectId);
};

// FIXME: should work with data-parameters that don't have project struct
// just ids: {project_id project_user_id user_id }
var getCurrentProject$1 = function getCurrentProject() {
    var root = document.getElementById('application'),
        data = root && root.getAttribute('data-parameters');

    if (data) {
        var jsonData = JSON.parse(data);

        var projectId = jsonData.projectId,
            projectUserId = jsonData.projectUserId; // legacy

        var project_id = jsonData.project_id,
            project_user_id = jsonData.project_user_id;

        // fill currentProject when jsonData has id and mode (legacy code)

        if (jsonData.id && jsonData.mode) {
            currentProject$1(jsonData);
        }

        m.redraw(true);

        init(project_id || projectId, project_user_id || projectUserId);

        return currentProject$1();
    }
    return false;
};

var routeToProject = function routeToProject(project, ref) {
    return function () {
        currentProject$1(project);

        resetData();

        m.route(h.buildLink(project.permalink, ref), { project_id: project.project_id, project_user_id: project.project_user_id });

        return false;
    };
};

var setProjectPageTitle = function setProjectPageTitle() {
    if (currentProject$1()) {
        var projectName = currentProject$1().project_name || currentProject$1().name;

        return projectName ? h.setPageTitle(projectName) : Function.prototype;
    }
};

var fetchProject = function fetchProject(projectId) {
    var handlePromise = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    var customProp = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : currentProject$1;

    idVM$2.id(projectId);

    var lproject = postgrest$1.loaderWithToken(models.projectDetail.getRowOptions(idVM$2.parameters()));

    return !handlePromise ? lproject.load() : lproject.load().then(_$1.compose(customProp, _$1.first));
};

var updateProject = function updateProject(projectId, projectData) {
    return m.request({
        method: 'PUT',
        url: '/projects/' + projectId + '.json',
        data: { project: projectData },
        config: h.setCsrfToken
    });
};

var projectVM = {
    userDetails: userDetails,
    getCurrentProject: getCurrentProject$1,
    projectContributions: projectContributions,
    currentProject: currentProject$1,
    rewardDetails: rewardVM.rewards,
    routeToProject: routeToProject,
    setProjectPageTitle: setProjectPageTitle,
    init: init,
    fetchProject: fetchProject,
    updateProject: updateProject
};

var adminProjectItem = {
    controller: function controller(args) {
        var project = args.item,
            recommended = h.toggleProp(project.recommended, !project.recommended),
            toggleRecommend = function toggleRecommend() {
            projectVM.updateProject(project.project_id, { recommended: !recommended() }).then(recommended.toggle);
        };

        return {
            project: project,
            toggleRecommend: toggleRecommend,
            recommended: recommended
        };
    },
    view: function view(ctrl) {
        var project = ctrl.project,
            recommended = ctrl.recommended;
        return m('.w-row', [m('.w-col.w-col-4', m('.w-row', [m('.w-col.w-col-2', m('a.btn-star.fa.fa-lg.fa-star.w-inline-block', { onclick: function onclick() {
                ctrl.toggleRecommend();
            }, class: recommended() ? 'selected' : '' })), m('.w-col.w-col-10', m('.w-row', [m('.u-marginbottom-10.w-col.w-col-3.w-col-small-3', m('img.thumb-project.u-radius[src=' + project.project_img + '][width=50]')), m('.w-col.w-col-9.w-col-small-9', [m('a.alt-link.fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-10[href=\'/' + project.permalink + '\'][target=\'_blank\']', project.project_name), m('.fontcolor-secondary.fontsize-smallest.fontweight-semibold', project.category_name)])]))])), m('.admin-project-meter.w-col.w-col-4', [m('.w-row', [m('.w-col.w-col-4', m('.fontsize-smaller.fontweight-semibold.text-success', project.state)), m('.u-text-center-small-only.w-clearfix.w-col.w-col-8', m('.fontsize-smaller.u-right', h.momentify(project.project_online_date) + ' the ' + h.momentify(project.project_expires_at)))]), m('.u-marginbottom-10', m(progressMeter, { project: project, progress: project.progress })), m('.w-row', [m('.w-col.w-col-4', m('.fontsize-smaller', project.progress.toFixed(2) + '%')), m('.u-text-center-small-only.w-clearfix.w-col.w-col-8', m('.fontsize-smaller.u-right', 'US$' + project.pledged + ' in US$' + project.goal))])]), m('.w-col.w-col-4', m('.w-row', [m('.w-col.w-col-2', m('img.user-avatar[src=\'' + userVM.displayImage({ profile_img_thumbnail: project.profile_img_thumbnail }) + '\']')), m('.w-col.w-col-10', [m('.fontsize-smaller.fontweight-semibold.lineheight-tighter', project.owner_name), m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-10', project.email), m('.fontcolor-secondary.fontsize-smallest', project.total_published + ' created projects'), m('.fontcolor-secondary.fontsize-smallest', 'Has not yet supported projects')])]))]);
    }
};

var adminRadioAction = {
    controller: function controller(args) {
        var builder = args.data,
            complete = m.prop(false),
            data = {},
            error = m.prop(false),
            fail = m.prop(false),
            item = args.item(),
            description = m.prop(item.description || ''),
            key = builder.getKey,
            newID = m.prop(''),
            getFilter = {},
            setFilter = {},
            radios = m.prop([]),
            getAttr = builder.radios,
            getKey = builder.getKey,
            getKeyValue = args.getKeyValue,
            updateKey = builder.updateKey,
            updateKeyValue = args.updateKeyValue,
            validate = builder.validate,
            selectedItem = builder.selectedItem || m.prop();

        setFilter[updateKey] = 'eq';
        var setVM = postgrest.filtersVM(setFilter);
        setVM[updateKey](updateKeyValue);

        getFilter[getKey] = 'eq';
        var getVM = postgrest.filtersVM(getFilter);
        getVM[getKey](getKeyValue);

        var getLoader = postgrest.loaderWithToken(builder.getModel.getPageOptions(getVM.parameters()));

        var setLoader = postgrest.loaderWithToken(builder.updateModel.patchOptions(setVM.parameters(), data));

        var updateItem = function updateItem(data) {
            if (data.length > 0) {
                var newItem = _$1.findWhere(radios(), {
                    id: data[0][builder.selectKey]
                });
                selectedItem(newItem);
            } else {
                error({
                    message: 'No items updated'
                });
            }
            complete(true);
        };

        var populateRadios = function populateRadios(data) {
            var emptyState = builder.addEmpty;

            radios(data);

            if (!_$1.isUndefined(emptyState)) {
                radios().unshift(emptyState);
            }
        };

        var fetch = function fetch() {
            getLoader.load().then(populateRadios, error);
        };

        var submit = function submit() {
            if (newID()) {
                var validation = validate(radios(), newID());
                if (_$1.isUndefined(validation)) {
                    data[builder.selectKey] = newID() === -1 ? null : newID();
                    setLoader.load().then(updateItem, error);
                } else {
                    complete(true);
                    error({
                        message: validation
                    });
                }
            }
            return false;
        };

        var unload = function unload(el, isinit, context) {
            context.onunload = function () {
                complete(false);
                error(false);
                newID('');
            };
        };

        var setDescription = function setDescription(text) {
            description(text);
            m.redraw();
        };

        fetch();

        return {
            complete: complete,
            description: description,
            setDescription: setDescription,
            error: error,
            setLoader: setLoader,
            getLoader: getLoader,
            newID: newID,
            submit: submit,
            toggler: h.toggleProp(false, true),
            unload: unload,
            radios: radios
        };
    },
    view: function view(ctrl, args) {
        var data = args.data,
            item = args.item(),
            btnValue = ctrl.setLoader() || ctrl.getLoader() ? 'please wait...' : data.callToAction;

        return m('.w-col.w-col-2', [m('button.btn.btn-small.btn-terciary', {
            onclick: ctrl.toggler.toggle
        }, data.outerLabel), ctrl.toggler() ? m('.dropdown-list.card.u-radius.dropdown-list-medium.zindex-10', {
            config: ctrl.unload
        }, [m('form.w-form', {
            onsubmit: ctrl.submit
        }, !ctrl.complete() ? [ctrl.radios() ? _$1.map(ctrl.radios(), function (radio, index) {
            return m('.w-radio', [m('input#r-' + index + '.w-radio-input[type=radio][name="admin-radio"][value="' + radio.id + '"]', {
                checked: radio.id === (item[data.selectKey] || item.id),
                onclick: function onclick() {
                    ctrl.newID(radio.id);
                    ctrl.setDescription(radio.description);
                }
            }), m('label.w-form-label[for="r-' + index + '"]', 'US$' + radio.minimum_value)]);
        }) : h.loader(), m('strong', 'Description'), m('p', ctrl.description()), m('input.w-button.btn.btn-small[type="submit"][value="' + btnValue + '"]')] : !ctrl.error() ? [m('.w-form-done[style="display:block;"]', [m('p', 'Reward changed successfully!')])] : [m('.w-form-error[style="display:block;"]', [m('p', ctrl.error().message)])])]) : '']);
    }
};

/**
 * window.c.AdminExternalAction component
 * Makes arbitrary ajax requests and update underlying
 * data from source endpoint.
 *
 * Example:
 * m.component(c.AdminExternalAction, {
 *     data: {},
 *     item: rowFromDatabase
 * })
 */
var adminExternalAction = {
    controller: function controller(args) {
        var builder = args.data,
            complete = m.prop(false),
            error = m.prop(false),
            fail = m.prop(false),
            data = {},
            item = args.item;

        builder.requestOptions.config = function (xhr) {
            if (h.authenticityToken()) {
                xhr.setRequestHeader('X-CSRF-Token', h.authenticityToken());
            }
        };

        var reload = _$1.compose(builder.model.getRowWithToken, h.idVM.id(item[builder.updateKey]).parameters),
            l = m.prop(false);

        var reloadItem = function reloadItem() {
            return reload().then(updateItem);
        };

        var requestError = function requestError(err) {
            l(false);
            complete(true);
            error(true);
        };

        var updateItem = function updateItem(res) {
            _$1.extend(item, res[0]);
            complete(true);
            error(false);
        };

        var submit = function submit() {
            l(true);
            m.request(builder.requestOptions).then(reloadItem, requestError);
            return false;
        };

        var unload = function unload(el, isinit, context) {
            context.onunload = function () {
                complete(false);
                error(false);
            };
        };

        return {
            l: l,
            complete: complete,
            error: error,
            submit: submit,
            toggler: h.toggleProp(false, true),
            unload: unload
        };
    },
    view: function view(ctrl, args) {
        var data = args.data,
            btnValue = ctrl.l() ? 'please wait...' : data.callToAction;

        return m('.w-col.w-col-2', [m('button.btn.btn-small.btn-terciary', {
            onclick: ctrl.toggler.toggle
        }, data.outerLabel), ctrl.toggler() ? m('.dropdown-list.card.u-radius.dropdown-list-medium.zindex-10', {
            config: ctrl.unload
        }, [m('form.w-form', {
            onsubmit: ctrl.submit
        }, !ctrl.complete() ? [m('label', data.innerLabel), m('input.w-button.btn.btn-small[type="submit"][value="' + btnValue + '"]')] : !ctrl.error() ? [m('.w-form-done[style="display:block;"]', [m('p', 'Successful request.')])] : [m('.w-form-error[style="display:block;"]', [m('p', 'There was a problem with the request.')])])]) : '']);
    }
};

var adminProjectDetail = {
    controller: function controller(args) {
        var bankl = void 0;
        var project_id = args.item.project_id;
        var loadBank = function loadBank() {
            var model = models.projectAccount,
                opts = model.getRowOptions(h.idVM.id(project_id).parameters()),
                project = m.prop({});

            bankl = postgrest$1.loaderWithToken(opts);

            if (project_id) {
                bankl.load().then(_$1.compose(project, _$1.first));
            }

            return project;
        };
        var l = void 0;
        var loadUser = function loadUser() {
            var model = models.userDetail,
                user_id = args.item.user_id,
                opts = model.getRowOptions(h.idVM.id(user_id).parameters()),
                user = m.prop({});

            l = postgrest$1.loaderWithToken(opts);

            if (user_id) {
                l.load().then(_$1.compose(user, _$1.first));
            }

            return user;
        };

        var changeUserAction = {
            toggler: h.toggleProp(false, true),
            submit: function submit(newValue) {
                return function () {
                    console.log('new value', newValue);
                    changeUserAction.complete(false);
                    projectVM.updateProject(project_id, { user_id: newValue }).then(function () {
                        changeUserAction.complete(true);
                        changeUserAction.success(true);
                        changeUserAction.error(false);
                    }).catch(function () {
                        changeUserAction.complete(true);
                        changeUserAction.success(true);
                        changeUserAction.error(true);
                    });
                    return false;
                };
            },
            complete: m.prop(false),
            error: m.prop(false),
            success: m.prop(false),
            newValue: m.prop('')
        };

        var contributionReport = {
            toggler: h.toggleProp(false, true)
        };

        var actionUnload = function actionUnload(action) {
            return function () {
                action.complete(false);
                action.error(false);
                action.success(false);
                action.newValue('');
            };
        };

        return {
            user: loadUser(),
            bankAccount: loadBank(),
            actions: {
                changeUserAction: changeUserAction
            },
            actionUnload: actionUnload
        };
    },
    view: function view(ctrl, args) {
        var actions = ctrl.actions,
            item = args.item,
            user = ctrl.user(),
            bankAccount = ctrl.bankAccount(),
            userAddress = user.address || {};

        return m('#admin-contribution-detail-box', [m('.divider.u-margintop-20.u-marginbottom-20'), m('.w-row.u-marginbottom-30', [m('.w-col.w-col-2', [m('button.btn.btn-small.btn-terciary', {
            onclick: ctrl.actions.changeUserAction.toggler.toggle
        }, 'Switch director'), ctrl.actions.changeUserAction.toggler() ? m('.dropdown-list.card.u-radius.dropdown-list-medium.zindex-10', {
            config: ctrl.actionUnload(ctrl.actions.changeUserAction)
        }, [m('form.w-form', {
            onsubmit: ctrl.actions.changeUserAction.submit
        }, !ctrl.actions.changeUserAction.complete() ? [m('label', 'ID of the new director:'), m('input.w-input.text-field[type="tel"][placeholder="ex: 239049"]', {
            onchange: m.withAttr('value', ctrl.actions.changeUserAction.newValue),
            value: ctrl.actions.changeUserAction.newValue()
        }), m('input.w-button.btn.btn-small[type="submit"][value="Transfer"]', {
            onclick: ctrl.actions.changeUserAction.submit(ctrl.actions.changeUserAction.newValue())
        })] : !ctrl.actions.changeUserAction.error() ? [m('.w-form-done[style="display:block;"]', [m('p', 'Successfully transferred user')])] : [m('.w-form-error[style="display:block;"]', [m('p', 'There was a problem with the request. Verify that the user who will receive the project has valid details.')])])]) : '']), m('.w-col.w-col-2', [m('a.btn.btn-small.btn-terciary', { href: '/projects/' + item.project_id + '/contributions_report' }, 'Support Report')])]), m('.w-row.card.card-terciary.u-radius', [m('.w-col.w-col-4', [m('.fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20', 'Project Details'), m('.fontsize-smallest.fontweight-semibold.u-marginbottom-20', 'oppostarter.com/' + item.permalink), m('.fontsize-smallest.lineheight-looser.u-marginbottom-20', [m('span.fontweight-semibold', 'Goal:'), ' US$ ' + h.formatNumber(item.goal, 2, 3) + ' ', m('br'), m('span.fontweight-semibold', 'Reached:'), ' US$ ' + h.formatNumber(item.pledged, 2, 3) + ' ']), m('.fontsize-smallest.lineheight-looser', [m('span.fontweight-semibold', 'Start: '), h.momentify(item.project_online_date, 'DD/MM/YYYY, HH:mm'), m('br'), m('span.fontweight-semibold', 'Term: '), h.momentify(item.project_expires_at, 'DD/MM/YYYY, HH:mm'), m('br'), m('span.fontweight-semibold', 'Last update: '), h.momentify(item.updated_at, 'DD/MM/YYYY, HH:mm'), m('br'), m('span.fontweight-semibold', 'News: '), item.posts_count, m('br'), m('span.fontweight-semibold', 'Latest news: '), h.momentify(item.last_post, 'DD/MM/YYYY, HH:mm')])]), m('.w-col.w-col-4', [m('.fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20', 'Bank Details'), m('.fontsize-smallest.lineheight-looser', [m('span.fontweight-semibold', 'Bank: '), bankAccount.bank_name, m('br'), m('span.fontweight-semibold', 'Agency: '), bankAccount.agency + '-' + bankAccount.agency_digit, m('br'), m('span.fontweight-semibold', 'Account: '), bankAccount.account + '-' + bankAccount.account_digit, m('br'), bankAccount.account_type, m('br'), m('span.fontweight-semibold', 'Name: '), bankAccount.owner_name, m('br'), m('span.fontweight-semibold', 'CPF: '), bankAccount.owner_document])]), m('.w-col.w-col-4', [m('.fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20', 'Details of the director'), m('.fontsize-smallest.lineheight-looser.u-marginbottom-20', [m('span.fontweight-semibold', 'Name: '), user.name, m('br'), m('span.fontweight-semibold', 'CPF: '), user.owner_document, m('br'), m('span.fontweight-semibold', 'State registration: '), user.state_inscription, m('br'), m('span.fontweight-semibold', 'Email: '), user.email, m('br'), m('span.fontweight-semibold', 'Address: '), m.trust('&nbsp;'), ' ' + userAddress.address_street + ', ' + userAddress.address_number + ' ' + userAddress.address_complement + ' - ' + userAddress.address_city + ' - ' + userAddress.address_state + ' ' + userAddress.address_zip_code, m('br'), m('span.fontweight-semibold', 'Telephone:'), userAddress.phone_number]), m('.fontsize-smallest.lineheight-looser', [user.total_published_projects + ' created projects ', m('br'), m.trust('&nbsp;'), m('br')])])])]);
    }
};

var dateFieldMask = _$1.partial(h.mask, '99/99/9999');

var filterDateRange = {
    view: function view(ctrl, args) {
        return m('.w-col.w-col-3.w-col-small-6', [m('label.fontsize-smaller[for="' + args.index + '"]', args.label), m('.w-row', [m('.w-col.w-col-5.w-col-small-5.w-col-tiny-5', [m('input.w-input.text-field.positive[id="' + args.index + '"][type="text"]', {
            onkeyup: m.withAttr('value', _$1.compose(args.first, dateFieldMask)),
            value: args.first()
        })]), m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2', [m('.fontsize-smaller.u-text-center.lineheight-looser', 'e')]), m('.w-col.w-col-5.w-col-small-5.w-col-tiny-5', [m('input.w-input.text-field.positive[type="text"]', {
            onkeyup: m.withAttr('value', _$1.compose(args.last, dateFieldMask)),
            value: args.last()
        })])])]);
    }
};

var filterNumberRange = {
    view: function view(ctrl, args) {
        return m('.w-col.w-col-3.w-col-small-6', [m('label.fontsize-smaller[for="' + args.index + '"]', args.label), m('.w-row', [m('.w-col.w-col-5.w-col-small-5.w-col-tiny-5', [m('input.w-input.text-field.positive[id="' + args.index + '"][type="text"]', {
            onchange: m.withAttr('value', args.first),
            value: args.first()
        })]), m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2', [m('.fontsize-smaller.u-text-center.lineheight-looser', 'e')]), m('.w-col.w-col-5.w-col-small-5.w-col-tiny-5', [m('input.w-input.text-field.positive[type="text"]', {
            onchange: m.withAttr('value', args.last),
            value: args.last()
        })])])]);
    }
};

var adminProjects = {
    controller: function controller() {
        var listVM = projectListVM,
            filterVM = vm$1,
            categories = m.prop([]),
            filters = postgrest$1.filtersVM,
            error = m.prop(''),
            filterBuilder = [{ // name
            component: filterMain,
            data: {
                vm: filterVM.full_text_index,
                placeholder: 'Search by project, permalink, email, name of the director...'
            }
        }, { // status
            component: filterDropdown,
            data: {
                label: 'With the status',
                index: 'state',
                name: 'state',
                vm: filterVM.state,
                options: [{
                    value: '',
                    option: 'Any'
                }, {
                    value: 'successful',
                    option: 'successful'
                }, {
                    value: 'waiting_funds',
                    option: 'waiting_funds'
                }, {
                    value: 'online',
                    option: 'online'
                }, {
                    value: 'failed',
                    option: 'failed'
                }, {
                    value: 'draft',
                    option: 'draft'
                }]
            }
        }, { // mode
            component: filterDropdown,
            data: {
                label: 'Mode',
                index: 'mode',
                name: 'mode',
                vm: filterVM.mode,
                options: [{
                    value: '',
                    option: 'Any'
                }, {
                    value: 'aon',
                    option: 'All or Nothing'
                }, {
                    value: 'flex',
                    option: 'Flex'
                }]
            }
        }, { // recommended
            component: filterDropdown,
            data: {
                label: 'Recommended',
                index: 'recommended',
                name: 'recommended',
                vm: filterVM.recommended,
                options: [{
                    value: '',
                    option: 'Any'
                }, {
                    value: true,
                    option: 'Yes'
                }, {
                    value: false,
                    option: 'No'
                }]
            }
        }, { // goal
            component: filterNumberRange,
            data: {
                label: 'Goal among',
                first: filterVM.goal.gte,
                last: filterVM.goal.lte
            }
        }, { // progress
            component: filterNumberRange,
            data: {
                label: 'Progress % between',
                first: filterVM.progress.gte,
                last: filterVM.progress.lte
            }
        }, { // updated at
            component: filterDateRange,
            data: {
                label: 'Updated between',
                first: filterVM.updated_at.gte,
                last: filterVM.updated_at.lte
            }
        }, { // expires_at
            component: filterDateRange,
            data: {
                label: 'Expires between',
                first: filterVM.project_expires_at.gte,
                last: filterVM.project_expires_at.lte
            }
        }, { // created_at
            component: filterDateRange,
            data: {
                label: 'Created between',
                first: filterVM.created_at.gte,
                last: filterVM.created_at.lte
            }
        }],
            loadCategories = function loadCategories() {
            return models.category.getPage(filters({}).order({
                name: 'asc'
            }).parameters()).then(function (data) {
                categories(data);
                var options = _$1.map(categories(), function (category) {
                    return { value: category.name, option: category.name };
                });
                options.unshift({ value: '', option: 'Any' });
                filterBuilder.unshift({ // category
                    component: filterDropdown,
                    data: {
                        label: 'Category',
                        index: 'category',
                        name: 'category_name',
                        vm: filterVM.category_name,
                        options: options
                    }
                });
            });
        },
            submit = function submit() {
            listVM.firstPage(filterVM.parameters()).then(null, function (serverError) {
                error(serverError.message);
            });
            return false;
        };

        loadCategories();

        return {
            filterVM: filterVM,
            filterBuilder: filterBuilder,
            listVM: {
                list: listVM,
                error: error
            },
            submit: submit
        };
    },
    view: function view(ctrl) {
        var label = 'Projects';

        return m('', [m.component(adminFilter, {
            form: ctrl.filterVM.formDescriber,
            filterBuilder: ctrl.filterBuilder,
            label: label,
            submit: ctrl.submit
        }), m.component(adminList, {
            vm: ctrl.listVM,
            filterVM: ctrl.filterVM,
            label: label,
            listItem: adminProjectItem,
            listDetail: adminProjectDetail
        })]);
    }
};

var contributionListVM = postgrest.paginationVM(models.contributionDetail, 'id.desc', { Prefer: 'count=exact' });

var vm$4 = postgrest$1.filtersVM({
    full_text_index: '@@',
    delivery_status: 'eq',
    state: 'eq',
    gateway: 'eq',
    value: 'between',
    created_at: 'between'
});
var paramToString$2 = function paramToString(p) {
    return (p || '').toString().trim();
};

// Set default values
vm$4.state('');
vm$4.delivery_status('');
vm$4.gateway('');
vm$4.order({
    id: 'desc'
});

vm$4.created_at.lte.toFilter = function () {
    var filter = paramToString$2(vm$4.created_at.lte());
    return filter && h.momentFromString(filter).endOf('day').format('');
};

vm$4.created_at.gte.toFilter = function () {
    var filter = paramToString$2(vm$4.created_at.gte());
    return filter && h.momentFromString(filter).format();
};

vm$4.full_text_index.toFilter = function () {
    var filter = paramToString$2(vm$4.full_text_index());
    return filter && replaceDiacritics(filter) || undefined;
};

var adminProject = {
    view: function view(ctrl, args) {
        var project = args.item;
        return m('.w-row.admin-project', [m('.w-col.w-col-3.w-col-small-3.u-marginbottom-10', [m('img.thumb-project.u-radius[src=' + project.project_img + '][width=50]')]), m('.w-col.w-col-9.w-col-small-9', [m('.fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10', [m('a.alt-link[target="_blank"][href="/' + project.permalink + '"]', project.project_name)]), m('.fontsize-smallest.fontweight-semibold', project.project_state), m('.fontsize-smallest.fontcolor-secondary', h.momentify(project.project_online_date) + ' the ' + h.momentify(project.project_expires_at))])]);
    }
};

var adminContribution = {
    view: function view(ctrl, args) {
        var contribution = args.item;
        return m('.w-row.admin-contribution', [m('.fontweight-semibold.lineheight-tighter.u-marginbottom-10.fontsize-small', 'US$' + contribution.value), m('.fontsize-smallest.fontcolor-secondary', h.momentify(contribution.created_at, 'DD/MM/YYYY HH:mm[h]')), m('.fontsize-smallest', ['Gateway ID: ', m('a.alt-link[target="_blank"][href="https://dashboard.pagar.me/#/transactions/' + contribution.gateway_id + '"]', contribution.gateway_id)])]);
    }
};

/**
 * window.c.AdminContributionUser component
 * An itembuilder component that returns additional data
 * to be included in AdminUser.
 *
 * Example:
 * controller: function() {
 *     return {
 *         itemBuilder: [{
 *             component: 'AdminContributionUser',
 *             wrapperClass: '.w-col.w-col-4'
 *         }]
 *     }
 * }
 */
var adminContributionUser = {
    view: function view(ctrl, args) {
        var item = args.item,
            user = {
            profile_img_thumbnail: item.user_profile_img,
            id: item.user_id,
            name: item.user_name,
            email: item.email
        };

        var additionalData = m('.fontsize-smallest.fontcolor-secondary', 'Gateway: ' + item.payer_email);
        return m.component(adminUser, { item: user, additional_data: additionalData });
    }
};

// Add translations to payment state.
var I18nScope$2 = _$1.partial(h.i18nScope, 'projects.payment');

var paymentStatus = {
    controller: function controller(args) {
        var payment = args.item;
        var card = null,
            displayPaymentMethod = void 0,
            paymentMethodClass = void 0,
            stateClass = void 0;

        card = function card() {
            if (payment.gateway_data) {
                switch (payment.gateway.toLowerCase()) {
                    case 'moip':
                        return {
                            first_digits: payment.gateway_data.cartao_bin,
                            last_digits: payment.gateway_data.cartao_final,
                            brand: payment.gateway_data.cartao_bandeira
                        };
                    case 'pagarme':
                        return {
                            first_digits: payment.gateway_data.card_first_digits,
                            last_digits: payment.gateway_data.card_last_digits,
                            brand: payment.gateway_data.card_brand
                        };
                }
            }
        };

        displayPaymentMethod = function displayPaymentMethod() {
            switch (payment.payment_method.toLowerCase()) {
                case 'Bankslip':
                    return m('span#boleto-detail', '');
                case 'creditcard':
                    var cardData = card();
                    if (cardData) {
                        return m('#creditcard-detail.fontsize-smallest.fontcolor-secondary.lineheight-tight', [cardData.first_digits + '******' + cardData.last_digits, m('br'), cardData.brand + ' ' + payment.installments + 'x']);
                    }
                    return '';
            }
        };

        paymentMethodClass = function paymentMethodClass() {
            switch (payment.payment_method.toLowerCase()) {
                case 'Bankslip':
                    return '.fa-barcode';
                case 'creditcard':
                    return '.fa-credit-card';
                default:
                    return '.fa-question';
            }
        };

        stateClass = function stateClass() {
            switch (payment.state) {
                case 'paid':
                    return '.text-success';
                case 'refunded':
                    return '.text-refunded';
                case 'pending':
                case 'pending_refund':
                    return '.text-waiting';
                default:
                    return '.text-error';
            }
        };

        return {
            displayPaymentMethod: displayPaymentMethod,
            paymentMethodClass: paymentMethodClass,
            stateClass: stateClass
        };
    },
    view: function view(ctrl, args) {
        var payment = args.item;

        return m('.w-row.payment-status', [m('.fontsize-smallest.lineheight-looser.fontweight-semibold', [m('span.fa.fa-circle' + ctrl.stateClass()), '\xA0' + I18n$1.t(payment.state, I18nScope$2())]), m('.fontsize-smallest.fontweight-semibold', [m('span.fa' + ctrl.paymentMethodClass()), ' ', m('a.link-hidden[href="#"]', payment.payment_method)]), m('.fontsize-smallest.fontcolor-secondary.lineheight-tight', [ctrl.displayPaymentMethod()])]);
    }
};

var adminContributionItem = {
    controller: function controller() {
        return {
            itemBuilder: [{
                component: adminContributionUser,
                wrapperClass: '.w-col.w-col-4'
            }, {
                component: adminProject,
                wrapperClass: '.w-col.w-col-4'
            }, {
                component: adminContribution,
                wrapperClass: '.w-col.w-col-2'
            }, {
                component: paymentStatus,
                wrapperClass: '.w-col.w-col-2'
            }]
        };
    },
    view: function view(ctrl, args) {
        return m('.w-row', _.map(ctrl.itemBuilder, function (panel) {
            return m(panel.wrapperClass, [m.component(panel.component, {
                item: args.item,
                key: args.key
            })]);
        }));
    }
};

var adminTransaction = {
    view: function view(ctrl, args) {
        var contribution = args.contribution;
        return m('.w-col.w-col-4', [m('.fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20', 'Support Details'), m('.fontsize-smallest.lineheight-looser', ['Amount: US$' + h.formatNumber(contribution.value, 2, 3), m('br'), 'Fee: US$' + h.formatNumber(contribution.gateway_fee, 2, 3), m('br'), 'Waiting confirmation: ' + (contribution.waiting_payment ? 'Yes' : 'No'), m('br'), 'Anonymous: ' + (contribution.anonymous ? 'Yes' : 'No'), m('br'), 'Payment ID: ' + contribution.gateway_id, m('br'), 'Support: ' + contribution.contribution_id, m('br'), 'Key: \n', m('br'), contribution.key, m('br'), 'Method: ' + contribution.gateway, m('br'), 'Operator: ' + (contribution.gateway_data && contribution.gateway_data.acquirer_name), m('br'), contribution.is_second_slip ? [m('a.link-hidden[href="#"]', 'Bank slip'), ' ', m('span.badge', '2nd route')] : ''])]);
    }
};

var adminTransactionHistory = {
    controller: function controller(args) {
        var contribution = args.contribution,
            mapEvents = _$1.reduce([{
            date: contribution.paid_at,
            name: 'Support confirmed'
        }, {
            date: contribution.pending_refund_at,
            name: 'Refund Requested'
        }, {
            date: contribution.refunded_at,
            name: 'Refund made'
        }, {
            date: contribution.created_at,
            name: 'Support created'
        }, {
            date: contribution.refused_at,
            name: 'Support cancelled'
        }, {
            date: contribution.deleted_at,
            name: 'Support deleted'
        }, {
            date: contribution.chargeback_at,
            name: 'Chargeback'
        }], function (memo, item) {
            if (item.date !== null && item.date !== undefined) {
                item.originalDate = item.date;
                item.date = h.momentify(item.date, 'DD/MM/YYYY, HH:mm');
                return memo.concat(item);
            }

            return memo;
        }, []);

        return {
            orderedEvents: _$1.sortBy(mapEvents, 'originalDate')
        };
    },
    view: function view(ctrl) {
        return m('.w-col.w-col-4', [m('.fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20', 'Transaction history'), ctrl.orderedEvents.map(function (cEvent) {
            return m('.w-row.fontsize-smallest.lineheight-looser.date-event', [m('.w-col.w-col-6', [m('.fontcolor-secondary', cEvent.date)]), m('.w-col.w-col-6', [m('div', cEvent.name)])]);
        })]);
    }
};

var adminReward = {
    controller: function controller(args) {
        var l = void 0;
        var loadShippingFee = function loadShippingFee() {
            var shippingFee = m.prop({});

            if (args.contribution.shipping_fee_id) {
                var options = models.shippingFee.getRowOptions(h.idVM.id(args.contribution.shipping_fee_id).parameters());

                l = postgrest$1.loaderWithToken(options);
                l.load().then(_.compose(shippingFee, _.first));
            }

            return shippingFee;
        };

        return {
            shippingFee: loadShippingFee()
        };
    },
    view: function view(ctrl, args) {
        var reward = args.reward(),
            contribution = args.contribution,
            available = parseInt(reward.paid_count) + parseInt(reward.waiting_payment_count),
            shippingFee = ctrl.shippingFee();

        return m('.w-col.w-col-4', [m('.fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20', 'Reward'), m('.fontsize-smallest.lineheight-looser', reward.id ? ['ID: ' + reward.id, m('br'), 'Delivery Address: ' + (shippingFee.destination ? shippingFee.destination + ' US$ ' + shippingFee.value : 'Free'), m('br'), 'Send: ' + I18n.t('shared.shipping_options.' + reward.shipping_options), m('br'), 'Minimum Amount: US$' + h.formatNumber(reward.minimum_value, 2, 3), m('br'), m.trust('Available: ' + available + ' / ' + (reward.maximum_contributions || '&infin;')), m('br'), 'Waiting confirmation: ' + reward.waiting_payment_count, m('br'), 'Estimated Delivery: ' + h.momentify(reward.deliver_at), m('br'), m('div', ['Delivery Status: ', h.contributionStatusBadge(contribution)]), reward.title ? ['Title: ' + reward.title, m('br')] : '', 'Description: ' + reward.description] : 'Support without reward')]);
    }
};

var adminContributionDetail = {
    controller: function controller(args) {
        var l = void 0;
        var loadReward = function loadReward() {
            var model = models.rewardDetail,
                reward_id = args.item.reward_id,
                opts = model.getRowOptions(h.idVM.id(reward_id).parameters()),
                reward = m.prop({});

            l = postgrest$1.loaderWithToken(opts);

            if (reward_id) {
                l.load().then(_$1.compose(reward, _$1.first));
            }

            return reward;
        };

        return {
            reward: loadReward(),
            actions: {
                transfer: {
                    property: 'user_id',
                    updateKey: 'id',
                    callToAction: 'Transfer',
                    innerLabel: 'ID of new supporter:',
                    outerLabel: 'Transfer Support',
                    placeholder: 'ex: 129908',
                    successMessage: 'Support transferred successfully!',
                    errorMessage: 'Support has not been transferred!',
                    model: models.contributionDetail
                },
                reward: {
                    getKey: 'project_id',
                    updateKey: 'contribution_id',
                    selectKey: 'reward_id',
                    radios: 'rewards',
                    callToAction: 'Change Reward',
                    outerLabel: 'Reward',
                    getModel: models.rewardDetail,
                    updateModel: models.contributionDetail,
                    selectedItem: loadReward(),
                    addEmpty: { id: -1, minimum_value: 10, description: 'No reward' },
                    validate: function validate(rewards, newRewardID) {
                        var reward = _$1.findWhere(rewards, { id: newRewardID });
                        return args.item.value >= reward.minimum_value ? undefined : 'Minimum reward amount is greater than contribution amount.';
                    }
                },
                refund: {
                    updateKey: 'id',
                    callToAction: 'Direct refund',
                    innerLabel: 'Are you sure you want to refund this support?',
                    outerLabel: 'Refund Support',
                    model: models.contributionDetail
                },
                remove: {
                    property: 'state',
                    updateKey: 'id',
                    callToAction: 'Delete',
                    innerLabel: 'Are you sure you want to delete this support?',
                    outerLabel: 'Delete Support',
                    forceValue: 'deleted',
                    successMessage: 'Support successfully removed!',
                    errorMessage: 'Support not removed!',
                    model: models.contributionDetail
                }
            },
            l: l
        };
    },
    view: function view(ctrl, args) {
        var actions = ctrl.actions,
            item = args.item,
            reward = ctrl.reward,
            addOptions = function addOptions(builder, id) {
            return _$1.extend({}, builder, {
                requestOptions: {
                    url: '/admin/contributions/' + id + '/gateway_refund',
                    method: 'PUT'
                }
            });
        };

        return m('#admin-contribution-detail-box', [m('.divider.u-margintop-20.u-marginbottom-20'), m('.w-row.u-marginbottom-30', [m.component(adminInputAction, {
            data: actions.transfer,
            item: item
        }), ctrl.l() ? h.loader : m.component(adminRadioAction, {
            data: actions.reward,
            item: reward,
            getKeyValue: item.project_id,
            updateKeyValue: item.contribution_id
        }), m.component(adminExternalAction, {
            data: addOptions(actions.refund, item.id),
            item: item
        }), m.component(adminInputAction, {
            data: actions.remove,
            item: item
        })]), m('.w-row.card.card-terciary.u-radius', [m.component(adminTransaction, {
            contribution: item
        }), m.component(adminTransactionHistory, {
            contribution: item
        }), ctrl.l() ? h.loader : m.component(adminReward, {
            reward: reward,
            contribution: item,
            key: item.key
        })])]);
    }
};

var adminContributions = {
    controller: function controller() {
        var listVM = contributionListVM,
            filterVM = vm$4,
            error = m.prop(''),
            filterBuilder = [{ // full_text_index
            component: filterMain,
            data: {
                vm: filterVM.full_text_index,
                placeholder: 'Search by Design, Email, User and Support IDs...'
            }
        }, { // delivery_status
            component: filterDropdown,
            data: {
                label: 'Delivery status',
                name: 'delivery_status',
                vm: filterVM.delivery_status,
                options: [{
                    value: '',
                    option: 'Any'
                }, {
                    value: 'delivered',
                    option: 'delivered'
                }, {
                    value: 'undelivered',
                    option: 'undelivered'
                }, {
                    value: 'error',
                    option: 'error'
                }, {
                    value: 'received',
                    option: 'received'
                }]
            }
        }, { // state
            component: filterDropdown,
            data: {
                label: 'With the status',
                name: 'state',
                vm: filterVM.state,
                options: [{
                    value: '',
                    option: 'Any'
                }, {
                    value: 'paid',
                    option: 'paid'
                }, {
                    value: 'refused',
                    option: 'refused'
                }, {
                    value: 'pending',
                    option: 'pending'
                }, {
                    value: 'pending_refund',
                    option: 'pending_refund'
                }, {
                    value: 'refunded',
                    option: 'refunded'
                }, {
                    value: 'chargeback',
                    option: 'chargeback'
                }, {
                    value: 'deleted',
                    option: 'deleted'
                }]
            }
        }, { // gateway
            component: filterDropdown,
            data: {
                label: 'gateway',
                name: 'gateway',
                vm: filterVM.gateway,
                options: [{
                    value: '',
                    option: 'Any'
                }, {
                    value: 'Pagarme',
                    option: 'Pagarme'
                }, {
                    value: 'MoIP',
                    option: 'MoIP'
                }, {
                    value: 'PayPal',
                    option: 'PayPal'
                }, {
                    value: 'Credits',
                    option: 'Credits'
                }]
            }
        }, { // value
            component: filterNumberRange,
            data: {
                label: 'Amount between',
                first: filterVM.value.gte,
                last: filterVM.value.lte
            }
        }, { // created_at
            component: filterDateRange,
            data: {
                label: 'Support period',
                first: filterVM.created_at.gte,
                last: filterVM.created_at.lte
            }
        }],
            submit = function submit() {
            error(false);
            listVM.firstPage(filterVM.parameters()).then(null, function (serverError) {
                error(serverError.message);
            });
            return false;
        };

        return {
            filterVM: filterVM,
            filterBuilder: filterBuilder,
            listVM: {
                list: listVM,
                error: error
            },
            data: {
                label: 'Support'
            },
            submit: submit
        };
    },
    view: function view(ctrl) {
        return m('#admin-root-contributions', [m.component(adminFilter, {
            form: ctrl.filterVM.formDescriber,
            filterBuilder: ctrl.filterBuilder,
            submit: ctrl.submit
        }), m.component(adminList, {
            vm: ctrl.listVM,
            listItem: adminContributionItem,
            listDetail: adminContributionDetail
        })]);
    }
};

var balanceTransferListVM = postgrest.paginationVM(models.balanceTransfer, 'created_at.asc', { Prefer: 'count=exact' });

var vm$5 = postgrest$1.filtersVM({
    full_text_index: '@@',
    state: 'eq',
    transfer_id: 'eq',
    created_date: 'between',
    transferred_date: 'between',
    amount: 'between'
});

var paramToString$3 = function paramToString(p) {
    return (p || '').toString().trim();
};

vm$5.state('');
vm$5.transfer_id('');

vm$5.created_date.lte.toFilter = function () {
    var filter = paramToString$3(vm$5.created_date.lte());
    return filter && h.momentFromString(filter).endOf('day').format('');
};

vm$5.created_date.gte.toFilter = function () {
    var filter = paramToString$3(vm$5.created_date.gte());
    return filter && h.momentFromString(filter).endOf('day').format('');
};

vm$5.transferred_date.lte.toFilter = function () {
    var filter = paramToString$3(vm$5.transferred_date.lte());
    return filter && h.momentFromString(filter).endOf('day').format('');
};

vm$5.transferred_date.gte.toFilter = function () {
    var filter = paramToString$3(vm$5.transferred_date.gte());
    return filter && h.momentFromString(filter).endOf('day').format('');
};

vm$5.getAllBalanceTransfers = function (filterVM) {
    models.balanceTransfer.pageSize(false);
    var allTransfers = postgrest$1.loaderWithToken(models.balanceTransfer.getPageOptions(filterVM.parameters())).load();
    models.balanceTransfer.pageSize(9);
    return allTransfers;
};

/**
 * window.c.ModalBox component
 * Buils the template for using modal
 *
 * Example:
 * m.component(c.ModalBox, {
 *     displayModal: tooglePropObject,
 *     content: ['ComponentName', {argx: 'x', argy: 'y'}]
 * })
 * ComponentName structure =>  m('div', [
 *                  m('.modal-dialog-header', []),
 *                  m('.modal-dialog-content', []),
 *                  m('.modal-dialog-nav-bottom', []),
 *              ])
 */
var modalBox = {
    view: function view(ctrl, args) {
        return m('.modal-backdrop', [m('.modal-dialog-outer', [m('.modal-dialog-inner.modal-dialog-small', [m('a.w-inline-block.fa.fa-lg.modal-close' + (args.hideCloseButton ? '' : '.fa-close') + '[href="javascript:void(0);"]', {
            onclick: args.displayModal.toggle
        }), m.component(args.content[0], args.content[1])])])]);
    }
};

var adminBalanceTransferItem = {
    view: function view(ctrl, args) {
        var item = args.item;
        return m('.w-row', [m('.w-col.w-col-1.w-col-tiny-1', [m('.w-checkbox.w-clearfix', [m('input.w-checkbox-input[type=\'checkbox\']', {
            disabled: item.state != 'pending',
            checked: args.listWrapper.isSelected(item.id),
            onchange: function onchange(event) {
                if (event.currentTarget.checked) {
                    args.listWrapper.selectItem(item);
                } else {
                    args.listWrapper.unSelectItem(item);
                }
            }
        })])]), m('.w-col.w-col-3', [m('.fontsize-smaller.fontweight-semibold.lineheight-tighter', ['' + item.user_name, m('span.fontcolor-secondary.fontsize-smallest', '(' + item.user_public_name + ')')]), m('.fontcolor-secondary.fontsize-smallest', item.user_email), m('.fontcolor-secondary.fontsize-smallest', 'USER_ID: ' + item.user_id)]), m('.w-col.w-col-2', [m('span.fontsize-small', 'US$ ' + h.formatNumber(item.amount, 2, 3))]), m('.w-col.w-col-2.w-hidden-small.w-hidden-tiny', [m('span', item.state), item.transfer_id ? m('.fontcolor-secondary.fontsize-smallest', m('a[href="https://dashboard.pagar.me/#/transfers/' + item.transfer_id + '"]', 'ID: ' + item.transfer_id)) : '']), m('.w-col.w-col-2', [m('.fontsize-smallest', ['Solicitado em: ', m('span.fontsize-small.lineheight-tightest', h.momentify(item.created_at)), m('br'), m('span.fontsize-smallest.lineheight-tightest', '(' + h.momentify(item.transfer_limit_date) + ')')])]), m('.w-col.w-col-2', [m('.fontsize-smallest', ['Confirmado em: ', item.transferred_at ? m('span.fontsize-small.lineheight-tightest', h.momentify(item.transferred_at)) : ''])])]);
    }
};

var popNotification = {
    controller: function controller(args) {
        var displayNotification = args.toggleOpt || h.toggleProp(true, false),
            setPopTimeout = function setPopTimeout() {
            setTimeout(function () {
                displayNotification(false);m.redraw();
            }, 3000);
        };
        return {
            displayNotification: displayNotification,
            setPopTimeout: setPopTimeout
        };
    },
    view: function view(ctrl, args) {
        return ctrl.displayNotification() ? m('.flash.w-clearfix.card.card-notification.u-radius.zindex-20', {
            config: ctrl.setPopTimeout,
            class: args.error ? 'card-error' : ''
        }, [m('img.icon-close[src="/assets/catarse_bootstrap/x.png"][width="12"][alt="close"]', {
            onclick: ctrl.displayNotification.toggle
        }), m('.fontsize-small', m.trust(args.message))]) : m('span');
    }
};

var I18nScope$3 = _$1.partial(h.i18nScope, 'admin.balance_transfers');

var adminBalanceTransferItemDetail = {
    controller: function controller(args) {
        var userBankAccount = m.prop(null),
            showPopNotification = m.prop(false),
            popNotificationAttributes = m.prop({}),
            metadata = args.item.last_transition_metadata || { transfer_data: {} },
            transferData = metadata.transfer_data || {},
            metaBank = transferData.bank_account,
            userBalance = m.prop({}),
            transitionBankAccount = m.prop({}),
            fields = {
            admin_notes: m.prop(args.item.admin_notes)
        },
            loadingNotes = m.prop(false),
            submitNotes = function submitNotes() {
            loadingNotes(true);
            m.request({
                method: 'PUT',
                url: '/admin/balance_transfers/' + args.item.id,
                data: {
                    balance_transfer: {
                        admin_notes: fields.admin_notes()
                    }
                },
                config: h.setCsrfToken
            }).then(function (data) {
                showPopNotification(true);
                popNotificationAttributes({
                    message: I18n$1.t('admin_notes.success_update', I18nScope$3()),
                    toggleOpt: showPopNotification
                });
                loadingNotes(false);
            }, function (err) {
                showPopNotification(true);
                popNotificationAttributes({
                    message: I18n$1.t('admin_notes.failed_update', I18nScope$3()),
                    error: true,
                    toggleOpt: showPopNotification
                });
                loadingNotes(false);
            });
        };

        if (!_$1.isUndefined(metaBank)) {
            if (metaBank.conta) {
                transitionBankAccount({
                    account: metaBank.conta,
                    account_digit: metaBank.conta_dv,
                    account_type: null,
                    agency: metaBank.agencia,
                    agency_digit: metaBank.agencia_dv,
                    bank_code: metaBank.bank_code,
                    bank_name: null,
                    owner_document: metaBank.document_number,
                    owner_name: metaBank.legal_name
                });
            } else {
                transitionBankAccount(metaBank);
            }
        }

        userVM.getUserBankAccount(args.item.user_id).then(_$1.compose(userBankAccount, _$1.first));

        return {
            metaBank: metaBank,
            userBankAccount: userBankAccount,
            transitionBankAccount: transitionBankAccount,
            userBalance: userBalance,
            fields: fields,
            submitNotes: submitNotes,
            loadingNotes: loadingNotes,
            showPopNotification: showPopNotification,
            popNotificationAttributes: popNotificationAttributes
        };
    },
    view: function view(ctrl, args) {
        var bankAccount = _$1.isUndefined(ctrl.metaBank) ? ctrl.userBankAccount() : ctrl.transitionBankAccount();

        return m('#admin-balance-transfer-item-detail-box', [m('.divider.u-margintop-20.u-marginbottom-20'), m('.w-row.card.card-terciary.u-radius', [m('.w-col.w-col-4', [bankAccount ? [m('.fontsize-smaller.fontweight-semibold.lineheight-tighter.u-marginbottom-20', 'Bank Details'), m('.fontsize-smallest.lineheight-looser', [m('span.fontweight-semibold', 'Bank:'), bankAccount.bank_code + ' - ' + (bankAccount.bank_name ? bankAccount.bank_name : ''), m('br'), m('span.fontweight-semibold', 'Agency:'), ' ' + bankAccount.agency + ' - ' + (bankAccount.agency_digit ? bankAccount.agency_digit : ''), m('br'), m('span.fontweight-semibold', "Account:"), ' ' + bankAccount.account + ' - ' + (bankAccount.account_digit ? bankAccount.account_digit : ''), m('br'), m('span.fontweight-semibold', 'Name:'), bankAccount.owner_name, m('br'), m('span.fontweight-semibold', 'CPF:'), bankAccount.owner_document])] : h.loader(), ctrl.loadingNotes() ? h.loader() : m('', [m('textarea.text-field.height-mini.w-input', {
            value: ctrl.fields.admin_notes(),
            onkeyup: m.withAttr('value', ctrl.fields.admin_notes)
        }), m('.u-text-center', m('button.btn.btn-terciary', {
            onclick: ctrl.submitNotes
        }, I18n$1.t('shared.save_text'))), ctrl.showPopNotification() ? m(popNotification, ctrl.popNotificationAttributes()) : ''])]), m(adminUserBalanceTransactionsList, { user_id: args.item.user_id })])]);
    }
};

var adminBalanceTranfers = {
    controller: function controller(args) {
        var listVM = balanceTransferListVM,
            filterVM = vm$5,
            error = m.prop(''),
            selectedAny = m.prop(false),
            filterBuilder = [{
            component: filterMain,
            data: {
                vm: filterVM.full_text_index,
                placeholder: 'Search for email, user IDs, transfer IDs, and balance events'
            }
        }, {
            component: filterDropdown,
            data: {
                label: 'Status',
                name: 'state',
                vm: filterVM.state,
                options: [{
                    value: '',
                    option: 'Any'
                }, {
                    value: 'pending',
                    option: 'Pending'
                }, {
                    value: 'authorized',
                    option: 'Authorized'
                }, {
                    value: 'processing',
                    option: 'Processing'
                }, {
                    value: 'transferred',
                    option: 'Completed'
                }, {
                    value: 'error',
                    option: 'Error'
                }, {
                    value: 'rejected',
                    option: 'Rejected'
                }, {
                    value: 'gateway_error',
                    option: 'Gateway Error'
                }]
            }
        }, {
            component: filterDateRange,
            data: {
                label: 'Request date',
                first: filterVM.created_date.gte,
                last: filterVM.created_date.lte
            }

        }, {
            component: filterDateRange,
            data: {
                label: 'Confirmed Date',
                first: filterVM.transferred_date.gte,
                last: filterVM.transferred_date.lte
            }

        }, {
            component: filterNumberRange,
            data: {
                label: 'Amount between',
                first: filterVM.amount.gte,
                last: filterVM.amount.lte
            }
        }],
            selectedItemsIDs = m.prop([]),
            displayApprovalModal = h.toggleProp(false, true),
            displayManualModal = h.toggleProp(false, true),
            displayRejectModal = h.toggleProp(false, true),
            selectAllLoading = m.prop(false),
            redrawProp = m.prop(false),
            actionMenuToggle = h.toggleProp(false, true),
            isSelected = function isSelected(item_id) {
            return _$1.find(selectedItemsIDs(), function (i) {
                return i.id == item_id;
            });
        },
            selectItem = function selectItem(item) {
            if (!_$1.find(selectedItemsIDs(), function (i) {
                return i.id == item.id;
            })) {
                selectedItemsIDs().push(item);
            }
            selectedAny(true);
        },
            unSelectItem = function unSelectItem(item) {
            var newIDs = _$1.reject(selectedItemsIDs(), function (i) {
                return i.id == item.id;
            });
            selectedItemsIDs(newIDs);
            if (_$1.isEmpty(newIDs)) {
                selectedAny(false);
            }
        },
            submit = function submit() {
            error(false);
            listVM.firstPage(filterVM.parameters()).then(null, function (serverError) {
                error(serverError.message);
            });

            return false;
        },
            generateWrapperModal = function generateWrapperModal(customAttrs) {
            var wrapper = {
                view: function view(ctrl, args) {
                    actionMenuToggle(false);
                    return m('', [m('.modal-dialog-header', [m('.fontsize-large.u-text-center', args.modalTitle)]), m('.modal-dialog-content', [m('.w-row.fontweight-semibold', [m('.w-col.w-col-6', 'Name'), m('.w-col.w-col-3', 'Amount'), m('.w-col.w-col-3', 'Requested at')]), _$1.map(selectedItemsIDs(), function (item, index) {
                        return m('.divider.fontsize-smallest.lineheight-looser', [m('.w-row', [m('.w-col.w-col-6', [m('span', item.user_name)]), m('.w-col.w-col-3', [m('span', 'US$ ' + h.formatNumber(item.amount, 2, 3))]), m('.w-col.w-col-3', [m('span', h.momentify(item.created_at))])])]);
                    }), m('.w-row.fontweight-semibold.divider', [m('.w-col.w-col-6', 'Total'), m('.w-col.w-col-3', 'US$ ' + h.formatNumber(_$1.reduce(selectedItemsIDs(), function (t, i) {
                        return t + i.amount;
                    }, 0), 2, 3)), m('.w-col.w-col-3')]), m('.w-row.u-margintop-40', [m('.w-col.w-col-1'), m('.w-col.w-col-5', m('a.btn.btn-medium.w-button', {
                        onclick: args.onClickCallback
                    }, args.ctaText)), m('.w-col.w-col-5', m('a.btn.btn-medium.btn-terciary.w-button', {
                        onclick: args.displayModal.toggle
                    }, 'Back')), m('.w-col.w-col-1')])])]);
                }
            };

            return [wrapper, customAttrs];
        },
            manualTransferSelectedIDs = function manualTransferSelectedIDs() {
            m.request({
                method: 'POST',
                url: '/admin/balance_transfers/batch_manual',
                data: {
                    transfer_ids: _$1.uniq(_$1.map(selectedItemsIDs(), function (s) {
                        return s.id;
                    }))
                },
                config: h.setCsrfToken
            }).then(function (data) {
                selectedItemsIDs([]);
                listVM.firstPage(filterVM.parameters());
                displayManualModal(false);
                m.redraw();
            });
        },
            approveSelectedIDs = function approveSelectedIDs() {
            m.request({
                method: 'POST',
                url: '/admin/balance_transfers/batch_approve',
                data: {
                    transfer_ids: _$1.uniq(_$1.map(selectedItemsIDs(), function (s) {
                        return s.id;
                    }))
                },
                config: h.setCsrfToken
            }).then(function (data) {
                selectedItemsIDs([]);
                listVM.firstPage(filterVM.parameters());
                displayApprovalModal(false);
                m.redraw();
            });
        },
            rejectSelectedIDs = function rejectSelectedIDs() {
            m.request({
                method: 'POST',
                url: '/admin/balance_transfers/batch_reject',
                data: {
                    transfer_ids: _$1.uniq(_$1.map(selectedItemsIDs(), function (s) {
                        return s.id;
                    }))
                },
                config: h.setCsrfToken
            }).then(function (data) {
                selectedItemsIDs([]);
                displayRejectModal(false);
                listVM.firstPage();
                m.redraw();
            });
        },
            unSelectAll = function unSelectAll() {
            selectedItemsIDs([]);
            selectedAny(false);
        },
            selectAll = function selectAll() {
            selectAllLoading(true);
            m.redraw();
            filterVM.getAllBalanceTransfers(filterVM).then(function (data) {
                _$1.map(_$1.where(data, { state: 'pending' }), selectItem);
                selectAllLoading(false);
                m.redraw();
            });
        },
            inputActions = function inputActions() {
            return m('', [m('button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button', { onclick: selectAll }, selectAllLoading() ? 'Loading...' : 'Select all'), selectedItemsIDs().length > 1 ? m('button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button', { onclick: unSelectAll }, 'Deselect All (' + selectedItemsIDs().length + ')') : '', selectedAny() ? m('.w-inline-block', [m('button.btn.btn-inline.btn-small.btn-terciary.w-button', {
                onclick: actionMenuToggle.toggle
            }, ['Mark as (' + selectedItemsIDs().length + ')']), actionMenuToggle() ? m('.card.dropdown-list.dropdown-list-medium.u-radius.zindex-10[id=\'transfer\']', [m('a.dropdown-link.fontsize-smaller[href=\'javascript:void(0);\']', {
                onclick: function onclick(event) {
                    return displayApprovalModal.toggle();
                }
            }, 'Approved'), m('a.dropdown-link.fontsize-smaller[href=\'javascript:void(0);\']', {
                onclick: function onclick(event) {
                    return displayManualModal.toggle();
                }
            }, 'Manual transfer'), m('a.dropdown-link.fontsize-smaller[href=\'javascript:void(0);\']', {
                onclick: function onclick(event) {
                    return displayRejectModal.toggle();
                }
            }, 'Refused')]) : '']) : '']);
        };

        return {
            displayApprovalModal: displayApprovalModal,
            displayRejectModal: displayRejectModal,
            displayManualModal: displayManualModal,
            generateWrapperModal: generateWrapperModal,
            approveSelectedIDs: approveSelectedIDs,
            manualTransferSelectedIDs: manualTransferSelectedIDs,
            rejectSelectedIDs: rejectSelectedIDs,
            filterVM: filterVM,
            filterBuilder: filterBuilder,
            listVM: {
                hasInputAction: true,
                inputActions: inputActions,
                list: listVM,
                selectedItemsIDs: selectedItemsIDs,
                selectItem: selectItem,
                unSelectItem: unSelectItem,
                selectedAny: selectedAny,
                isSelected: isSelected,
                redrawProp: redrawProp,
                error: error
            },
            data: {
                label: 'Requests for withdrawal'
            },
            submit: submit
        };
    },
    view: function view(ctrl, args) {
        return m('', [m(adminFilter, {
            filterBuilder: ctrl.filterBuilder,
            submit: ctrl.submit
        }), ctrl.displayApprovalModal() ? m(modalBox, {
            displayModal: ctrl.displayApprovalModal,
            content: ctrl.generateWrapperModal({
                modalTitle: 'Approve withdrawals',
                ctaText: 'Approve',
                displayModal: ctrl.displayApprovalModal,
                onClickCallback: ctrl.approveSelectedIDs
            })
        }) : '', ctrl.displayManualModal() ? m(modalBox, {
            displayModal: ctrl.displayManualModal,
            content: ctrl.generateWrapperModal({
                modalTitle: 'Manual transfer of withdrawals',
                ctaText: 'Approve',
                displayModal: ctrl.displayManualModal,
                onClickCallback: ctrl.manualTransferSelectedIDs
            })
        }) : '', ctrl.displayRejectModal() ? m(modalBox, {
            displayModal: ctrl.displayRejectModal,
            content: ctrl.generateWrapperModal({
                modalTitle: 'Reject withdrawals',
                ctaText: 'Reject',
                displayModal: ctrl.displayRejectModal,
                onClickCallback: ctrl.rejectSelectedIDs
            })
        }) : '', m(adminList, {
            vm: ctrl.listVM,
            listItem: adminBalanceTransferItem,
            listDetail: adminBalanceTransferItemDetail
        })]);
    }
};

/**
 * window.c.landingSignup component
 * A visual component that displays signup email typically used on landing pages.
 * It accepts a custom form action to attach to third-party services like Mailchimp
 *
 * Example:
 * view: () => {
 *      ...
 *      m.component(c.landingSignup, {
 *          builder: {
 *              customAction: 'http://formendpoint.com'
 *          }
 *      })
 *      ...
 *  }
 */
var landingSignup = {
    controller: function controller(args) {
        var builder = args.builder,
            email = m.prop(''),
            error = m.prop(false),
            submit = function submit() {
            if (h.validateEmail(email())) {
                return true;
            }
            error(true);
            return false;
        };
        return {
            email: email,
            submit: submit,
            error: error
        };
    },
    view: function view(ctrl, args) {
        var errorClasses = !ctrl.error ? '.positive.error' : '';
        return m('form.w-form[id="email-form"][method="post"][action="' + args.builder.customAction + '"]', {
            onsubmit: ctrl.submit
        }, [m('.w-col.w-col-5', [m('input' + errorClasses + '.w-input.text-field.medium[name="EMAIL"][placeholder="Type your e-mail"][type="text"]', {
            config: h.RDTracker('landing-flex'),
            onchange: m.withAttr('value', ctrl.email),
            value: ctrl.email()
        }), ctrl.error() ? m('span.fontsize-smaller.text-error', 'Invalid email') : '']), m('.w-col.w-col-3', [m('input.w-button.btn.btn-large[type="submit"][value="Register"]')])]);
    }
};

var projectFriends = {
    controller: function controller(args) {
        var project = args.project,
            friendsSample = m.prop([]),
            listVM = postgrest$1.paginationVM(models.contributor, 'user_id.desc', {
            Prefer: 'count=exact'
        }),
            filterVM = postgrest$1.filtersVM({
            project_id: 'eq',
            is_follow: 'eq'
        }).project_id(project.project_id).is_follow(true);

        if (!listVM.collection().length) {
            listVM.firstPage(filterVM.parameters()).then(function () {
                friendsSample(_$1.sample(listVM.collection(), 2));
            });
        }
        return {
            project: project,
            listVM: listVM,
            friendsSample: friendsSample
        };
    },
    view: function view(ctrl, args) {
        var project = ctrl.project,
            friendsCount = ctrl.listVM.collection().length,
            wrapper = args.wrapper || '.friend-backed-card';

        return m(wrapper, [m('.friend-facepile', [_$1.map(ctrl.friendsSample(), function (user) {
            var profile_img = _$1.isEmpty(user.data.profile_img_thumbnail) ? '/assets/catarse_bootstrap/user.jpg' : user.data.profile_img_thumbnail;
            return m('img.user-avatar[src=\'' + profile_img + '\']');
        })]), m('p.fontsize-smallest.friend-namepile.lineheight-tighter', [m('span.fontweight-semibold', _$1.map(ctrl.friendsSample(), function (user) {
            return user.data.name.split(' ')[0];
        }).join(friendsCount > 2 ? ', ' : ' e ')), friendsCount > 2 ? [' e ', m('span.fontweight-semibold', 'more ' + (friendsCount - ctrl.friendsSample().length))] : '', friendsCount > 1 ? ' supported' : ' supported'])]);
    }
};

var I18nScope$4 = _$1.partial(h.i18nScope, 'projects.card');
var projectCard = {
    controller: function controller(args) {
        var project = args.project,
            progress = project.progress.toFixed(2),
            remainingTextObj = h.translatedTime(project.remaining_time),
            elapsedTextObj = h.translatedTime(project.elapsed_time),
            type = args.type || 'small';

        var css = function css() {
            var cssClasses = {
                small: {
                    wrapper: '.w-col.w-col-4',
                    innerWrapper: '.card-project.card.u-radius',
                    thumb: '.card-project-thumb',
                    descriptionWrapper: '',
                    description: '.card-project-description.alt',
                    title: '.fontweight-semibold.u-text-center-small-only.lineheight-tight.u-marginbottom-10.fontsize-base',
                    author: '.w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20',
                    headline: '.w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller',
                    city: '.w-hidden-small.w-hidden-tiny.card-project-author.altt'
                },
                medium: {
                    wrapper: '.w-col.w-col-6',
                    innerWrapper: '.card-project.card.u-radius',
                    thumb: '.card-project-thumb.medium',
                    descriptionWrapper: '',
                    description: '.card-project-description.alt',
                    title: '.fontsize-large.fontweight-semibold.u-marginbottom-10',
                    author: '.w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20',
                    headline: '.w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller',
                    city: '.w-hidden-small.w-hidden-tiny.card-project-author.altt'
                },
                big: {
                    wrapper: '.card.u-radius.card-project',
                    innerWrapper: '.w-row',
                    thumb: '.w-col.w-col-8.w-col-medium-6.card-project-thumb.big',
                    descriptionWrapper: '.w-col.w-col-4.w-col-medium-6',
                    description: '.card-project-description.big',
                    title: '.fontsize-large.fontweight-semibold.u-marginbottom-10',
                    author: '.fontsize-smallest.fontcolor-secondary.u-marginbottom-20',
                    headline: '.fontcolor-secondary.fontsize-smaller',
                    city: '.w-hidden'
                }
            };

            return cssClasses[type];
        };

        var isFinished = function isFinished(project) {
            return _$1.contains(['successful', 'failed', 'waiting_funds'], project.state);
        };

        var cardCopy = function cardCopy(project) {
            if (project.expires_at) {
                return isFinished(project) ? [m('.fontsize-smaller.fontweight-loose', 'Closed'), m('.fontsize-smallest.lineheight-tightest', h.momentify(project.expires_at))] : [m('.fontsize-smaller.fontweight-semibold', remainingTextObj.total + ' ' + remainingTextObj.unit), m('.fontsize-smallest.lineheight-tightest', remainingTextObj.total > 1 ? 'Remaining' : 'Remaining')];
            }
            return [m('.fontsize-smallest.lineheight-tight', ['Remaining', m('br'), elapsedTextObj.total + ' ' + elapsedTextObj.unit])];
        };

        return {
            cardCopy: cardCopy,
            css: css,
            type: type,
            progress: progress,
            remainingTextObj: remainingTextObj,
            elapsedTextObj: elapsedTextObj,
            isFinished: isFinished
        };
    },
    view: function view(ctrl, args) {
        var project = args.project,
            projectOwnerName = project.user ? project.user.public_name || project.user.name : project.owner_public_name || project.owner_name,
            projectAddress = project.address ? project.address.city + ' - ' + project.address.state_acronym : project.city_name + ' - ' + project.state_acronym;

        return m(ctrl.css().wrapper, [m(ctrl.css().innerWrapper, [m('a' + ctrl.css().thumb + '[href="/' + project.permalink + '?ref=' + args.ref + '"]', {
            onclick: projectVM.routeToProject(project, args.ref),
            style: {
                'background-image': 'url(' + (project.project_img || project.large_image) + ')',
                display: 'block'
            }
        }), m(ctrl.css().descriptionWrapper, [m(ctrl.css().description, [m(ctrl.css().title, [m('a.link-hidden[href="/' + project.permalink + '?ref=' + args.ref + '"]', {
            onclick: projectVM.routeToProject(project, args.ref)
        }, project.project_name || project.name)]), m(ctrl.css().author, I18n$1.t('by', I18nScope$4()) + ' ' + projectOwnerName), m(ctrl.css().headline, [m('a.link-hidden[href="/' + project.permalink + '?ref=' + args.ref + '"]', {
            onclick: projectVM.routeToProject(project, args.ref)
        }, project.headline)])]), m(ctrl.css().city, [m('.fontsize-smallest.fontcolor-secondary', [m('span.fa.fa-fw.fa-map-marker.fa-1', ' '), projectAddress])]), m(progressMeter, { progress: ctrl.progress, project: project }), m('.card-project-stats', [m('.w-row', [m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4', [m('.fontsize-base.fontweight-semibold', Math.floor(project.progress) + '%')]), m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-center-small-only', [m('.fontsize-smaller.fontweight-semibold', 'US$ ' + h.formatNumber(project.pledged)), m('.fontsize-smallest.lineheight-tightest', 'Raised')]), m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-right', ctrl.cardCopy(project))])])]), args.showFriends && ctrl.type === 'big' ? m('.w-col.w-col-4.w-col-medium-6', [m.component(projectFriends, { project: project })]) : '']), args.showFriends && ctrl.type !== 'big' ? m.component(projectFriends, { project: project }) : '']);
    }
};

var projectRow = {
    view: function view(ctrl, args) {
        var collection = args.collection,
            title = args.title || collection.title,
            ref = args.ref,
            showFriends = args.showFriends,
            wrapper = args.wrapper || '.w-section.section.u-marginbottom-40';

        if (collection.loader() || collection.collection().length > 0) {
            return m(wrapper, [m('.w-container', [!_$1.isUndefined(collection.title) || !_$1.isUndefined(collection.hash) ? m('.w-row.u-marginbottom-30', [m(showFriends ? '.w-col.w-col-8.w-col-small-6.w-col-tiny-6' : '.w-col.w-col-10.w-col-small-6.w-col-tiny-6', [m('.fontsize-large.lineheight-looser', title)]), m(showFriends ? '.w-col.w-col-4.w-col-small-6.w-col-tiny-6' : '.w-col.w-col-2.w-col-small-6.w-col-tiny-6', [m('.w-row', [showFriends ? m('.w-col.w-col-6', [m('a.btn.btn-no-border.btn-small.btn-terciary[href="/connect-facebook?ref=' + ref + '"]', 'Find friends')]) : '', m(showFriends ? '.w-col.w-col-6' : '.w-col.w-col-12', m('a.btn.btn-small.btn-terciary[href="/explore?ref=' + ref + '&filter=' + collection.hash + '"]', {
                config: m.route
            }, 'See all'))])])]) : '', collection.loader() ? h.loader() : m('.w-row', _$1.map(collection.collection(), function (project) {
                return m.component(projectCard, {
                    project: project,
                    ref: ref,
                    showFriends: showFriends
                });
            }))])]);
        }
        return m('div');
    }
};

/**
 * window.c.landingQA component
 * A visual component that displays a question/answer box with toggle
 *
 * Example:
 * view: () => {
 *      ...
 *      m.component(c.landingQA, {
 *          question: 'Whats your name?',
 *          answer: 'Darth Vader.'
 *      })
 *      ...
 *  }
 */
var landingQA = {
    controller: function controller(args) {
        return {
            showAnswer: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        return m('.card.qa-card.u-marginbottom-20.u-radius.btn-terciary', [m('.fontsize-base', {
            onclick: function onclick() {
                ctrl.showAnswer.toggle();
                args.onclick && args.onclick();
            }
        }, args.question), ctrl.showAnswer() ? m('p.u-margintop-20.fontsize-small', m.trust(args.answer)) : '']);
    }
};

var Flex = {
    controller: function controller() {
        var stats = m.prop([]),
            projects = m.prop([]),
            l = m.prop(),
            sample3 = _.partial(_.sample, _, 3),
            builder = {
            customAction: 'http://fazum.catarse.me/obrigado-landing-catarse-flex'
        },
            addDisqus = function addDisqus(el, isInitialized) {
            if (!isInitialized) {
                h.discuss('https://catarse.me/flex', 'flex_page');
            }
        },
            flexVM = postgrest$1.filtersVM({
            mode: 'eq',
            state: 'eq',
            recommended: 'eq'
        }),
            statsLoader = postgrest$1.loaderWithToken(models.statistic.getRowOptions());

        flexVM.mode('flex').state('online').recommended(true);

        var projectsLoader = postgrest$1.loader(models.project.getPageOptions(flexVM.parameters()));

        statsLoader.load().then(stats);

        projectsLoader.load().then(_.compose(projects, sample3));

        return {
            addDisqus: addDisqus,
            builder: builder,
            statsLoader: statsLoader,
            stats: stats,
            projectsLoader: projectsLoader,
            projects: {
                loader: projectsLoader,
                collection: projects
            }
        };
    },
    view: function view(ctrl, args) {
        var stats = _.first(ctrl.stats());

        return [m('.w-section.hero-full.hero-zelo', [m('.w-container.u-text-center', [m('img.logo-flex-home[src=\'/assets/logo-flex.png\'][width=\'359\']'), m('.w-row', [m('.w-col.fontsize-large.u-marginbottom-60.w-col-push-2.w-col-8', 'Let us build a new mode of crowdfunding! Register your email and learn how to register your project in flex!')]), m('.w-row', [m('.w-col.w-col-2'), m.component(landingSignup, {
            builder: ctrl.builder
        }), m('.w-col.w-col-2')])])]), [m('.section', [m('.w-container', [m('.fontsize-largest.u-margintop-40.u-text-center', 'Who will it be for?'), m('.fontsize-base.u-text-center.u-marginbottom-60', 'We will start the testing phase with specific project categories'), m('div', [m('.w-row.u-marginbottom-60', [m('.w-col.w-col-6', [m('.u-text-center.u-marginbottom-20', [m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e393a01b66e250aca67cb_icon-zelo-com.png\'][width=\'210\']'), m('.fontsize-largest.lineheight-loose', 'Causes')]), m('p.fontsize-base', 'Flexibility for causes of impact! We will be open to campaigns of organizations or individuals for the collection of resources for personal causes, assistance projects, health, humanitarian aid, animal protection, socio-environmental entrepreneurship, or anything that unites people to do good.')]), m('.w-col.w-col-6', [m('.u-text-center.u-marginbottom-20', [m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e3929a0daea230a5f12cd_icon-zelo-pessoal.png\'][width=\'210\']'), m('.fontsize-largest.lineheight-loose', 'Aim')]), m('p.fontsize-base', 'Simple campaigns that need the flexibility to raise money with people close to you. We will be open to a variety of personal campaigns that can range from covering study costs to helping those in need of medical treatment. To collect the money to make that party to buy gifts for someone with the help of the community. ')])])])])]), m('.w-section.section.bg-greenlime.fontcolor-negative', [m('.w-container', [m('.fontsize-largest.u-margintop-40.u-marginbottom-60.u-text-center', 'How it will work?'), m('.w-row.u-marginbottom-40', [m('.w-col.w-col-6', [m('.u-text-center', [m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39c578b284493e2a428a_zelo-money.png\'][width=\'180\']')]), m('.fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold', 'Keep what you collect'), m('p.u-text-center.fontsize-base', 'Flex is the option campaigns where all money is available to withdraw! You get everything you raise.')]), m('.w-col.w-col-6', [m('.u-text-center', [m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39d37c013d4a3ee687d2_icon-reward.png\'][width=\'180\']')]), m('.fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold', 'No rewards required'), m('p.u-text-center.fontsize-base', 'No flex offering rewards is optional. You choose whether to offer them makes sense for your project and campaign.')])]), m('.w-row.u-marginbottom-40', [m('.w-col.w-col-6', [m('.u-text-center', [m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39fb01b66e250aca67e3_icon-curad.png\'][width=\'180\']')]), m('.fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold', 'Your project is your responsibility'), m('p.u-text-center.fontsize-base', 'All projects created in flex go online after approval. Quickly and with ease while you seek your supporters.')]), m('.w-col.w-col-6', [m('.u-text-center', [m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39e77c013d4a3ee687d4_icon-time.png\'][width=\'180\']')]), m('.fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold', 'End the campaign anytime'), m('p.u-text-center.fontsize-base', 'There are no time limit. You choose when you close your campaign and receive the amounts collected.')])])])]), m('.w-section.section', [m('.w-container', [m('.w-editable.fontsize-larger.u-margintop-40.u-margin-bottom-40.u-text-center', 'Meet some of the first flex projects'), ctrl.projectsLoader() ? h.loader() : m.component(projectRow, { collection: ctrl.projects, ref: 'ctrse_flex', wrapper: '.w-row.u-margintop-40' })])]), m('.w-section.divider'), m('.w-section.section', [m('.w-container', [m('.fontsize-larger.u-text-center.u-marginbottom-60.u-margintop-40', 'Doubts'), m('.w-row.u-marginbottom-60', [m('.w-col.w-col-6', [m.component(landingQA, {
            question: 'What are the flexible mode fees? ',
            answer: 'Like in OppoStarter, sending a project costs nothing! The fee charged on the OppoStarter flex service is 5% on the amount collected.'
        }), m.component(landingQA, {
            question: 'Where does the money donated to my project come from?',
            answer: 'Family, friends, fans and members of communities that you are part of are your greatest contributors. Project creators share their campaign to the people they know, and so the circle of supporters grows and the campaign gains strength.'
        }), m.component(landingQA, {
            question: 'What is the difference between the flexible and "all or nothing"?',
            answer: 'Currently OppoStarter only uses the "all or nothing" model, where you only get the money if you beat the collection goal within the term of the campaign. The flexible model is different because it allows the director to keep what he has collected, regardless of whether or not he reaches the project goal within the term of the campaign. There will be no time limit for campaigns. Our flexible system will be something new compared to the models that currently exist in the market.'
        })]), m('.w-col.w-col-6', [m.component(landingQA, {
            question: 'Can I register projects for the flexible mode?',
            answer: 'Yes. Register your email and learn how to register your project in flex.!'
        }), m.component(landingQA, {
            question: 'Why you want to do the OppoStarter flex?',
            answer: 'We believe that the crowdfunding environment still has room for many actions, tests and experiments to really understand what people need. We dream of making collective financing a habit around the world. OppoStarter flex is another step in this direction.'
        }), m.component(landingQA, {
            question: 'When will you launch the OppoStarter flex?',
            answer: 'We do not know when we will open flex for the general public, but you can register your email on this page and receive special material on how to sign up your project.'
        })])])])]), m('.w-section.section-large.u-text-center.bg-purple', [m('.w-container.fontcolor-negative', [m('.fontsize-largest', 'Submit your project!'), m('.fontsize-base.u-marginbottom-60', 'Register your email and learn how to register your project in flex!'), m('.w-row', [m('.w-col.w-col-2'), m.component(landingSignup, {
            builder: ctrl.builder
        }), m('.w-col.w-col-2')])])]), m('.w-section.section-one-column.bg-catarse-zelo.section-large[style="min-height: 50vh;"]', [m('.w-container.u-text-center', [m('.w-editable.u-marginbottom-40.fontsize-larger.lineheight-tight.fontcolor-negative', 'Flex is an experiment and initiative of OppoStarter.'), m('.w-row.u-text-center', ctrl.statsLoader() ? h.loader() : [m('.w-col.w-col-4', [m('.fontsize-jumbo.text-success.lineheight-loose', h.formatNumber(stats.total_contributors, 0, 3)), m('p.start-stats.fontsize-base.fontcolor-negative', 'People have already supported at least 01 project in OppoStarter')]), m('.w-col.w-col-4', [m('.fontsize-jumbo.text-success.lineheight-loose', h.formatNumber(stats.total_projects_success, 0, 3)), m('p.start-stats.fontsize-base.fontcolor-negative', 'Projects have already been funded in OppoStarter')]), m('.w-col.w-col-4', [m('.fontsize-jumbo.text-success.lineheight-loose', stats.total_contributed.toString().slice(0, 2) + ' Million'), m('p.start-stats.fontsize-base.fontcolor-negative', 'They invested in ideas published in OppoStarter')])])])]), m('.w-section.section.bg-blue-one.fontcolor-negative', [m('.w-container', [m('.fontsize-large.u-text-center.u-marginbottom-20', 'Recommend OppoStarter flex to friends! '), m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.w-row', [m('.w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle', [m('div', [m('img.icon-share-mobile[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/53a3f66e05eb6144171d8edb_facebook-xxl.png\']'), m('a.w-button.btn.btn-large.btn-fb[href="http://www.facebook.com/sharer/sharer.php?u=https://www.catarse.me/flex?ref=facebook&title=' + encodeURIComponent('Meet the new OppoStarter Flex!') + '"][target="_blank"]', 'Share')])]), m('.w-col.w-col-6.w-col-small-6.w-col-tiny-6', [m('div', [m('img.icon-share-mobile[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/53a3f65105eb6144171d8eda_twitter-256.png\']'), m('a.w-button.btn.btn-large.btn-tweet[href="https://twitter.com/intent/tweet?text=' + encodeURIComponent('Let us build a new mode of crowdfunding for OppoStarter! Join us, sign up for your email!') + 'https://www.catarse.me/flex?ref=twitter"][target="_blank"]', 'Twitter')])])])]), m('.w-col.w-col-2')])])]), m('.w-section.section-large.bg-greenlime', [m('.w-container', [m('#participe-do-debate.u-text-center', { config: h.toAnchor() }, [m('h1.fontsize-largest.fontcolor-negative', 'Build Flex with us'), m('.fontsize-base.u-marginbottom-60.fontcolor-negative', 'Start a conversation, ask, comment, critique and make suggestions!')]), m('#disqus_thread.card.u-radius[style="min-height: 50vh;"]', {
            config: ctrl.addDisqus
        })])])]];
    }
};

/**
 * window.c.Tooltip component
 * A component that allows you to show a tooltip on
 * a specified element hover. It receives the element you want
 * to trigger the tooltip and also the text to display as tooltip.
 *
 * Example of use:
 * view: () => {
 *     let tooltip = (el) => {
 *          return m.component(c.Tooltip, {
 *              el: el,
 *              text: 'text to tooltip',
 *              width: 300
 *          })
 *     }
 *
 *     return tooltip('a#link-wth-tooltip[href="#"]');
 *
 * }
 */
var tooltip = {
    controller: function controller(args) {
        var parentHeight = m.prop(0),
            width = m.prop(args.width || 280),
            top = m.prop(0),
            left = m.prop(0),
            opacity = m.prop(0),
            parentOffset = m.prop({ top: 0, left: 0 }),
            tooltip = h.toggleProp(0, 1),
            toggle = function toggle() {
            tooltip.toggle();
            m.redraw();
        };

        var setParentPosition = function setParentPosition(el, isInitialized) {
            if (!isInitialized) {
                parentOffset(h.cumulativeOffset(el));
            }
        },
            setPosition = function setPosition(el, isInitialized) {
            if (!isInitialized) {
                var elTop = el.offsetHeight + el.offsetParent.offsetHeight;
                var style = window.getComputedStyle(el);

                if (window.innerWidth < el.offsetWidth + 2 * parseFloat(style.paddingLeft) + 30) {
                    // 30 here is a safe margin
                    el.style.width = window.innerWidth - 30; // Adding the safe margin
                    left(-parentOffset().left + 15); // positioning center of window, considering margin
                } else if (parentOffset().left + el.offsetWidth / 2 <= window.innerWidth && parentOffset().left - el.offsetWidth / 2 >= 0) {
                    left(-el.offsetWidth / 2); // Positioning to the center
                } else if (parentOffset().left + el.offsetWidth / 2 > window.innerWidth) {
                    left(-el.offsetWidth + el.offsetParent.offsetWidth); // Positioning to the left
                } else if (parentOffset().left - el.offsetWidth / 2 < 0) {
                    left(-el.offsetParent.offsetWidth); // Positioning to the right
                }
                top(-elTop); // Setting top position
            }
        };

        return {
            width: width,
            top: top,
            left: left,
            opacity: opacity,
            tooltip: tooltip,
            toggle: toggle,
            setPosition: setPosition,
            setParentPosition: setParentPosition
        };
    },
    view: function view(ctrl, args) {
        var width = ctrl.width();
        return m(args.el, {
            onclick: ctrl.toggle,
            config: ctrl.setParentPosition,
            style: { cursor: 'pointer' }
        }, ctrl.tooltip() ? [m('.tooltip.dark[style="width: ' + width + 'px; top: ' + ctrl.top() + 'px; left: ' + ctrl.left() + 'px;"]', {
            config: ctrl.setPosition
        }, [m('.fontsize-smallest', args.text)])] : '');
    }
};

var railsErrors = m.prop('');
var setRailsErrors = function setRailsErrors(errors) {
    return railsErrors(errors);
};
var errorGroups = {
    basics: ['public_name', 'permalink', 'category_id', 'city', 'public_tags', 'name'],
    goal: ['goal', 'online_days'],
    description: ['about_html'],
    budget: ['budget'],
    announce_expiration: ['online_days'],
    card: ['uploaded_image', 'headline'],
    video: ['video_url'],
    reward: ['rewards.size', 'rewards.minimum_value', 'rewards.title', 'rewards.description', 'rewards.deliver_at', 'rewards.shipping_fees.value', 'rewards.shipping_fees.destination'],
    user_about: ['user.uploaded_image', 'user.public_name', 'user.about_html'],
    user_settings: ['bank_account.id', 'bank_account.user_id', 'bank_account.account', 'bank_account.agency', 'bank_account.owner_name', 'bank_account.owner_document', 'bank_account.created_at', 'bank_account.updated_at', 'bank_account.account_digit', 'bank_account.agency_digit', 'bank_account.bank_id', 'bank_account.account_type', 'user.name', 'user.cpf', 'user.birth_date', 'user.country_id', 'user.address_state', 'user.address_street', 'user.address_number', 'user.address_city', 'user.address_neighbourhood', 'bank_account']
};
var errorsFor = function errorsFor(group) {
    var parsedErrors = void 0;
    try {
        parsedErrors = JSON.parse(railsErrors());
    } catch (err) {
        parsedErrors = {};
    }
    if (_$1.find(errorGroups[group], function (key) {
        return parsedErrors.hasOwnProperty(key);
    })) {
        return m('span.fa.fa-exclamation-circle.fa-fw.fa-lg.text-error');
    }
    if (_$1.isEmpty(parsedErrors)) {
        return '';
    }
    return m('span.fa.fa-check-circle.fa-fw.fa-lg.text-success');
};

var mapRailsErrors = function mapRailsErrors(rails_errors, errorsFields, e) {
    var parsedErrors = void 0;
    try {
        parsedErrors = JSON.parse(rails_errors);
    } catch (err) {
        parsedErrors = {};
    }
    var extractAndSetErrorMsg = function extractAndSetErrorMsg(label, fieldArray) {
        var value = _$1.first(_$1.compact(_$1.map(fieldArray, function (field) {
            return _$1.first(parsedErrors[field]);
        })));

        if (value) {
            e(label, value);
            e.inlineError(label, true);
        }
    };

    _$1.each(errorsFields, function (item, i) {
        extractAndSetErrorMsg(item[0], item[1]);
    });
};

// @FIXME: fix places where we call this
var validatePublish = function validatePublish() {
    var currentProject = h.getCurrentProject();
    if (_$1.isEmpty(railsErrors())) {
        return false;
    }
    m.request({
        method: 'GET',
        url: '/projects/' + currentProject.project_id + '/validate_publish',
        config: h.setCsrfToken
    }).then(function () {
        setRailsErrors('');
    }).catch(function (err) {
        if (err) {
            setRailsErrors(err.errors_json);
        }
        m.redraw();
    });
    return false;
};

var railsErrorsVM = {
    errorsFor: errorsFor,
    validatePublish: validatePublish,
    railsErrors: railsErrors,
    setRailsErrors: setRailsErrors,
    mapRailsErrors: mapRailsErrors
};

/**
 * window.c.ProjectDashboardMenu component
 * build dashboard project menu for project owners
 * and admin.
 *
 * Example:
 * m.component(c.ProjectDashboardMenu, {
 *     project: projectDetail Object,
 * })
 */
var I18nScope$6 = _$1.partial(h.i18nScope, 'projects.dashboard_nav');
var linksScope = _$1.partial(h.i18nScope, 'projects.dashboard_nav_links');

var projectDashboardMenu = {
    controller: function controller(args) {
        var body = document.getElementsByTagName('body')[0],
            editLinksToggle = h.toggleProp(true, false),
            validating = m.prop(false),
            showPublish = h.toggleProp(true, false),
            bodyToggleForNav = h.toggleProp('body-project open', 'body-project closed'),
            validatePublish = function validatePublish() {
            validating(true);
            m.redraw();
            m.request({
                method: 'GET',
                url: '/projects/' + args.project().project_id + '/validate_publish',
                config: h.setCsrfToken
            }).then(function () {
                validating(false);
                window.location.href = '/projects/' + args.project().project_id + '/publish';
                m.redraw();
            }).catch(function (err) {
                validating(false);
                railsErrorsVM.setRailsErrors(err.errors_json);
                m.redraw();
            });
        },
            projectThumb = function projectThumb(project) {
            if (_$1.isEmpty(project.large_image)) {
                if (_$1.isEmpty(project.thumb_image)) {
                    return '/assets/thumb-project.png';
                }
                return project.thumb_image;
            }
            return project.large_image;
        };

        if (args.project().is_published) {
            editLinksToggle.toggle(false);
        }

        if (args.hidePublish) {
            showPublish.toggle(false);
        }

        return {
            body: body,
            validating: validating,
            validatePublish: validatePublish,
            editLinksToggle: editLinksToggle,
            showPublish: showPublish,
            bodyToggleForNav: bodyToggleForNav,
            projectThumb: projectThumb
        };
    },
    view: function view(ctrl, args) {
        var project = args.project(),
            projectRoute = '/projects/' + project.project_id,
            editRoute = projectRoute + '/edit',
            editLinkClass = function editLinkClass(hash) {
            return 'dashboard-nav-link-left ' + (project.is_published ? 'indent' : '') + ' ' + (h.hashMatch(hash) ? 'selected' : '');
        };
        var optionalOpt = m('span.fontsize-smallest.fontcolor-secondary', ' (optional)');

        ctrl.body.className = ctrl.bodyToggleForNav();

        return m('#project-nav', [m('.project-nav-wrapper', [m('nav.w-section.dashboard-nav.side', [m('a#dashboard_preview_link.w-inline-block.dashboard-project-name[href="' + (project.is_published ? '/' + project.permalink : editRoute + '#preview') + '"]', [m('img.thumb-project-dashboard[src="' + (project ? ctrl.projectThumb(project) : '/assets/thumb-project.png') + '"][width="114"]'), m('.fontcolor-negative.lineheight-tight.fontsize-small', project.name), m('img.u-margintop-10[src="/assets/catarse_bootstrap/badge-' + project.mode + '-h.png"][width=80]')]), m('#info-links.u-marginbottom-20', [m('a#dashboard_home_link[class="dashboard-nav-link-left ' + (h.locationActionMatch('insights') ? 'selected' : '') + '"][href="' + projectRoute + '/insights"]', [m('span.fa.fa-bar-chart.fa-lg.fa-fw'), I18n$1.t('start_tab', I18nScope$6())]), project.is_published ? [m('a#dashboard_reports_link[class="dashboard-nav-link-left ' + (h.locationActionMatch('contributions_report') ? 'selected' : '') + '"][href="' + projectRoute + '/contributions_report"]', [m('span.fa.fa.fa-table.fa-lg.fa-fw'), I18n$1.t('reports_tab', I18nScope$6())]), m('a#dashboard_reports_link[class="dashboard-nav-link-left ' + (h.locationActionMatch('posts') ? 'selected' : '') + '"][href="' + projectRoute + '/posts"]', [m('span.fa.fa-bullhorn.fa-fw.fa-lg'), I18n$1.t('posts_tab', I18nScope$6()), project.posts_count > 0 ? m('span.badge', project.posts_count) : m('span.badge.badge-attention', 'Nenhuma')]), m('a#dashboard_surveys_link[class="dashboard-nav-link-left ' + (h.locationActionMatch('surveys') ? 'selected' : '') + '"][href="' + projectRoute + '/surveys"]', [m('span.fa.fa.fa-check-square-o.fa-lg.fa-fw'), I18n$1.t('surveys_tab', I18nScope$6())])] : '']), m('.edit-project-div', [!project.is_published ? '' : m('button#toggle-edit-menu.dashboard-nav-link-left', {
            onclick: ctrl.editLinksToggle.toggle
        }, [m('span.fa.fa-pencil.fa-fw.fa-lg'), I18n$1.t('edit_project', I18nScope$6())]), ctrl.editLinksToggle() ? m('#edit-menu-items', [m('#dashboard-links', [!project.is_published || project.is_admin_role ? [m('a#basics_link[class="' + editLinkClass('#basics') + '"][href="' + editRoute + '#basics"]', railsErrorsVM.errorsFor('basics'), I18n$1.t('basics_tab', linksScope())), m('a#goal_link[class="' + editLinkClass('#goal') + '"][href="' + editRoute + '#goal"]', railsErrorsVM.errorsFor('goal'), I18n$1.t('goal_tab', linksScope()))] : '', m('a#description_link[class="' + editLinkClass('#description') + '"][href="' + editRoute + '#description"]', railsErrorsVM.errorsFor('description'), I18n$1.t('description_tab', linksScope())), m('a#video_link[class="' + editLinkClass('#video') + '"][href="' + editRoute + '#video"]', [railsErrorsVM.errorsFor('video'), 'Video', m('span.fontsize-smallest.fontcolor-secondary', ' (optional)')]), m('a#budget_link[class="' + editLinkClass('#budget') + '"][href="' + editRoute + '#budget"]', railsErrorsVM.errorsFor('budget'), I18n$1.t('budget_tab', linksScope())), m('a#card_link[class="' + editLinkClass('#card') + '"][href="' + editRoute + '#card"]', railsErrorsVM.errorsFor('card'), I18n$1.t('card_tab', linksScope())), m('a#dashboard_reward_link[class="' + editLinkClass('#reward') + '"][href="' + editRoute + '#reward"]', [railsErrorsVM.errorsFor('reward'), 'Reward', optionalOpt]), m('a#dashboard_user_about_link[class="' + editLinkClass('#user_about') + '"][href="' + editRoute + '#user_about"]', railsErrorsVM.errorsFor('user_about'), I18n$1.t('about_you_tab', linksScope())), project.is_published || project.state === 'draft' || project.is_admin_role ? [m('a#dashboard_user_settings_link[class="' + editLinkClass('#user_settings') + '"][href="' + editRoute + '#user_settings"]', railsErrorsVM.errorsFor('user_settings'), I18n$1.t('account_tab', linksScope()))] : '', !project.is_published ? [m('a#dashboard_preview_link[class="' + editLinkClass('#preview') + '"][href="' + editRoute + '#preview"]', [m('span.fa.fa-fw.fa-eye.fa-lg'), I18n$1.t('preview_tab', linksScope())])] : ''])]) : '', !project.is_published && ctrl.showPublish() ? [ctrl.validating() ? h.loader() : m('.btn-send-draft-fixed', project.mode === 'aon' ? [project.state === 'draft' ? m('button.btn.btn-medium', {
            onclick: ctrl.validatePublish
        }, [I18n$1.t('publish', I18nScope$6()), m.trust('&nbsp;&nbsp;'), m('span.fa.fa-chevron-right')]) : ''] : [project.state === 'draft' ? m('button.btn.btn-medium', {
            onclick: ctrl.validatePublish
        }, [I18n$1.t('publish', I18nScope$6()), m.trust('&nbsp;&nbsp;'), m('span.fa.fa-chevron-right')]) : ''])] : [project.mode === 'flex' && project.is_published ? [m('.btn-send-draft-fixed', _$1.isNull(project.expires_at) ? m('a.w-button.btn.btn-medium.btn-secondary-dark[href="' + editRoute + '#announce_expiration"]', I18n$1.t('announce_expiration', I18nScope$6())) : '')] : '']])])]), m('a.btn-dashboard href="javascript:void(0);"', {
            onclick: ctrl.bodyToggleForNav.toggle
        }, [m('span.fa.fa-bars.fa-lg')])]);
    }
};

/**
 * window.c.AdminProjectDetailsCard component
 * render an box with some project statistics info
 *
 * Example:
 * m.component(c.AdminProjectDetailsCard, {
 *     resource: projectDetail Object,
 * })
 */
var adminProjectDetailsCard = {
    controller: function controller(args) {
        var project = args.resource,
            isFinalLap = function isFinalLap() {
            return (
                // @TODO: use 8 days because timezone on js
                !_.isNull(project.expires_at) && moment().add(8, 'days') >= moment(project.zone_expires_at)
            );
        };
        return {
            project: project,
            remainingTextObj: h.translatedTime(project.remaining_time),
            elapsedTextObj: h.translatedTime(project.elapsed_time),
            isFinalLap: isFinalLap
        };
    },
    view: function view(ctrl) {
        var project = ctrl.project,
            progress = project.progress.toFixed(2),
            statusTextObj = h.projectStateTextClass(project.state, project.has_cancelation_request),
            remainingTextObj = ctrl.remainingTextObj,
            elapsedTextObj = ctrl.elapsedTextObj;

        return m('.project-details-card.card.u-radius.card-terciary.u-marginbottom-20', [m('div', [m('.fontsize-small.fontweight-semibold', [m('span.fontcolor-secondary', 'Status:'), ' ', m('span', {
            class: statusTextObj.cssClass
        }, ctrl.isFinalLap() && project.open_for_contributions ? 'ENDING SOON' : statusTextObj.text), ' ']), project.is_published ? [m('.meter.u-margintop-20.u-marginbottom-10', [m('.meter-fill', {
            style: {
                width: (progress > 100 ? 100 : progress) + '%'
            }
        })]), m('.w-row', [m('.w-col.w-col-3.w-col-small-3.w-col-tiny-6', [m('.fontcolor-secondary.lineheight-tighter.fontsize-small', 'financed'), m('.fontweight-semibold.fontsize-large.lineheight-tight', progress + '%')]), m('.w-col.w-col-3.w-col-small-3.w-col-tiny-6', [m('.fontcolor-secondary.lineheight-tighter.fontsize-small', 'raised'), m('.fontweight-semibold.fontsize-large.lineheight-tight', ['US$ ' + h.formatNumber(project.pledged, 2)])]), m('.w-col.w-col-3.w-col-small-3.w-col-tiny-6', [m('.fontcolor-secondary.lineheight-tighter.fontsize-small', 'supports'), m('.fontweight-semibold.fontsize-large.lineheight-tight', project.total_contributions)]), m('.w-col.w-col-3.w-col-small-3.w-col-tiny-6', [_.isNull(project.expires_at) ? [m('.fontcolor-secondary.lineheight-tighter.fontsize-small', 'started in'), m('.fontweight-semibold.fontsize-large.lineheight-tight', elapsedTextObj.total + ' ' + elapsedTextObj.unit)] : [m('.fontcolor-secondary.lineheight-tighter.fontsize-small', 'remain'), m('.fontweight-semibold.fontsize-large.lineheight-tight', remainingTextObj.total + ' ' + remainingTextObj.unit)]])])] : ''])]);
    }
};

/**
 * window.c.OnlineSuccessModalContent component
 * Render online success message
 *
 */
var onlineSuccessModalContent = {
    view: function view(ctrl, args) {
        return m('.modal-dialog-content.u-text-center', [m('.fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40'), m('p.fontsize-larger.lineheight-tight', 'Your campaign is online!!! Congratulations on that first big step. Good luck on this journey. ;)')]);
    }
};

/**
 * window.c.ProjectDataStats component
 * render a row with project stats info like:
 * state / total_contributions / total_pledged / elapsed | remaning time
 *
 * Example:
 * m.component(c.ProjectDataStats, {project: project})
 **/
var projectDataStats = {
    view: function view(ctrl, args) {
        var project = args.project(),
            visitorsTotal = args.visitorsTotal(),
            statusTextObj = h.projectStateTextClass(project.state, project.has_cancelation_request),
            remainingTextObj = h.translatedTime(project.remaining_time),
            elapsedTextObj = h.translatedTime(project.elapsed_time);

        return m('', [m('.w-row.u-marginbottom-60.u-margintop-30.u-text-center', [m('.w-col.w-col-2'), m('.w-col.w-col-4', [m('.fontsize-large', [m('span.fontcolor-secondary', 'Status: '), m('span', { class: statusTextObj.cssClass }, statusTextObj.text)])]), m('.w-col.w-col-4', [m('.fontsize-large.fontweight-semibold', [m('span.fa.fa-clock-o'), _$1.isNull(project.expires_at) ? ' Started in ' + elapsedTextObj.total + ' ' + elapsedTextObj.unit : ' ' + remainingTextObj.total + ' ' + remainingTextObj.unit + ' ' + (remainingTextObj.total > 1 ? 'remaining' : 'remaining')])]), m('.w-col.w-col-2')]), m('.card.medium.u-marginbottom-60.u-radius.u-text-center', { style: { 'white-space': 'nowrap' } }, [m('.w-row', [m('.w-col.w-col-6', [m('.w-row.u-marginbottom-30.u-margintop-30', [m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4', [m('.fontsize-larger.fontweight-semibold', '' + visitorsTotal), 'Visitors']), m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4', [m('.bg-triangle-funnel.fontcolor-secondary.fontsize-base', h.formatNumber(project.total_contributors / visitorsTotal * 100 || 0, 2) + '%')]), m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4', [m('.fontsize-larger.fontweight-semibold', '' + project.total_contributors), 'Supporters'])])]), m('.w-col.w-col-6', [m('.w-row.u-marginbottom-30.u-margintop-30', [m('.w-col.w-col-9.w-col-small-6.w-col-tiny-6', [m('.fontsize-larger.fontweight-semibold', 'US$ ' + h.formatNumber(project.pledged, 2)), 'Collected']), m('.w-col.w-col-3.w-col-small-6.w-col-tiny-6', [m('.fontsize-larger.fontweight-semibold', h.formatNumber(project.progress, 2) + '%'), 'from Goal'])])])]), m('.fontcolor-secondary.fontsize-smallest.u-margintop-20', ['Details may take up to 24 hours to be updated.', m('a.alt-link', { href: 'https://suporte.catarse.me/hc/pt-br/articles/115002214463-projeto-ONLINE#visitante', target: '_blank' }, ' Know More'), '.'])])]);
    }
};

/**
 * window.c.deleteProjectModalContent component
 * Render delete project modal
 *
 */
var deleteProjectModalContent = {
    controller: function controller(args) {
        var l = m.prop(false);
        var deleteSuccess = m.prop(false),
            confirmed = m.prop(true),
            error = m.prop(''),
            check = m.prop('');

        var deleteProject = function deleteProject() {
            if (check() === 'delete-draft') {
                var loaderOpts = models.deleteProject.postOptions({
                    _project_id: args.project.project_id
                });
                l = postgrest$1.loaderWithToken(loaderOpts);
                l.load().then(function () {
                    deleteSuccess(true);
                }).catch(function (err) {
                    confirmed(false);
                    error('Error deleting project. Please try again.');
                    m.redraw();
                });
            } else {
                confirmed(false);
                error('Please correct the following errors: To permanently delete the project you must fill out "delete-draft".');
            }
            return false;
        };

        return {
            deleteProject: deleteProject,
            confirmed: confirmed,
            deleteSuccess: deleteSuccess,
            error: error,
            check: check
        };
    },
    view: function view(ctrl, args) {
        return m('div', ctrl.deleteSuccess() ? '' : m('.modal-dialog-header', m('.fontsize-large.u-text-center', ['Confirm ', m('span.fa.fa-trash', '')])), m('form.modal-dialog-content', { onsubmit: ctrl.deleteProject }, ctrl.deleteSuccess() ? [m('.fontsize-base.u-margintop-30', 'Project deleted successfully. Click the link below to return to the homepage.'), m('a.btn.btn-inactive.btn-large.u-margintop-30[href=\'/en/users/' + h.getUser().user_id + '/edit#projects\']', 'Back')] : [m('.fontsize-base.u-marginbottom-60', ['The project will be deleted permanently and all the data you filled in the draft edition will not be retrieved.']), m('.fontsize-base.u-marginbottom-10', ['Confirm writing ', 'in the field below ', m('span.fontweight-semibold.text-error', 'delete-draft')]), m('.w-form', m('.text-error.u-marginbottom-10', ctrl.error()), [m('div', m('input.positive.text-field.u-marginbottom-40.w-input[maxlength=\'256\'][type=\'text\']', { class: ctrl.confirmed() ? false : 'error', placeholder: 'delete-draft', onchange: m.withAttr('value', ctrl.check) }))]), m('div', m('.w-row', [m('.w-col.w-col-3'), m('.u-text-center.w-col.w-col-6', [m('input.btn.btn-inactive.btn-large.u-marginbottom-20[type=\'submit\'][value=\'Delete Permanently\']'), m('a.fontsize-small.link-hidden-light[href=\'#\']', { onclick: args.displayDeleteModal.toggle }, 'Cancel')]), m('.w-col.w-col-3')]))]));
    }
};

/**
 * window.c.projectDeleteButton component
 * A button showing modal to delete draft project
 */
var projectDeleteButton = {
    controller: function controller(args) {
        var displayDeleteModal = h.toggleProp(false, true);
        return {
            displayDeleteModal: displayDeleteModal
        };
    },
    view: function view(ctrl, args) {
        return m('div', [ctrl.displayDeleteModal() ? m.component(modalBox, {
            displayModal: ctrl.displayDeleteModal,
            hideCloseButton: true,
            content: [deleteProjectModalContent, { displayDeleteModal: ctrl.displayDeleteModal, project: args.project }]
        }) : '', m('.before-footer', m('.w-container', m('a.btn.btn-inline.btn-no-border.btn-small.btn-terciary.u-marginbottom-20.u-right.w-button[href=\'javascript:void(0);\']', { onclick: ctrl.displayDeleteModal.toggle, style: { transition: 'all 0.5s ease 0s' } }, [m.trust('&nbsp;'), 'Delete project ', m('span.fa.fa-trash', '')])))]);
    }
};

/**
 * window.c.cancelProjectModalContent component
 * Render cancel project modal
 *
 */
var cancelProjectModalContent = {
    controller: function controller(args) {
        var checkError = m.prop(false),
            check = m.prop(''),
            showNextModal = function showNextModal() {
            if (check() === 'cancel-project') {
                args.displayModal.toggle();
                document.getElementById('send-message').style.display = 'block';
            } else {
                checkError(true);
            }
            return false;
        };

        return {
            showNextModal: showNextModal,
            checkError: checkError,
            check: check
        };
    },
    view: function view(ctrl, args) {
        return m('form.cancel-project-modal.modal-dialog-content', { onsubmit: ctrl.showNextModal }, [m('.fontsize-small.u-marginbottom-20', ['Upon cancellation, your campaign will expire and your supporters will be refunded within the next 24 hours.', m('span.fontweight-semibold', 'This action can not be undone!'), m('br'), m('span.fontweight-semibold')]), m('.fontsize-small.u-marginbottom-10', ['If you are sure you want to cancel your project, please confirm by writing ', m('span.fontweight-semibold.text-error', 'cancel-project '), 'in the field below. Then we will ask you to write a message to the supporters and your project will then be canceled.', m('span.fontweight-semibold.text-error')]), m('.w-form', [m('input.positive.text-field.u-marginbottom-40.w-input[maxlength=\'256\'][type=\'text\']', { class: !ctrl.checkError() ? false : 'error', placeholder: 'cancel-project', onchange: m.withAttr('value', ctrl.check) })]), m('div', m('.w-row', [m('.w-col.w-col-3'), m('.u-text-center.w-col.w-col-6', [m('input.btn.btn-inactive.btn-large.u-marginbottom-20[type=\'submit\'][value=\'Next step >\']'), m('a.fontsize-small.link-hidden-light[href=\'#\']', { onclick: args.displayModal.toggle }, 'Cancel')]), m('.w-col.w-col-3')]))]);
    }
};

/**
 * window.c.projectCancelButton component
 * A button showing modal to cancel online project
 */
var projectCancelButton = {
    controller: function controller(args) {
        var displayCancelModal = h.toggleProp(false, true);
        return {
            displayCancelModal: displayCancelModal
        };
    },
    view: function view(ctrl, args) {
        return m('div', [ctrl.displayCancelModal() ? m.component(modalBox, {
            displayModal: ctrl.displayCancelModal,
            content: [cancelProjectModalContent, { displayModal: ctrl.displayCancelModal }]
        }) : '', m('.w-row.before-footer', m('.w-col.w-col-12', m('.w-container', m('button.btn.btn-cancel.btn-inline.btn-no-border.btn-small.btn-terciary.u-marginbottom-20.u-right.w-button', { onclick: ctrl.displayCancelModal.toggle, style: { transition: 'all 0.5s ease 0s' } }, [m('span.fa.fa-times-circle', ''), m.trust('&nbsp;'), 'Cancel project']))))]);
    }
};

/**
 * window.c.ProjectDataChart component
 * A graph builder interface to be used on project related dashboards.
 * Example:
 * m.component(c.ProjectDataChart, {
 *     collection: ctrl.contributionsPerDay,
 *     label: 'US$ arrecadados por dia',
 *     dataKey: 'total_amount'
 * })
 */
var projectDataChart = {
    controller: function controller(args) {
        var resource = _$1.first(args.collection()),
            source = !_$1.isUndefined(resource) ? resource.source : [],
            mountDataset = function mountDataset() {
            return [{
                fillColor: 'rgba(126,194,69,0.2)',
                strokeColor: 'rgba(126,194,69,1)',
                pointColor: 'rgba(126,194,69,1)',
                pointStrokeColor: '#fff',
                pointHighlightFill: '#fff',
                pointHighlightStroke: 'rgba(220,220,220,1)',
                data: _$1.map(source, function (item) {
                    return item[args.dataKey];
                })
            }];
        },
            renderChart = function renderChart(element, isInitialized) {
            if (!isInitialized) {
                var ctx = element.getContext('2d');

                new Chart(ctx).Line({
                    labels: args.xAxis ? _$1.map(source, function (item) {
                        return args.xAxis(item);
                    }) : [],
                    datasets: mountDataset()
                });
            }
        };

        return {
            renderChart: renderChart,
            source: source
        };
    },
    view: function view(ctrl, args) {
        return m('.card.u-radius.medium.u-marginbottom-30', [m('.fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center', args.label), m('.w-row', [m('.w-col.w-col-12.overflow-auto', [!_$1.isEmpty(ctrl.source) ? m('canvas[id="chart"][width="860"][height="300"]', {
            config: ctrl.renderChart
        }) : m('.w-col.w-col-8.w-col-push-2', m('p.fontsize-base', args.emptyState))])])]);
    }
};

/**
 * window.c.ProjectDataTable component
 * A table interface constructor that should be used on project related dashboards.
 * It takes an array and a lable as it's sources.
 * The first item in the array is the header descriptor and the rest of them are row data.
 * Rows may return a string or an array and this value will be used as a row output.
 * All table rows are sortable by default. If you want to use a custom value as sort parameter
 * you may set a 2D array as row. In this case, the first array value will be the custom value
 * while the other will be the actual output.
 * Example:
 * m.component(c.ProjectDataTable, {
 *      label: 'Table label',
 *      table: [
 *          ['col header 1', 'col header 2'],
 *          ['value 1x1', [3, 'value 1x2']],
 *          ['value 2x1', [1, 'value 2x2']] //We are using a custom comparator two col 2 values
 *      ],
 *      //Allows you to set a specific column to be ordered by default.
 *      //If no value is set, the first row will be the default one to be ordered.
 *      //Negative values mean that the order should be reverted
 *      defaultSortIndex: -3
 *  })
 */
var projectDataTable = {
    controller: function controller(args) {
        var table = m.prop(args.table),
            sortIndex = m.prop(-1);

        var comparator = function comparator(a, b) {
            var idx = sortIndex(),

            // Check if a custom comparator is used => Read component description
            x = _$1.isArray(a[idx]) && a[idx].length > 1 ? a[idx][0] : a[idx],
                y = _$1.isArray(b[idx]) && b[idx].length > 1 ? b[idx][0] : b[idx];

            if (x < y) {
                return -1;
            }
            if (y < x) {
                return 1;
            }
            return 0;
        };

        var sortTable = function sortTable(idx) {
            var header = _$1.first(table()),
                body = void 0;
            if (sortIndex() === idx) {
                body = _$1.rest(table()).reverse();
            } else {
                sortIndex(idx);
                body = _$1.rest(table()).sort(comparator);
            }

            table(_$1.union([header], body));
        };

        sortTable(Math.abs(args.defaultSortIndex) || 0);

        if (args.defaultSortIndex < 0) {
            sortTable(Math.abs(args.defaultSortIndex) || 0);
        }

        return {
            table: table,
            sortTable: sortTable
        };
    },
    view: function view(ctrl, args) {
        var header = _$1.first(ctrl.table()),
            body = _$1.rest(ctrl.table());
        return m('.table-outer.u-marginbottom-60', [m('.w-row.table-row.fontweight-semibold.fontsize-smaller.header', _$1.map(header, function (heading, idx) {
            var sort = function sort() {
                return ctrl.sortTable(idx);
            };
            return m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col', [m('a.link-hidden[href="javascript:void(0);"]', {
                onclick: sort
            }, [heading + ' ', m('span.fa.fa-sort')])]);
        })), m('.table-inner.fontsize-small', _$1.map(body, function (rowData) {
            return m('.w-row.table-row', _$1.map(rowData, function (row) {
                // Check if a custom comparator is used => Read component description
                row = _$1.isArray(row) && row.length > 1 ? row[1] : row;
                return m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col', [m('div', row)]);
            }));
        }))]);
    }
};

var projectReminderCount = {
    view: function view(ctrl, args) {
        var project = args.resource;
        return m('#project-reminder-count.card.u-radius.u-text-center.medium.u-marginbottom-80', [m('.fontsize-large.fontweight-semibold', 'Total of people who clicked on the Remind me button'), m('.fontsize-smaller.u-marginbottom-30', 'An email reminder is sent 48 hours before the end of your campaign'), m('.fontsize-jumbo', project.reminder_count)]);
    }
};

/**
 * window.c.ProjectSuccessfulOnboardConfirmAccountAccept component
 * render confirmation message to accept bank data
 *
 * Example:
 * m.component(c.ProjectSuccessfulOnboardConfirmAccountAccept, {
 *    projectAccount: projectAccount,
 *    changeToAction: ctrl.changeToAction //provided by ProjectSuccessfulOnboardConfirmAccount controller
 * })
 **/
var I18nScope$9 = _$1.partial(h.i18nScope, 'projects.successful_onboard.confirm_account');

/**
 * window.c.ProjectSuccessfulOnboardConfirmAccount component
 * render project account data to confirm or redirect when error
 *
 * Example:
 * m.component(c.ProjectSuccessfulOnboardConfirmAccount, {projectAccount: projectAccount})
 **/
var I18nScope$8 = _$1.partial(h.i18nScope, 'projects.successful_onboard.confirm_account');

/**
 * window.c.SuccessfulProjectTaxModal component
 * Modal content for show project transfer complete values data
 */
var successfulProjectTaxModal = {
    view: function view(ctrl, args) {
        var pt = args.projectTransfer;

        return m('div', [m('.modal-dialog-header', [m('.fontsize-large.u-text-center', 'Project Excerpt')]), m('.modal-dialog-content', [m('p.fontsize-small.u-marginbottom-40', ['Check out the excerpt of your project, including fees and deductions. If you have questions about how this calculation is done, ', m('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="__blank"]', 'access here'), '.']), m('div', [m('.w-row.fontsize-small.u-marginbottom-10', [m('.w-col.w-col-4', [m('.text-success', '+ US$ ' + h.formatNumber(pt.pledged, 2))]), m('.w-col.w-col-8', [m('div', 'Total collection (' + pt.total_contributions + ' supports)')])]), pt.irrf_tax > 0 ? m('.w-row.fontsize-small.u-marginbottom-10', [m('.w-col.w-col-4', [m('.text-success', '+ US$ ' + h.formatNumber(pt.irrf_tax, 2))]), m('.w-col.w-col-8', [m('div', 'Withholding Income Tax (IRF))')])]) : '', m('.w-row.fontsize-small.u-marginbottom-10', [m('.w-col.w-col-4', [m('.text-error', '- US$ ' + h.formatNumber(pt.catarse_fee, 2))]), m('.w-col.w-col-8', [m('div', 'OppoStarter fee and methods of payment (' + h.formatNumber(pt.service_fee * 100, 2) + '%)\xA0')])]), m('.divider.u-marginbottom-10'), m('.w-row.fontsize-base.fontweight-semibold', [m('.w-col.w-col-4', [m('div', 'US$ ' + h.formatNumber(pt.total_amount, 2))]), m('.w-col.w-col-8', [m('div', 'Total to be transferred')])])])])]);
    }
};

var I18nScope$10 = _$1.partial(h.i18nScope, 'projects.successful_onboard');

/**
 * window.c.ProjectSuccessfulOnboard component
 * render first interaction of successful project onboarding
 * used when project is successful and wants to confirm bank data and request transfer
 *
 * Example:
 * m.component(c.ProjectSuccessfulOnboard, {project: project})
 **/
var I18nScope$7 = _.partial(h.i18nScope, 'projects.successful_onboard');

var projectSuccessfulOnboard = {
    controller: function controller(args) {
        var projectIdVM = postgrest$1.filtersVM({ project_id: 'eq' }),
            projectAccounts = m.prop([]),
            projectTransfers = m.prop([]),
            showTaxModal = h.toggleProp(false, true),
            loader = postgrest$1.loaderWithToken,
            listenToReplace = function listenToReplace(element, isInitialized, context) {
            if (isInitialized) return;

            var toRedraw = {
                tax_link: {
                    action: 'onclick',
                    actionSource: function actionSource() {
                        showTaxModal.toggle();
                        m.redraw();
                    }
                }
            };

            _.map(element.children, function (item) {
                var toR = toRedraw[item.getAttribute('id')];

                if (toR) {
                    item[toR.action] = toR.actionSource;
                }
            });
        };

        projectIdVM.project_id(args.project().project_id);

        var lProjectAccount = loader(models.projectAccount.getRowOptions(projectIdVM.parameters()));
        lProjectAccount.load().then(function (data) {
            projectAccounts(data);
        });

        var lProjectTransfer = loader(models.projectTransfer.getRowOptions(projectIdVM.parameters()));
        lProjectTransfer.load().then(projectTransfers);

        return {
            projectAccounts: projectAccounts,
            projectTransfers: projectTransfers,
            lProjectAccount: lProjectAccount,
            lProjectTransfer: lProjectTransfer,
            showTaxModal: showTaxModal,
            listenToReplace: listenToReplace
        };
    },
    view: function view(ctrl, args) {
        var projectAccount = _.first(ctrl.projectAccounts()),
            projectTransfer = _.first(ctrl.projectTransfers()),
            lpa = ctrl.lProjectAccount,
            lpt = ctrl.lProjectTransfer;

        return m('.w-section.section', [ctrl.showTaxModal() ? m.component(modalBox, {
            displayModal: ctrl.showTaxModal,
            content: [successfulProjectTaxModal, {
                projectTransfer: projectTransfer
            }]
        }) : '', !lpa() && !lpt() ? m('.w-container', [m('.w-row.u-marginbottom-40', [m('.w-col.w-col-6.w-col-push-3', [m('.u-text-center', [m('img.u-marginbottom-20', { src: I18n$1.t('finished.icon', I18nScope$7()), width: 94 }), m('.fontsize-large.fontweight-semibold.u-marginbottom-20', I18n$1.t('finished.title', I18nScope$7())), m('.fontsize-base.u-marginbottom-30', {
            config: ctrl.listenToReplace
        }, m.trust(I18n$1.t('finished.text', I18nScope$7({ link_news: '/projects/' + args.project().id + '/posts', link_surveys: '/projects/' + args.project().id + '/surveys' }))))]
        //m('a.btn.btn-large.btn-inline', { href: `/users/${args.project().user_id}/edit#balance` }, I18n.t('start.cta', I18nScope()))
        )])])]) : h.loader()]);
    }
};

var facebookButton = {
    controller: function controller(args) {
        var share = function share() {
            if (FB) {
                FB.ui({
                    method: args.messenger ? 'send' : 'share',
                    link: args.url,
                    href: args.url
                });
            }
        };

        return {
            share: share
        };
    },
    view: function view(ctrl, args) {
        var buttonCss = function buttonCss() {
            if (args.mobile) {
                return 'w-hidden-main w-hidden-medium u-marginbottom-20 btn btn-medium btn-fb';
            } else if (args.big) {
                return 'btn btn-fb btn-large u-marginbottom-20 w-button';
            } else if (args.medium) {
                return 'btn ' + (args.messenger ? 'btn-messenger' : 'btn-fb') + ' btn-medium u-marginbottom-20 w-button';
            }
            return 'btn btn-inline btn-medium btn-terciary u-marginright-20';
        };

        return m('button', {
            class: buttonCss(),
            onclick: ctrl.share
        }, [m('span.fa', {
            class: args.messenger ? 'fa-comment' : 'fa-facebook'
        }), args.messenger ? ' Messenger' : ' Facebook']);
    }
};

/**
 * copyTextInput component
 * Displays a text input that copies it's content on click
 *
 * Example of use:
 * view: () => {
 *   ...
 *   m.component(copyTextInput, {value: 'some value'})
 *   ...
 * }
 */
var copyTextInput = {
    controller: function controller(args) {
        var showSuccess = m.prop(false);
        var setClickHandler = function setClickHandler(el, isInitialized) {
            var copy = void 0;
            if (!isInitialized) {
                var textarea = el.parentNode.previousSibling.firstChild;

                textarea.innerText = args.value; //This fixes an issue when instantiating multiple copy clipboard components
                el.onclick = function () {
                    select(textarea);
                    copy = document.execCommand('copy');
                    if (copy) {
                        showSuccess(true);
                        m.redraw();
                    } else {
                        textarea.blur();
                    }
                    return false;
                };
            }
        };

        return {
            setClickHandler: setClickHandler,
            showSuccess: showSuccess
        };
    },
    view: function view(ctrl, args) {
        return m('.clipboard.w-row', [m('.w-col.w-col-10.w-col-small-10.w-col-tiny-10', m('textarea.copy-textarea.text-field.w-input', {
            style: 'margin-bottom:0;'
        }, args.value)), m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2', m('button.btn.btn-medium.btn-no-border.btn-terciary.fa.fa-clipboard.w-button', {
            config: ctrl.setClickHandler
        })), ctrl.showSuccess() ? m.component(popNotification, { message: 'Link copied' }) : '']);
    }
};

var projectInviteCard = {
    view: function view(ctrl, args) {
        var project = args.project;

        return m('.card.card-secondary.u-marginbottom-20.u-radius.w-clearfix', [m('.fontsize-base.fontweight-semibold.u-marginbottom-30.u-text-center', 'Invite your friends to support your campaign'), m('.w-row', [m('.w-sub-col.u-marginbottom-20.w-col.w-col-4', [m.component(facebookButton, { url: h.projectFullPermalink(project) + '?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share_insights', medium: true })]), m('.w-sub-col.u-marginbottom-20.w-col.w-col-4', [m.component(facebookButton, { messenger: true, url: h.projectFullPermalink(project) + '?ref=facebook&utm_source=facebook.com&utm_medium=messenger&utm_campaign=project_share_insights', medium: true })]), m('.w-col.w-col-4', [m('.w-form', [m('form[data-name=\'Email Form 2\'][id=\'email-form-2\'][name=\'email-form-2\']', [m.component(copyTextInput, { value: h.projectFullPermalink(project) + '?ref=project_link' })])])])])]);
    }
};

var I18nScope$5 = _$1.partial(h.i18nScope, 'projects.insights');

var insights = {
    controller: function controller(args) {
        var filtersVM = postgrest$1.filtersVM({
            project_id: 'eq'
        }),
            displayModal = h.toggleProp(false, true),
            projectDetails = m.prop([]),
            contributionsPerDay = m.prop([]),
            visitorsTotal = m.prop(0),
            visitorsPerDay = m.prop([]),
            loader = postgrest$1.loaderWithToken,
            setProjectId = function setProjectId() {
            try {
                var project_id = m.route.param('project_id');

                filtersVM.project_id(project_id);
            } catch (e) {
                filtersVM.project_id(args.root.getAttribute('data-id'));
            }
        };

        if (h.paramByName('online_success') === 'true') {
            displayModal.toggle();
        }

        setProjectId();

        var l = loader(models.projectDetail.getRowOptions(filtersVM.parameters()));
        l.load().then(projectDetails);

        var processVisitors = function processVisitors(data) {
            if (!_$1.isEmpty(data)) {
                visitorsPerDay(data);
                visitorsTotal(_$1.first(data).total);
            }
        };

        var lVisitorsPerDay = loader(models.projectVisitorsPerDay.getRowOptions(filtersVM.parameters()));
        lVisitorsPerDay.load().then(processVisitors);

        var lContributionsPerDay = loader(models.projectContributionsPerDay.getRowOptions(filtersVM.parameters()));
        lContributionsPerDay.load().then(contributionsPerDay);

        var contributionsPerLocationTable = [['State', 'Support', 'US$ supported (% of total)']];
        var buildPerLocationTable = function buildPerLocationTable(contributions) {
            return !_$1.isEmpty(contributions) ? _$1.map(_$1.first(contributions).source, function (contribution) {
                var column = [];

                column.push(contribution.state_acronym || 'Other/other');
                column.push(contribution.total_contributions);
                column.push([contribution.total_contributed, [// Adding row with custom comparator => read project-data-table description
                m('input[type="hidden"][value="' + contribution.total_contributed + '"'), 'US$ ', h.formatNumber(contribution.total_contributed, 2, 3), m('span.w-hidden-small.w-hidden-tiny', ' (' + contribution.total_on_percentage.toFixed(2) + '%)')]]);
                return contributionsPerLocationTable.push(column);
            }) : [];
        };

        var lContributionsPerLocation = loader(models.projectContributionsPerLocation.getRowOptions(filtersVM.parameters()));
        lContributionsPerLocation.load().then(buildPerLocationTable);

        var contributionsPerRefTable = [[I18n$1.t('ref_table.header.origin', I18nScope$5()), I18n$1.t('ref_table.header.contributions', I18nScope$5()), I18n$1.t('ref_table.header.amount', I18nScope$5())]];
        var buildPerRefTable = function buildPerRefTable(contributions) {
            return !_$1.isEmpty(contributions) ? _$1.map(_$1.first(contributions).source, function (contribution) {
                // Test if the string matches a word starting with ctrse_ and followed by any non-digit group of characters
                // This allows to remove any versioned referral (i.e.: ctrse_newsletter_123) while still getting ctrse_test_ref
                var re = /(ctrse_[\D]*)/,
                    test = re.exec(contribution.referral_link);

                var column = [];

                if (test) {
                    // Removes last underscore if it exists
                    contribution.referral_link = test[0].substr(-1) === '_' ? test[0].substr(0, test[0].length - 1) : test[0];
                }

                column.push(contribution.referral_link ? I18n$1.t('referral.' + contribution.referral_link, I18nScope$5({ defaultValue: contribution.referral_link })) : I18n$1.t('referral.others', I18nScope$5()));
                column.push(contribution.total);
                column.push([contribution.total_amount, [m('input[type="hidden"][value="' + contribution.total_contributed + '"'), 'US$ ', h.formatNumber(contribution.total_amount, 2, 3), m('span.w-hidden-small.w-hidden-tiny', ' (' + contribution.total_on_percentage.toFixed(2) + '%)')]]);
                return contributionsPerRefTable.push(column);
            }) : [];
        };

        var lContributionsPerRef = loader(models.projectContributionsPerRef.getRowOptions(filtersVM.parameters()));
        lContributionsPerRef.load().then(buildPerRefTable);

        return {
            l: l,
            lContributionsPerRef: lContributionsPerRef,
            lContributionsPerLocation: lContributionsPerLocation,
            lContributionsPerDay: lContributionsPerDay,
            lVisitorsPerDay: lVisitorsPerDay,
            displayModal: displayModal,
            filtersVM: filtersVM,
            projectDetails: projectDetails,
            contributionsPerDay: contributionsPerDay,
            contributionsPerLocationTable: contributionsPerLocationTable,
            contributionsPerRefTable: contributionsPerRefTable,
            visitorsPerDay: visitorsPerDay,
            visitorsTotal: visitorsTotal
        };
    },
    view: function view(ctrl) {
        var project = _$1.first(ctrl.projectDetails()) || {
            user: {
                name: 'Director'
            }
        },
            buildTooltip = function buildTooltip(el) {
            return m.component(tooltip, {
                el: el,
                text: ['Tell us where your project is located. Learn how to use this table and better plan your communication actions ', m('a[href="' + I18n$1.t('ref_table.help_url', I18nScope$5()) + '"][target=\'_blank\']', 'here.')],
                width: 380
            });
        };

        if (!ctrl.l()) {
            project.user.name = project.user.name || 'Director';
        }

        return m('.project-insights', !ctrl.l() ? [m('.w-section.section-product.' + project.mode), project.is_owner_or_admin ? m.component(projectDashboardMenu, {
            project: m.prop(project)
        }) : '', ctrl.displayModal() ? m.component(modalBox, {
            displayModal: ctrl.displayModal,
            content: [onlineSuccessModalContent]
        }) : '', m('.w-container', project.state === 'successful' && !project.has_cancelation_request ? m.component(projectSuccessfulOnboard, { project: m.prop(project) }) : [m('.w-row.u-marginbottom-40', [m('.w-col.w-col-8.w-col-push-2', [m('.fontweight-semibold.fontsize-larger.lineheight-looser.u-marginbottom-10.u-text-center.dashboard-header', I18n$1.t('campaign_title', I18nScope$5())), project.state === 'online' && !project.has_cancelation_request ? m.component(projectInviteCard, { project: project }) : '', project.state === 'draft' && !project.has_cancelation_request ? m.component(adminProjectDetailsCard, {
            resource: project
        }) : '', m('p.' + project.state + '-project-text.u-text-center.fontsize-small.lineheight-loose', project.has_cancelation_request ? m.trust(I18n$1.t('has_cancelation_request_explanation', I18nScope$5())) : [project.mode === 'flex' && _$1.isNull(project.expires_at) && project.state !== 'draft' ? m('span', [m.trust(I18n$1.t('finish_explanation', I18nScope$5())), m('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/213783503-tudo-sobre-Prazo-da-campanha"][target="_blank"]', I18n$1.t('know_more', I18nScope$5()))]) : m.trust(I18n$1.t('campaign.' + project.mode + '.' + project.state, I18nScope$5({ username: project.user.name, expires_at: h.momentify(project.zone_expires_at), sent_to_analysis_at: h.momentify(project.sent_to_analysis_at) })))])])])]), project.state === 'draft' ? m.component(projectDeleteButton, { project: project }) : '', project.is_published ? [m('.divider'), m('.w-section.section-one-column.section.bg-gray.before-footer', [m('.w-container', [m.component(projectDataStats, { project: m.prop(project), visitorsTotal: ctrl.visitorsTotal }), m('.w-row', [m('.w-col.w-col-12.u-text-center', {
            style: {
                'min-height': '300px'
            }
        }, [m('.fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center', [I18n$1.t('visitors_per_day_label', I18nScope$5()), h.newFeatureBadge()]), !ctrl.lVisitorsPerDay() ? m.component(projectDataChart, {
            collection: ctrl.visitorsPerDay,
            dataKey: 'visitors',
            xAxis: function xAxis(item) {
                return h.momentify(item.day);
            },
            emptyState: I18n$1.t('visitors_per_day_empty', I18nScope$5())
        }) : h.loader()])]), m('.w-row', [m('.w-col.w-col-12.u-text-center', {
            style: {
                'min-height': '300px'
            }
        }, [!ctrl.lContributionsPerDay() ? m.component(projectDataChart, {
            collection: ctrl.contributionsPerDay,
            label: I18n$1.t('amount_per_day_label', I18nScope$5()),
            dataKey: 'total_amount',
            xAxis: function xAxis(item) {
                return h.momentify(item.paid_at);
            },
            emptyState: I18n$1.t('amount_per_day_empty', I18nScope$5())
        }) : h.loader()])]), m('.w-row', [m('.w-col.w-col-12.u-text-center', {
            style: {
                'min-height': '300px'
            }
        }, [!ctrl.lContributionsPerDay() ? m.component(projectDataChart, {
            collection: ctrl.contributionsPerDay,
            label: I18n$1.t('contributions_per_day_label', I18nScope$5()),
            dataKey: 'total',
            xAxis: function xAxis(item) {
                return h.momentify(item.paid_at);
            },
            emptyState: I18n$1.t('contributions_per_day_empty', I18nScope$5())
        }) : h.loader()])]), m('.w-row', [m('.w-col.w-col-12.u-text-center', [m('.project-contributions-per-ref', [m('.fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center', [I18n$1.t('ref_origin_title', I18nScope$5()), ' ', buildTooltip('span.fontsize-smallest.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary')]), !ctrl.lContributionsPerRef() ? !_$1.isEmpty(_$1.rest(ctrl.contributionsPerRefTable)) ? m.component(projectDataTable, {
            table: ctrl.contributionsPerRefTable,
            defaultSortIndex: -2
        }) : m('.card.u-radius.medium.u-marginbottom-60', m('.w-row.u-text-center.u-margintop-40.u-marginbottom-40', m('.w-col.w-col-8.w-col-push-2', m('p.fontsize-base', I18n$1.t('contributions_per_ref_empty', I18nScope$5()))))) : h.loader()])])]), m('.w-row', [m('.w-col.w-col-12.u-text-center', [m('.project-contributions-per-ref', [m('.fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center', I18n$1.t('location_origin_title', I18nScope$5())), !ctrl.lContributionsPerLocation() ? !_$1.isEmpty(_$1.rest(ctrl.contributionsPerLocationTable)) ? m.component(projectDataTable, {
            table: ctrl.contributionsPerLocationTable,
            defaultSortIndex: -2
        }) : m('.card.u-radius.medium.u-marginbottom-60', m('.w-row.u-text-center.u-margintop-40.u-marginbottom-40', m('.w-col.w-col-8.w-col-push-2', m('p.fontsize-base', I18n$1.t('contributions_per_location_empty', I18nScope$5()))))) : h.loader()])])]), m('.w-row', [m('.w-col.w-col-12.u-text-center', [m.component(projectReminderCount, {
            resource: project
        })])])])]), project.can_cancel ? m.component(projectCancelButton, { project: project }) : ''] : ''] : h.loader());
    }
};

var postsPreview = {
    controller: function controller(args) {
        var togglePreview = function togglePreview() {
            h.scrollTop();
            args.showPreview(false);
        },
            sendNotification = function sendNotification(e) {
            e.preventDefault();

            var notificationData = {
                title: args.title(),
                comment_html: args.comment_html(),
                reward_id: args.reward_id >= 1 ? args.reward_id : null,
                recipients: args.reward_id >= 1 ? 'reward' : args.reward_id == '-1' ? 'public' : 'backers'
            };

            return m.request({
                method: 'POST',
                url: '/projects/' + args.project_id + '/posts.json',
                data: {
                    project_post: notificationData,
                    project: args.project_id
                },
                config: h.setCsrfToken
            }).then(function () {
                args.showSuccess(true);
                args.comment_html('');
                args.title('');
                togglePreview();
                m.redraw();
            }).catch(function (err) {
                args.errors('Error sending message.'), args.showError(true);
                m.redraw();
            });
        };
        return {
            sendNotification: sendNotification,
            togglePreview: togglePreview
        };
    },
    view: function view(ctrl, args) {
        var comment_html = args.comment_html(),
            title = args.title(),
            recipientsText = args.reward_id > 1 ? m('.fontsize-small.u-marginbottom-30', ['The above news will be sent by email to ', m('span.fontweight-semibold', args.rewardText), ' and stay ', m('span.fontweight-semibold', 'visible on the platform only for those supporters.')]) : args.reward_id === '-1' ? m('.fontsize-small.u-marginbottom-30', ['The news above will be  ', m('span.fontweight-semibold', 'sent by email to everyone'), ' the supporters and will be ', m('span.fontweight-semibold', 'publicly visible '), 'on the platform.']) : m('.fontsize-small.u-marginbottom-30', [m('span', ' The news above will be  '), m('span.fontweight-semibold', 'sent by email to all supporters'), m('span', ' and will stay '), m('span.fontweight-semibold', 'visible only to those on the platform.')]);

        return m('div', [m('.dashboard-header.u-text-center', m('.w-container', m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', m('.fontsize-larger.fontweight-semibold.lineheight-tight', 'Review your news before submitting!')), m('.w-col.w-col-3')]))), m('.section', [m('.w-container', m('.card.u-marginbottom-60.u-radius.w-row', [m('.w-col.w-col-1'), m('.u-marginbottom-30.u-margintop-30.w-col.w-col-10.w-hidden-small.w-hidden-tiny', [m('.fontcolor-secondary.fontsize-small.u-text-center', '16/01/2017'), m('.fontsize-larger.fontweight-semibold.u-marginbottom-30.u-text-center', title), m('.fontsize-base', m.trust(comment_html))]), m('.w-col.w-col-1')])), m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', recipientsText), m('.w-col.w-col-3')]), m('.u-marginbottom-20.w-row', [m('.w-col.w-col-3'), m('.w-sub-col.w-col.w-col-4', m('button.btn.btn-large', {
            onclick: ctrl.sendNotification
        }, [m('span.fa.fa-paper-plane', ''), ' ', m.trust('&nbsp;'), 'Submit'])), m('.w-col.w-col-2', m('button.btn.btn-large.btn-terciary', {
            onclick: ctrl.togglePreview
        }, 'Edit')), m('.w-col.w-col-3')])])]);
    }
};

var posts = {
    controller: function controller(args) {
        var deleteFormSubmit = void 0;
        var showPreview = m.prop(false),
            showSuccess = m.prop(false),
            showError = m.prop(false),
            titleHasError = m.prop(false),
            commentHasError = m.prop(false),
            projectPosts = m.prop(),
            loader = postgrest$1.loaderWithToken,
            errors = m.prop(''),
            fields = {
            title: m.prop(''),
            comment_html: m.prop(''),
            reward_id: m.prop('-1')
        },
            filterVM = postgrest$1.filtersVM({
            project_id: 'eq'
        }),
            validateTitle = function validateTitle() {
            var title = String(fields.title());
            if (title.length === 0) {
                titleHasError(true);
            }

            return !titleHasError();
        },
            validateComment = function validateComment() {
            var comment = String(fields.comment_html());
            if (comment.length === 0) {
                commentHasError(true);
            }

            return !commentHasError();
        },
            togglePreview = function togglePreview() {
            if (!validateTitle()) {
                errors('Title can not be empty.');
                showError(true);
            } else if (!validateComment()) {
                errors('Message can not be left blank.');
                showError(true);
            } else {
                h.scrollTop();
                showPreview(true);
            }
            return false;
        },
            project_id = args.project_id,
            projectDetails = m.prop([]),
            rewardText = function rewardText(rewardId) {
            var reward = _$1.find(rewardVM.rewards(), function (r) {
                return String(r.id) === String(rewardId);
            });
            return 'Reward supporters US$' + reward.minimum_value + ' - ' + (reward.title ? reward.title : reward.description.substring(0, 70) + '...');
        },
            showRecipientes = function showRecipientes(post) {
            if (post.recipients === 'public') {
                return 'Everyone (supporters and non-supporters))';
            } else if (post.recipients === 'backers') {
                return 'All supporters';
            }
            var reward = _$1.find(rewardVM.rewards(), function (r) {
                return r.id === post.reward_id;
            });
            if (reward) {
                return rewardText(reward.id);
            }
            return '...';
        },
            toDeletePost = m.prop(-1),
            deletePost = function deletePost(post) {
            return function () {
                toDeletePost(post.id);
                m.redraw(true);
                deleteFormSubmit();
                return false;
            };
        },
            setPostDeletionForm = function setPostDeletionForm(el, isInit) {
            if (!isInit) {
                deleteFormSubmit = function deleteFormSubmit() {
                    return el.submit();
                };
            }
        },
            openedPercentage = function openedPercentage(post) {
            return Math.floor(post.open_count / post.delivered_count * 100) || 0;
        };

        models.projectPostDetail.pageSize(false);
        filterVM.project_id(project_id);
        var listVM = postgrest$1.loaderWithToken(models.projectPostDetail.getPageOptions(_$1.extend(filterVM.parameters(), { order: 'created_at.desc' }))),
            l = loader(models.projectDetail.getRowOptions(filterVM.parameters()));

        listVM.load().then(projectPosts);

        rewardVM.fetchRewards(project_id);

        l.load().then(projectDetails);

        return {
            listVM: listVM,
            l: l,
            projectPosts: projectPosts,
            showRecipientes: showRecipientes,
            fields: fields,
            showPreview: showPreview,
            togglePreview: togglePreview,
            project_id: project_id,
            deletePost: deletePost,
            rewardText: rewardText,
            errors: errors,
            showSuccess: showSuccess,
            titleHasError: titleHasError,
            commentHasError: commentHasError,
            showError: showError,
            setPostDeletionForm: setPostDeletionForm,
            toDeletePost: toDeletePost,
            projectDetails: projectDetails,
            openedPercentage: openedPercentage
        };
    },
    view: function view(ctrl) {
        var project = _$1.first(ctrl.projectDetails()),
            paidRewards = _$1.filter(rewardVM.rewards(), function (reward) {
            return reward.paid_count > 0;
        });

        return project ? m('.project-posts', project.is_owner_or_admin ? m.component(projectDashboardMenu, {
            project: m.prop(project)
        }) : '', ctrl.showPreview() ? m.component(postsPreview, {
            showError: ctrl.showError,
            showSuccess: ctrl.showSuccess,
            errors: ctrl.errors,
            showPreview: ctrl.showPreview,
            project_id: ctrl.project_id,
            comment_html: ctrl.fields.comment_html,
            title: ctrl.fields.title,
            reward_id: ctrl.fields.reward_id(),
            rewardText: ctrl.fields.reward_id() >= 1 ? ctrl.rewardText(ctrl.fields.reward_id()) : null
        }) : [m('.w-section.section-product.' + project.mode), ctrl.showSuccess() ? m.component(popNotification, {
            message: 'Message sent successfully'
        }) : '', ctrl.showError() ? m.component(popNotification, {
            message: ctrl.errors(),
            error: true
        }) : '', m('.dashboard-header.u-text-center', m('.w-container', m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', m('.fontsize-larger.fontweight-semibold.lineheight-tight', 'Submit a news story to your supporters')), m('.w-col.w-col-3')]))), m('.section', m('.w-container', m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', [m('.u-marginbottom-60.u-text-center', m('._w-inline-block.card.fontsize-small.u-radius', [m('span.fa.fa-lightbulb-o', ''), ' Here are some great reasons to ', m('a.alt-link[href=\'https://catarse.attach.io/B1AHAGm1x\'][target=\'_blank\']', 'talk to your supporters right now!')])), m('.card.card-terciary.medium.u-marginbottom-80.w-form', [m('form', [m('label.field-label.fontweight-semibold', 'Recipients'), m('select.positive.text-field.w-select', {
            onchange: m.withAttr('value', ctrl.fields.reward_id)
        }, [m('option[value=\'-1\']', {
            selected: true
        }, 'Everyone (supporters and non-supporters))'), m('option[value=\'0\']', 'All supporters'), _$1.map(paidRewards, function (reward) {
            return m('option[value=\'' + reward.id + '\']', ctrl.rewardText(reward.id));
        })]), m('label.field-label.fontweight-semibold', 'Title'), m('input.positive.text-field.w-input[id=\'post_title\'][maxlength=\'256\'][type=\'text\']', {
            name: 'posts[title]',
            value: ctrl.fields.title(),
            onfocus: function onfocus() {
                return ctrl.titleHasError(false);
            },
            class: ctrl.titleHasError() ? 'error' : '',
            onchange: m.withAttr('value', ctrl.fields.title)
        }), m('label.field-label.fontweight-semibold', 'Texto'), m('.preview-container.u-marginbottom-40', {
            class: ctrl.commentHasError() ? 'error' : '',
            onclick: function onclick() {
                return ctrl.commentHasError(false);
            }
        }, h.redactor('posts[comment_html]', ctrl.fields.comment_html)), m('.u-marginbottom-20.w-row', [m('.w-col.w-col-3'), m('.w-sub-col.w-col.w-col-6', m('button.btn.btn-large', {
            onclick: ctrl.togglePreview
        }, 'Preview')), m('.w-col.w-col-3')])])]), m('.fontsize-large.fontweight-semibold.u-marginbottom-40', 'News already sent'), m('.table-outer.u-marginbottom-60', [m('.fontsize-smaller.fontweight-semibold.header.table-row.w-row', [m('.table-col.w-col.w-col-5', m('div', 'Título')), m('.table-col.u-text-center.w-col.w-col-3', m('div', 'Sent')), m('.table-col.u-text-center.w-col.w-col-3', m('div', 'Open')), m('.table-col.w-col.w-col-1')]), ctrl.projectPosts() ? m('.fontsize-small.table-inner', [_$1.map(ctrl.projectPosts(), function (post) {
            return m('.table-row.w-row', [m('.table-col.w-col.w-col-5', [m('a.alt-link.fontsize-base[href=\'/projects/' + project.project_id + '/posts/' + post.id + '#posts\'][target=\'_blank\']', post.title), m('.fontcolor-secondary.fontsize-smallest', [m('span.fontweight-semibold', 'Enviada em: '), h.momentify(post.created_at, 'DD/MM/YYYY, h:mm A')]), m('.fontcolor-secondary.fontsize-smallest', [m('span.fontweight-semibold', 'Recipients: '), ctrl.showRecipientes(post)])]), m('.table-col.u-text-center.w-col.w-col-3', m('.fontsize-base', post.delivered_count)), m('.table-col.u-text-center.w-col.w-col-3', m('.fontsize-base', [post.open_count, m('span.fontcolor-secondary', ' (' + ctrl.openedPercentage(post) + '%)')])), m('.table-col.w-col.w-col-1', m('button.btn.btn-no-border.btn-small.btn-terciary.fa.fa-lg.fa-trash', {
                onclick: ctrl.deletePost(post)
            }))]);
        }), m('form.w-hidden', {
            action: '/en/projects/' + project.project_id + '/posts/' + ctrl.toDeletePost(),
            method: 'POST',
            config: ctrl.setPostDeletionForm
        }, [m('input[name=\'utf8\'][type=\'hidden\'][value=\'✓\']'), m('input[name=\'_method\'][type=\'hidden\'][value=\'delete\']'), m('input[name=\'authenticity_token\'][type=\'hidden\'][value=\'' + h.authenticityToken() + '\']')])]) : h.loader()])]), m('.w-col.w-col-1')])))]) : h.loader();
    }
};

var I18nScope$11 = _$1.partial(h.i18nScope, 'projects.reward_fields');
var surveyScope = _$1.partial(h.i18nScope, 'projects.dashboard_surveys');

var surveys = {
    controller: function controller(args) {
        var loader = postgrest$1.loaderWithToken,
            filterVM = postgrest$1.filtersVM({
            project_id: 'eq'
        }),
            project_id = args.project_id,
            toggleOpen = function toggleOpen(reward) {
            m.request({
                method: 'GET',
                config: h.setCsrfToken,
                url: '/projects/' + reward.project_id + '/rewards/' + reward.id + '/toggle_survey_finish'
            }).then(function () {
                // just to avoid another request
                if (reward.survey_finished_at) {
                    reward.survey_finished_at = null;
                } else reward.survey_finished_at = moment().format();
                m.redraw();
            });
        },
            projectDetails = m.prop([]);


        filterVM.project_id(project_id);
        var l = loader(models.projectDetail.getRowOptions(filterVM.parameters()));

        rewardVM.fetchRewards(project_id).then(function () {
            _$1.map(rewardVM.rewards(), function (reward) {
                _$1.extend(reward, {
                    sentCount: '',
                    answeredCount: ''
                });
                var l = postgrest$1.loaderWithToken(models.sentSurveyCount.postOptions({
                    reward_id: reward.id
                }));
                var l2 = postgrest$1.loaderWithToken(models.answeredSurveyCount.postOptions({
                    reward_id: reward.id
                }));

                l.load().then(function (data) {
                    reward.sentCount = data;
                });
                l2.load().then(function (data) {
                    reward.answeredCount = data;
                });
            });
        });
        l.load().then(projectDetails);

        return {
            l: l,
            project_id: project_id,
            toggleOpen: toggleOpen,
            rewardVM: rewardVM,
            projectDetails: projectDetails
        };
    },
    view: function view(ctrl) {
        var project = _$1.first(ctrl.projectDetails());
        var canBeCreated = function canBeCreated(reward) {
            return !reward.survey_sent_at && (reward.maximum_contributions && reward.paid_count >= reward.maximum_contributions || project.state !== 'online');
        };
        var cannotBeCreated = function cannotBeCreated(reward) {
            return !reward.survey_sent_at && project.state === 'online' && (!reward.maximum_contributions || reward.paid_count < reward.maximum_contributions);
        };
        var availableAction = function availableAction(reward) {
            if (canBeCreated(reward)) {
                return m('.w-col.w-col-3.w-col-small-small-stack.w-col-tiny-tiny-stack', m('a.btn.btn-small.w-button', {
                    onclick: function onclick() {
                        return m.route('/projects/' + ctrl.project_id + '/rewards/' + reward.id + '/surveys/new');
                    }
                }, I18n$1.t('create_survey', surveyScope())));
            } else if (cannotBeCreated(reward)) {
                return m('.w-col.w-col-3.w-col-small-3.w-col-tiny-tiny-stack', m('a.btn.btn-desactivated.btn-small.btn-terciary.w-button', I18n$1.t('create_survey', surveyScope())));
            } else if (reward.survey_sent_at && !reward.survey_finished_at) {
                return m('.w-clearfix.w-col.w-col-3.w-col-small-3.w-col-tiny-3', m('.u-right.w-clearfix', [m('.fontcolor-secondary.fontsize-smallest.lineheight-tighter.u-marginbottom-10', 'Accepting Responses?'), m('.u-marginbottom-10.w-clearfix', m('a.toggle.toggle-on.u-right.w-clearfix.w-inline-block', {
                    onclick: function onclick() {
                        ctrl.toggleOpen(reward);
                    }
                }, [m('.toggle-btn'), m('.u-right', 'YES')])), m('.u-right', [m('.fontcolor-secondary.fontsize-mini.lineheight-tighter', 'Sent in:'), m('.fontcolor-secondary.fontsize-mini.lineheight-tighter', h.momentify(reward.survey_sent_at, 'DD/MM/YYYY'))])]));
            }

            return m('.w-clearfix.w-col.w-col-3.w-col-small-3.w-col-tiny-3', m('.u-right', [m('.fontcolor-secondary.fontsize-smallest.lineheight-tighter.u-marginbottom-10', 'Accepting Responses?'), m('.u-marginbottom-10.w-clearfix', m('a.toggle.toggle-off.u-right.w-inline-block', {
                onclick: function onclick() {
                    ctrl.toggleOpen(reward);
                }
            }, [m('div', 'NO'), m('.toggle-btn.toggle-btn--off')])), m('.u-right', [m('.fontcolor-secondary.fontsize-mini.lineheight-tighter', 'Finished in:'), m('.fontcolor-secondary.fontsize-mini.lineheight-tighter', h.momentify(reward.survey_finished_at, 'DD/MM/YYYY'))])]));
        };

        return project ? m('.project-surveys', project.is_owner_or_admin ? m.component(projectDashboardMenu, {
            project: m.prop(project)
        }) : '', m('.section', m('.w-container', m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.fontsize-larger.fontweight-semibold.lineheight-looser.u-text-center', I18n$1.t('title', surveyScope())), m('.fontsize-base.u-text-center', I18n$1.t('subtitle', surveyScope())), m('.u-margintop-20.u-text-center', m('.w-inline-block.card.fontsize-small.u-radius', [m('span.fa.fa-lightbulb-o', ''), m.trust('&nbsp;'), m.trust(I18n$1.t('help_link', surveyScope()))]))]), m('.w-col.w-col-2')]))), m('.divider'), m('.before-footer.bg-gray.section', m('.w-container', [project.state === 'online' ? m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', m('.card.card-message.u-marginbottom-40.u-radius', m('.fontsize-base', [m('span.fa.fa-exclamation-circle', ''), I18n$1.t('online_explanation', surveyScope())]))), m('.w-col.w-col-2')]) : '', m('.table-outer.u-marginbottom-60', [m('.fontweight-semibold.header.table-row.w-hidden-small.w-hidden-tiny.w-row', [m('.table-col.w-col.w-col-3', m('div', 'Reward')), m('.table-col.w-col.w-col-9', m('.w-row', [m('.u-text-center-big-only.w-col.w-col-4.w-col-small-4.w-col-tiny-4', m('.w-row', [m('.w-col.w-col-6', m('div', 'Sent')), m('.w-col.w-col-6', m('div', 'Answered'))])), m('.u-text-center-big-only.w-col.w-col-5.w-col-small-5.w-col-tiny-5', m('div', 'Results')), m('.w-clearfix.w-col.w-col-3.w-col-small-3.w-col-tiny-3', m('.u-right'))]))]), m('.fontsize-small.table-inner', [_$1.map(ctrl.rewardVM.rewards(), function (reward) {
            return m('.table-row.w-row', [m('.table-col.w-col.w-col-3', [m('.fontsize-base.fontweight-semibold', 'US$ ' + reward.minimum_value + ' ou mais'), m('.fontsize-smallest.fontweight-semibold', reward.title), m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-10', reward.description.substring(0, 90) + '...'), m('.fontcolor-secondary.fontsize-smallest', [m('span.fontcolor-terciary', 'Estimated delivery time:'), m.trust('&nbsp;'), h.momentify(reward.deliver_at, 'MMMM/YYYY')]), m('.fontcolor-secondary.fontsize-smallest', [m('span.fontcolor-terciary', 'Send:'), m.trust('&nbsp;'), I18n$1.t('shipping_options.' + reward.shipping_options, I18nScope$11())])]), m('.table-col.w-col.w-col-9', m('.u-margintop-20.w-row', [m('.u-text-center-big-only.w-col.w-col-4.w-col-small-4.w-col-tiny-4', m('.w-row', [m('.w-col.w-col-6', !canBeCreated(reward) && !cannotBeCreated(reward) ? m('.fontsize-base', [m('span.fa.fa-paper-plane.fontcolor-terciary', ' '), ' ' + reward.sentCount]) : ''), m('.w-col.w-col-6', !canBeCreated(reward) && !cannotBeCreated(reward) ? m('.fontsize-base', [m('span.fa.fa-check-circle.fontcolor-terciary', ''), ' ' + reward.answeredCount, m('span.fontcolor-secondary', '(' + (reward.sentCount === 0 ? '0' : Math.floor(reward.answeredCount / reward.sentCount * 100)) + '%)')]) : '')])), m('.u-text-center-big-only.w-col.w-col-5.w-col-small-5.w-col-tiny-5', [
            // m('a.btn.btn-inline.btn-small.btn-terciary.fa.fa-eye.fa-lg.u-marginright-10.w-button'),
            !canBeCreated(reward) && !cannotBeCreated(reward) ? m('a.btn.btn-inline.btn-small.btn-terciary.fa.fa-eye.fa-lg.w-button[target=\'_blank\']', {
                onclick: function onclick() {
                    return m.route('/projects/' + project.project_id + '/contributions_report', {
                        rewardId: reward.id
                    });
                }
            }) : '']), availableAction(reward)]))]);
        })])])]))) : h.loader();
    }
};

var openQuestionType = 'open';
var multipleQuestionType = 'multiple';
var newQuestion = function newQuestion() {
    return {
        type: openQuestionType,
        question: '',
        description: '',
        survey_question_choices_attributes: m.prop([{
            option: 'option 1'
        }, {
            option: 'option 2'
        }]),
        toggleDropdown: h.toggleProp(false, true)
    };
};

var dashboardQuestions = m.prop([newQuestion()]);
var confirmAddress = h.toggleProp(true, false);
var questionWithEmptyFields = m.prop([]);

var submitQuestions = function submitQuestions(rewardId) {
    return m.request({
        method: 'POST',
        url: '/rewards/' + rewardId + '/surveys',
        data: {
            confirm_address: confirmAddress(),
            survey_open_questions_attributes: _$1.filter(dashboardQuestions(), { type: openQuestionType }),
            survey_multiple_choice_questions_attributes: _$1.filter(dashboardQuestions(), { type: multipleQuestionType })
        },
        config: h.setCsrfToken
    });
};

var updateIfQuestion = function updateIfQuestion(questionToUpdate) {
    return function (question, idx) {
        if (idx === _$1.indexOf(dashboardQuestions(), questionToUpdate)) {
            return questionToUpdate;
        }

        return question;
    };
};

var updateDashboardQuestion = function updateDashboardQuestion(questionToUpdate) {
    return _$1.compose(dashboardQuestions, _$1.map(dashboardQuestions(), updateIfQuestion(questionToUpdate)));
};

var addDashboardQuestion = _$1.compose(dashboardQuestions, function () {
    dashboardQuestions().push(newQuestion());

    return dashboardQuestions();
});

var deleteDashboardQuestion = function deleteDashboardQuestion(question) {
    dashboardQuestions(_$1.without(dashboardQuestions(), question));
};

var addMultipleQuestionOption = function addMultipleQuestionOption(question) {
    question.survey_question_choices_attributes().push({ option: '' });

    return false;
};

var deleteMultipleQuestionOption = function deleteMultipleQuestionOption(question, idx) {
    question.survey_question_choices_attributes().splice(idx, 1);

    return false;
};

var isValid = function isValid() {
    questionWithEmptyFields([]);

    return _$1.reduce(dashboardQuestions(), function (isValid, question) {
        if (isValid === false) {
            return isValid;
        }

        question.error = false;

        if (question.question.trim() === '') {
            questionWithEmptyFields().push(question);
            question.error = true;

            return false;
        }

        return true;
    }, true);
};

var surveyVM = {
    addDashboardQuestion: addDashboardQuestion,
    confirmAddress: confirmAddress,
    dashboardQuestions: dashboardQuestions,
    deleteDashboardQuestion: deleteDashboardQuestion,
    updateDashboardQuestion: updateDashboardQuestion,
    deleteMultipleQuestionOption: deleteMultipleQuestionOption,
    addMultipleQuestionOption: addMultipleQuestionOption,
    submitQuestions: submitQuestions,
    openQuestionType: openQuestionType,
    multipleQuestionType: multipleQuestionType,
    isValid: isValid
};

var I18nScope$13 = _$1.partial(h.i18nScope, 'projects.reward_fields');

var rewardCardBig = {
    view: function view(ctrl, args) {
        var reward = args.reward;

        return m('.card.u-radius', [m('.fontsize-large.fontweight-semibold.u-marginbottom-10', 'US$' + reward.minimum_value + ' or more' + (reward.title ? ': ' + reward.title : '')), m('.fontcolor-secondary.fontsize-small.u-marginbottom-20', reward.description.substring(0, 140) + '...'), m('.fontcolor-secondary.fontsize-smallest', [m('span.fontcolor-terciary', 'Estimated delivery time: '), h.momentify(reward.deliver_at, 'MMMM/YYYY'), m('span.fontcolor-terciary', '    |    '), m('span.fontcolor-terciary', 'Send: '), I18n$1.t('shipping_options.' + reward.shipping_options, I18nScope$13())])]);
    }
};

var I18nScope$14 = _$1.partial(h.i18nScope, 'activerecord.attributes.address');

var surveyCreatePreview = {
    controller: function controller(args) {
        var openQuestions = _$1.filter(args.surveyVM.dashboardQuestions(), { type: 'open' }),
            multipleChoiceQuestions = _$1.filter(args.surveyVM.dashboardQuestions(), { type: 'multiple' });
        var togglePreview = function togglePreview() {
            args.showPreview.toggle();
            h.scrollTop();
        };

        return {
            togglePreview: togglePreview,
            multipleChoiceQuestions: multipleChoiceQuestions,
            openQuestions: openQuestions
        };
    },
    view: function view(ctrl, args) {
        return m('.section.u-marginbottom-40', m('.section.u-text-center', m('.w-container', m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.fontsize-larger.fontweight-semibold.lineheight-looser', 'Review the questionnaire'), m('.fontsize-base', 'Your supporters will receive a link to the questionnaire below by email. See if everything is correct before sending it!')]), m('.w-col.w-col-2')]))), m('.section', m('.w-container', m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', m('.card.card-terciary.medium.u-marginbottom-30', [args.confirmAddress ? m('.u-marginbottom-30.w-form', [m('.fontcolor-secondary.fontsize-base.fontweight-semibold', 'Reward delivery address'), m('.fontcolor-secondary.fontsize-smaller.u-marginbottom-30', 'To where Director Name should send your reward when ready.'), m('form', [m('.w-row', [m('.w-sub-col.w-col.w-col-6', [m('label.field-label.fontweight-semibold', 'Country / Country'), m('select.positive.text-field.w-select', [m("option[value='']", 'Select...')])]), m('.w-col.w-col-6', m('.w-row', [m('.w-sub-col-middle.w-col.w-col-6.w-col-small-6.w-col-tiny-6'), m('.w-col.w-col-6.w-col-small-6.w-col-tiny-6')]))]), m('div', [m('label.field-label.fontweight-semibold', 'Street'), m("input.positive.text-field.w-input[type='email']")]), m('.w-row', [m('.w-sub-col.w-col.w-col-4', [m('label.field-label.fontweight-semibold', 'Number'), m("input.positive.text-field.w-input[type='email']")]), m('.w-sub-col.w-col.w-col-4', [m('label.field-label.fontweight-semibold', '2nd Address'), m("input.positive.text-field.w-input[type='email']")]), m('.w-col.w-col-4', [m('label.field-label.fontweight-semibold', 'District'), m("input.positive.text-field.w-input[type='email']")])]), m('.w-row', [m('.w-sub-col.w-col.w-col-4', [m('label.field-label.fontweight-semibold', 'Zip code'), m("input.positive.text-field.w-input[type='email']")]), m('.w-sub-col.w-col.w-col-4', [m('label.field-label.fontweight-semibold', 'City'), m("input.positive.text-field.w-input[type='email']")]), m('.w-col.w-col-4', [m('label.field-label.fontweight-semibold', 'State'), m('select.positive.text-field.w-select', [m("option[value='']", 'Select...')])])]), m('.w-row', [m('.w-sub-col.w-col.w-col-6', [m('label.field-label.fontweight-semibold', 'Telephone'), m("input.positive.text-field.w-input[type='email']")]), m('.w-col.w-col-6')])])]) : '', _$1.map(ctrl.multipleChoiceQuestions, function (question) {
            return m('.u-marginbottom-30.w-form', [m('.fontcolor-secondary.fontsize-base.fontweight-semibold', question.question), m('.fontcolor-secondary.fontsize-smaller.u-marginbottom-20', question.description), m('form', [_$1.map(question.survey_question_choices_attributes(), function (choice) {
                return m('.fontsize-small.w-radio', [m("input.w-radio-input[type='radio'][value='Radio']"), m('label.w-form-label', choice.option)]);
            })])]);
        }), _$1.map(ctrl.openQuestions, function (question) {
            return m('.u-marginbottom-30.w-form', [m('.fontcolor-secondary.fontsize-base.fontweight-semibold', question.question), m('.fontcolor-secondary.fontsize-smaller.u-marginbottom-20', question.description), m('form', m("input.positive.text-field.w-input[placeholder='Your answer'][type='text']"))]);
        })])), m('.w-col.w-col-1')]))), m('.section', [m('.u-marginbottom-30.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.u-marginbottom-30.u-text-center', [m('.fontsize-small.fontweight-semibold.u-marginbottom-10', 'The above questionnaire will be sent to ' + args.reward.paid_count + ' reward supporters'), m(rewardCardBig, { reward: args.reward })]), m('.card.card-message.fontsize-small.u-marginbottom-30.u-radius', [m('span.fontweight-semibold', 'OBS:'), m.trust('&nbsp;'), 'Questions will automatically be resubmitted to those who do not respond within 4 days. If supporters continue without submitting responses, the questionnaire will be resent twice more.'])]), m('.w-col.w-col-2')]), m('.u-marginbottom-20.w-row', [m('.w-col.w-col-3'), m('.w-sub-col.w-col.w-col-4', m("a.btn.btn-large[href='javascript:void(0);']", { onclick: args.sendQuestions }, [m('span.fa.fa-paper-plane', ''), ' ', m.trust('&nbsp;'), 'Submit'])), m('.w-col.w-col-2', m("a.btn.btn-large.btn-terciary[href='javascript:void(0);']", { onclick: ctrl.togglePreview }, 'Edit')), m('.w-col.w-col-3')])]));
    }
};

var inlineError = {
    view: function view(ctrl, args) {
        return m('.fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle', m('span', ' ' + args.message));
    }
};

var dashboardMultipleChoiceQuestion = {
    controller: function controller(args) {
        var question = args.question;

        var deleteOption = function deleteOption(question, idx) {
            return function () {
                surveyVM.deleteMultipleQuestionOption(question, idx);

                return false;
            };
        };

        var addOption = function addOption(question) {
            return function () {
                surveyVM.addMultipleQuestionOption(question);

                return false;
            };
        };

        var updateOption = function updateOption(idToUpdate) {
            return function (newValue) {
                var survey_question_choices_attributes = _$1.map(question.survey_question_choices_attributes(), function (option, id) {
                    if (id === idToUpdate) {
                        return { option: newValue };
                    }

                    return option;
                });

                question.survey_question_choices_attributes(survey_question_choices_attributes);
            };
        };

        return {
            addOption: addOption,
            deleteOption: deleteOption,
            updateOption: updateOption
        };
    },
    view: function view(ctrl, args) {
        var question = args.question,
            index = args.index;


        return m('.card.u-marginbottom-30.u-radius.w-form', [m('.dashboard-question', [m('.w-row', [m('.w-col.w-col-4', m('label.fontsize-smaller', 'Question')), m('.w-col.w-col-8', m('input.positive.text-field.w-input[type="text"]', {
            class: question.error ? 'error' : null,
            name: 'reward[surveys_attributes][questions][' + index + '][question]',
            onchange: m.withAttr('value', function (newValue) {
                return question.question = newValue;
            }),
            onfocus: function onfocus() {
                question.error = false;
            },
            value: question.question
        }), question.error ? m(inlineError, { message: 'The question field can not be empty.' }) : null)]), m('.w-row', [m('.w-col.w-col-4', m('label.fontsize-smaller[for="name-3"]', 'Description')), m('.w-col.w-col-8', m('input.positive.text-field.w-input[type="text"]', {
            onchange: m.withAttr('value', function (newValue) {
                return question.description = newValue;
            }),
            name: 'reward[surveys_attributes][questions][' + index + '][description]'
        }))]), m('.w-row', [m('.w-col.w-col-4', m('label.fontsize-smaller', 'Opções')), m('.w-col.w-col-8', [_$1.map(question.survey_question_choices_attributes(), function (option, idx) {
            return m('.w-row', [m('.fa.fa-circle-o.fontcolor-terciary.prefix.u-text-center.w-col.w-col-1.w-col-medium-1.w-col-small-1.w-col-tiny-1'), m('.w-col.w-col-10.w-col-medium-10.w-col-small-10.w-col-tiny-10', m('input.positive.text-field.w-input[type="text"]', {
                onchange: m.withAttr('value', ctrl.updateOption(idx)),
                name: 'reward[surveys_attributes][questions][' + index + '][question][survey_question_choices_attributes][' + idx + '][option]',
                value: option.option
            })), m('.w-col.w-col-1.w-col-medium-1.w-col-small-1.w-col-tiny-1', m('button.btn.btn-medium.btn-no-border.btn-terciary.fa.fa-trash', {
                onclick: ctrl.deleteOption(question, idx)
            }))]);
        }), m('.w-row', [m('.w-col.w-col-1.w-col-medium-1.w-col-small-1.w-col-tiny-1'), m('.w-col.w-col-11.w-col-medium-11.w-col-small-11.w-col-tiny-11', m('button.fontcolor-secondary.fontsize-smallest.link-hidden', { onclick: ctrl.addOption(question) }, 'Add another option'))])])])])]);
    }
};

var dashboardOpenQuestion = {
    view: function view(ctrl, args) {
        var question = args.question,
            index = args.index;

        return m('.card.u-marginbottom-30.u-radius.w-form', [m('div', [m('.w-row', [m('.w-col.w-col-4', m('label.fontsize-smaller[for="name-3"]', 'Question')), m('.w-col.w-col-8', m('input.positive.text-field.w-input[name="question"][type="text"]', {
            class: question.error ? 'error' : null,
            name: 'reward[surveys_attributes][questions][' + index + '][question]',
            onchange: m.withAttr('value', function (newValue) {
                return question.question = newValue;
            }),
            value: question.question,
            onfocus: function onfocus() {
                question.error = false;
            }
        }), question.error ? m(inlineError, { message: 'The question field can not be empty.' }) : null)]), m('.w-row', [m('.w-col.w-col-4', m('label.fontsize-smaller[for="name-3"]', 'Description')), m('.w-col.w-col-8', m('input.positive.text-field.w-input[type="text"]', {
            name: 'reward[surveys_attributes][questions][' + index + '][description]',
            onchange: m.withAttr('value', function (newValue) {
                return question.description = newValue;
            }),
            value: question.description
        }))])])]);
    }
};

var I18nScope$12 = _$1.partial(h.i18nScope, 'projects.reward_fields');

var surveyCreate = {
    controller: function controller(args) {
        var showError = m.prop(false),
            loader = postgrest$1.loaderWithToken,
            showPreview = h.toggleProp(false, true),
            confirmAddress = surveyVM.confirmAddress,
            projectDetails = m.prop([]),
            rewardFilterVM = postgrest$1.filtersVM({
            id: 'eq'
        }),
            filterVM = postgrest$1.filtersVM({
            project_id: 'eq'
        }),
            project_id = args.project_id,
            reward_id = args.reward_id;


        rewardFilterVM.id(reward_id);
        filterVM.project_id(project_id);
        var rewardVM = postgrest$1.loaderWithToken(models.rewardDetail.getPageOptions(rewardFilterVM.parameters())),
            l = loader(models.projectDetail.getRowOptions(filterVM.parameters()));

        var reward = m.prop([]);
        l.load().then(projectDetails);
        rewardVM.load().then(reward);

        var choice = {
            multiple: [m('span.fa.fa-dot-circle-o'), '  Multiple choice'],
            open: [m('span.fa.fa-align-left'), '  Open answer']
        };

        var setQuestionType = function setQuestionType(question, type) {
            return function () {
                question.type = type;

                surveyVM.updateDashboardQuestion(question);
            };
        };

        var choiceDropdown = function choiceDropdown(question) {
            return m('.w-col.w-col-4.w-sub-col', m('.text-field.w-dropdown', {
                onclick: function onclick() {
                    question.toggleDropdown.toggle();
                    surveyVM.updateDashboardQuestion(question);
                }
            }, [m('.dropdown-toggle.w-dropdown-toggle', [choice[question.type], m('span.fa.fa-chevron-down.u-right')]), m('.card.dropdown-list.w-dropdown-list', {
                class: question.toggleDropdown() ? 'w--open' : null
            }, [m('span.dropdown-link.w-dropdown-link', {
                onclick: setQuestionType(question, surveyVM.openQuestionType)
            }, choice.open), m('span.dropdown-link.w-dropdown-link', {
                onclick: setQuestionType(question, surveyVM.multipleQuestionType)
            }, choice.multiple)])]));
        };

        var addDashboardQuestion = function addDashboardQuestion() {
            surveyVM.addDashboardQuestion();

            return false;
        };

        var deleteDashboardQuestion = function deleteDashboardQuestion(question) {
            return function () {
                surveyVM.deleteDashboardQuestion(question);

                return false;
            };
        };

        var toggleShowPreview = function toggleShowPreview() {
            showError(false);

            if (surveyVM.isValid()) {
                h.scrollTop();
                showPreview(true);
            } else {
                showPreview(false);
                showError(true);
            }
        };

        var sendQuestions = function sendQuestions() {
            surveyVM.submitQuestions(reward_id).then(m.route('/projects/' + project_id + '/surveys')).catch(console.error);

            return false;
        };

        return {
            reward: reward,
            showError: showError,
            showPreview: showPreview,
            toggleShowPreview: toggleShowPreview,
            project_id: project_id,
            confirmAddress: confirmAddress,
            projectDetails: projectDetails,
            choiceDropdown: choiceDropdown,
            addDashboardQuestion: addDashboardQuestion,
            deleteDashboardQuestion: deleteDashboardQuestion,
            sendQuestions: sendQuestions
        };
    },
    view: function view(ctrl) {
        var project = _$1.first(ctrl.projectDetails());
        var reward = _$1.first(ctrl.reward());
        return project ? m('.project-surveys', project.is_owner_or_admin ? m.component(projectDashboardMenu, {
            project: m.prop(project)
        }) : '', ctrl.showPreview() ? m(surveyCreatePreview, { confirmAddress: ctrl.confirmAddress(), showPreview: ctrl.showPreview, surveyVM: surveyVM, reward: reward, sendQuestions: ctrl.sendQuestions }) : [reward ? m('.card-terciary.section.u-text-center', m('.w-container', m('.w-row', [m('.w-col.w-col-8.w-col-push-2', m('div', [m('.fontsize-small.fontweight-semibold.u-marginbottom-20', 'Questionnaire for ' + reward.paid_count + ' reward supporters'), m(rewardCardBig, { reward: reward })]))]))) : '', m('.divider'), m('.section', m('.w-row', [m('.w-col.w-col-10.w-col-push-1', [m('.card.card-terciary.medium.u-marginbottom-20.u-text-center', [m('.u-marginbottom-20', [m('.fontsize-base.fontweight-semibold.u-marginbottom-10', 'Confirm shipping address?'), m('a.toggle.w-clearfix.w-inline-block', {
            class: ctrl.confirmAddress() ? 'toggle-on' : 'toggle-off',
            onclick: ctrl.confirmAddress.toggle
        }, [m('.toggle-btn', {
            class: ctrl.confirmAddress() ? null : 'toggle-btn--off'
        }), ctrl.confirmAddress() ? m('.u-right', 'YES') : m('.u-left', 'NO')]), m('input[type="hidden"]', {
            name: 'reward[surveys_attributes][confirm_address]'
        })]), m('.w-row', [m('.w-col.w-col-8.w-col-push-2', m('p.fontcolor-secondary.fontsize-small', 'If this reward will be delivered to the supporter house, leave this option as "YES". That way, we will include a question in the questionnaire so that they confirm the delivery address.'))])]), _$1.map(surveyVM.dashboardQuestions(), function (question, index) {
            return m('.card.card-terciary.medium.u-marginbottom-20.w-row', [ctrl.choiceDropdown(question), m('.w-clearfix.w-col.w-col-8', [m.component(question.type === 'multiple' ? dashboardMultipleChoiceQuestion : dashboardOpenQuestion, { question: question, index: index }), m('button.btn.btn-inline.btn-no-border.btn-small.btn-terciary.fa.fa-lg.fa-trash.u-right', {
                onclick: ctrl.deleteDashboardQuestion(question)
            })])]);
        }), m('button.btn.btn-large.btn-message', {
            onclick: ctrl.addDashboardQuestion
        }, [m('span.fa.fa-plus-circle'), '  Add Question'])])])), m('.section', m('.w-container', m('.w-row', [m('.w-col.w-col-4.w-col-push-4', m('a.btn.btn-large[href=\'javascript:void(0);\']', {
            onclick: ctrl.toggleShowPreview
        }, 'Preview'), ctrl.showError() ? m('.u-text-center.u-margintop-10', m(inlineError, { message: 'Error saving form.' })) : null)])))]) : h.loader();
    }
};

var I18nScope$15 = _.partial(h.i18nScope, 'pages.jobs');

var jobs = {
    view: function view(ctrl, args) {
        return m('.page-jobs', [m('.w-section.hero-jobs.hero-medium', [m('.w-containe.u-text-center', [m('img.icon-hero[src="/assets/logo-white.png"]'), m('.u-text-center.u-marginbottom-20.fontsize-largest', I18n$1.t('title', I18nScope$15()))])]), m('.w-section.section', [m('.w-container.u-margintop-40', [m('.w-row', [m('.w-col.w-col-8.w-col-push-2.u-text-center', [m('.fontsize-large.u-marginbottom-30', I18n$1.t('info', I18nScope$15())), m('a[href="/projects/new"].w-button.btn.btn-large.btn-inline', I18n$1.t('cta', I18nScope$15()))])])])])]);
    }
};

var I18nScope$16 = _$1.partial(h.i18nScope, 'pages.press');
var press = {
    controller: function controller() {
        var stats = m.prop([]);
        var loader = postgrest$1.loader;
        var statsLoader = loader(models.statistic.getRowOptions());

        statsLoader.load().then(stats);

        return {
            stats: stats
        };
    },
    view: function view(ctrl) {
        var stats = _$1.first(ctrl.stats());

        return m('#press', [m('.hero-jobs.hero-medium', m('.w-container.u-text-center', [m('img.icon-hero[alt=\'Icon assets\'][src=\'/assets/icon-assets-98f4556940e31b239cdd5fbdd993b5d5ed3bf67dcc3164b805e224d22e1340b7.png\']'), m('.u-text-center.u-marginbottom-20.fontsize-largest', I18n$1.t('page-title', I18nScope$16()))])), m('.section-large.bg-gray', m('.w-container', m('.w-row', m('.w-col.w-col-8.w-col-push-2', m('.u-marginbottom-20.fontsize-large', I18n$1.t('abstract.title', I18nScope$16())))))), m('.section-large', m('.w-container', m('.w-row', m('.w-col.w-col-8.w-col-push-2', [m('.fontsize-large.fontweight-semibold.u-marginbottom-10', I18n$1.t('history.title', I18nScope$16())), m('.fontsize-large.u-marginbottom-20', I18n$1.t('history.subtitle', I18nScope$16())), m.trust(I18n$1.t('history.cta_html', I18nScope$16()))])))), m('.section-large.bg-gray', m('.w-container', m('.w-row', m('.w-col.w-col-8.w-col-push-2', [m('.fontsize-large.fontweight-semibold.u-marginbottom-10', I18n$1.t('stats.title', I18nScope$16())), m('.fontsize-large.u-marginbottom-40', I18n$1.t('stats.subtitle', I18nScope$16())), m('.w-row.w.hidden-small.u-text-center.u-marginbottom-40', [m('.w-col.w-col-4.u-marginbottom-20', [m('.text-success.lineheight-loose.fontsize-larger', h.formatNumber(stats.total_contributors, 0, 3)), m('.fontsize-smaller', m.trust(I18n$1.t('stats.people_html', I18nScope$16())))]), m('.w-col.w-col-4.u-marginbottom-20', [m('.text-success.lineheight-loose.fontsize-larger', h.formatNumber(stats.total_projects_success, 0, 3)), m('.fontsize-smaller', m.trust(I18n$1.t('stats.projects_html', I18nScope$16())))]), m('.w-col.w-col-4.u-marginbottom-20', [m('.text-success.lineheight-loose.fontsize-larger', stats.total_contributed.toString().slice(0, 2) + ' million'), m('.fontsize-smaller', m.trust(I18n$1.t('stats.money_html', I18nScope$16())))])]), m('a.alt-link.fontsize-large[href=\'https://www.catarse.me/dbhero/dataclips/fa0d3570-9fa7-4af3-b070-2b2e386ef060\'][target=\'_blank\']', [m.trust(I18n$1.t('stats.cta_html', I18nScope$16()))])])))), m('.section-large', m('.w-container', [m('.w-row.u-marginbottom-30.u-text-center', m('.w-col.w-col-8.w-col-push-2', [m('div', m('img[alt=\'Logo catarse press\'][src=\'/assets/logo-catarse-press-2f2dad49d3e5b256c29e136673b4c4f543c03e0d5548d351ae5a8d1e6e3d2645.png\']')), m('.fontsize-base', I18n$1.t('assets.title', I18nScope$16()))])), m('.w-row', m('.w-col.w-col-4.w-col-push-4.u-text-center', m('a.alt-link.fontsize-large[href=\'https://www.catarse.me/assets\'][target=\'_blank\']', [m.trust(I18n$1.t('assets.cta_html', I18nScope$16()))])))])), m('.section-large.bg-projectgrid', m('.w-container', [m('.fontsize-large.u-text-center.fontweight-semibold.u-marginbottom-30', I18n$1.t('social.title', I18nScope$16())), m('.w-row', [m('.w-col.w-col-3', m('a.btn.btn-dark.btn-large.u-marginbottom-10[href=\'https://www.facebook.com/Catarse.me\'][target=\'_blank\']', [m('span.fa.fa-facebook'), ' Facebook'])), m('.w-col.w-col-3', m('a.btn.btn-dark.btn-large.u-marginbottom-10[href=\'https://twitter.com/catarse\'][target=\'_blank\']', [m('span.fa.fa-twitter'), ' Twitter'])), m('.w-col.w-col-3', m('a.btn.btn-dark.btn-large.u-marginbottom-10[href=\'https://instagram.com/catarse/\'][target=\'_blank\']', [m('span.fa.fa-instagram'), ' Instagram'])), m('.w-col.w-col-3', m('a.btn.btn-dark.btn-large.u-marginbottom-10[href=\'https://blog.oppostarter.com/\'][target=\'_blank\']', [m('span.fa.fa-rss'), 'OppoStarter Blog']))])])), m('.section-large.bg-blue-one.fontcolor-negative', m('.w-container', m('.w-row', m('.w-col.w-col-6.w-col-push-3', [m('.fontsize-large.fontweight-semibold.u-text-center.u-marginbottom-30', I18n$1.t('social.news', I18nScope$16())), m('.w-form', m('form[accept-charset=\'UTF-8\'][action=\'' + h.getNewsletterUrl() + '\'][id=\'mailee-form\'][method=\'post\']', [m('.w-form.footer-newsletter', m('input.w-input.text-field.prefix[id=\'EMAIL\'][label=\'email\'][name=\'EMAIL\'][placeholder=\'Digite seu email\'][type=\'email\']')), m('button.w-inline-block.btn.btn-edit.postfix.btn-attached[type=\'submit\']', m('img.footer-news-icon[alt=\'Icon newsletter\'][src=\'/assets/catarse_bootstrap/icon-newsletter-9c3ff92b6137fbdb9d928ecdb34c88948277a32cdde3e5b525e97d57735210f5.png\']'))]))])))), m('.section-large.bg-gray.before-footer', m('.w-container', m('.w-row.u-text-center', m('.w-col.w-col-8.w-col-push-2', [m('.fontsize-larger.fontweight-semibold.u-marginbottom-10', I18n$1.t('email.title', I18nScope$16())), m('div', m('a.alt-link.fontsize-large[href=\'mailto:' + I18n$1.t('email.cta', I18nScope$16()) + '\']', I18n$1.t('email.cta', I18nScope$16())))]))))]);
    }
};

var liveStatistics = {
    controller: function controller() {
        var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        var pageStatistics = m.prop([]),
            notificationData = m.prop({});

        models.statistic.getRow().then(pageStatistics);
        // args.socket is a socket provided by socket.io
        // can see there https://github.com/catarse/catarse-live/blob/master/public/index.js#L8
        if (args.socket && _$1.isFunction(args.socket.on)) {
            args.socket.on('new_paid_contributions', function (msg) {
                notificationData(JSON.parse(msg.payload));
                models.statistic.getRow().then(pageStatistics);
                m.redraw();
            });
        }

        return {
            pageStatistics: pageStatistics,
            notificationData: notificationData
        };
    },
    view: function view(ctrl) {
        var data = ctrl.notificationData();

        return m('.w-section.bg-stats.section.min-height-100', [m('.w-container.u-text-center', _$1.map(ctrl.pageStatistics(), function (stat) {
            return [m('img.u-marginbottom-60[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/55ada5dd11b36a52616d97df_symbol-catarse.png"]'), m('.fontcolor-negative.u-marginbottom-40', [m('.fontsize-megajumbo.fontweight-semibold', 'US$ ' + h.formatNumber(stat.total_contributed, 2, 3)), m('.fontsize-large', 'Donated to projects published here')]), m('.fontcolor-negative.u-marginbottom-60', [m('.fontsize-megajumbo.fontweight-semibold', stat.total_contributors), m('.fontsize-large', 'People have already supported at least 1 project in OppoStarter')])];
        })), !_$1.isEmpty(data) ? m('.w-container', [m('div', [m('.card.u-radius.u-marginbottom-60.medium', [m('.w-row', [m('.w-col.w-col-4', [m('.w-row', [m('.w-col.w-col-4.w-col-small-4', [m('img.thumb.u-round[src="' + h.useAvatarOrDefault(data.user_image) + '"]')]), m('.w-col.w-col-8.w-col-small-8', [m('.fontsize-large.lineheight-tight', data.user_name)])])]), m('.w-col.w-col-4.u-text-center.fontsize-base.u-margintop-20', [m('div', 'just supported the')]), m('.w-col.w-col-4', [m('.w-row', [m('.w-col.w-col-4.w-col-small-4', [m('img.thumb-project.u-radius[src="' + data.project_image + '"][width="75"]')]), m('.w-col.w-col-8.w-col-small-8', [m('.fontsize-large.lineheight-tight', data.project_name)])])])])])])]) : '', m('.u-text-center.fontsize-large.u-marginbottom-10.fontcolor-negative', [m('a.link-hidden.fontcolor-negative[href="https://github.com/catarse"][target="_blank"]', [m('span.fa.fa-github', '.'), ' StartUp Crowdfunding! '])])]);
    }
};

var I18nScope$17 = _$1.partial(h.i18nScope, 'projects.dashboard_contribution_reports');

var projectContributionReportHeader = {
    view: function view(ctrl, args) {
        var filterBuilder = args.filterBuilder,
            paymentStateFilter = _$1.findWhere(filterBuilder, {
            label: 'payment_state'
        }),
            rewardFilter = _$1.findWhere(filterBuilder, {
            label: 'reward_filter'
        }),
            deliveryFilter = _$1.findWhere(filterBuilder, {
            label: 'delivery_filter'
        }),
            surveyFilter = _$1.findWhere(filterBuilder, {
            label: 'survey_filter'
        }),
            mainFilter = _$1.findWhere(filterBuilder, {
            component: filterMain
        }),
            project_id = args.filterVM.project_id();

        rewardFilter.data.options = args.mapRewardsToOptions();

        return m('div', [m('.dashboard-header', m('.w-container', m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', [m('.fontsize-larger.fontweight-semibold.lineheight-looser.u-text-center', I18n$1.t('title', I18nScope$17())), m('.fontsize-base.u-marginbottom-20.u-text-center', I18n$1.t('subtitle_html', I18nScope$17())), m('.u-marginbottom-60.u-text-center', m('.w-inline-block.card.fontsize-small.u-radius', [m('span.fa.fa-lightbulb-o', ''), m.trust('&nbsp;'), m.trust(I18n$1.t('help_link', I18nScope$17()))]))]), m('.w-col.w-col-3')]))), m('.card', m('.w-container', m('.w-form', [m('form', {
            onsubmit: args.submit
        }, m('.u-margintop-20.w-row', [m('.w-col.w-col-8', m('.w-row', [m.component(paymentStateFilter.component, paymentStateFilter.data), m.component(rewardFilter.component, rewardFilter.data), m.component(deliveryFilter.component, deliveryFilter.data), m.component(surveyFilter.component, surveyFilter.data)])), m('.w-col.w-col-4', m('.u-margintop-20.w-row', [m.component(mainFilter.component, mainFilter.data)]))]))])))]);
    }
};

var I18nScope$18 = _$1.partial(h.i18nScope, 'projects.reward_fields');
var contributionScope = _$1.partial(h.i18nScope, 'projects.contributions');

var projectContributionReportContentCard = {
    controller: function controller(args) {
        var project = args.project(),
            showDetail = h.toggleProp(false, true),
            currentTab = m.prop('info'),
            checked = function checked(contribution) {
            return _$1.contains(args.selectedContributions(), contribution.id);
        },
            selectContribution = function selectContribution(contribution) {
            var anyChecked = $('input:checkbox').is(':checked');

            args.selectedAny(anyChecked);
            if (!checked(contribution)) {
                args.selectedContributions().push(contribution.id);
            } else {
                args.selectedContributions(_$1.without(args.selectedContributions(), contribution.id));
            }
            return true;
        },
            vm = postgrest$1.filtersVM({
            contribution_id: 'eq'
        }),
            surveyLoader = function surveyLoader() {
            vm.contribution_id(args.contribution().id);

            return postgrest$1.loaderWithToken(models.survey.getPageOptions(vm.parameters()));
        },
            survey = m.prop(),
            stateClass = function stateClass(state) {
            var classes = {
                online: {
                    paid: 'text-success.fa-circle',
                    refunded: 'text-error.fa-circle',
                    pending_refund: 'text-error.fa-circle',
                    pending: 'text-waiting.fa-circle',
                    refused: 'text-error.fa-circle'
                },
                failed: {
                    paid: 'text-error.fa-circle-o',
                    refunded: 'text-refunded.fa-circle',
                    pending_refund: 'text-refunded.fa-circle-o',
                    pending: 'text-refunded',
                    refused: 'text-refunded'
                },
                waiting_funds: {
                    paid: 'text-success.fa-circle',
                    refunded: 'text-error.fa-circle',
                    pending_refund: 'text-error.fa-circle',
                    pending: 'text-waiting.fa-circle',
                    refused: 'text-error.fa-circle'
                },
                successful: {
                    paid: 'text-success.fa-circle',
                    refunded: 'text-error.fa-circle',
                    pending_refund: 'text-error.fa-circle',
                    pending: 'text-waiting.fa-circle',
                    refused: 'text-error.fa-circle'
                }
            };

            return classes[project.state][state];
        };

        surveyLoader().load().then(survey);
        return {
            stateClass: stateClass,
            survey: survey,
            checked: checked,
            currentTab: currentTab,
            showDetail: showDetail,
            selectContribution: selectContribution
        };
    },
    view: function view(ctrl, args) {
        var contribution = args.contribution(),
            project = args.project(),
            survey = _$1.first(ctrl.survey()),
            profileImg = _$1.isEmpty(contribution.profile_img_thumbnail) ? '/assets/catarse_bootstrap/user.jpg' : contribution.profile_img_thumbnail,
            reward = contribution.reward || {
            minimum_value: 0,
            description: I18n$1.t('contribution.no_reward', contributionScope())
        },
            deliveryBadge = function deliveryBadge() {
            return contribution.delivery_status === 'error' ? m('span.badge.badge-attention.fontsize-smaller', I18n$1.t('status.' + contribution.delivery_status, I18nScope$18())) : contribution.delivery_status === 'delivered' ? m('span.badge.badge-success.fontsize-smaller', I18n$1.t('status.' + contribution.delivery_status, I18nScope$18())) : contribution.delivery_status === 'received' ? m('span.fontsize-smaller.badge.badge-success', [m('span.fa.fa-check-circle', ''), I18n$1.t('status.' + contribution.delivery_status, I18nScope$18())]) : '';
        };

        return m('div', [m('.w-clearfix.card' + (ctrl.checked(contribution) ? '.card-alert' : ''), [m('.w-row', [m('.w-col.w-col-1.w-col-small-1.w-col-tiny-1', m('.w-inline-block', m('.w-checkbox.w-clearfix', contribution.delivery_status !== 'received' && project.state !== 'failed' ? m('input.w-checkbox-input[type=\'checkbox\']', {
            checked: ctrl.checked(contribution),
            value: contribution.id,
            onclick: function onclick() {
                return ctrl.selectContribution(contribution);
            }
        }) : ''))), m('.w-col.w-col-11.w-col-small-11.w-col-tiny-11', m('.w-row', [m('.w-col.w-col-1.w-col-tiny-1', [m('img.user-avatar.u-marginbottom-10[src=\'' + profileImg + '\']')]), m('.w-col.w-col-11.w-col-tiny-11', [m('.w-row', [m('.w-col.w-col-3', [m('.fontcolor-secondary.fontsize-mini.fontweight-semibold', h.momentify(contribution.created_at, 'DD/MM/YYYY, HH:mm')), m('.fontweight-semibold.fontsize-smaller.lineheight-tighter', contribution.public_user_name || contribution.user_name), m('.fontsize-smallest.lineheight-looser', [contribution.has_another ? [m('a.link-hidden-light.badge.badge-light', '+1 support ')] : '', contribution.anonymous ? m('span.fa.fa-eye-slash.fontcolor-secondary', m('span.fontcolor-secondary[style="font-size:11px;"]', ' ' + I18n$1.t('contribution.anonymous_contribution', contributionScope()))) : '']), m('.fontsize-smallest.lineheight-looser', contribution.email)]), m('.w-col.w-col-3', [m('.lineheight-tighter', [m('span.fa.fontsize-smallest.' + ctrl.stateClass(contribution.state)), '   ', m('span.fontsize-large', 'US$ ' + h.formatNumber(contribution.value, 2, 3))])]), m('.w-col.w-col-3.w-hidden-small.w-hidden-tiny', [m('div', deliveryBadge()), m('.fontsize-smallest.fontweight-semibold', I18n$1.t('reward', I18nScope$18()) + ': ' + (reward.minimum_value ? h.formatNumber(reward.minimum_value, 2, 3) : '')), m('.fontsize-smallest.fontweight-semibold', reward.title), m('.fontsize-smallest.fontcolor-secondary', reward.description.substring(0, 80) + '...')]), survey ? survey.survey_answered_at ? m('.w-col.w-col-3.w-col-push-1', [m('.fontsize-smallest', [m('a.link-hidden', 'Questionnaire '), m('span.fontweight-semibold.text-success', 'answered')]), m('.fontcolor-terciary.fontsize-smallest', 'in ' + h.momentify(survey.survey_answered_at, 'DD/MM/YYYY'))]) : survey.finished_at ? m('.w-col.w-col-3.w-col-push-1', [m('.fontsize-smallest', [m('a.link-hidden', 'Questionnaire '), m('span.fontweight-semibold.text-fail', 'no response')]), m('.fontcolor-terciary.fontsize-smallest', 'finalized in ' + h.momentify(survey.finished_at, 'DD/MM/YYYY'))]) : m('.w-col.w-col-3.w-col-push-1', [m('.fontsize-smallest', [m('a.link-hidden', 'Questionnaire '), m('span.fontweight-semibold.text-waiting', 'Sent')]), m('.fontcolor-terciary.fontsize-smallest', 'in ' + h.momentify(survey.sent_at, 'DD/MM/YYYY'))]) : ''])])]))]), m('a.arrow-admin.fa.fa-chevron-down.fontcolor-secondary.w-inline-block', {
            onclick: ctrl.showDetail.toggle
        })]), ctrl.showDetail() ? m('.card.details-backed-project.w-tabs', [m('.w-tab-menu', [_$1.map(['info', 'profile'], function (tab) {
            return m('a.dashboard-nav-link.w-inline-block.w-tab-link' + (ctrl.currentTab() === tab ? '.w--current' : ''), { onclick: function onclick() {
                    return ctrl.currentTab(tab);
                } }, m('div', I18n$1.t('report.' + tab, contributionScope())));
        })]), m('.card.card-terciary.w-tab-content', [ctrl.currentTab() === 'info' ? m('.w-tab-pane.w--tab-active', m('.w-row', [m('.right-divider.w-col.w-col-6', [m('.u-marginbottom-20', [m('.fontsize-base.fontweight-semibold.u-marginbottom-10', I18n$1.t('selected_reward.value', contributionScope()) + ': US$' + contribution.value), m(paymentStatus, { item: { payment_method: contribution.payment_method, state: contribution.state } }), m('.fontcolor-secondary.fontsize-smallest', h.momentify(contribution.created_at, 'DD/MM/YYYY hh:mm'))]), m('.fontsize-base.fontweight-semibold', I18n$1.t('reward', I18nScope$18()) + ':'), m('.fontsize-small.fontweight-semibold.u-marginbottom-10', ['US$' + reward.minimum_value + ' ' + (reward.title ? '- ' + reward.title : '') + ' ', deliveryBadge()]), m('p.fontsize-smaller', reward.description), m('.u-marginbottom-10', [m('.fontsize-smaller', [m('span.fontweight-semibold', I18n$1.t('deliver_at', I18nScope$18()) + ' '), h.momentify(reward.deliver_at, 'MMMM/YYYY')]), reward.shipping_options ? m('.fontsize-smaller', [m('span.fontweight-semibold', I18n$1.t('delivery', I18nScope$18())), I18n$1.t('shipping_options.' + reward.shipping_options, I18nScope$18())]) : ''])]), survey ? m('.w-col.w-col-6', [m('.fontsize-base.fontweight-semibold', I18n$1.t('survey.survey', contributionScope())), m('.fontsize-smaller.lineheight-tighter.u-marginbottom-20', I18n$1.t('survey.answered_at', contributionScope({ date: moment(survey.survey_answered_at).format('DD/MM/YYYY') }))), survey.confirm_address && survey.address ? [m('.fontsize-small', [m('.fontweight-semibold.lineheight-looser', I18n$1.t('survey.address_title', contributionScope())), m('p', [contribution.public_user_name, m('br'), survey.address.address_street + ', ' + survey.address.address_number + ' ' + survey.address.address_complement, m('br'), I18n$1.t('survey.address_neighbourhood', contributionScope()) + ' ' + survey.address.address_neighbourhood, m('br'), survey.address.address_zip_code + ' ' + survey.address.address_city + '-' + survey.state_name, m('br'), survey.country_name])])] : '', _$1.map(survey.multiple_choice_questions, function (mcQuestion) {
            var answer = _$1.find(mcQuestion.question_choices, function (choice) {
                return choice.id === mcQuestion.survey_question_choice_id;
            });
            return !answer ? '' : m('.fontsize-small', [m('.fontweight-semibold.lineheight-looser', mcQuestion.question), m('p', answer.option)]);
        }), _$1.map(survey.open_questions, function (openQuestion) {
            return m('.fontsize-small', [m('.fontweight-semibold.lineheight-looser', openQuestion.question), m('p', openQuestion.answer)]);
        })]) : ''])) : m('.w-tab-pane', m('.fontsize-small', m('p', ['Full name: ' + contribution.user_name, m('br'), 'Public name: ' + contribution.public_user_name, m('br'), contribution.email, m('br'), I18n$1.t('user_since', contributionScope({ date: h.momentify(contribution.user_created_at, 'MMMM YYYY') })), m('br'), I18n$1.t('backed_projects', contributionScope({ count: contribution.total_contributed_projects })), m('br'), I18n$1.t('created_projects', contributionScope({ count: contribution.total_published_projects }))])))])]) : '']);
    }
};

var vm$6 = postgrest$1.filtersVM({
    full_text_index: '@@',
    state: 'in',
    reward_id: 'eq',
    delivery_status: 'eq',
    survey_status: 'in',
    project_id: 'eq'
});
var paramToString$4 = function paramToString(p) {
    return (p || '').toString().trim();
};

vm$6.state('');
vm$6.order({
    id: 'desc'
});

vm$6.full_text_index.toFilter = function () {
    var filter = paramToString$4(vm$6.full_text_index());
    return filter && replaceDiacritics(filter) || undefined;
};

vm$6.getAllContributions = function (filterVM) {
    models.projectContribution.pageSize(false);
    var allContributions = postgrest$1.loaderWithToken(models.projectContribution.getPageOptions(filterVM.parameters())).load();
    models.projectContribution.pageSize(9);
    return allContributions;
};

vm$6.updateStatus = function (data) {
    return m.request({
        method: 'PUT',
        url: '/projects/' + vm$6.project_id() + '/contributions/update_status.json',
        data: data,
        config: h.setCsrfToken
    });
};

vm$6.withNullParameters = function () {
    var withNullVm = postgrest$1.filtersVM({
        full_text_index: '@@',
        state: 'in',
        reward_id: 'is',
        delivery_status: 'eq',
        project_id: 'eq'
    });

    withNullVm.full_text_index(vm$6.full_text_index());
    withNullVm.order(vm$6.order());
    withNullVm.state(vm$6.state());
    withNullVm.reward_id(vm$6.reward_id());
    withNullVm.delivery_status(vm$6.delivery_status());
    withNullVm.project_id(vm$6.project_id());

    return withNullVm.parameters();
};

/**
 * window.c.deliverContributionModalContent component
 * Render deliver contribution modal
 *
 */
var deliverContributionModalContent = {
    view: function view(ctrl, args) {
        return m('div', m('.modal-dialog-header', m('.fontsize-large.u-text-center', [m('span.fa.fa-check-circle', ''), ' Rewards on the way!'])), m('.modal-dialog-content', [m('p.fontsize-small.u-marginbottom-30', [m('span.fontweight-semibold', 'You have selected ' + args.amount + ' supports.'), ' Upon your confirmation, supporters who have made these supports for your project will be notified that their rewards will be delivered shortly.']), m('.w-form', [m('form', [m('.fontsize-smaller', 'If you want to add some information in this post, use the space below! It is a great time to thank those people who believed in you.!'), m("textarea.height-mini.text-field.w-input[placeholder='Enter your message (optional)']", {
            value: args.message(),
            onchange: m.withAttr('value', args.message)
        })])]), m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', m('.fontsize-small.fontweight-semibold.u-marginbottom-20.u-text-center', 'You confirm that the reward for the selected supports has been sent?')), m('.w-col.w-col-1')]), m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-5', m('a.btn.btn-medium.w-button', {
            onclick: function onclick() {
                return args.updateStatus('delivered');
            }
        }, 'Yes!')), m('.w-col.w-col-5', m('a.btn.btn-medium.btn-terciary.w-button', {
            onclick: args.displayModal.toggle
        }, 'Back')), m('.w-col.w-col-1')])]));
    }
};

/**
 * window.c.errorContributionModalContent component
 * Render deliver error contribution modal
 *
 */
var errorContributionModalContent = {
    view: function view(ctrl, args) {
        return m('div', m('.modal-dialog-header', m('.fontsize-large.u-text-center', [m('span.fa.fa-exclamation-triangle', ''), ' Oops. Sending error!'])), m('.modal-dialog-content', [m('p.fontsize-small.u-marginbottom-30', [m('span.fontweight-semibold', 'You have selected ' + args.amount + ' supports.'), ' Upon your confirmation, the supporters who made these supports for your project will be notified that there was a problem with sending your rewards.']), m('.w-form', [m('form', [m('.fontsize-smaller', 'If you want to add some information in this message, use the space below (ex: you can ask for confirmation of delivery address or explain reasons for the error)'), m("textarea.height-mini.text-field.w-input[placeholder='Enter your message (optional)']", {
            value: args.message(),
            onchange: m.withAttr('value', args.message)
        })])]), m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', m('.fontsize-small.fontweight-semibold.u-marginbottom-20.u-text-center', 'You confirm that there was an error in sending the rewards for the selected backups?')), m('.w-col.w-col-1')]), m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-5', m('a.btn.btn-medium.w-button', {
            onclick: function onclick() {
                return args.updateStatus('error');
            }
        }, 'Yes!')), m('.w-col.w-col-5', m('a.btn.btn-medium.btn-terciary.w-button', {
            onclick: args.displayModal.toggle
        }, 'Back')), m('.w-col.w-col-1')])]));
    }
};

var projectContributionReportContent = {
    controller: function controller(args) {
        var showSelectedMenu = h.toggleProp(false, true),
            selectedAny = m.prop(false),
            showSuccess = m.prop(false),
            loading = m.prop(false),
            displayDeliverModal = h.toggleProp(false, true),
            displayErrorModal = h.toggleProp(false, true),
            selectedContributions = m.prop([]),
            deliveryMessage = m.prop(''),
            selectAll = function selectAll() {
            vm$6.getAllContributions(args.filterVM).then(function (data) {
                var _selectedContribution;

                var exceptReceived = _$1.filter(data, function (contrib) {
                    return contrib.delivery_status !== 'received';
                });
                (_selectedContribution = selectedContributions()).push.apply(_selectedContribution, toConsumableArray(_$1.pluck(exceptReceived, 'id')));
                selectedAny(!_$1.isEmpty(exceptReceived));
            });
        },
            unselectAll = function unselectAll() {
            selectedContributions([]);
            selectedAny(false);
        },
            updateStatus = function updateStatus(status) {
            var data = {
                contributions: selectedContributions(),
                message: deliveryMessage(),
                delivery_status: status
            };
            if (status === 'delivered') {
                displayDeliverModal.toggle();
            } else if (status === 'error') {
                displayErrorModal.toggle();
            }
            loading(true);
            showSelectedMenu.toggle();
            m.redraw();
            vm$6.updateStatus(data).then(function () {
                loading(false);
                showSuccess(true);
                // update status so we don't have to reload the page
                _$1.map(_$1.filter(args.list.collection(), function (contrib) {
                    return _$1.contains(selectedContributions(), contrib.id);
                }), function (item) {
                    return item.delivery_status = status;
                });
            }).catch(function () {
                m.redraw();
            });
            return false;
        };

        return {
            showSuccess: showSuccess,
            selectAll: selectAll,
            unselectAll: unselectAll,
            deliveryMessage: deliveryMessage,
            displayDeliverModal: displayDeliverModal,
            displayErrorModal: displayErrorModal,
            updateStatus: updateStatus,
            loading: loading,
            showSelectedMenu: showSelectedMenu,
            selectedAny: selectedAny,
            selectedContributions: selectedContributions
        };
    },
    view: function view(ctrl, args) {
        var list = args.list;
        var isFailed = args.project().state === 'failed';

        return m('.w-section.bg-gray.before-footer.section', ctrl.loading() ? h.loader() : [ctrl.displayErrorModal() ? m.component(modalBox, {
            displayModal: ctrl.displayErrorModal,
            hideCloseButton: false,
            content: [errorContributionModalContent, { project: args.project, displayModal: ctrl.displayErrorModal, amount: ctrl.selectedContributions().length, updateStatus: ctrl.updateStatus, message: ctrl.deliveryMessage }]
        }) : '', ctrl.displayDeliverModal() ? m.component(modalBox, {
            displayModal: ctrl.displayDeliverModal,
            hideCloseButton: false,
            content: [deliverContributionModalContent, { project: args.project, displayModal: ctrl.displayDeliverModal, amount: ctrl.selectedContributions().length, updateStatus: ctrl.updateStatus, message: ctrl.deliveryMessage }]
        }) : '', ctrl.showSuccess() ? m.component(popNotification, {
            message: 'Information was updated'
        }) : '', m('.w-container', [m('.u-marginbottom-40', m('.w-row', [m('.u-text-center-small-only.w-col.w-col-2', m('.fontsize-base.u-marginbottom-10', [m('span.fontweight-semibold', list.isLoading() ? '' : list.total()), ' supports'])), m('.w-col.w-col-6', isFailed ? '' : [!ctrl.selectedAny() ? m('button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button', {
            onclick: ctrl.selectAll
        }, 'Select all') : m('button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button', {
            onclick: ctrl.unselectAll
        }, 'Deselect All'), ctrl.selectedAny() ? m('.w-inline-block', [m('button.btn.btn-inline.btn-small.btn-terciary.w-button', {
            onclick: ctrl.showSelectedMenu.toggle
        }, ['Mark ', m('span.w-hidden-tiny', 'delivery'), ' as']), ctrl.showSelectedMenu() ? m('.card.dropdown-list.dropdown-list-medium.u-radius.zindex-10[id=\'transfer\']', [m('a.dropdown-link.fontsize-smaller[href=\'#\']', {
            onclick: function onclick() {
                return ctrl.displayDeliverModal.toggle();
            }
        }, 'Delivered'), m('a.dropdown-link.fontsize-smaller[href=\'#\']', {
            onclick: function onclick() {
                return ctrl.displayErrorModal.toggle();
            }
        }, 'Delivery error')]) : '']) : '']), m('.w-clearfix.w-col.w-col-4', m('a.alt-link.fontsize-small.lineheight-looser.u-right', { onclick: function onclick() {
                return args.showDownloads(true);
            } }, [m('span.fa.fa-download', ''), ' Download reports']))])), _$1.map(list.collection(), function (item) {
            var contribution = m.prop(item);
            return m.component(projectContributionReportContentCard, {
                project: args.project,
                contribution: contribution,
                selectedContributions: ctrl.selectedContributions,
                selectedAny: ctrl.selectedAny
            });
        })]), m('.w-section.section.bg-gray', [m('.w-container', [m('.w-row.u-marginbottom-60', [m('.w-col.w-col-2.w-col-push-5', [!list.isLoading() ? list.isLastPage() ? '' : m('button#load-more.btn.btn-medium.btn-terciary', {
            onclick: list.nextPage
        }, 'Load more') : h.loader()])])])])]);
    }
};

var downloadReports = {
    view: function view(ctrl, args) {
        var project = args.project(),
            paidRewards = _$1.filter(args.rewards, function (reward) {
            return reward.paid_count > 0;
        });

        return m('section.min-height-70', m('.w-section', m('article', m('.section.project-metrics', m('.w-container', m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', m('.card.u-radius.u-marginbottom-20.card-terciary', [m('.fontsize-small.fontweight-semibold.u-marginbottom-20', [m('span.fa.fa-download', m.trust('&nbsp;')), 'Download reports']), m('ul.w-list-unstyled', [m('li.fontsize-smaller.u-marginbottom-10', m('div', ['Confirmed Supporters ', m.trust('&nbsp;'), m('a.alt-link[href=\'/en/reports/contribution_reports_for_project_owners.csv?project_id=' + project.project_id + '&amp;state=paid\']', 'CSV'), m.trust('&nbsp;'), '\\', m.trust('&nbsp;'), m('a.alt-link[href=\'/en/reports/contribution_reports_for_project_owners.xls?project_id=' + project.project_id + '&amp;state=paid\']', 'XLS')])), m('li.divider.u-marginbottom-10'), m('li.fontsize-smaller.u-marginbottom-10', m('div', ['Pending Supporters', m.trust('&nbsp;'), m.trust('&nbsp;'), m('a.alt-link[href=\'/en/reports/contribution_reports_for_project_owners.csv?project_id=' + project.project_id + '&amp;state=pending&amp;waiting_payment=true\']', 'CSV'), m.trust('&nbsp;'), '\\', m.trust('&nbsp;'), m('a.alt-link[href=\'/en/reports/contribution_reports_for_project_owners.xls?project_id=' + project.project_id + '&amp;state=pending&amp;waiting_payment=true\']', 'XLS')])), m('li.divider.u-marginbottom-10'), m('li.fontsize-smaller.u-marginbottom-10', m('div', ['Supporters who did not select reward', m.trust('&nbsp;'), m.trust('&nbsp;'), m('a.alt-link[href=\'/en/reports/contribution_reports_for_project_owners.csv?project_id=' + project.project_id + '&amp;reward_id=0&amp;state=paid\']', 'CSV'), m.trust('&nbsp;'), '\\', m.trust('&nbsp;'), m('a.alt-link[href=\'/en/reports/contribution_reports_for_project_owners.xls?project_id=' + project.project_id + '&amp;reward_id=0&amp;state=paid\']', 'XLS')])), _$1.map(paidRewards, function (reward) {
            return [m('li.divider.u-marginbottom-10'), m('li.fontsize-smaller.u-marginbottom-10', m('div', ['US$ ' + reward.minimum_value + ' ' + reward.description.substring(0, 40) + '...;', m('a.alt-link[href=\'/en/reports/contribution_reports_for_project_owners.csv?project_id=' + project.project_id + '&amp;reward_id=' + reward.id + '&amp;state=paid\']', 'CSV'), m.trust('&nbsp;'), '\\', m.trust('&nbsp;'), m('a.alt-link[href=\'/en/reports/contribution_reports_for_project_owners.xls?project_id=' + project.project_id + '&amp;reward_id=' + reward.id + '&amp;state=paid\']', 'XLS')]))];
        }), m('li.divider.u-marginbottom-10')])])), m('.w-col.w-col-2')]))))));
    }
};

var InfoProjectContributionLegend = {
    controller: function controller(args) {
        return {
            modalToggle: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        return m('span', [args.text, m.trust('&nbsp;'), m('a.fa.fa-question-circle.fontcolor-secondary[href="#"]', {
            onclick: ctrl.modalToggle.toggle
        }, ''), ctrl.modalToggle() ? m.component(modalBox, {
            displayModal: ctrl.modalToggle,
            content: args.content
        }) : '']);
    }
};

var I18nScope$19 = _$1.partial(h.i18nScope, 'projects.contributions_report.legend_labels');

var ProjectContributionStateLegendModal = {
    controller: function controller(args) {
        var translate = function translate(path) {
            return I18n$1.t(path, I18nScope$19());
        };

        return {
            stages: {
                online: [{
                    label: translate('online.paid.label'),
                    text: translate('online.paid.text'),
                    i_class: '.fa.fa-circle.text-success'
                }, {
                    label: translate('online.pending.label'),
                    text: translate('online.pending.text'),
                    i_class: '.fa.fa-circle.text-waiting'
                }, {
                    label: translate('online.refunded.label'),
                    text: translate('online.refunded.text'),
                    i_class: '.fa.fa-circle.text-error'
                }],
                failed: [{
                    label: translate('failed.refunded.label'),
                    text: translate('failed.refunded.text'),
                    i_class: '.fa.fa-circle.text-refunded'
                }],
                successful: [{
                    label: translate('successful.paid.label'),
                    text: translate('successful.paid.text'),
                    i_class: '.fa.fa-circle.text-success'
                }, {
                    label: translate('successful.refunded.label'),
                    text: translate('successful.refunded.text'),
                    i_class: '.fa.fa-circle.text-error'
                }]

            }
        };
    },
    view: function view(ctrl, args) {
        var project = _$1.first(args.project()),
            project_stage = project.state == 'waiting_funds' ? 'online' : project.state;

        return m('div', [m('.modal-dialog-header', [m('.fontsize-large.u-text-center', 'Support Status')]), m('.modal-dialog-content', _$1.map(ctrl.stages[project_stage], function (item, i) {
            return m('.u-marginbottom-20', [m('.fontsize-small.fontweight-semibold', [m('span' + item.i_class), ' \xA0' + item.label]), m('.fontsize-smaller', m.trust(item.text))]);
        }))]);
    }
};

var ProjectContributionDeliveryLegendModal = {
    view: function view(ctrl, args) {
        return m('div', [m('.modal-dialog-header', [m('.fontsize-large.u-text-center', 'Delivery status')]), m('.modal-dialog-content', [m('.fontsize-smaller.u-marginbottom-30', 'All support has, by default, delivery status \'Not sent\'. To assist in your control of rewards delivery, you can change these statuses and filter the support search with the following labels:'), m('.u-marginbottom-20', [m('.fontsize-smaller.fontweight-semibold', ['Not sent', m.trust('&nbsp;')]), m('.fontsize-smaller', 'You have not yet sent the reward to the supporter.')]), m('div', m('span.fontsize-smaller.badge.badge-success', 'Delivered')), m('.u-marginbottom-20', m('.fontsize-smaller', 'You have already sent the reward to the supporter.')), m('.u-marginbottom-20', [m('div', m('span.fontsize-smaller.badge.badge-attention', 'Delivery error')), m('.fontsize-smaller', 'You sent the reward, but there was a problem with the submission (eg incorrect address).')]), m('.u-marginbottom-20', [m('div', m('span.fontsize-smaller.badge.badge-success', [m('span.fa.fa-check-circle', ''), ' Received'])), m('.fontsize-smaller', 'The sponsor marked the reward as \'Received\' in your control panel \o/')])]), m('.divider.u-marginbottom-10'), m('.fontcolor-secondary.fontsize-smaller.u-marginbottom-30', ['Obs: even if the reward is not physical (like a digital copy, for example), you can still use the above system!'])]);
    }
};

var projectContributionReport = {
    controller: function controller(args) {
        var listVM = postgrest$1.paginationVM(models.projectContribution, 'id.desc', {
            Prefer: 'count=exact'
        }),
            filterVM = vm$6,
            project = m.prop([{}]),
            rewards = m.prop([]),
            showDownloads = m.prop(false),
            contributionStateOptions = m.prop([]),
            reloadSelectOptions = function reloadSelectOptions(projectState) {
            var opts = [{
                value: '',
                option: 'All'
            }];

            var optionsMap = {
                online: [{
                    value: 'paid',
                    option: 'Confirmed'
                }, {
                    value: 'pending',
                    option: 'Started'
                }, {
                    value: 'refunded,chargeback,deleted,pending_refund',
                    option: 'Answered'
                }],
                waiting_funds: [{
                    value: 'paid',
                    option: 'Confirmed'
                }, {
                    value: 'pending',
                    option: 'Started'
                }, {
                    value: 'refunded,chargeback,deleted,pending_refund',
                    option: 'Answered'
                }],
                failed: [{
                    value: 'refunded',
                    option: 'Refunded'
                }, {
                    value: 'paid',
                    option: 'Refund not started'
                }],
                successful: [{
                    value: 'paid',
                    option: 'Confirmed'
                }, {
                    value: 'refunded,chargeback,deleted,pending_refund',
                    option: 'Answered'
                }]
            };

            opts = opts.concat(optionsMap[projectState] || []);

            contributionStateOptions(opts);
        },
            submit = function submit() {
            if (filterVM.reward_id() === 'null') {
                listVM.firstPage(filterVM.withNullParameters()).then(null);
            } else {
                listVM.firstPage(filterVM.parameters()).then(null);
            }

            return false;
        },
            filterBuilder = [{
            component: filterMain,
            data: {
                inputWrapperClass: '.w-input.text-field',
                btnClass: '.btn.btn-medium',
                vm: filterVM.full_text_index,
                placeholder: 'Search by name or email of the supporter'
            }
        }, {
            label: 'reward_filter',
            component: filterDropdown,
            data: {
                label: 'Reward',
                onchange: submit,
                name: 'reward_id',
                vm: filterVM.reward_id,
                wrapper_class: '.w-sub-col.w-col.w-col-3',
                options: []
            }
        }, {
            label: 'delivery_filter',
            component: filterDropdown,
            data: {
                custom_label: [InfoProjectContributionLegend, {
                    content: [ProjectContributionDeliveryLegendModal],
                    text: 'Delivery status'
                }],
                onchange: submit,
                name: 'delivery_status',
                vm: filterVM.delivery_status,
                wrapper_class: '.w-sub-col.w-col.w-col-3',
                options: [{
                    value: '',
                    option: 'Todos'
                }, {
                    value: 'undelivered',
                    option: 'Not delivered'
                }, {
                    value: 'delivered',
                    option: 'Delivered'
                }, {
                    value: 'error',
                    option: 'Sending error'
                }, {
                    value: 'received',
                    option: 'Received'
                }]
            }
        }, {
            label: 'survey_filter',
            component: filterDropdown,
            data: {
                label: 'Questionnaire Status',
                onchange: submit,
                name: 'survey_status',
                vm: filterVM.survey_status,
                wrapper_class: '.w-col.w-col-3',
                options: [{
                    value: '',
                    option: 'All'
                }, {
                    value: 'not_sent',
                    option: 'Not sent'
                }, {
                    value: 'sent,answered',
                    option: 'Sent'
                }, {
                    value: 'sent',
                    option: 'Not answered'
                }, {
                    value: 'answered',
                    option: 'Answered'
                }]
            }
        }, {
            label: 'payment_state',
            component: filterDropdown,
            data: {
                custom_label: [InfoProjectContributionLegend, {
                    text: 'Support Status',
                    content: [ProjectContributionStateLegendModal, {
                        project: project
                    }]
                }],
                name: 'state',
                onchange: submit,
                vm: filterVM.state,
                wrapper_class: '.w-sub-col.w-col.w-col-3',
                options: contributionStateOptions
            }
        }];

        filterVM.project_id(args.project_id);

        var lReward = postgrest$1.loaderWithToken(models.rewardDetail.getPageOptions({
            project_id: 'eq.' + filterVM.project_id()
        }));
        var lProject = postgrest$1.loaderWithToken(models.projectDetail.getPageOptions({
            project_id: 'eq.' + filterVM.project_id()
        }));

        lReward.load().then(rewards);
        lProject.load().then(function (data) {
            project(data);
            reloadSelectOptions(_$1.first(data).state);
        });

        var mapRewardsToOptions = function mapRewardsToOptions() {
            var options = [];
            if (!lReward()) {
                options = _$1.map(rewards(), function (r) {
                    return {
                        value: r.id,
                        option: 'US$ ' + h.formatNumber(r.minimum_value, 2, 3) + ' - ' + (r.title ? r.title : r.description).substring(0, 20)
                    };
                });
            }

            options.unshift({
                value: null,
                option: 'No reward'
            });

            options.unshift({
                value: '',
                option: 'All'
            });

            return options;
        };

        if (!listVM.collection().length) {
            if (m.route.param('rewardId')) {
                filterVM.reward_id(m.route.param('rewardId'));
            }
            listVM.firstPage(filterVM.parameters());
        }

        return {
            listVM: listVM,
            filterVM: filterVM,
            filterBuilder: filterBuilder,
            submit: submit,
            lProject: lProject,
            rewards: rewards,
            project: project,
            showDownloads: showDownloads,
            mapRewardsToOptions: mapRewardsToOptions
        };
    },
    view: function view(ctrl) {
        var list = ctrl.listVM;

        if (!ctrl.lProject()) {
            return m('', [m.component(projectDashboardMenu, {
                project: m.prop(_$1.first(ctrl.project()))
            }), ctrl.showDownloads() ? m(downloadReports, {
                project: m.prop(_$1.first(ctrl.project())),
                rewards: ctrl.rewards()
            }) : [m('.w-section.section-product.' + _$1.first(ctrl.project()).mode), m.component(projectContributionReportHeader, {
                submit: ctrl.submit,
                filterBuilder: ctrl.filterBuilder,
                form: ctrl.filterVM.formDescriber,
                mapRewardsToOptions: ctrl.mapRewardsToOptions,
                filterVM: ctrl.filterVM
            }), m.component(projectContributionReportContent, {
                submit: ctrl.submit,
                list: list,
                showDownloads: ctrl.showDownloads,
                filterVM: ctrl.filterVM,
                project: m.prop(_$1.first(ctrl.project()))
            })]]);
        }
        return m('', h.loader());
    }
};

/**
 * window.c.root.ProjectsDashboard component
 * A root component to manage projects
 *
 * Example:
 * To mount this component just create a DOM element like:
 * <div data-mithril="ProjectsDashboard">
 */
var projectsDashboard = {
    controller: function controller(args) {
        projectVM.init(args.project_id, args.project_user_id);

        return projectVM;
    },
    view: function view(ctrl) {
        var project = ctrl.currentProject;

        return project().is_owner_or_admin ? m.component(projectDashboardMenu, { project: project }) : '';
    }
};

/**
 * window.c.Search component
 * Returns a search input
 *
 * Example:
 * m.component(c.Search, {action: '/search', method: 'GET'})
 */

var search = {
    view: function view(ctrl) {
        var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

        var action = args.action || '/en/explore?ref=ctrse_explore_pgsearch',
            method = args.method || 'GET';

        return m('#search.w-container.w-hidden-main.w-hidden-medium', [m('.w-row', [m('.w-col.w-col-10.u-marginbottom-20', [m('.w-form', [m('form#email-form', { action: action, method: method }, [m('.w-row', [m('.w-col.w-col-10.w-col-small-10.w-col-tiny-10', [m('input[type="text"][name="pg_search"][placeholder="Search Projects"]#pg_search_inside.w-input.text-field.negative.prefix')]), m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2', [m('button.w-inline-block.btn.btn-dark.btn-attached.postfix', [m('img.header-lupa[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/54e44178b2135fce2b6cd235_lupa.png"]')])])])])])])])]);
    }
};

/**
 * window.c.CategoryButton component
 * Return a link with a btn-category class.
 * It uses a category parameter.
 *
 * Example:
 * m.component(c.CategoryButton, {
 *     category: {
 *         id: 1,
 *         name: 'Video',
 *         online_projects: 1
 *     }
 * })
 */
var categoryButton = {
    view: function view(ctrl, args) {
        var category = args.category;

        return m('.w-col.w-col-2.w-col-small-6.w-col-tiny-6', [m('a.w-inline-block.btn-category[href=\'#by_category_id/' + category.id + '\']', [m('div', [category.name, m('span.badge.explore', category.online_projects)])])]);
    }
};

var UnsignedFriendFacebookConnect = {
    controller: function controller(args) {
        return {
            largeBg: function () {
                if (_$1.isUndefined(args)) {
                    return false;
                }
                return _$1.isUndefined(args.largeBg) ? false : args.largeBg;
            }()
        };
    },
    view: function view(ctrl, args) {
        return m('.w-section.section' + (ctrl.largeBg ? '.bg-backs-carrosel.section-large' : ''), [m('.w-container', [m('.card.card-big', [m('.w-row', [m('.w-col.w-col-8', [m('.fontsize-largest.u-marginbottom-20', 'Find amazing projects with your friends'), m('.fontsize-small', 'The ecosystem of OppoStarter along with your Facebook network will make you discover incredible projects!')]), m('.w-col.w-col-4', [m('a.w-button.btn.btn-fb.btn-large.u-margintop-30.u-marginbottom-10[href="/connect-facebook"]', 'Connect your facebook'), m('.fontsize-smallest.fontcolor-secondary.u-text-center', 'We will never post anything on facebook without your permission')])])])])]);
    }
};

/**
 * window.root.ProjectsExplore component
 * A root component to show projects according to user defined filters
 *
 * Example:
 * To mount this component just create a DOM element like:
 * <div data-mithril="ProjectsExplore">
 */
var I18nScope$20 = _$1.partial(h.i18nScope, 'pages.explore');
// TODO Slim down controller by abstracting logic to view-models where it fits
var projectsExplore = {
    controller: function controller(args) {
        var filters = postgrest$1.filtersVM,
            projectFiltersVM$$1 = projectFiltersVM(),
            filtersMap = projectFiltersVM$$1.filters,
            defaultFilter = h.paramByName('filter') || 'all',
            fallbackFilter = 'all',
            currentFilter = m.prop(filtersMap[defaultFilter]),
            changeFilter = function changeFilter(newFilter) {
            currentFilter(filtersMap[newFilter]);
            loadRoute();
        },
            resetContextFilter = function resetContextFilter() {
            currentFilter(filtersMap[defaultFilter]);
            projectFiltersVM$$1.setContextFilters(['finished', 'all', 'contributed_by_friends']);
        },
            currentUser = h.getUser() || {},
            hasFBAuth = currentUser.has_fb_auth,
            buildTooltip = function buildTooltip(tooltipText) {
            return m.component(tooltip, {
                el: '.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary',
                text: tooltipText,
                width: 380
            });
        },
            hint = function hint() {
            // TODO Add copies to i18n.
            var hintText = '',
                tooltipText = '',
                hasHint = false;
            if (currentFilter().keyName === 'all') {
                hasHint = true;
                hintText = 'Sorted by popularity ';
                tooltipText = 'Our popularity factor is a mix of the OppoStarter team selection with a value that is calculated by the speed of collection of the project';
            } else if (currentFilter().keyName === 'finished') {
                hasHint = true;
                hintText = 'Sorted for US$ achieved ';
                tooltipText = 'The projects with the highest collection goal achieved are at the top';
            } else if (currentFilter().keyName === 'contributed_by_friends') {
                hasHint = true;
                hintText = 'Projects supported by friends ';
                tooltipText = 'Projects supported by friends';
            }

            return hasHint ? m('.fontsize-smaller.fontcolor-secondary', [hintText, buildTooltip(tooltipText)]) : '';
        },
            isSearch = m.prop(false),
            categoryCollection = m.prop([]),
            categoryId = m.prop(),
            findCategory = function findCategory(id) {
            return _$1.find(categoryCollection(), function (c) {
                return c.id === parseInt(id);
            });
        },
            category = _$1.compose(findCategory, categoryId),
            loadCategories = function loadCategories() {
            return models.category.getPageWithToken(filters({}).order({ name: 'asc' }).parameters()).then(categoryCollection);
        },
            externalLinkCategories = I18n$1.translations[I18n$1.currentLocale()].projects.index.explore_categories,
            hasSpecialFooter = function hasSpecialFooter(categoryId) {
            return !_$1.isUndefined(externalLinkCategories[categoryId]);
        },

        // just small fix when have two scored projects only
        checkForMinScoredProjects = function checkForMinScoredProjects(collection) {
            return _$1.size(_$1.filter(collection, function (x) {
                return x.score >= 1;
            })) >= 3;
        },

        // Fake projects object to be able to render page while loadding (in case of search)
        projects = m.prop({ collection: m.prop([]), isLoading: function isLoading() {
                return true;
            }, isLastPage: function isLastPage() {
                return true;
            } }),
            loadRoute = function loadRoute() {
            var route = window.location.hash.match(/\#([^\/]*)\/?(\d+)?/),
                cat = route && route[2] && findCategory(route[2]),
                filterFromRoute = function filterFromRoute() {
                var byCategory = filters({
                    category_id: 'eq'
                });

                return route && route[1] && filtersMap[route[1]] || cat && { title: cat.name, filter: byCategory.category_id(cat.id) };
            },
                filter = filterFromRoute() || currentFilter(),
                search$$1 = h.paramByName('pg_search'),
                searchProjects = function searchProjects() {
                var l = postgrest$1.loaderWithToken(models.projectSearch.postOptions({ query: search$$1 })),
                    page = { // We build an object with the same interface as paginationVM
                    collection: m.prop([]),
                    isLoading: l,
                    isLastPage: function isLastPage() {
                        return true;
                    },
                    nextPage: function nextPage() {
                        return false;
                    }
                };
                l.load().then(page.collection);
                return page;
            },
                loadProjects = function loadProjects() {
                var pages = postgrest$1.paginationVM(models.project);
                var parameters = _$1.extend({}, currentFilter().filter.parameters(), filter.filter.order({
                    open_for_contributions: 'desc',
                    state_order: 'asc',
                    state: 'desc',
                    score: 'desc',
                    pledged: 'desc'
                }).parameters());
                pages.firstPage(parameters);
                return pages;
            },
                loadFinishedProjects = function loadFinishedProjects() {
                var pages = postgrest$1.paginationVM(models.finishedProject),
                    parameters = _$1.extend({}, currentFilter().filter.parameters(), filter.filter.order({
                    state_order: 'asc',
                    state: 'desc',
                    pledged: 'desc'
                }).parameters());
                pages.firstPage(parameters);

                return pages;
            };

            if (_$1.isString(search$$1) && search$$1.length > 0 && route === null) {
                isSearch(true);
                title('Busca ' + search$$1);
                projects(searchProjects());
            } else if (currentFilter().keyName === 'finished') {
                isSearch(false);
                projects(loadFinishedProjects());
            } else {
                isSearch(false);
                title(filter.title);
                if (!_$1.isNull(route) && route[1] == 'finished') {
                    projects(loadFinishedProjects());
                } else {
                    projects(loadProjects());
                }
            }
            categoryId(cat && cat.id);
            route || _$1.isString(search$$1) && search$$1.length > 0 ? toggleCategories(false) : toggleCategories(true);
        },
            title = m.prop(),
            toggleCategories = h.toggleProp(false, true);

        window.addEventListener('hashchange', function () {
            resetContextFilter();
            loadRoute();
            m.redraw();
        }, false);

        // Initial loads
        resetContextFilter();
        models.project.pageSize(9);
        loadCategories().then(loadRoute);

        if (args.filter) {
            currentFilter(filtersMap[args.filter]);
        }

        if (!currentFilter()) {
            currentFilter(filtersMap[defaultFilter]);
        }

        return {
            categories: categoryCollection,
            changeFilter: changeFilter,
            fallbackFilter: fallbackFilter,
            projects: projects,
            category: category,
            title: title,
            hint: hint,
            filtersMap: filtersMap,
            currentFilter: currentFilter,
            projectFiltersVM: projectFiltersVM$$1,
            toggleCategories: toggleCategories,
            isSearch: isSearch,
            hasFBAuth: hasFBAuth,
            checkForMinScoredProjects: checkForMinScoredProjects,
            categoryId: categoryId,
            hasSpecialFooter: hasSpecialFooter,
            externalLinkCategories: externalLinkCategories
        };
    },
    view: function view(ctrl, args) {
        var categoryId = ctrl.categoryId,
            projectsCollection = ctrl.projects().collection(),
            projectsCount = projectsCollection.length,
            filterKeyName = ctrl.currentFilter().keyName,
            isContributedByFriendsFilter = filterKeyName === 'contributed_by_friends',
            hasSpecialFooter = ctrl.hasSpecialFooter(categoryId());
        var widowProjects = [];

        if (!ctrl.projects().isLoading() && _$1.isEmpty(projectsCollection) && !ctrl.isSearch()) {
            if (!(isContributedByFriendsFilter && !ctrl.hasFBAuth)) {
                ctrl.projectFiltersVM.removeContextFilter(ctrl.currentFilter());
                ctrl.changeFilter(ctrl.fallbackFilter);
            }
        }

        return m('#explore', { config: h.setPageTitle(I18n$1.t('header_html', I18nScope$20())) }, [m('.w-section.hero-search', [m.component(search), m('.w-container.u-marginbottom-10', [m('.u-text-center.u-marginbottom-40', [m('a#explore-open.link-hidden-white.fontweight-light.fontsize-larger[href="javascript:void(0);"]', { onclick: function onclick() {
                return ctrl.toggleCategories.toggle();
            } }, ['Explore Amazing Projects ', m('span#explore-btn.fa.fa-angle-down' + (ctrl.toggleCategories() ? '.opened' : ''), '')])]), m('#categories.category-slider' + (ctrl.toggleCategories() ? '.opened' : ''), [m('.w-row.u-marginbottom-30', [_$1.map(ctrl.categories(), function (category) {
            return m.component(categoryButton, { category: category });
        })])])])]), m('.w-section', [m('.w-container', [m('.w-row', [m('.w-col.w-col-9.w-col-small-8.w-col-tiny-8', [m('.fontsize-larger', ctrl.title()), ctrl.hint()]), m('.w-col.w-col-3.w-col-small-4.w-col-tiny-4', !ctrl.isSearch() ? m('select.w-select.text-field.positive', { onchange: m.withAttr('value', ctrl.changeFilter) }, _$1.map(ctrl.projectFiltersVM.getContextFilters(), function (pageFilter, idx) {
            var isSelected = ctrl.currentFilter() === pageFilter;

            return m('option', { value: pageFilter.keyName, selected: isSelected }, pageFilter.nicename);
        })) : '')])])]), isContributedByFriendsFilter && _$1.isEmpty(projectsCollection) ? !ctrl.hasFBAuth ? m.component(UnsignedFriendFacebookConnect) : '' : '', m('.w-section.section', [m('.w-container', [m('.w-row', [m('.w-row', _$1.map(projectsCollection, function (project, idx) {
            var cardType = 'small',
                ref = 'ctrse_explore';

            if (ctrl.isSearch()) {
                ref = 'ctrse_explore_pgsearch';
            } else if (isContributedByFriendsFilter) {
                ref = 'ctrse_explore_friends';
            } else if (filterKeyName === 'all') {
                if (project.score >= 1) {
                    if (idx === 0) {
                        cardType = 'big';
                        ref = 'ctrse_explore_featured_big';
                        widowProjects = [projectsCount - 1, projectsCount - 2];
                    } else if (idx === 1 || idx === 2) {
                        if (ctrl.checkForMinScoredProjects(projectsCollection)) {
                            cardType = 'medium';
                            ref = 'ctrse_explore_featured_medium';
                            widowProjects = [];
                        } else {
                            cardType = 'big';
                            ref = 'ctrse_explore_featured_big';
                            widowProjects = [projectsCount - 1];
                        }
                    } else {
                        ref = 'ctrse_explore_featured';
                    }
                }
            }

            return _$1.indexOf(widowProjects, idx) > -1 && !ctrl.projects().isLastPage() ? '' : m.component(projectCard, { project: project, ref: ref, type: cardType, showFriends: isContributedByFriendsFilter });
        })), ctrl.projects().isLoading() ? h.loader() : _$1.isEmpty(projectsCollection) && ctrl.hasFBAuth ? m('.fontsize-base.w-col.w-col-12', 'No projects to show.') : ''])])]), m('.w-section.u-marginbottom-80', [m('.w-container', [m('.w-row', [m('.w-col.w-col-2.w-col-push-5', [ctrl.projects().isLastPage() || ctrl.projects().isLoading() || _$1.isEmpty(projectsCollection) ? '' : m('a.btn.btn-medium.btn-terciary[href=\'#loadMore\']', { onclick: function onclick() {
                ctrl.projects().nextPage();return false;
            } }, 'Load more')])])])]), m('.w-section.section-large.before-footer.u-margintop-80.bg-gray.divider', [m('.w-container.u-text-center', [m('img.u-marginbottom-20.icon-hero', {
            src: hasSpecialFooter ? ctrl.externalLinkCategories[categoryId()].icon : 'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/56f4414d3a0fcc0124ec9a24_icon-launch-explore.png'
        }), m('h2.fontsize-larger.u-marginbottom-60', hasSpecialFooter ? ctrl.externalLinkCategories[categoryId()].title : 'Launch your OppoStarter campaign!'), m('.w-row', [m('.w-col.w-col-4.w-col-push-4', [hasSpecialFooter ? m('a.w-button.btn.btn-large', { href: ctrl.externalLinkCategories[categoryId()].link + '?ref=ctrse_explore' }, ctrl.externalLinkCategories[categoryId()].cta) : m('a.w-button.btn.btn-large', { href: '/start?ref=ctrse_explore' }, 'Learn how')])])])])]);
    }
};

var homeVM = function homeVM() {
    var i18nStart = I18n$1.translations[I18n$1.currentLocale()].projects.home,
        banners = i18nStart.banners;

    return {
        banners: banners
    };
};

/**
 * window.c.Slider component
 * Build a slider from any array of mithril elements
 *
 * Example of use:
 * view: () => {
 *     ...
 *     m.component(c.Slider, {
 *         slides: [m('slide1'), m('slide2'), m('slide3')],
 *         title: 'O que estão dizendo por aí...'
 *     })
 *     ...
 * }
 */

var slider = {
    controller: function controller(args) {
        var interval = void 0;
        var selectedSlideIdx = m.prop(0),
            translationSize = m.prop(1600),
            sliderTime = args.sliderTime || 6500,
            decrementSlide = function decrementSlide() {
            if (selectedSlideIdx() > 0) {
                selectedSlideIdx(selectedSlideIdx() - 1);
            } else {
                selectedSlideIdx(args.slides.length - 1);
            }
        },
            incrementSlide = function incrementSlide() {
            if (selectedSlideIdx() < args.slides.length - 1) {
                selectedSlideIdx(selectedSlideIdx() + 1);
            } else {
                selectedSlideIdx(0);
            }
        },
            startSliderTimer = function startSliderTimer() {
            interval = setInterval(function () {
                incrementSlide();
                m.redraw();
            }, sliderTime);
        },
            resetSliderTimer = function resetSliderTimer() {
            clearInterval(interval);
            startSliderTimer();
        },
            config = function config(el, isInitialized, context) {
            if (!isInitialized) {
                translationSize(Math.max(document.documentElement.clientWidth, window.innerWidth || 0));
                m.redraw();
            }

            context.onunload = function () {
                return clearInterval(interval);
            };
        };

        startSliderTimer();

        return {
            config: config,
            selectedSlideIdx: selectedSlideIdx,
            translationSize: translationSize,
            decrementSlide: decrementSlide,
            incrementSlide: incrementSlide,
            resetSliderTimer: resetSliderTimer
        };
    },
    view: function view(ctrl, args) {
        var slideClass = args.slideClass || '',
            wrapperClass = args.wrapperClass || '',
            effect = args.effect || 'slide',
            sliderClick = function sliderClick(fn, param) {
            fn(param);
            ctrl.resetSliderTimer();
            args.onchange && args.onchange();
        },
            effectStyle = function effectStyle(idx, translateStr) {
            var slideFx = 'transform: ' + translateStr + '; -webkit-transform: ' + translateStr + '; -ms-transform:' + translateStr,
                fadeFx = idx === ctrl.selectedSlideIdx() ? 'opacity: 1; visibility: visible;' : 'opacity: 0; visibility: hidden;';

            return effect === 'fade' ? fadeFx : slideFx;
        };

        return m('.w-slider.' + wrapperClass, {
            config: ctrl.config
        }, [m('.fontsize-larger', args.title), m('.w-slider-mask', [_$1.map(args.slides, function (slide, idx) {
            var translateValue = (idx - ctrl.selectedSlideIdx()) * ctrl.translationSize(),
                translateStr = 'translate3d(' + translateValue + 'px, 0, 0)';

            return m('.slide.w-slide.' + slideClass, {
                style: effectStyle(idx, translateStr) + ' ' + slide.customStyle
            }, [m('.w-container', [m('.w-row', [m('.w-col.w-col-8.w-col-push-2', slide.content)])])]);
        }), m('#slide-prev.w-slider-arrow-left.w-hidden-small.w-hidden-tiny', {
            onclick: function onclick() {
                return sliderClick(ctrl.decrementSlide);
            }
        }, [m('.w-icon-slider-left.fa.fa-lg.fa-angle-left.fontcolor-terciary')]), m('#slide-next.w-slider-arrow-right.w-hidden-small.w-hidden-tiny', {
            onclick: function onclick() {
                return sliderClick(ctrl.incrementSlide);
            }
        }, [m('.w-icon-slider-right.fa.fa-lg.fa-angle-right.fontcolor-terciary')]), m('.w-slider-nav.w-slider-nav-invert.w-round.slide-nav', _$1(args.slides.length).times(function (idx) {
            return m('.slide-bullet.w-slider-dot' + (ctrl.selectedSlideIdx() === idx ? '.w-active' : ''), {
                onclick: function onclick() {
                    return sliderClick(ctrl.selectedSlideIdx, idx);
                }
            });
        }))])]);
    }
};

/*       */
var blogVM = {
    getBlogPosts: function getBlogPosts() {
        var deferred = m.deferred();
        var posts = _$1.first(document.getElementsByTagName('body')).getAttribute('data-blog');

        if (posts) {
            deferred.resolve(JSON.parse(posts));
        } else {
            m.request({ method: 'GET', url: '/posts' }).then(deferred.resolve).catch(deferred.reject);
        }

        return deferred.promise;
    }
};

//      
var blogBanner = {
    controller: function controller(args) {
        var posts = m.prop([]),
            error = m.prop(false);

        blogVM.getBlogPosts().then(posts).catch(error);

        return { posts: posts, error: error };
    },
    view: function view(ctrl, args) {

        return m('section.section-large.bg-gray.before-footer[id=\'blog\']', m('.w-container', [m('.u-text-center', [m('a[href=\'http://blog.catarse.me\'][target=\'blank\']', m('img.u-marginbottom-10[alt=\'Icon blog\'][src=\'/assets/icon-blog.png\']')), m('.fontsize-large.u-marginbottom-60.text-success', m('a.link-hidden-success[href=\'https://blog.oppostarter.com\'][target=\'__blank\']', 'OppoStarter Blog'))]), m('.w-row', _$1.map(ctrl.posts(), function (post) {
            return m('.w-col.w-col-4.col-blog-post', [m('a.link-hidden.fontweight-semibold.fontsize-base.u-marginbottom-10[href="' + post[1][1] + '"][target=\'__blank\']', post[0][1]), m('.fontsize-smaller.fontcolor-secondary.u-margintop-10', m.trust(h.strip(post[6][1].substr(0, 130)) + '...'))]);
        })), ctrl.error() ? m('.w-row', m('.w-col.w-col-12.u-text-center', 'Error loading posts...')) : '']));
    }
};

var I18nScope$21 = _$1.partial(h.i18nScope, 'projects.home');

var projectsHome = {
    controller: function controller(args) {
        var sample6 = _$1.partial(_$1.sample, _$1, 6),
            loader = postgrest$1.loaderWithToken,
            project = models.project,
            filters = projectFiltersVM().filters,
            userFriendVM = postgrest$1.filtersVM({ user_id: 'eq' }),
            friendListVM = postgrest$1.paginationVM(models.userFriend, 'user_id.desc', {
            Prefer: 'count=exact'
        }),
            currentUser = h.getUser() || {},
            hasFBAuth = currentUser.has_fb_auth,
            vm = homeVM();

        project.pageSize(20);

        userFriendVM.user_id(currentUser.user_id);

        if (hasFBAuth && !friendListVM.collection().length) {
            friendListVM.firstPage(userFriendVM.parameters());
        }

        var collections = _$1.map(['score', 'contributed_by_friends'], function (name) {
            var f = filters[name],
                cLoader = loader(project.getPageOptions(_$1.extend({}, { order: 'score.desc' }, f.filter.parameters()))),
                collection = m.prop([]);

            cLoader.load().then(_$1.compose(collection, sample6));

            return {
                title: f.nicename,
                hash: name === 'score' ? 'all' : name,
                collection: collection,
                loader: cLoader,
                showFriends: name === 'contributed_by_friends'
            };
        });

        return {
            collections: collections,
            slidesContent: vm.banners,
            hasFBAuth: hasFBAuth
        };
    },
    view: function view(ctrl) {
        var slides = function slides() {
            return _$1.map(ctrl.slidesContent, function (slide) {
                var customStyle = 'background-image: url(' + slide.image + ');';
                var content = m('.w-container.u-text-center', [m('.w-row.u-marginbottom-40', [m('h1.fontcolor-negative.fontsize-megajumbo.u-marginbottom-20', m.trust(slide.title)), m('h2.fontcolor-negative.fontsize-large', m.trust(slide.subtitle))]), m('a.btn.btn-large.u-marginbottom-10.btn-inline', { href: slide.link }, slide.cta)]);

                return {
                    content: content,
                    customStyle: customStyle
                };
            });
        };

        return m('#projects-home-component', { config: h.setPageTitle(I18n$1.t('header_html', I18nScope$21())) }, [
        // m.component(menu, {transparent: true}),
        m.component(slider, {
            slides: slides(),
            effect: 'fade',
            slideClass: 'hero-slide start',
            wrapperClass: 'hero-full hero-full-slide',
            sliderTime: 10000
        }), _$1.map(ctrl.collections, function (collection) {
            return m.component(projectRow, {
                collection: collection,
                title: collection.title,
                ref: 'home_' + (collection.hash === 'all' ? 'score' : collection.hash),
                showFriends: collection.showFriends
            });
        }),
        // m.component(contributionActivities),
        !ctrl.hasFBAuth ? m.component(UnsignedFriendFacebookConnect, { largeBg: true }) : '', m.component(blogBanner)
        // m.component(footer, {expanded: true}),
        // m.component(contributionActivities)
        ]);
    }
};

var projectShareBox = {
    controller: function controller() {
        return {
            displayEmbed: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        return m('.pop-share', {
            style: 'display: block;'
        }, [m('.w-hidden-main.w-hidden-medium.w-clearfix', [m('a.btn.btn-small.btn-terciary.btn-inline.u-right', {
            onclick: args.displayShareBox.toggle
        }, 'Close'), m('.fontsize-small.fontweight-semibold.u-marginbottom-30', 'Share this project')]), m('.w-widget.w-widget-twitter.w-hidden-small.w-hidden-tiny.share-block', [m('iframe[allowtransparency="true"][width="120px"][height="22px"][frameborder="0"][scrolling="no"][src="//platform.twitter.com/widgets/tweet_button.8d007ddfc184e6776be76fe9e5e52d69.en.html#_=1442425984936&count=horizontal&dnt=false&id=twitter-widget-1&lang=en&original_referer=https%3A%2F%2Fwww.catarse.me%2Fpt%2F' + args.project().permalink + '&size=m&text=Confira%20o%20projeto%20' + args.project().name + '%20no%20%40catarse&type=share&url=https%3A%2F%2Fwww.catarse.me%2Fpt%2F' + args.project().permalink + '%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share&via=catarse"]')]), m('a.w-hidden-small.widget-embed.w-hidden-tiny.fontsize-small.link-hidden.fontcolor-secondary[href="javascript:void(0);"]', {
            onclick: ctrl.displayEmbed.toggle
        }, '< embed >'), ctrl.displayEmbed() ? m('.embed-expanded.u-margintop-30', [m('.fontsize-small.fontweight-semibold.u-marginbottom-20', 'Insert a widget on your site'), m('.w-form', [m('input.w-input[type="text"][value="<iframe frameborder="0" height="340px" src="https://www.oppostarter.com/en/projects/' + args.project().project_id + '/embed" width="300px" scrolling="no"></iframe>"]')]), m('.card-embed', [m('iframe[frameborder="0"][height="350px"][src="/projects/' + args.project().project_id + '/embed"][width="300px"][scrolling="no"]')])]) : '', args.project().permalink ? m.component(facebookButton, {
            mobile: true,
            url: 'https://www.oppostarter.com/' + args.project().permalink + '?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share'
        }) : '', m('a.w-hidden-main.w-hidden-medium.btn.btn-medium.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20' + encodeURIComponent(args.project().name) + '%20https://www.oppostarter.com/' + args.project().permalink + '%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]', [m('span.fa.fa-twitter'), ' Tweet']), m('a.w-hidden-main.w-hidden-medium.btn.btn-medium[data-action="share/whatsapp/share"]', {
            href: 'whatsapp://send?text=' + encodeURIComponent('https://www.oppostarter.com/' + args.project().permalink + '/?ref=whatsapp&utm_source=whatsapp&utm_medium=social&utm_campaign=project_share')
        }, [m('span.fa.fa-whatsapp'), ' Whatsapp'])]);
    }
};

var addressTag = {
    view: function view(ctrl, args) {
        var project = args.project,
            address = project().address || {
            state_acronym: '',
            city: ''
        };

        return !_$1.isNull(address) ? m('a.btn.btn-inline.btn-small.btn-transparent.link-hidden-light.u-marginbottom-10[href="/en/explore?pg_search=' + address.state_acronym + '"]', {
            onclick: h.analytics.event({
                cat: 'project_view',
                act: 'project_location_link',
                lbl: address.city + ' ' + address.state_acronym,
                project: project()
            })
        }, [m('span.fa.fa-map-marker'), ' ' + address.city + ', ' + address.state_acronym]) : '';
    }
};

var categoryTag = {
    view: function view(ctrl, args) {
        var project = args.project;

        return project ? m('a.btn.btn-inline.btn-small.btn-transparent.link-hidden-light[href="/en/explore#by_category_id/' + project().category_id + '"]', {
            onclick: h.analytics.event({
                cat: 'project_view',
                act: 'project_category_link',
                lbl: project().category_name,
                project: project()
            })
        }, [m('span.fa.fa-tag'), ' ', project().category_name]) : '';
    }
};

var projectHighlight = {
    controller: function controller() {
        return {
            displayShareBox: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        var project = args.project;

        return m('#project-highlight', [project().video_embed_url ? m('.w-embed.w-video.project-video', {
            style: 'min-height: 240px;'
        }, [m('iframe.embedly-embed[itemprop="video"][src="' + project().video_embed_url + '"][frameborder="0"][allowFullScreen]')]) : m('.project-image', {
            style: 'background-image:url(\'' + (project().original_image || project().project_img) + '\');'
        }), m('.w-hidden-small.w-hidden-tiny', [m.component(addressTag, { project: project }), m.component(categoryTag, { project: project })]), m('.project-blurb', project().headline), m('.project-share.w-hidden-small.w-hidden-tiny', m('.u-marginbottom-30.u-text-center-small-only', [m('.w-inline-block.fontcolor-secondary.fontsize-smaller.u-marginright-20', 'Share:'), project().permalink ? m.component(facebookButton, {
            url: 'https://www.oppostarter.com/' + project().permalink + '?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share'
        }) : '', project().permalink ? m.component(facebookButton, {
            messenger: true,
            url: 'https://www.oppostarter.com/' + project().permalink + '?ref=facebook&utm_source=facebook.com&utm_medium=messenger&utm_campaign=project_share'
        }) : '', m('button#more-share.btn.btn-inline.btn-medium.btn-terciary', {
            style: {
                transition: 'all 0.5s ease 0s'
            },
            onclick: ctrl.displayShareBox.toggle
        }, ['···', ' More']), ctrl.displayShareBox() ? m(projectShareBox, {
            project: project,
            displayShareBox: ctrl.displayShareBox
        }) : '']))]);
    }
};

/**
 * window.c.ProjectMode component
 * A simple component that displays a badge with the current project mode
 * together with a description of the mode, shown inside a tooltip.
 * It receives a project as resource
 *
 * Example:
 *  view: {
 *      return m.component(c.ProjectMode, {project: project})
 *  }
 */

var projectMode = {
    view: function view(ctrl, args) {
        var project = args.project(),
            mode = project.mode,
            modeImgSrc = mode === 'aon' ? '/assets/aon-badge.png' : '/assets/flex-badge.png',
            modeTitle = mode === 'aon' ? 'All-or-nothing Campaign ' : 'Flexible Campaign ',
            goal = _$1.isNull(project.goal) ? 'not defined' : h.formatNumber(project.goal),
            buildTooltip = function buildTooltip(el) {
            return m.component(tooltip, {
                el: el,
                text: mode === 'aon' ? 'You will only receive the funds if you reach or exceed the goal until the ' + h.momentify(project.zone_expires_at, 'DD/MM/YYYY') + '.' : 'The director will receive all the money raised when the campaign expires, even if the goal is not reached.',
                width: 280
            });
        };

        return m('#' + mode + '.w-row', [m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2', [!_$1.isEmpty(project) ? m('img[src="' + modeImgSrc + '"][width=\'30\']') : '']), m('.w-col.w-col-10.w-col-small-10.w-col-tiny-10', [m('.fontsize-base.fontweight-semibold', 'Goal US$ ' + h.selfOrEmpty(goal, '--')), m('.w-inline-block.fontsize-smallest._w-inline-block', [!_$1.isEmpty(project) ? modeTitle : '', buildTooltip('span.w-inline-block.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary')])])]);
    }
};

/**
 * window.c.ProjectReminder component
 * A component that displays a clickable project reminder element.
 * The component can be of two types: a 'link' or a 'button'
 *
 * Example:
 *  view: {
 *      return m.component(c.ProjectReminder, {project: project, type: 'button'})
 *  }
 */
var projectReminder = {
    controller: function controller(args) {
        var l = m.prop(false);
        var project = args.project,
            filterVM = postgrest$1.filtersVM({
            project_id: 'eq'
        }),
            storeReminderName = 'reminder',
            popNotification$$1 = m.prop(false),
            submitReminder = function submitReminder() {
            if (!h.getUser()) {
                h.storeAction(storeReminderName, project().project_id);
                return h.navigateToDevise();
            }
            var loaderOpts = project().in_reminder ? models.projectReminder.deleteOptions(filterVM.parameters()) : models.projectReminder.postOptions({
                project_id: project().project_id
            });
            l = postgrest$1.loaderWithToken(loaderOpts);

            l.load().then(function () {
                project().in_reminder = !project().in_reminder;

                if (project().in_reminder) {
                    popNotification$$1(true);
                    setTimeout(function () {
                        popNotification$$1(false);
                        m.redraw();
                    }, 5000);
                } else {
                    popNotification$$1(false);
                }
            });
        };

        if (h.callStoredAction(storeReminderName) == project().project_id) {
            submitReminder();
        }

        filterVM.project_id(project().project_id);

        return {
            l: l,
            submitReminder: submitReminder,
            popNotification: popNotification$$1
        };
    },
    view: function view(ctrl, args) {
        var mainClass = args.type === 'button' ? '' : '.u-text-center.u-marginbottom-30',
            buttonClass = args.type === 'button' ? 'w-button btn btn-terciary btn-no-border' : 'btn-link link-hidden fontsize-large',
            hideTextOnMobile = args.hideTextOnMobile || false,
            project = args.project,
            onclickFunc = h.analytics.event({ cat: 'project_view', act: 'project_floatingreminder_click', project: project() }, ctrl.submitReminder);

        return m('#project-reminder' + mainClass, [m('a.btn.btn-small.btn-terciary.w-hidden-main.w-hidden-medium[data-ix=\'popshare\'][href=\'#\']', {
            onclick: onclickFunc
        }, project().in_reminder ? [m('span.fa.fa-heart'), ' Active Reminder'] : [m('span.fa.fa-heart-o'), ' Remind Me']), m('button[class="w-hidden-small w-hidden-tiny ' + buttonClass + ' ' + (project().in_reminder ? 'link-hidden-success' : 'fontcolor-secondary') + ' fontweight-semibold"]', {
            onclick: onclickFunc
        }, [ctrl.l() ? h.loader() : project().in_reminder ? m('span.fa.fa-heart') : m('span.fa.fa-heart-o')]), ctrl.popNotification() ? m.component(popNotification, {
            message: 'Ok! We will email you a reminder 48 hours before the end of the campaign'
        }) : '']);
    }
};

/**
 * window.c.OwnerMessageContent component
 * Render project owner contact form
 *
 */
var ownerMessageContent = {
    controller: function controller(args) {
        var l = m.prop(false);
        var sendSuccess = m.prop(false),
            userDetails = args,
            submitDisabled = m.prop(false),

        // sets default values when user is not logged in
        user = h.getUser() || {
            name: '',
            email: ''
        },
            from_name = m.prop(userVM.displayName(user)),
            from_email = m.prop(user.email),
            content = m.prop('');

        var sendMessage = function sendMessage() {
            if (l()) {
                return false;
            }
            submitDisabled(true);
            content(content().split('\n').join('<br />'));
            var project = h.getCurrentProject() || { project_id: args().project_id };

            var loaderOpts = models.directMessage.postOptions({
                from_name: from_name(),
                from_email: from_email(),
                user_id: h.getUser().user_id,
                content: content(),
                project_id: project ? project.project_id : null,
                to_user_id: userDetails().id
            });

            l = postgrest$1.loaderWithToken(loaderOpts);

            l.load().then(sendSuccess(true));

            submitDisabled(false);
            return false;
        };

        return {
            sendMessage: sendMessage,
            submitDisabled: submitDisabled,
            sendSuccess: sendSuccess,
            userDetails: args,
            from_name: from_name,
            from_email: from_email,
            content: content,
            l: l
        };
    },
    view: function view(ctrl, args) {
        var successMessage = m('.modal-dialog-content.u-text-center', [m('.fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40'), m('p.fontsize-large', 'Your message was successfully sent to ' + ctrl.userDetails().name + '. You will receive a copy in your email and you can follow the conversation there!')]),
            contactForm = [m('.modal-dialog-content', [m('.w-form', [m('form', {
            onsubmit: h.validate().submit([{
                prop: ctrl.from_name,
                rule: 'text'
            }, {
                prop: ctrl.from_email,
                rule: 'email'
            }, {
                prop: ctrl.content,
                rule: 'text'
            }], ctrl.sendMessage)
        }, [m('.w-row', [m('.w-col.w-col-6.w-sub-col', [m('label.fontsize-smaller', 'Your name'), m('input.w-input.text-field[value=\'' + ctrl.from_name() + '\'][type=\'text\'][required=\'required\']', {
            onchange: m.withAttr('value', ctrl.from_name),
            class: h.validate().hasError(ctrl.from_name) ? 'error' : ''
        })]), m('.w-col.w-col-6', [m('label.fontsize-smaller', 'Your email'), m('input.w-input.text-field[value=\'' + ctrl.from_email() + '\'][type=\'text\'][required=\'required\']', {
            onchange: m.withAttr('value', ctrl.from_email),
            class: h.validate().hasError(ctrl.from_email) ? 'error' : ''
        })])]), m('label', 'Message'), m('textarea.w-input.text-field.height-small[required=\'required\']', {
            onchange: m.withAttr('value', ctrl.content),
            class: h.validate().hasError(ctrl.content) ? 'error' : ''
        }), m('.u-marginbottom-10.fontsize-smallest.fontcolor-terciary', 'You will receive a copy of this message in your email.'), m('.w-row', h.validationErrors().length ? _$1.map(h.validationErrors(), function (errors) {
            return m('span.fontsize-smallest.text-error', [m('span.fa.fa-exclamation-triangle'), ' ' + errors.message, m('br')]);
        }) : ''), m('.modal-dialog-nav-bottom', m('.w-row', m('.w-col.w-col-6.w-col-push-3', !ctrl.l() ? m('input.w-button.btn.btn-large[type="submit"][value="Send Message"]', {
            disabled: ctrl.submitDisabled()
        }) : h.loader())))])])])];

        return m('div', [m('.modal-dialog-header', m('.fontsize-large.u-text-center', 'Send Message')), ctrl.sendSuccess() ? successMessage : contactForm]);
    }
};

/*
 * UserFollowBtn - Component
 * Handles with follow / unfollow actions to an user
 *
 * Example:
 * m.component(c.UserFollowBtn, {follow_id: 10, following: false})
 */

var UserFollowBtn = {
    controller: function controller(args) {
        var following = m.prop(args.following || false),
            followVM = postgrest$1.filtersVM({ follow_id: 'eq' }),
            loading = m.prop(false),
            hover = m.prop(false),
            userFollowInsert = models.userFollow.postOptions({
            follow_id: args.follow_id }),
            userFollowDelete = function () {
            followVM.follow_id(args.follow_id);

            return models.userFollow.deleteOptions(followVM.parameters());
        }(),
            follow = function follow() {
            var l = postgrest$1.loaderWithToken(userFollowInsert);
            loading(true);

            l.load().then(function () {
                following(true);
                loading(false);
            });
        },
            unfollow = function unfollow() {
            var l = postgrest$1.loaderWithToken(userFollowDelete);
            loading(true);

            l.load().then(function () {
                following(false);
                loading(false);
            });
        };

        return {
            following: following,
            follow: follow,
            unfollow: unfollow,
            loading: loading,
            hover: hover
        };
    },
    view: function view(ctrl, args) {
        if (h.userSignedIn() && h.getUserID() != args.follow_id) {
            var disableClass = args.disabledClass || '.w-button.btn.btn-medium.btn-terciary.u-margintop-20',
                enabledClass = args.enabledClass || '.w-button.btn.btn-medium.u-margintop-20';
            if (ctrl.loading()) {
                return h.loader();
            }
            if (ctrl.following()) {
                return m('a' + enabledClass, {
                    onclick: ctrl.unfollow,
                    onmouseover: function onmouseover() {
                        return ctrl.hover(true);
                    },
                    onmouseout: function onmouseout() {
                        return ctrl.hover(false);
                    }
                }, ctrl.hover() ? 'Unfollow' : 'Following');
            }
            return m('a' + disableClass, { onclick: ctrl.follow }, 'Follow');
        }
        return m('');
    }
};

var projectUserCard = {
    controller: function controller(args) {
        var project = args.project || m.prop({}),
            displayModal = h.toggleProp(false, true),
            storeId = 'message',
            sendMessage = function sendMessage() {
            if (!h.getUser()) {
                h.storeAction(storeId, project().project_id);
                return h.navigateToDevise();
            }

            displayModal(true);
        };

        if (h.callStoredAction(storeId) == project().project_id) {
            displayModal(true);
        }

        return {
            displayModal: displayModal,
            sendMessage: sendMessage
        };
    },
    view: function view(ctrl, args) {
        var project = args.project;
        var contactModalC = [ownerMessageContent, args.userDetails];
        var userDetail = args.userDetails();

        return m('#user-card', _$1.isEmpty(userDetail) ? 'Loading...' : m('.u-marginbottom-30.u-text-center-small-only', [ctrl.displayModal() ? m.component(modalBox, {
            displayModal: ctrl.displayModal,
            content: contactModalC
        }) : '', m('.w-row', [m('.w-col.w-col-4', [m('img.thumb.u-marginbottom-30.u-round[width="100"][itemprop="image"][src="' + userVM.displayImage(userDetail) + '"]')]), m('.w-col.w-col-8', [m('.fontsize-small.link-hidden.fontweight-semibold.u-marginbottom-10.lineheight-tight[itemprop="name"]', [m('a.link-hidden[href="' + (_$1.isNull(userDetail.deactivated_at) ? '/users/' + userDetail.id : 'javascript:void(0);') + '"]', { config: m.route,
            onclick: function onclick() {
                if (!_$1.isNull(userDetail.deactivated_at)) {
                    return false;
                } else {
                    m.route('/users/' + userDetail.id, { user_id: userDetail.id });
                    h.analytics.event({ cat: 'project_view', act: 'project_creator_link', lbl: userDetail.id, project: project() });
                }
            } }, userVM.displayName(userDetail))]), !_$1.isNull(userDetail.deactivated_at) ? '' : m('.fontsize-smallest', [h.pluralize(userDetail.total_published_projects, ' created', ' created'), m.trust('&nbsp;&nbsp;|&nbsp;&nbsp;'), h.pluralize(userDetail.total_contributed_projects, ' supported', ' supported')]), !_$1.isNull(userDetail.deactivated_at) ? '' : m('ul.w-hidden-tiny.w-hidden-small.w-list-unstyled.fontsize-smaller.fontweight-semibold.u-margintop-20.u-marginbottom-20', [!_$1.isEmpty(userDetail.facebook_link) ? m('li', [m('a.link-hidden[itemprop="url"][href="' + userDetail.facebook_link + '"][target="_blank"]', { onclick: h.analytics.event({ cat: 'project_view', act: 'project_creator_fb', lbl: userDetail.facebook_link, project: project() }) }, 'Facebook profile')]) : '', !_$1.isEmpty(userDetail.twitter_username) ? m('li', [m('a.link-hidden[itemprop="url"][href="https://twitter.com/' + userDetail.twitter_username + '"][target="_blank"]', { onclick: h.analytics.event({ cat: 'project_view', act: 'project_creator_twitter', lbl: userDetail.twitter_username, project: project() }) }, 'Twitter Profile')]) : '', _$1.map(userDetail.links, function (link) {
            var parsedLink = h.parseUrl(link.link);

            return !_$1.isEmpty(parsedLink.hostname) ? m('li', [m('a.link-hidden[itemprop="url"][href="' + link.link + '"][target="_blank"]', { onclick: h.analytics.event({ cat: 'project_view', act: 'project_creator_otherlinks', lbl: link.link, project: project() }) }, parsedLink.hostname)]) : '';
        })]), !_$1.isEmpty(userDetail) ? [!_$1.isNull(userDetail.deactivated_at) ? '' : m(UserFollowBtn, {
            enabledClass: 'a.w-button.btn.btn-terciary.btn-small..u-marginbottom-10',
            disabledClass: 'a.w-button.btn.btn-terciary.btn-small.u-marginbottom-10',
            follow_id: userDetail.id,
            following: userDetail.following_this_user }), m('a.w-button.btn.btn-terciary.btn-small[href=\'javascript:void(0);\']', { onclick: h.analytics.event({ cat: 'project_view', act: 'project_creator_sendmsg', lbl: userDetail.id, project: project() }, ctrl.sendMessage) }, 'Contact')] : '', args.project().is_admin_role ? m('p', userDetail.email) : ''])])]));
    }
};

var I18nScope$22 = _$1.partial(h.i18nScope, 'projects.project_sidebar');

var projectSidebar = {
    controller: function controller(args) {
        var project = args.project,
            animateProgress = function animateProgress(el, isInitialized) {
            if (!isInitialized) {
                var animation = void 0,
                    progress = 0,
                    pledged = 0,
                    contributors = 0;
                var pledgedIncrement = project().pledged / project().progress,
                    contributorsIncrement = project().total_contributors / project().progress;

                var progressBar = document.getElementById('progressBar'),
                    pledgedEl = document.getElementById('pledged'),
                    contributorsEl = document.getElementById('contributors'),
                    incrementProgress = function incrementProgress() {
                    if (progress <= parseInt(project().progress)) {
                        progressBar.style.width = progress + '%';
                        pledgedEl.innerText = 'US$ ' + h.formatNumber(pledged);
                        contributorsEl.innerText = parseInt(contributors) + ' people';
                        el.innerText = progress + '%';
                        pledged += pledgedIncrement;
                        contributors += contributorsIncrement;
                        progress += 1;
                    } else {
                        clearInterval(animation);
                    }
                },
                    animate = function animate() {
                    animation = setInterval(incrementProgress, 28);
                };

                setTimeout(function () {
                    animate();
                }, 1800);
            }
        };

        return {
            animateProgress: animateProgress,
            displayShareBox: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        var project = args.project,
            elapsed = project().elapsed_time,
            remaining = project().remaining_time,
            displayCardClass = function displayCardClass() {
            var states = {
                waiting_funds: 'card-waiting',
                successful: 'card-success',
                failed: 'card-error',
                draft: 'card-dark',
                in_analysis: 'card-dark',
                approved: 'card-dark'
            };

            return states[project().state] ? 'card u-radius zindex-10 ' + states[project().state] : '';
        },
            displayStatusText = function displayStatusText() {
            var states = {
                approved: I18n$1.t('display_status.approved', I18nScope$22()),
                online: h.existy(project().zone_expires_at) && project().open_for_contributions ? I18n$1.t('display_status.online', I18nScope$22({ date: h.momentify(project().zone_expires_at) })) : '',
                failed: I18n$1.t('display_status.failed', I18nScope$22({ date: h.momentify(project().zone_expires_at), goal: 'US$ ' + h.formatNumber(project().goal, 2, 3) })),
                rejected: I18n$1.t('display_status.rejected', I18nScope$22()),
                in_analysis: I18n$1.t('display_status.in_analysis', I18nScope$22()),
                successful: I18n$1.t('display_status.successful', I18nScope$22({ date: h.momentify(project().zone_expires_at) })),
                waiting_funds: I18n$1.t('display_status.waiting_funds', I18nScope$22()),
                draft: I18n$1.t('display_status.draft', I18nScope$22())
            };

            return states[project().state];
        };

        return m('#project-sidebar.aside', [m('.project-stats', [m('.project-stats-inner', [m('.project-stats-info', [m('.u-marginbottom-20', [m('#pledged.fontsize-largest.fontweight-semibold.u-text-center-small-only', 'US$ ' + (project().pledged ? h.formatNumber(project().pledged) : '0')), m('.fontsize-small.u-text-center-small-only', [I18n$1.t('contributors_call', I18nScope$22()), m('span#contributors.fontweight-semibold', I18n$1.t('contributors_count', I18nScope$22({ count: project().total_contributors }))), !project().expires_at && elapsed ? ' in ' + I18n$1.t('datetime.distance_in_words.x_' + elapsed.unit, { count: elapsed.total }, I18nScope$22()) : ''])]), m('.meter', [m('#progressBar.meter-fill', {
            style: {
                width: project().progress + '%'
            }
        })]), m('.w-row.u-margintop-10', [m('.w-col.w-col-5.w-col-small-6.w-col-tiny-6', [m('.fontsize-small.fontweight-semibold.lineheight-tighter', (project().progress ? parseInt(project().progress) : '0') + '%')]), m('.w-col.w-col-7.w-col-small-6.w-col-tiny-6.w-clearfix', [m('.u-right.fontsize-small.lineheight-tighter', remaining && remaining.total ? [m('span.fontweight-semibold', remaining.total), I18n$1.t('remaining_time.' + remaining.unit, I18nScope$22({ count: remaining.total }))] : '')])])]), m('.w-row', [m.component(projectMode, {
            project: project
        })])]), project().open_for_contributions ? m('.back-project-btn-div', [m('.back-project--btn-row', [m('a#contribute_project_form.btn.btn-large.u-marginbottom-20[href="javascript:void(0);"]', {
            onclick: h.analytics.event({
                cat: 'contribution_create',
                act: 'contribution_button_click',
                project: project()
            }, function () {
                return h.navigateTo('/projects/' + project().project_id + '/contributions/new');
            })

        }, I18n$1.t('submit', I18nScope$22()))]), m('.back-project-btn-row-right', m.component(projectReminder, {
            project: project,
            type: 'link'
        }))]) : '', m('.friend-backed-card.project-page', [!_$1.isUndefined(project()) && project().contributed_by_friends ? m.component(projectFriends, { project: project(), wrapper: 'div' }) : '']), m('div[class="fontsize-smaller u-marginbottom-30 ' + displayCardClass() + '"]', displayStatusText())]), m('.project-share.w-hidden-main.w-hidden-medium', [m.component(addressTag, { project: project }), m.component(categoryTag, { project: project }), m('.u-marginbottom-30.u-text-center-small-only', m('button.btn.btn-inline.btn-medium.btn-terciary', {
            onclick: ctrl.displayShareBox.toggle
        }, 'Share this project')), ctrl.displayShareBox() ? m(projectShareBox, {
            project: project,
            displayShareBox: ctrl.displayShareBox
        }) : '']), m('.user-c', m.component(projectUserCard, {
            userDetails: args.userDetails,
            project: project
        }))]);
    }
};

var projectHeaderTitle = {
    view: function view(ctrl, args) {
        var project = args.project;

        return !_$1.isUndefined(project()) ? m('.w-section.page-header', [m('.w-container', [m('h1.u-text-center.fontsize-larger.fontweight-semibold.project-name[itemprop="name"]', h.selfOrEmpty(project().name || project().project_name)), m('h2.u-text-center.fontsize-base.lineheight-looser[itemprop="author"]', ['by ', project().user ? userVM.displayName(project().user) : project().owner_public_name ? project().owner_public_name : project().owner_name]), args.children])]) : m('div', '');
    }
};

var rewardReceiver = {
    controller: function controller() {
        var toggleDelivery = function toggleDelivery(projectId, contribution) {
            userVM.toggleDelivery(projectId, contribution).then(function () {
                var lastStatus = contribution.reward_sent_at ? 'delivered' : 'undelivered';
                contribution.delivery_status = contribution.delivery_status === 'received' ? lastStatus : 'received'; // so we don't have to reload the page
            });
        };

        return {
            toggleDelivery: toggleDelivery
        };
    },
    view: function view(ctrl, args) {
        var contribution = args.contribution;

        return contributionVM.canBeDelivered(contribution) ? m('.u-text-center.w-col.w-col-1', {
            onclick: function onclick() {
                return ctrl.toggleDelivery(contribution.project_id, contribution);
            }
        }, [m('.fontsize-smallest', m('a.checkbox-big' + (contribution.delivery_status === 'received' ? '.checkbox--selected.fa.fa-check.fa-lg' : ''), '')), m('.fontcolor-secondary.fontsize-smallest.lineheight-looser', 'Receive!')]) : m('');
    }
};

var I18nScope$23 = _$1.partial(h.i18nScope, 'payment.state');
var contributionScope$1 = _$1.partial(h.i18nScope, 'users.contribution_row');

var userContributedBox = {
    controller: function controller(args) {
        var displayModal = h.toggleProp(false, true),
            toggleDelivery = function toggleDelivery(projectId, contribution) {
            userVM.toggleDelivery(projectId, contribution).then(function () {
                var lastStatus = contribution.reward_sent_at ? 'delivered' : 'undelivered';
                contribution.delivery_status = contribution.delivery_status === 'received' ? lastStatus : 'received'; // so we don't have to reload the page
            });
        };

        return {
            toggleAnonymous: userVM.toggleAnonymous,
            displayModal: displayModal,
            contribution: args.contribution,
            toggleDelivery: toggleDelivery
        };
    },
    view: function view(ctrl) {
        var contribution = ctrl.contribution,
            contactModalC = [ownerMessageContent, m.prop({
            id: contribution.project_user_id,
            name: contribution.project_owner_name,
            project_id: contribution.project_id
        })],
            finishedAt = contribution.survey && contribution.survey.finished_at,
            answeredAt = contribution.survey_answered_at;

        return !_$1.isEmpty(contribution) ? m('div', ctrl.displayModal() ? m.component(modalBox, {
            displayModal: ctrl.displayModal,
            content: contactModalC
        }) : '', [m('.card.w-row', [m('.u-marginbottom-20.w-col.w-col-3', [m('.u-marginbottom-10.w-row', [m('.u-marginbottom-10.w-col.w-col-4', m('a.w-inline-block[href=\'/' + contribution.permalink + '\']', m('img.thumb-project.u-radius[alt=\'' + contribution.project_name + '\'][src=\'' + contribution.project_image + '\'][width=\'50\']'))), m('.w-col.w-col-8', m('.fontsize-small.fontweight-semibold.lineheight-tight', m('a.link-hidden[href=\'/' + contribution.permalink + '\']', contribution.project_name)))]), m("a.btn.btn-edit.btn-inline.btn-small.w-button[href='javascript:void(0);']", {
            onclick: function onclick() {
                ctrl.displayModal.toggle();
            }
        }, I18n$1.t('contact_author', contributionScope$1()))]), m('.u-marginbottom-20.w-col.w-col-3', [m('.fontsize-base.fontweight-semibold.lineheight-looser', 'US$ ' + contribution.value), m('.w-embed', m('div', [m('.w-hidden-main.w-hidden-medium.fontsize-smallest.fontweight-semibold', I18n$1.t('status', contributionScope$1())), m('.fontsize-smaller.fontweight-semibold', [m('.lineheight-tighter'), m('span.fa.fa-circle.fontsize-smallest.' + (contribution.state === 'paid' ? 'text-success' : contribution.state === 'pending' ? 'text-waiting' : 'text-error'), m.trust('&nbsp;')), I18n$1.t(contribution.state, I18nScope$23({
            date: h.momentify(contribution[contribution.state + '_at'])
        }))]), m('.fontsize-smallest', contribution.installments > 1 ? contribution.installments + ' x US$ ' + contribution.installment_value + ' ' : '', contribution.payment_method === 'Bankslip' ? 'Bank slip' : 'Credit card'), contributionVM.canShowReceipt(contribution) ? m('a.alt-link.u-margintop-10[href=\'/projects/' + contribution.project_id + '/contributions/' + contribution.contribution_id + '/receipt\'][target=\'__blank\']', I18n$1.t('show_receipt', contributionScope$1())) : '', contribution.gateway_data && contributionVM.canShowSlip(contribution) ? m('a.alt-link.u-margintop-10[href=\'' + contribution.gateway_data.boleto_url + '\'][target=\'__blank\']', I18n$1.t('print_slip', contributionScope$1())) : '', contribution.gateway_data && contributionVM.canGenerateSlip(contribution) ? m('a.alt-link.u-margintop-10[href=\'/projects/' + contribution.project_id + '/contributions/' + contribution.contribution_id + '/second_slip\'][target=\'__blank\']', I18n$1.t('slip_copy', contributionScope$1())) : '', m('.w-checkbox.fontsize-smallest.fontcolor-secondary.u-margintop-10', [m('input.w-checkbox-input[id=\'anonymous\'][name=\'anonymous\'][type=\'checkbox\']' + (contribution.anonymous ? '[checked=\'checked\']' : '') + '[value=\'1\']', {
            onclick: function onclick() {
                return ctrl.toggleAnonymous(contribution.project_id, contribution);
            }
        }), m('label.w-form-label', I18n$1.t('anonymous', contributionScope$1()))])]))]), m('.u-marginbottom-20.w-col.w-col-3', [contribution.reward_id ? [m('.fontsize-smallest.fontweight-semibold', contribution.reward_title), m('p.fontcolor-secondary.fontsize-smallest', m.trust(h.simpleFormat(contribution.reward_description.substring(0, 90) + ' (...)')))] : ' ' + I18n$1.t('no_reward', contributionScope$1()) + ' ', contribution.deliver_at ? m('.fontsize-smallest', [m('span.fontweight-semibold', I18n$1.t('delivery_estimate', contributionScope$1()) + ' '), h.momentify(contribution.deliver_at, 'MMMM/YYYY')]) : '', contributionVM.canBeDelivered(contribution) ? m('.fontsize-smallest', [m('span.fontweight-semibold', I18n$1.t('delivery_status', contributionScope$1())), m.trust('&nbsp;'), h.contributionStatusBadge(contribution)]) : '']), m(rewardReceiver, {
            contribution: contribution
        }), contribution.survey ? [!answeredAt && finishedAt ? m('.u-text-center.w-col.w-col-2', m('.fontsize-smaller.fontweight-semibold.lineheight-tighter', m('a.link-error[href=\'/contributions/' + contribution.contribution_id + '/surveys/' + contribution.survey.survey_id + '\'][target=\'_blank\']', [m("span[xmlns='http://www.w3.org/1999/xhtml']"), m("span.fa.fa-exclamation-circle[xmlns='http://www.w3.org/1999/xhtml']", ''), m.trust('&nbsp;'), 'Questionnaire', m('br'), 'Not answered']))) : answeredAt ? m('.u-text-center.w-col.w-col-2', [m('.fontsize-smaller.fontweight-semibold.lineheight-tighter', m('a.link-hidden-dark[href=\'/contributions/' + contribution.contribution_id + '/surveys/' + contribution.survey.survey_id + '\'][target=\'_blank\']', ['Questionnaire', m('br'), 'Answered'])), m('.fontcolor-secondary.fontsize-smallest', 'in ' + h.momentify(answeredAt, 'DD/MM/YYYY'))]) : m('.u-text-center.w-col.w-col-2', m('a.btn.w-button[href=\'/contributions/' + contribution.contribution_id + '/surveys/' + contribution.survey.survey_id + '\']', I18n$1.t('answer_survey', contributionScope$1())))] : ''])]) : m('div', '');
    }
};

var userContributionDetail = {
    controller: function controller(args) {
        var contribution = args.contribution,
            rewardDetails = args.rewardDetails,
            chosenReward = _$1.findWhere(rewardDetails(), {
            id: contribution.reward_id
        });

        return {
            contribution: contribution,
            chosenReward: chosenReward
        };
    },
    view: function view(ctrl, args) {
        var contribution = args.contribution;

        return m(userContributedBox, { contribution: contribution });
    }
};

var projectHeader = {
    controller: function controller(args) {
        var project = args.project,
            currentUser = h.getUser();

        if (h.isProjectPage() && currentUser && !_$1.isUndefined(project())) {
            contributionVM.getUserProjectContributions(currentUser.user_id, project().project_id, ['paid', 'refunded', 'pending_refund']).then(args.projectContributions);
        }

        return {
            projectContributions: args.projectContributions,
            showContributions: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        var project = args.project,
            rewardDetails = args.rewardDetails;
        var hasContribution = !_$1.isEmpty(ctrl.projectContributions()) ? m('.card.card-terciary.u-radius.u-margintop-20', [m('.fontsize-small.u-text-center', [m('span.fa.fa-thumbs-up'), ' You are a supporter of this project.! ', m('a.alt-link[href=\'javascript:void(0);\']', {
            onclick: ctrl.showContributions.toggle
        }, 'Details')]), ctrl.showContributions() ? m('.u-margintop-20.w-row', _$1.map(ctrl.projectContributions(), function (contribution) {
            return m.component(userContributionDetail, {
                contribution: contribution,
                rewardDetails: rewardDetails
            });
        })) : '']) : '';

        return !_$1.isUndefined(project()) ? m('#project-header', [m('.w-section.section-product.' + project().mode), m(projectHeaderTitle, {
            project: project,
            children: hasContribution
        }), m('.w-section.project-main', [m('.w-container', [m('.w-row.project-main', [m('.w-col.w-col-8.project-highlight', m.component(projectHighlight, {
            project: project
        })), m('.w-col.w-col-4', m.component(projectSidebar, {
            project: project,
            userDetails: args.userDetails
        }))])])])]) : m('');
    }
};

var projectTabs = {
    controller: function controller(args) {
        var isFixed = m.prop(false),
            originalPosition = m.prop(-1);

        var fixOnScroll = function fixOnScroll(el) {
            return function () {
                var viewportOffset = el.getBoundingClientRect();

                if (window.scrollY <= originalPosition()) {
                    originalPosition(-1);
                    isFixed(false);
                    m.redraw();
                }

                if (viewportOffset.top < 0 || window.scrollY > originalPosition() && originalPosition() > 0) {
                    if (!isFixed()) {
                        originalPosition(window.scrollY);
                        isFixed(true);
                        m.redraw();
                    }
                }
            };
        };

        var navDisplay = function navDisplay(el, isInitialized) {
            if (!isInitialized) {
                var fixNavBar = fixOnScroll(el);
                window.addEventListener('scroll', fixNavBar);
            }
        };

        return {
            navDisplay: navDisplay,
            isFixed: isFixed
        };
    },
    view: function view(ctrl, args) {
        var project = args.project,
            rewards = args.rewardDetails;

        var mainClass = !ctrl.isFixed() || project().is_owner_or_admin ? '.w-section.project-nav' : '.w-section.project-nav.project-nav-fixed';

        return m('nav-wrapper', project() ? [m(mainClass, {
            config: ctrl.navDisplay
        }, [m('.w-container', [m('.w-row', [m('.w-col.w-col-8', [!_$1.isEmpty(rewards()) ? m('a[id="rewards-link"][class="w-hidden-main w-hidden-medium dashboard-nav-link mf  ' + (h.hashMatch('#rewards') || h.mobileScreen() && h.hashMatch('') ? 'selected' : '') + '"][href="/' + project().permalink + '#rewards"]', {
            style: 'float: left;',
            onclick: h.analytics.event({
                cat: 'project_view', act: 'project_rewards_view', project: project() })
        }, 'Rewards') : m('a[id="rewards-link"][class="w-hidden-main w-hidden-medium dashboard-nav-link mf ' + (h.hashMatch('#contribution_suggestions') || h.mobileScreen() && h.hashMatch('') ? 'selected' : '') + '"][href="/' + project().permalink + '#contribution_suggestions"]', {
            style: 'float: left;',
            onclick: h.analytics.event({
                cat: 'project_view', act: 'project_contribsuggestions_view', project: project() })
        }, 'Suggested Amounts'), m('a[id="about-link"][class="dashboard-nav-link mf ' + (h.hashMatch('#about') || !h.mobileScreen() && h.hashMatch('') ? 'selected' : '') + '"][href="#about"]', {
            style: 'float: left;',
            onclick: h.analytics.event({
                cat: 'project_view', act: 'project_about_view', project: project() })
        }, 'About'), m('a[id="posts-link"][class="dashboard-nav-link mf ' + (h.hashMatch('#posts') ? 'selected' : '') + '"][href="/' + project().permalink + '#posts"]', {
            style: 'float: left;',
            onclick: h.analytics.event({
                cat: 'project_view', act: 'project_posts_view', project: project() })
        }, ['News ', m('span.badge', project() ? project().posts_count : '')]), m('a[id="contributions-link"][class="w-hidden-small w-hidden-tiny dashboard-nav-link mf ' + (h.hashMatch('#contributions') ? 'selected' : '') + '"][href="#contributions"]', {
            style: 'float: left;',
            onclick: h.analytics.event({
                cat: 'project_view', act: 'project_contributions_view', project: project() })
        }, ['Supporters ', m('span.badge.w-hidden-small.w-hidden-tiny', project() ? project().total_contributors : '-')]), m('a[id="comments-link"][class="dashboard-nav-link mf ' + (h.hashMatch('#comments') ? 'selected' : '') + '"][href="#comments"]', {
            style: 'float: left;',
            onclick: h.analytics.event({
                cat: 'project_view', act: 'project_comments_view', project: project() })
        }, ['Comments ', project() ? m('fb:comments-count[href="https://www.oppostarter.com/' + project().permalink + '"][class="badge project-fb-comment w-hidden-small w-hidden-tiny"][style="display: inline"]', m.trust('&nbsp;')) : '-'])]), project() ? m('.w-col.w-col-4.w-hidden-small.w-hidden-tiny', project().open_for_contributions ? [m('.w-row.project-nav-back-button', [m('.w-col.w-col-6.w-col-medium-8', [m('a.w-button.btn[href="/projects/' + project().project_id + '/contributions/new"]', {
            onclick: h.analytics.event({ cat: 'contribution_create', act: 'contribution_floatingbtn_click', project: project() })
        }, 'Support this project')]), m('.w-col.w-col-6.w-col-medium-4', {
            onclick: h.analytics.event({ cat: 'project_view', act: 'project_floatingreminder_click', project: project() })
        }, [m.component(projectReminder, { project: project, type: 'button', hideTextOnMobile: true })])])] : '') : ''])])]), ctrl.isFixed() && !project().is_owner_or_admin ? m('.w-section.project-nav') : ''] : '');
    }
};

var I18nScope$24 = _$1.partial(h.i18nScope, 'projects.contributions');

var projectRewardCard = {
    controller: function controller(args) {
        var storeKey = 'selectedReward',
            reward = args.reward,
            vm = rewardVM,
            descriptionExtended = m.prop(0),
            selectedDestination = m.prop(''),
            toggleDescriptionExtended = function toggleDescriptionExtended(rewardId) {
            if (descriptionExtended() === rewardId) {
                descriptionExtended(0);
            } else {
                descriptionExtended(rewardId);
            }

            return false;
        };

        var setInput = function setInput(el, isInitialized) {
            return !isInitialized ? el.focus() : false;
        };

        var selectDestination = function selectDestination(destination) {
            selectedDestination(destination);

            var shippingFee = vm.shippingFeeForCurrentReward(selectedDestination) ? Number(vm.shippingFeeForCurrentReward(selectedDestination).value) : 0;
            var rewardMinValue = Number(vm.selectedReward().minimum_value);
            vm.applyMask('' + h.formatNumber(shippingFee + rewardMinValue, 2, 3));
        };

        // @TODO: move submit, fee & value logic to VM
        var submitContribution = function submitContribution() {
            var valueFloat = h.monetaryToFloat(vm.contributionValue);
            var shippingFee = rewardVM.hasShippingOptions(vm.selectedReward()) ? vm.shippingFeeForCurrentReward(selectedDestination) : { value: 0 };

            if (!selectedDestination() && rewardVM.hasShippingOptions(vm.selectedReward())) {
                vm.error('Please select a valid shipping option.');
            } else if (valueFloat < vm.selectedReward().minimum_value + shippingFee.value) {
                vm.error('The amount of support for this reward must be at least US$' + vm.selectedReward().minimum_value + ' + shipping US$' + h.formatNumber(shippingFee.value, 2, 3));
            } else {
                vm.error('');
                var valueUrl = window.encodeURIComponent(String(valueFloat).replace(',', '.'));
                h.navigateTo('/projects/' + projectVM.currentProject().project_id + '/contributions/fallback_create?contribution%5Breward_id%5D=' + vm.selectedReward().id + '&contribution%5Bvalue%5D=' + valueUrl + '&contribution%5Bshipping_fee_id%5D=' + shippingFee.id);
            }

            return false;
        };
        var isRewardOpened = function isRewardOpened() {
            return vm.selectedReward().id === reward.id;
        };
        var isRewardDescriptionExtended = function isRewardDescriptionExtended() {
            return descriptionExtended() === reward.id;
        };
        var isLongDescription = function isLongDescription() {
            return reward.description.length > 110;
        };
        if (h.getStoredObject(storeKey)) {
            var _h$getStoredObject = h.getStoredObject(storeKey),
                value = _h$getStoredObject.value;

            h.removeStoredObject(storeKey);
            vm.selectedReward(reward);
            vm.contributionValue(h.applyMonetaryMask(value + '0.00'));
            submitContribution();
        }

        vm.getStates();

        return {
            setInput: setInput,
            reward: reward,
            submitContribution: submitContribution,
            toggleDescriptionExtended: toggleDescriptionExtended,
            isRewardOpened: isRewardOpened,
            isLongDescription: isLongDescription,
            isRewardDescriptionExtended: isRewardDescriptionExtended,
            selectDestination: selectDestination,
            selectedDestination: selectedDestination,
            error: vm.error,
            applyMask: vm.applyMask,
            selectReward: vm.selectReward,
            locationOptions: vm.locationOptions,
            contributionValue: vm.contributionValue
        };
    },
    view: function view(ctrl, args) {
        // FIXME: MISSING ADJUSTS
        // - add draft admin modifications
        var reward = ctrl.reward,
            project = args.project;
        return m('div[class="' + (h.rewardSouldOut(reward) ? 'card-gone' : 'card-reward ' + (project.open_for_contributions ? 'clickable' : '')) + ' card card-secondary u-marginbottom-10"]', {
            onclick: h.analytics.event({
                cat: 'contribution_create',
                act: 'contribution_reward_click',
                lbl: reward.minimum_value,
                project: project,
                extraData: {
                    reward_id: reward.id,
                    reward_value: reward.minimum_value
                }
            }, ctrl.selectReward(reward)),
            config: ctrl.isRewardOpened(reward) ? h.scrollTo() : Function.prototype
        }, [reward.minimum_value >= 100 ? m('.tag-circle-installment', [m('.fontsize-smallest.fontweight-semibold.lineheight-tightest', '3x'), m('.fontsize-mini.lineheight-tightest', 's / interest')]) : '', m('.u-marginbottom-20', [m('.fontsize-base.fontweight-semibold', 'For US$ ' + h.formatNumber(reward.minimum_value) + ' or more')]), m('.fontsize-smaller.fontweight-semibold', reward.title), m('.fontsize-smaller.reward-description' + (h.rewardSouldOut(reward) ? '' : '.fontcolor-secondary'), {
            class: ctrl.isLongDescription() ? ctrl.isRewardOpened() ? 'opened ' + (ctrl.isRewardDescriptionExtended() ? 'extended' : '') : '' : 'opened extended'
        }, m.trust(h.simpleFormat(h.strip(reward.description)))), ctrl.isLongDescription() && ctrl.isRewardOpened() ? m('a[href="javascript:void(0);"].alt-link.fontsize-smallest.gray.link-more.u-marginbottom-20', {
            onclick: function onclick() {
                return ctrl.toggleDescriptionExtended(reward.id);
            }
        }, [ctrl.isRewardDescriptionExtended() ? 'less ' : 'more ', m('span.fa.fa-angle-down', {
            class: ctrl.isRewardDescriptionExtended() ? 'reversed' : ''
        })]) : '', m('.u-marginbottom-20.w-row', [m('.w-col.w-col-6', !_$1.isEmpty(reward.deliver_at) ? [m('.fontcolor-secondary.fontsize-smallest', m('span', 'Estimated delivery time:')), m('.fontsize-smallest', h.momentify(reward.deliver_at, 'MMM/YYYY'))] : ''), m('.w-col.w-col-6', rewardVM.hasShippingOptions(reward) || reward.shipping_options === 'pickup' ? [m('.fontcolor-secondary.fontsize-smallest', m('span', 'Send:')), m('.fontsize-smallest', I18n$1.t('shipping_options.' + reward.shipping_options, I18nScope$24()))] : '')]), reward.maximum_contributions > 0 ? [h.rewardSouldOut(reward) ? m('.u-margintop-10', [m('span.badge.badge-gone.fontsize-smaller', 'Out of stock')]) : m('.u-margintop-10', [m('span.badge.badge-attention.fontsize-smaller', [m('span.fontweight-bold', 'Limited'), project.open_for_contributions ? ' (' + h.rewardRemaning(reward) + ' in ' + reward.maximum_contributions + ' available)' : ''])])] : '', m('.fontcolor-secondary.fontsize-smallest.fontweight-semibold', h.pluralize(reward.paid_count, ' support', ' supports')), reward.waiting_payment_count > 0 ? m('.maximum_contributions.in_time_to_confirm.clearfix', [m('.pending.fontsize-smallest.fontcolor-secondary', h.pluralize(reward.waiting_payment_count, ' support in confirmation period', ' supports in confirmation period.'))]) : '', project.open_for_contributions && !h.rewardSouldOut(reward) ? [ctrl.isRewardOpened() ? m('.w-form', [m('form.u-margintop-30', {
            onsubmit: ctrl.submitContribution
        }, [m('.divider.u-marginbottom-20'), rewardVM.hasShippingOptions(reward) ? m('div', [m('.fontcolor-secondary.u-marginbottom-10', 'Delivery location'), m('select.positive.text-field.w-select', {
            onchange: m.withAttr('value', ctrl.selectDestination),
            value: ctrl.selectedDestination()
        }, _$1.map(ctrl.locationOptions(reward, ctrl.selectedDestination), function (option) {
            return m('option', { selected: option.value === ctrl.selectedDestination(), value: option.value }, [option.name + ' ', option.value != '' ? '+US$' + h.formatNumber(option.fee, 2, 3) : null]);
        }))]) : '', m('.fontcolor-secondary.u-marginbottom-10', 'Value of support'), m('.w-row.u-marginbottom-20', [m('.w-col.w-col-3.w-col-small-3.w-col-tiny-3', m('.back-reward-input-reward.placeholder', 'US$')), m('.w-col.w-col-9.w-col-small-9.w-col-tiny-9', m('input.w-input.back-reward-input-reward[type="tel"]', {
            config: ctrl.setInput,
            onkeyup: m.withAttr('value', ctrl.applyMask),
            value: ctrl.contributionValue()
        }))]), m('input.w-button.btn.btn-medium[type="submit"][value="Continue >"]'), ctrl.error().length > 0 ? m('.text-error', [m('br'), m('span.fa.fa-exclamation-triangle'), ' ' + ctrl.error()]) : ''])]) : ''] : '']);
    }
};

/**
 * window.c.projectReport component
 * Render project report form
 *
 */
var projectReport = {
    controller: function controller(args) {
        var displayForm = h.toggleProp(false, true),
            sendSuccess = m.prop(false),
            submitDisabled = m.prop(false),
            user = h.getUser() || {},
            email = m.prop(user.email),
            details = m.prop(''),
            reason = m.prop(''),
            reasonError = m.prop(false),
            detailsError = m.prop(false),
            storeReport = 'report',
            project = projectVM.currentProject(),
            hasPendingAction = project && h.callStoredAction(storeReport) == project.project_id,
            checkLogin = function checkLogin() {
            if (!_$1.isEmpty(user)) {
                displayForm.toggle();
            } else {
                h.storeAction(storeReport, project.project_id);
                return h.navigateToDevise();
            }
        },
            validate = function validate() {
            var ok = true;
            detailsError(false);
            reasonError(false);
            if (_$1.isEmpty(reason())) {
                reasonError(true);
                ok = false;
            }
            if (_$1.isEmpty(details())) {
                detailsError(true);
                ok = false;
            }
            return ok;
        },
            sendReport = function sendReport() {
            if (!validate()) {
                return false;
            }
            submitDisabled(true);
            var loaderOpts = models.projectReport.postOptions({
                email: email(),
                details: details(),
                reason: reason(),
                project_id: project.project_id
            });
            var l = postgrest$1.loaderWithToken(loaderOpts);

            l.load().then(sendSuccess(true));
            submitDisabled(false);
            return false;
        },
            checkScroll = function checkScroll(el, isInit) {
            if (!isInit && hasPendingAction) {
                h.animateScrollTo(el);
            }
        };

        if (!_$1.isEmpty(user) && hasPendingAction) {
            displayForm(true);
        }

        return {
            checkScroll: checkScroll,
            checkLogin: checkLogin,
            displayForm: displayForm,
            sendSuccess: sendSuccess,
            submitDisabled: submitDisabled,
            sendReport: sendReport,
            user: user,
            detailsError: detailsError,
            reasonError: reasonError,
            details: details,
            reason: reason
        };
    },
    view: function view(ctrl, args) {
        return m('.card.card-terciary.u-radius', [m('.fontsize-small.u-marginbottom-20', ['This project breached our', m.trust('&nbsp;'), m('a.alt-link[href=\'http://suporte.catarse.me/hc/pt-br/articles/202387638\'][target=\'_blank\']', 'our rules? ')]), ctrl.sendSuccess() ? m('.w-form', m('p', 'Thank you! Your complaint has been received.')) : [m('.a.w-button.btn.btn-medium.btn-terciary.btn-inline[href=\'javascript:void(0);\']', { onclick: ctrl.checkLogin }, 'Report this project'), ctrl.displayForm() ? m('#report-form.u-margintop-30', m('.w-form', m('form', { onsubmit: ctrl.sendReport, config: ctrl.checkScroll }, [m('.fontsize-small.fontweight-semibold.u-marginbottom-10', 'Why are you reporting this project??'), m('select.w-select.text-field.positive[required=\'required\']', { onchange: m.withAttr('value', ctrl.reason) }, [m('option[value=\'\']', 'Select a reason'), m('option[value=\'Intellectual property infringement\']', 'Intellectual property infringement'), m('option[value=\'Slander, libel, defamation or discrimination\']', 'Slander, libel, defamation or discrimination'), m('option[value=\'Scope of Prohibited Project\']', 'Scope of Prohibited Project'), m('option[value=\'Forbidden Rewards\']', 'Forbidden Rewards'), m('option[value=\'Sexual Content\']', 'Sexual Content'), m('option[value=\'SPAM abuse\']', 'SPAM abuse'), m('option[value=\'Others\']', 'Others')]), ctrl.reasonError() ? m(inlineError, { message: 'Select a reason' }) : '', m('textarea.w-input.text-field.positive.u-marginbottom-30', { placeholder: 'Please give more details to help us identify the problem', onchange: m.withAttr('value', ctrl.details) }), m('.w-row', ctrl.detailsError() ? m(inlineError, { message: 'Please report the complaint details' }) : ''), m('input.w-button.btn.btn-medium.btn-inline.btn-dark[type=\'submit\'][value=\'Send Complaint\']', { disabled: ctrl.submitDisabled() })]))) : '']]);
    }
};

var projectRewardList = {
    view: function view(ctrl, args) {
        var project = args.project() || {
            open_for_contributions: false
        };
        return m('#rewards', [m('.reward.u-marginbottom-30', _$1.map(_$1.sortBy(args.rewardDetails(), function (reward) {
            return Number(reward.row_order);
        }), function (reward) {
            return m(projectRewardCard, { reward: reward, project: project });
        })), args.showReport ? m.component(projectReport) : null]);
    }
};

/**
 * window.c.ProjectSuggestedContributions component
 * A Project-show page helper to show suggested amounts of contributions
 *
 * Example of use:
 * view: () => {
 *   ...
 *   m.component(c.ProjectSuggestedContributions, {project: project})
 *   ...
 * }
 */
var projectSuggestedContributions = {
    view: function view(ctrl, args) {
        var project = args.project();

        var suggestionUrl = function suggestionUrl(amount) {
            return '/projects/' + project.project_id + '/contributions/new?value=' + amount * 100;
        },
            suggestedValues = [10, 25, 50, 100];

        return m('#suggestions', _$1.map(suggestedValues, function (amount) {
            return project ? m((project.open_for_contributions ? 'a[href="' + suggestionUrl(amount) + '"].card-reward' : '') + '.card-big.card-secondary.u-marginbottom-20', [m('.fontsize-larger', 'US$' + amount)]) : '';
        }));
    }
};

var projectContributions$1 = {
    controller: function controller(args) {
        var contributionsPerDay = m.prop([]),
            listVM = postgrest$1.paginationVM(models.contributor),
            filterStats = postgrest$1.filtersVM({
            project_id: 'eq'
        }),
            filterVM = postgrest$1.filtersVM({
            project_id: 'eq'
        }),
            groupedCollection = function groupedCollection() {
            var collection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

            var grouped = [[]],
                group = 0;

            _$1.map(collection, function (item, index) {
                if (grouped[group].length >= 3) {
                    group += 1;
                    grouped[group] = [];
                }

                grouped[group].push(item);
            });

            return grouped;
        },
            contributionsStats = m.prop({});

        filterVM.project_id(args.project().project_id);
        filterStats.project_id(args.project().project_id);

        if (!listVM.collection().length) {
            listVM.firstPage(filterVM.parameters());
        }
        // TODO: Abstract table fetch and contruction logic to contributions-vm to avoid insights.js duplicated code.
        var lContributionsPerDay = postgrest$1.loader(models.projectContributionsPerDay.getRowOptions(filterStats.parameters()));
        lContributionsPerDay.load().then(contributionsPerDay);

        var contributionsPerLocationTable = [['State', 'Support', 'US$ supported (% of total)']];
        var buildPerLocationTable = function buildPerLocationTable(contributions) {
            return !_$1.isEmpty(contributions) ? _$1.map(_$1.first(contributions).source, function (contribution) {
                var column = [];

                column.push(contribution.state_acronym || 'Other/other');
                column.push(contribution.total_contributions);
                column.push([contribution.total_contributed, [// Adding row with custom comparator => read project-data-table description
                m('input[type="hidden"][value="' + contribution.total_contributed + '"'), 'US$ ', h.formatNumber(contribution.total_contributed, 2, 3), m('span.w-hidden-small.w-hidden-tiny', ' (' + contribution.total_on_percentage.toFixed(2) + '%)')]]);
                return contributionsPerLocationTable.push(column);
            }) : [];
        };

        var lContributionsPerLocation = postgrest$1.loader(models.projectContributionsPerLocation.getRowOptions(filterStats.parameters()));
        lContributionsPerLocation.load().then(buildPerLocationTable);

        var lContributionsStats = postgrest$1.loader(models.projectContributiorsStat.getRowOptions(filterStats.parameters()));
        lContributionsStats.load().then(function (data) {
            return contributionsStats(_$1.first(data));
        });

        return {
            listVM: listVM,
            filterVM: filterVM,
            groupedCollection: groupedCollection,
            lContributionsStats: lContributionsStats,
            contributionsPerLocationTable: contributionsPerLocationTable,
            lContributionsPerLocation: lContributionsPerLocation,
            contributionsPerDay: contributionsPerDay,
            lContributionsPerDay: lContributionsPerDay,
            contributionsStats: contributionsStats
        };
    },
    view: function view(ctrl, args) {
        var list = ctrl.listVM,
            stats = ctrl.contributionsStats(),
            groupedCollection = ctrl.groupedCollection(list.collection());

        return m('#project_contributions', m('#contributions_top', [m('.section.w-section', m('.w-container', m('.w-row', ctrl.lContributionsStats() ? h.loader() : !_$1.isEmpty(stats) ? [m('.u-marginbottom-20.u-text-center-small-only.w-col.w-col-6', [m('.fontsize-megajumbo', stats.total), m('.fontsize-large', 'people support this project')]), m('.w-col.w-col-6', m('.card.card-terciary.u-radius', m('.w-row', [m('.u-marginbottom-20.w-col.w-sub-col.w-col-6.w-col-small-6', [m('.fontweight-semibold.u-marginbottom-10', 'New Supporters'), m('.fontsize-largest.u-marginbottom-10', Math.floor(stats.new_percent) + '%'), m('.fontsize-smallest', 'supporters who had never supported a project in OppoStarter')]), m('.w-col.w-sub-col.w-col-6.w-col-small-6', [m('.divider.u-marginbottom-20.w-hidden-main.w-hidden-medium.w-hidden-small'), m('.fontweight-semibold.u-marginbottom-10', 'Recurring Supporters'), m('.fontsize-largest.u-marginbottom-10', Math.ceil(stats.returning_percent) + '%'), m('.fontsize-smallest', 'supporters who had already supported a project in OppoStarter')])])))] : ''))), m('.divider.w-section'), m('.section.w-section', m('.w-container', [m('.fontsize-large.fontweight-semibold.u-marginbottom-40.u-text-center', 'Supporters'), m('.project-contributions.w-clearfix', _$1.map(groupedCollection, function (group, idx) {
            return m('.w-row', _$1.map(group, function (contribution) {
                return m('.project-contribution-item.w-col.w-col-4', [
                // here new card
                m('.card.card-backer.u-marginbottom-20.u-radius.u-text-center', [m('a[href="/users/' + contribution.user_id + '"][style="display: block;"]', {
                    onclick: h.analytics.event({
                        cat: 'project_view',
                        act: 'project_backer_link',
                        lbl: contribution.user_id,
                        project: args.project()
                    })
                }, [m('img.thumb.u-marginbottom-10.u-round[src="' + (!_$1.isEmpty(contribution.data.profile_img_thumbnail) ? contribution.data.profile_img_thumbnail : '/assets/catarse_bootstrap/user.jpg') + '"]')]), m('a.fontsize-base.fontweight-semibold.lineheigh-tight.link-hidden-dark[href="/users/' + contribution.user_id + '"]', {
                    onclick: h.analytics.event({
                        cat: 'project_view',
                        act: 'project_backer_link',
                        lbl: contribution.user_id,
                        project: args.project()
                    })
                }, userVM.displayName(contribution.data)), m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-10', h.selfOrEmpty(contribution.data.city) + ', ' + h.selfOrEmpty(contribution.data.state)), m('.fontsize-smaller', [m('span.fontweight-semibold', contribution.data.total_contributed_projects), ' supported  |  ', m('span.fontweight-semibold', contribution.data.total_published_projects), ' criado']), m('.btn-bottom-card.w-row', [m('.w-col.w-col-3.w-col-small-4.w-col-tiny-3'), m('.w-col.w-col-6.w-col-small-4.w-col-tiny-6', [m(UserFollowBtn, { follow_id: contribution.user_id, following: contribution.is_follow })]), m('.w-col.w-col-3.w-col-small-4.w-col-tiny-3')])])
                // new card
                ]);
            }));
        })), m('.w-row.u-marginbottom-40.u-margintop-20', [m('.w-col.w-col-2.w-col-push-5', [!list.isLoading() ? list.isLastPage() ? '' : m('button#load-more.btn.btn-medium.btn-terciary', {
            onclick: list.nextPage
        }, 'Load more') : h.loader()])])]))]), m('.before-footer.bg-gray.section.w-section', m('.w-container', [m('.w-row.u-marginbottom-60', [m('.w-col.w-col-12.u-text-center', {
            style: {
                'min-height': '300px'
            }
        }, [!ctrl.lContributionsPerDay() ? m.component(projectDataChart, {
            collection: ctrl.contributionsPerDay,
            label: 'US$ collected per day',
            dataKey: 'total_amount',
            xAxis: function xAxis(item) {
                return h.momentify(item.paid_at);
            },
            emptyState: 'Unaccounted support'
        }) : h.loader()])]), m('.w-row', m('.w-col.w-col-12.u-text-center', [m('.fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center', 'Where does the support come from?'), !ctrl.lContributionsPerLocation() ? !_$1.isEmpty(_$1.rest(ctrl.contributionsPerLocationTable)) ? m.component(projectDataTable, {
            table: ctrl.contributionsPerLocationTable,
            defaultSortIndex: -2
        }) : '' : h.loader()]))])));
    }
};

var projectAbout = {
    view: function view(ctrl, args) {
        var project = args.project() || {},
            onlineDays = function onlineDays() {
            var diff = moment(project.zone_online_date).diff(moment(project.zone_expires_at)),
                duration = moment.duration(diff);

            return -Math.ceil(duration.asDays());
        };
        var fundingPeriod = function fundingPeriod() {
            return project.is_published && h.existy(project.zone_expires_at) ? m('.funding-period', [m('.fontsize-small.fontweight-semibold.u-text-center-small-only', 'Campaign period'), m('.fontsize-small.u-text-center-small-only', h.momentify(project.zone_online_date) + ' - ' + h.momentify(project.zone_expires_at) + ' (' + onlineDays() + ' days)')]) : '';
        };

        return m('#project-about', [m('.project-about.w-col.w-col-8', {
            config: h.UIHelper()
        }, [m('p.fontsize-base', [m('strong', 'The project')]), m('.fontsize-base[itemprop="about"]', m.trust(h.selfOrEmpty(project.about_html, '...'))), project.budget ? [m('p.fontsize-base.fontweight-semibold', 'Budget'), m('p.fontsize-base', m.trust(project.budget))] : '', m.component(projectReport)]), m('.w-col.w-col-4.w-hidden-small.w-hidden-tiny', !_$1.isEmpty(args.rewardDetails()) ? [m('.fontsize-base.fontweight-semibold.u-marginbottom-30', 'Rewards'), m.component(projectRewardList, {
            project: args.project,
            rewardDetails: args.rewardDetails
        }), fundingPeriod()] : [m('.fontsize-base.fontweight-semibold.u-marginbottom-30', 'Suggestions for support'), m.component(projectSuggestedContributions, { project: args.project }), fundingPeriod()])]);
    }
};

var projectComments = {
    controller: function controller() {
        var loadComments = function loadComments(el, isInitialized) {
            return function (el, isInitialized) {
                if (isInitialized) {
                    return;
                }
                h.fbParse();
            };
        };

        return { loadComments: loadComments };
    },
    view: function view(ctrl, args) {
        var project = args.project();
        return m('.w-row', [m('.w-col.w-col-7', m('.fb-comments[data-href="https://www.oppostarter.com/' + project.permalink + '"][data-num-posts=50][data-width="610"]', { config: ctrl.loadComments() })), m('.w-col.w-col-5', m.component(projectReport))]);
    }
};

var I18nScope$25 = _$1.partial(h.i18nScope, 'projects.posts');

var projectPosts = {
    controller: function controller(args) {
        var listVM = postgrest$1.paginationVM(models.projectPostDetail),
            filterVM = postgrest$1.filtersVM({
            project_id: 'eq',
            id: 'eq'
        });
        var scrollTo = function scrollTo(el, isInit) {
            if (!isInit) {
                h.animateScrollTo(el);
            }
        };

        filterVM.project_id(args.project().project_id);

        if (_$1.isNumber(args.post_id)) {
            filterVM.id(args.post_id);
        }

        if (!listVM.collection().length) {
            listVM.firstPage(filterVM.parameters());
        }

        return {
            listVM: listVM,
            filterVM: filterVM,
            scrollTo: scrollTo
        };
    },
    view: function view(ctrl, args) {
        var list = ctrl.listVM,
            project = args.project() || {};

        return m('#posts.project-posts.w-section', { config: ctrl.scrollTo }, [m('.w-container.u-margintop-20', [project.is_owner_or_admin ? [!list.isLoading() ? _$1.isEmpty(list.collection()) ? m('.w-hidden-small.w-hidden-tiny', [m('.fontsize-base.u-marginbottom-30.u-margintop-20', 'All news published in OppoStarter is sent directly to the email of those who have already supported your project and is also available for viewing on the site. You can choose to leave it public, or visible only to your supporters here on this tab.')]) : '' : '', m('.w-row.u-marginbottom-20', [m('.w-col.w-col-4.w-col-push-4', [m('a.btn.btn-edit.btn-small[href=\'/en/projects/' + project.project_id + '/posts\']', 'Writing news')])])] : '', _$1.map(list.collection(), function (post) {
            return m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', [m('.post', [m('.u-marginbottom-60 .w-clearfix', [m('.fontsize-small.fontcolor-secondary.u-text-center', h.momentify(post.created_at)), m('p.fontweight-semibold.fontsize-larger.u-text-center.u-marginbottom-30', [m('a.link-hidden[href="/projects/' + post.project_id + '/posts/' + post.id + '#posts"]', post.title)]), !_$1.isEmpty(post.comment_html) ? m('.fontsize-base', m.trust(post.comment_html)) : m('.fontsize-base', 'Exclusive post for supporters' + (post.reward_id ? ' of the reward of US$' + post.minimum_value : '') + '.')]), m('.divider.u-marginbottom-60')])]), m('.w-col.w-col-1')]);
        }), m('.w-row', [!_$1.isUndefined(args.post_id) ? '' : !list.isLoading() ? list.collection().length === 0 && args.projectContributions().length === 0 ? !project.is_owner_or_admin ? m('.w-col.w-col-10.w-col-push-1', m('p.fontsize-base', m.trust(I18n$1.t('empty', I18nScope$25({
            project_user_name: args.userDetails().name,
            project_id: project.project_id
        }))))) : '' : m('.w-col.w-col-2.w-col-push-5', list.isLastPage() ? list.collection().length === 0 ? 'No news.' : '' : m('button#load-more.btn.btn-medium.btn-terciary', {
            onclick: list.nextPage
        }, 'Load more')) : m('.w-col.w-col-2.w-col-push-5', h.loader())])])]);
    }
};

var projectMain = {
    controller: function controller(args) {
        var hash = m.prop(window.location.hash),
            displayTabContent = function displayTabContent(project) {
            var c_opts = {
                project: project,
                post_id: args.post_id
            },
                tabs = {
                '#rewards': m('.w-col.w-col-12', m.component(projectRewardList, _$1.extend({}, {
                    rewardDetails: args.rewardDetails,
                    showReport: true
                }, c_opts))),
                '#contribution_suggestions': m.component(projectSuggestedContributions, c_opts),
                '#contributions': m.component(projectContributions$1, c_opts),
                '#about': m.component(projectAbout, _$1.extend({}, {
                    rewardDetails: args.rewardDetails
                }, c_opts)),
                '#comments': m.component(projectComments, c_opts),
                '#posts': m.component(projectPosts, _$1.extend({}, {
                    projectContributions: args.projectContributions,
                    userDetails: args.userDetails
                }, c_opts))
            };

            if (_$1.isNumber(args.post_id) && !window.location.hash) {
                window.location.hash = 'posts';
            }

            hash(window.location.hash);

            if (_$1.isEmpty(hash()) || hash() === '#_=_' || hash() === '#preview') {
                return tabs[h.mobileScreen() ? '#rewards' : '#about'];
            }

            return tabs[hash()];
        };

        h.redrawHashChange();

        return {
            displayTabContent: displayTabContent,
            hash: hash
        };
    },
    view: function view(ctrl, args) {
        return m('section.section[itemtype="http://schema.org/CreativeWork"]', [m('' + (ctrl.hash() !== '#contributions' ? '.w-container' : '.about-tab-content'), [m('.w-row', args.project() ? ctrl.displayTabContent(args.project) : h.loader())])]);
    }
};

var projectsShow = {
    controller: function controller(args) {
        var project_id = args.project_id,
            project_user_id = args.project_user_id;


        if (project_id && !_$1.isNaN(Number(project_id))) {
            projectVM.init(project_id, project_user_id);
        } else {
            projectVM.getCurrentProject();
        }
        try {
            h.analytics.windowScroll({ cat: 'project_view', act: 'project_page_scroll', project: project_id ? { id: project_id, user_id: project_user_id } : null });
            h.analytics.event({ cat: 'project_view', act: 'project_page_view', project: project_id ? { id: project_id, user_id: project_user_id } : null }).call();
        } catch (e) {
            console.error(e);
        }

        return projectVM;
    },
    view: function view(ctrl, args) {
        var project = ctrl.currentProject;

        return m('.project-show', {
            config: ctrl.setProjectPageTitle()
        }, project() ? [m.component(projectHeader, {
            project: project,
            rewardDetails: ctrl.rewardDetails,
            userDetails: ctrl.userDetails,
            projectContributions: ctrl.projectContributions
        }), m.component(projectTabs, {
            project: project,
            rewardDetails: ctrl.rewardDetails
        }), m.component(projectMain, {
            project: project,
            post_id: args.post_id,
            rewardDetails: ctrl.rewardDetails,
            userDetails: ctrl.userDetails,
            projectContributions: ctrl.projectContributions
        }), project() && project().is_owner_or_admin ? m.component(projectDashboardMenu, {
            project: project
        }) : ''] : h.loader());
    }
};

var I18nScope$27 = _$1.partial(h.i18nScope, 'projects.contributions.edit.errors');
var I18nIntScope = _$1.partial(h.i18nScope, 'projects.contributions.edit_international.errors');

var paymentVM = function paymentVM() {
    var pagarme = m.prop({}),
        defaultCountryID = 36,
        submissionError = m.prop(false),
        isLoading = m.prop(false);

    var setCsrfToken = function setCsrfToken(xhr) {
        if (h.authenticityToken()) {
            xhr.setRequestHeader('X-CSRF-Token', h.authenticityToken());
        }
    };

    var fields = {
        completeName: m.prop(''),
        anonymous: h.toggleProp(false, true),
        address: m.prop({ country_id: defaultCountryID }),
        ownerDocument: m.prop(''),
        errors: m.prop([])
    };

    var creditCardFields = {
        name: m.prop(''),
        number: m.prop(''),
        expMonth: m.prop(''),
        expYear: m.prop(''),
        save: m.prop(false),
        cvv: m.prop(''),
        errors: m.prop([]),
        cardOwnerDocument: m.prop('')
    };

    var populateForm = function populateForm(fetchedData) {
        var data = _$1.first(fetchedData) || { address: {} };

        if (!_$1.isEmpty(data.address)) {
            fields.address(_$1.omit(data.address, 'id'));
        }

        fields.completeName(data.name);
        fields.ownerDocument(data.owner_document);

        creditCardFields.cardOwnerDocument(data.owner_document);
    };

    var expMonthOptions = function expMonthOptions() {
        return [[null, 'Month'], [1, '01 - January'], [2, '02 - February'], [3, '03 - March'], [4, '04 - April'], [5, '05 - May'], [6, '06 - June'], [7, '07 - July'], [8, '08 - August'], [9, '09 - September'], [10, '10 - October'], [11, '11 - November'], [12, '12 - December']];
    };

    var expYearOptions = function expYearOptions() {
        var currentYear = moment().year();
        var yearsOptions = ['Year'];
        for (var i = currentYear; i <= currentYear + 25; i++) {
            yearsOptions.push(i);
        }
        return yearsOptions;
    };

    var isInternational = function isInternational() {
        return parseInt(fields.address().country_id) !== defaultCountryID;
    };

    var scope = function scope(data) {
        return isInternational() ? I18nIntScope(data) : I18nScope$27(data);
    };

    var getLocale = function getLocale() {
        return isInternational() ? { locale: 'en' } : { locale: 'en' };
    };

    var faq = function faq() {
        var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'aon';
        return I18n$1.translations[I18n$1.currentLocale()].projects.faq[mode];
    },
        currentUser = h.getUser() || {};

    var checkEmptyFields = function checkEmptyFields(checkedFields) {
        return _$1.map(checkedFields, function (field) {
            var val = fields[field]();

            if (!h.existy(val) || _$1.isEmpty(String(val).trim())) {
                fields.errors().push({ field: field, message: I18n$1.t('validation.empty_field', scope()) });
            }
        });
    };

    var checkEmail = function checkEmail() {
        var isValid = h.validateEmail(fields.email());

        if (!isValid) {
            fields.errors().push({ field: 'email', message: I18n$1.t('validation.email', scope()) });
        }
    };

    var checkDocument = function checkDocument() {
        var document = fields.ownerDocument() || '',
            striped = String(document).replace(/[\.|\-|\/]*/g, '');
        var isValid = false,
            errorMessage = '';

        if (document.length > 14) {
            isValid = h.validateCnpj(document);
            errorMessage = 'CNPJ invalid.';
        } else {
            isValid = h.validateCpf(striped);
            errorMessage = 'CPF invalid.';
        }

        if (!isValid) {
            fields.errors().push({ field: 'ownerDocument', message: errorMessage });
        }
    };

    var validate = function validate() {
        fields.errors([]);
        if (!fields.validate()) {
            return false;
        }

        checkEmptyFields(['completeName']);

        if (!isInternational()) {
            checkEmptyFields(['ownerDocument']);
            checkDocument();
        }

        return _$1.isEmpty(fields.errors());
    };

    var getSlipPaymentDate = function getSlipPaymentDate(contribution_id) {
        var paymentDate = m.prop();

        m.request({
            method: 'GET',
            config: setCsrfToken,
            url: '/payment/pagarme/' + contribution_id + '/slip_data'
        }).then(paymentDate);

        return paymentDate;
    };

    var sendSlipPayment = function sendSlipPayment(contribution_id, project_id, error, loading, completed) {
        m.request({
            method: 'post',
            url: '/payment/pagarme/' + contribution_id + '/pay_slip.json',
            dataType: 'json'
        }).then(function (data) {
            if (data.payment_status == 'failed') {
                error(I18n$1.t('submission.slip_submission', scope()));
            } else if (data.boleto_url) {
                completed(true);
                window.location.href = '/projects/' + project_id + '/contributions/' + contribution_id;
            }
            loading(false);
            m.redraw();
        }).catch(function (err) {
            error(I18n$1.t('submission.slip_submission', scope()));
            loading(false);
            completed(false);
            m.redraw();
        });
    };

    var paySlip = function paySlip(contribution_id, project_id, error, loading, completed) {
        error(false);
        m.redraw();
        if (validate()) {
            updateContributionData(contribution_id, project_id).then(function () {
                sendSlipPayment(contribution_id, project_id, error, loading, completed);
            }).catch(function () {
                loading(false);
                error(I18n$1.t('submission.slip_validation', scope()));
                m.redraw();
            });
        } else {
            loading(false);
            error(I18n$1.t('submission.slip_validation', scope()));
            m.redraw();
        }
    };

    var savedCreditCards = m.prop([]);

    var getSavedCreditCards = function getSavedCreditCards(user_id) {
        var otherSample = {
            id: -1
        };

        return m.request({
            method: 'GET',
            config: setCsrfToken,
            url: '/users/' + user_id + '/credit_cards'
        }).then(function (creditCards) {
            if (_$1.isArray(creditCards)) {
                creditCards.push(otherSample);
            } else {
                creditCards = [];
            }

            return savedCreditCards(creditCards);
        });
    };

    var similityExecute = function similityExecute(contribution_id) {
        if (window.SimilityScript && h.getSimilityCustomer()) {
            var user = h.getUser() || {};
            var similityContext = {
                customer_id: h.getSimilityCustomer(),
                session_id: contribution_id,
                user_id: user.user_id
            };
            var ss = new window.SimilityScript(similityContext);
            ss.execute();
        }
    };

    var requestPayment = function requestPayment(data, contribution_id) {
        similityExecute(contribution_id);
        return m.request({
            method: 'POST',
            url: '/payment/pagarme/' + contribution_id + '/pay_credit_card',
            data: data,
            config: setCsrfToken
        });
    };

    var payWithSavedCard = function payWithSavedCard(creditCard, installment, contribution_id) {
        var data = {
            card_id: creditCard.card_key,
            payment_card_installments: installment
        };
        return requestPayment(data, contribution_id);
    };

    var setNewCreditCard = function setNewCreditCard() {
        var creditCard = new window.PagarMe.creditCard();
        creditCard.cardHolderName = creditCardFields.name();
        creditCard.cardExpirationMonth = creditCardFields.expMonth();
        creditCard.cardExpirationYear = creditCardFields.expYear();
        creditCard.cardNumber = creditCardFields.number();
        creditCard.cardCVV = creditCardFields.cvv();
        return creditCard;
    };

    var payWithNewCard = function payWithNewCard(contribution_id, installment) {
        var deferred = m.deferred();
        m.request({
            method: 'GET',
            url: '/payment/pagarme/' + contribution_id + '/get_encryption_key',
            config: setCsrfToken
        }).then(function (data) {
            window.PagarMe.encryption_key = data.key;
            var card = setNewCreditCard();
            var errors = card.fieldErrors();
            if (_$1.keys(errors).length > 0) {
                deferred.reject({ message: I18n$1.t('submission.card_invalid', scope()) });
            } else {
                card.generateHash(function (cardHash) {
                    var data = {
                        card_hash: cardHash,
                        save_card: creditCardFields.save().toString(),
                        payment_card_installments: installment
                    };

                    requestPayment(data, contribution_id).then(deferred.resolve).catch(deferred.reject);
                });
            }
        }).catch(function (error) {
            if (!_$1.isEmpty(error.message)) {
                deferred.reject(error);
            } else {
                deferred.reject({ message: I18n$1.t('submission.encryption_error', scope()) });
            }
        });

        return deferred.promise;
    };

    var updateContributionData = function updateContributionData(contribution_id, project_id) {
        var contributionData = {
            anonymous: fields.anonymous(),
            payer_document: fields.ownerDocument(),
            payer_name: fields.completeName(),
            address_attributes: fields.address(),
            card_owner_document: creditCardFields.cardOwnerDocument()
        };

        return m.request({
            method: 'PUT',
            url: '/projects/' + project_id + '/contributions/' + contribution_id + '.json',
            data: { contribution: contributionData },
            config: setCsrfToken
        });
    };

    var creditCardPaymentSuccess = function creditCardPaymentSuccess(deferred, project_id, contribution_id) {
        return function (data) {
            if (data.payment_status === 'failed') {
                var errorMsg = data.message || I18n$1.t('submission.payment_failed', scope());

                isLoading(false);
                submissionError(I18n$1.t('submission.error', scope({ message: errorMsg })));
                m.redraw();
                deferred.reject();
            } else {
                window.location.href = '/projects/' + project_id + '/contributions/' + contribution_id;
            }
        };
    };

    var creditCardPaymentFail = function creditCardPaymentFail(deferred) {
        return function (data) {
            var errorMsg = data.message || I18n$1.t('submission.payment_failed', scope());
            isLoading(false);
            submissionError(I18n$1.t('submission.error', scope({ message: errorMsg })));
            m.redraw();
            deferred.reject();
        };
    };

    var checkAndPayCreditCard = function checkAndPayCreditCard(deferred, selectedCreditCard, contribution_id, project_id, selectedInstallment) {
        return function () {
            if (selectedCreditCard().id && selectedCreditCard().id !== -1) {
                return payWithSavedCard(selectedCreditCard(), selectedInstallment(), contribution_id).then(creditCardPaymentSuccess(deferred, project_id, contribution_id)).catch(creditCardPaymentFail(deferred));
            }
            return payWithNewCard(contribution_id, selectedInstallment).then(creditCardPaymentSuccess(deferred, project_id, contribution_id)).catch(creditCardPaymentFail(deferred));
        };
    };

    var sendPayment = function sendPayment(selectedCreditCard, selectedInstallment, contribution_id, project_id) {
        var deferred = m.deferred();
        if (validate()) {
            isLoading(true);
            submissionError(false);
            m.redraw();
            updateContributionData(contribution_id, project_id).then(checkAndPayCreditCard(deferred, selectedCreditCard, contribution_id, project_id, selectedInstallment)).catch(function () {
                isLoading(false);
                deferred.reject();
            });
        } else {
            isLoading(false);
            deferred.reject();
        }
        return deferred.promise;
    };

    var resetFieldError = function resetFieldError(fieldName) {
        return function () {
            var errors = fields.errors(),
                errorField = _$1.findWhere(fields.errors(), { field: fieldName }),
                newErrors = _$1.compose(fields.errors, _$1.without);

            return newErrors(fields.errors(), errorField);
        };
    };

    var resetCreditCardFieldError = function resetCreditCardFieldError(fieldName) {
        return function () {
            var errors = fields.errors(),
                errorField = _$1.findWhere(creditCardFields.errors(), { field: fieldName }),
                newErrors = _$1.compose(creditCardFields.errors, _$1.without);

            return newErrors(creditCardFields.errors(), errorField);
        };
    };

    var installments = m.prop([{ value: 10, number: 1 }]);

    var getInstallments = function getInstallments(contribution_id) {
        return m.request({
            method: 'GET',
            url: '/payment/pagarme/' + contribution_id + '/get_installment',
            config: h.setCsrfToken
        }).then(installments);
    };

    var creditCardMask = _$1.partial(h.mask, '9999 9999 9999 9999');

    var applyCreditCardMask = _$1.compose(creditCardFields.number, creditCardMask);

    var fetchUser = function fetchUser() {
        return userVM.fetchUser(currentUser.user_id, false).then(populateForm);
    };

    return {
        fetchUser: fetchUser,
        fields: fields,
        validate: validate,
        isInternational: isInternational,
        resetFieldError: resetFieldError,
        getSlipPaymentDate: getSlipPaymentDate,
        paySlip: paySlip,
        installments: installments,
        getInstallments: getInstallments,
        savedCreditCards: savedCreditCards,
        getSavedCreditCards: getSavedCreditCards,
        applyCreditCardMask: applyCreditCardMask,
        creditCardFields: creditCardFields,
        resetCreditCardFieldError: resetCreditCardFieldError,
        expMonthOptions: expMonthOptions,
        expYearOptions: expYearOptions,
        sendPayment: sendPayment,
        submissionError: submissionError,
        isLoading: isLoading,
        pagarme: pagarme,
        locale: getLocale,
        faq: faq,
        similityExecute: similityExecute
    };
};

var I18nScope$28 = _$1.partial(h.i18nScope, 'projects.contributions');

var rewardSelectCard = {
    controller: function controller(args) {
        var setInput = function setInput(el, isInitialized) {
            return !isInitialized ? el.focus() : null;
        };
        var isSelected = function isSelected(currentReward) {
            return _$1.isEmpty(rewardVM.rewards()) || currentReward.id === rewardVM.selectedReward().id;
        };
        var selectedDestination = m.prop('');
        var queryRewardId = h.getParams('reward_id');
        var queryRewardValue = h.getParams('value');
        if (queryRewardValue) {
            rewardVM.setValue(h.formatNumber(Number(queryRewardValue / 100), 2, 3));
        }

        var submitContribution = function submitContribution(event) {
            var valueFloat = h.monetaryToFloat(rewardVM.contributionValue);
            var shippingFee = rewardVM.hasShippingOptions(rewardVM.selectedReward()) ? rewardVM.shippingFeeForCurrentReward(selectedDestination) : {
                value: 0
            };

            if (!selectedDestination() && rewardVM.hasShippingOptions(rewardVM.selectedReward())) {
                rewardVM.error('Please select a valid shipping option.');
            } else if (valueFloat < rewardVM.selectedReward().minimum_value + shippingFee.value) {
                rewardVM.error('The amount of support for this reward must be at least US$' + rewardVM.selectedReward().minimum_value + ' + shipping US$' + h.formatNumber(shippingFee.value, 2, 3));
            } else {
                rewardVM.error('');
                var valueUrl = window.encodeURIComponent(String(valueFloat).replace(',', '.'));
                h.navigateTo('/projects/' + projectVM.currentProject().project_id + '/contributions/fallback_create?contribution%5Breward_id%5D=' + rewardVM.selectedReward().id + '&contribution%5Bvalue%5D=' + valueUrl + '&contribution%5Bshipping_fee_id%5D=' + shippingFee.id);
            }

            event.stopPropagation();

            return false;
        };

        var selectDestination = function selectDestination(destination) {
            selectedDestination(destination);
            var shippingFee = rewardVM.shippingFeeForCurrentReward(selectedDestination) ? Number(rewardVM.shippingFeeForCurrentReward(selectedDestination).value) : 0;
            var rewardMinValue = Number(rewardVM.selectedReward().minimum_value);
            rewardVM.applyMask('' + h.formatNumber(shippingFee + rewardMinValue, 2, 3));
        };

        var normalReward = function normalReward(reward) {
            if (_$1.isEmpty(reward)) {
                return {
                    id: null,
                    description: 'Thank you. I just want to help the project..',
                    minimum_value: 10,
                    shipping_options: null,
                    row_order: -999999
                };
            }

            return reward;
        };

        if (args.reward.id === Number(queryRewardId)) {
            rewardVM.selectReward(args.reward).call();
        }

        rewardVM.getStates();

        return {
            normalReward: normalReward,
            isSelected: isSelected,
            setInput: setInput,
            submitContribution: submitContribution,
            selectDestination: selectDestination,
            selectedDestination: selectedDestination,
            locationOptions: rewardVM.locationOptions,
            states: rewardVM.getStates(),
            selectReward: rewardVM.selectReward,
            error: rewardVM.error,
            applyMask: rewardVM.applyMask,
            contributionValue: rewardVM.contributionValue
        };
    },
    view: function view(ctrl, args) {
        var reward = ctrl.normalReward(args.reward);

        return h.rewardSouldOut(reward) ? m('') : m('span.radio.w-radio.w-clearfix.back-reward-radio-reward', {
            class: ctrl.isSelected(reward) ? 'selected' : '',
            onclick: ctrl.selectReward(reward)
        }, m('label[for="contribution_reward_id_' + reward.id + '"]', [m('input.radio_buttons.optional.w-input.text-field.w-radio-input.back-reward-radio-button[id="contribution_reward_id_' + reward.id + '"][type="radio"][value="' + reward.id + '"]', {
            checked: ctrl.isSelected(reward),
            name: 'contribution[reward_id]'
        }), m('label.w-form-label.fontsize-base.fontweight-semibold.u-marginbottom-10[for="contribution_reward_' + reward.id + '"]', 'US$ ' + h.formatNumber(reward.minimum_value) + ' or more'), !ctrl.isSelected(reward) ? '' : m('.w-row.back-reward-money', [rewardVM.hasShippingOptions(reward) ? m('.w-sub-col.w-col.w-col-4', [m('.fontcolor-secondary.u-marginbottom-10', 'Delivery location'), m('select.positive.text-field.w-select', {
            onchange: m.withAttr('value', ctrl.selectDestination)
        }, _$1.map(ctrl.locationOptions(reward, ctrl.selectedDestination), function (option) {
            return m('option', { value: option.value }, [option.name + ' ', option.value != '' ? '+US$' + h.formatNumber(option.fee, 2, 3) : null]);
        }))]) : '', m('.w-sub-col.w-col.w-clearfix', {
            class: rewardVM.hasShippingOptions(reward) ? 'w-col-4' : 'w-col-8'
        }, [m('.fontcolor-secondary.u-marginbottom-10', 'Value of support'), m('.w-row.u-marginbottom-20', [m('.w-col.w-col-3.w-col-small-3.w-col-tiny-3', m('.back-reward-input-reward.medium.placeholder', 'US$')), m('.w-col.w-col-9.w-col-small-9.w-col-tiny-9', m('input.back-reward-input-reward.medium.w-input', {
            autocomplete: 'off',
            min: reward.minimum_value,
            placeholder: reward.minimum_value,
            type: 'tel',
            config: ctrl.setInput,
            onkeyup: m.withAttr('value', ctrl.applyMask),
            value: ctrl.contributionValue()
        }))]), m('.fontsize-smaller.text-error.u-marginbottom-20.w-hidden', [m('span.fa.fa-exclamation-triangle'), ' Support amount is incorrect'])]), m('.submit-form.w-col.w-col-4', m('button.btn.btn-medium.u-margintop-30', {
            onclick: ctrl.submitContribution
        }, ['Continue  ', m('span.fa.fa-chevron-right')]))]), ctrl.error().length > 0 && ctrl.isSelected(reward) ? m('.text-error', [m('br'), m('span.fa.fa-exclamation-triangle'), ' ' + ctrl.error()]) : '', m('.fontsize-smaller.fontweight-semibold', reward.title), m('.back-reward-reward-description', [m('.fontsize-smaller.u-marginbottom-10.fontcolor-secondary', reward.description), m('.u-marginbottom-20.w-row', [!reward.deliver_at ? '' : m('.w-col.w-col-6', [m('.fontsize-smallest.fontcolor-secondary', 'Estimated delivery time:'), m('.fontsize-smallest', h.momentify(reward.deliver_at, 'MMM/YYYY'))]), !rewardVM.hasShippingOptions(reward) && reward.shipping_options !== 'pickup' ? '' : m('.w-col.w-col-6', [m('.fontsize-smallest.fontcolor-secondary', 'Send:'), m('.fontsize-smallest', I18n$1.t('shipping_options.' + reward.shipping_options, I18nScope$28()))])])])]));
    }
};

var I18nScope$29 = _.partial(h.i18nScope, 'projects.faq');

var faqBox = {
    controller: function controller(args) {
        var mode = args.mode,
            questions = args.faq.questions,
            selectedQuestion = m.prop(-1),
            user = m.prop({ name: '...' }),
            tKey = function tKey() {
            return !args.vm.isInternational() ? '' + mode : 'international.' + mode;
        };

        var selectQuestion = function selectQuestion(idx) {
            return function () {
                return idx === selectedQuestion() ? selectedQuestion(-1) : selectedQuestion(idx);
            };
        };

        // This function rewrites questions from translate with proper scope for links
        var scopedQuestions = function scopedQuestions() {
            var updatedQuestions = {};
            _.each(questions, function (quest, idx) {
                _.extend(updatedQuestions, defineProperty({}, idx + 1, {
                    question: I18n$1.t(tKey() + '.questions.' + idx + '.question', I18nScope$29()),
                    answer: I18n$1.t(tKey() + '.questions.' + idx + '.answer', I18nScope$29({ userLink: '/users/' + user().id,
                        userName: user().public_name || user().name
                    }))
                }));
            });
            return updatedQuestions;
        };

        userVM.fetchUser(args.projectUserId, false).then(function (data) {
            return user(_.first(data));
        });

        return {
            scopedQuestions: scopedQuestions,
            selectQuestion: selectQuestion,
            selectedQuestion: selectedQuestion,
            tKey: tKey
        };
    },
    view: function view(ctrl, args) {
        return m('.faq-box.w-hidden-small.w-hidden-tiny.card.u-radius', [m('.w-row.u-marginbottom-30', [m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2', m('img[width=\'30\']', {
            src: args.mode === 'aon' ? '/assets/aon-badge.png' : '/assets/flex-badge.png'
        })), m('.w-col.w-col-10.w-col-small-10.w-col-tiny-10', m('.w-inline-block.fontsize-smallest.w-inline-block.fontcolor-secondary', I18n$1.t(ctrl.tKey() + '.description', I18nScope$29())))]), m('.u-marginbottom-20.fontsize-small.fontweight-semibold', I18n$1.t('' + (args.vm.isInternational() ? 'international_title' : 'title'), I18nScope$29())), m('ul.w-list-unstyled', _.map(ctrl.scopedQuestions(), function (question, idx) {
            return [m('li#faq_question_' + idx + '.fontsize-smaller.alt-link.list-question', {
                onclick: ctrl.selectQuestion(idx)
            }, m('span', [m('span.faq-box-arrow'), ' ' + question.question])), m('li.list-answer', {
                class: ctrl.selectedQuestion() === idx ? 'list-answer-opened' : ''
            }, m('p#faq_answer_' + idx + '.fontsize-smaller', m.trust(question.answer)))];
        }))]);
    }
};

var I18nScope$26 = _$1.partial(h.i18nScope, 'projects.contributions');

var projectsContribution = {
    controller: function controller() {
        var rewards = function rewards() {
            return _$1.union([{
                id: null,
                description: 'Thank you. I just want to help the project..',
                minimum_value: 10,
                shipping_options: null,
                row_order: -9999999
            }], projectVM.rewardDetails());
        };

        var submitContribution = function submitContribution() {
            var valueFloat = h.monetaryToFloat(rewardVM.contributionValue);

            if (valueFloat < rewardVM.selectedReward().minimum_value) {
                rewardVM.error('The amount of support for this reward must be at least US$' + rewardVM.selectedReward().minimum_value);
            } else {
                rewardVM.error('');
                h.navigateTo('/projects/' + projectVM.currentProject().project_id + '/contributions/fallback_create?contribution%5Breward_id%5D=' + rewardVM.selectedReward().id + '&contribution%5Bvalue%5D=' + valueFloat);
            }

            return false;
        };

        projectVM.getCurrentProject();

        return {
            project: projectVM.currentProject,
            paymentVM: paymentVM(),
            submitContribution: submitContribution,
            sortedRewards: function sortedRewards() {
                return _$1.sortBy(rewards(), function (reward) {
                    return Number(reward.row_order);
                });
            }
        };
    },
    view: function view(ctrl, args) {
        var project = ctrl.project;

        return m('#contribution-new', !_$1.isEmpty(project()) ? [m('.w-section.section-product.' + project().mode), m(projectHeaderTitle, {
            project: project
        }), m('.w-section.header-cont-new', m('.w-container', m('.fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only', 'Choose the reward and then the value of the support'))), m('.section', m('.w-container', m('.w-row', [m('.w-col.w-col-8', m('.w-form.back-reward-form', m('form.simple_form.new_contribution[accept-charset="UTF-8"][action="/en/projects/' + project().id + '/contributions/fallback_create"][id="contribution_form"][method="get"][novalidate="novalidate"]', { onsubmit: ctrl.submitContribution }, [m('input[name="utf8"][type="hidden"][value="✓"]'), _$1.map(ctrl.sortedRewards(), function (reward) {
            return m(rewardSelectCard, { reward: reward });
        })]))), m('.w-col.w-col-4', [m('.card.u-marginbottom-20.u-radius.w-hidden-small.w-hidden-tiny', [m('.fontsize-small.fontweight-semibold', I18n$1.t('contribution_warning.title', I18nScope$26())), m('.fontsize-smaller.u-marginbottom-10', I18n$1.t('contribution_warning.subtitle', I18nScope$26())), m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-10', I18n$1.t('contribution_warning.info', I18nScope$26())), m('a.alt-link.fontsize-smallest[target="__blank"][href="' + I18n$1.t('contribution_warning.link', I18nScope$26()) + '"]', I18n$1.t('contribution_warning.link_label', I18nScope$26()))]), m.component(faqBox, {
            mode: project().mode,
            vm: ctrl.paymentVM,
            faq: ctrl.paymentVM.faq(project().mode),
            projectUserId: args.project_user_id
        })])])))] : h.loader());
    }
};

//       weak
var userHeader = {
    view: function view(ctrl, args) {
        var user = args.user,
            hideDetails = args.hideDetails,
            profileImage = userVM.displayImage(user),
            coverImage = userVM.displayCover(user);

        return !user.id ? m('') : m('.hero-' + (hideDetails ? 'small' : 'half'), [m('.w-container.content-hero-profile', m('.w-row.u-text-center', m('.w-col.w-col-8.w-col-push-2', [hideDetails ? '' : m('.u-marginbottom-20', m('.avatar_wrapper', m('img.thumb.big.u-round[alt=\'User\'][src=\'' + profileImage + '\']'))), m('.fontsize-larger.fontweight-semibold.u-marginbottom-20', userVM.displayName(user)), hideDetails ? '' : [m('.w-hidden-small.w-hidden-tiny.u-marginbottom-40.fontsize-base', ['Arrived together at ' + h.momentify(user.created_at, 'MMMM [de] YYYY'), m('br'), user.total_contributed_projects === 0 ? 'Has not yet supported projects' : 'Supported ' + h.pluralize(user.total_contributed_projects, ' project', ' projects'), user.total_published_projects > 0 ? ' and already created ' + h.pluralize(user.total_published_projects, ' project', ' projects') : '']), m('.w-row', [m('.w-col.w-col-4'), m('.w-col.w-col-4', m.component(UserFollowBtn, {
            disabledClass: '.btn.btn-medium.btn-secondary-dark.w-button',
            following: user.following_this_user,
            follow_id: user.id })), m('.w-col.w-col-4')])]]))), m('.hero-profile', { style: 'background-image:url(\'' + coverImage + '\');' })]);
    }
};

/**
 * window.c.loadMoreBtn component
 * Button to paginate collection
 *
 * Example of use:
 * view: () => {
 *   ...
 *   m.component(c.loadMoreBtn, {collection: collection, cssClass: 'class'})
 *   ...
 * }
 */
var loadMoreBtn = {
    view: function view(ctrl, args) {
        var collection = args.collection,
            cssClass = args.cssClass;
        return m('.w-col.w-col-4' + cssClass, [!collection.isLoading() ? collection.isLastPage() ? '' : m('button#load-more.btn.btn-medium.btn-terciary.w-button', {
            onclick: collection.nextPage
        }, 'Load more') : h.loader()]);
    }
};

var userCreated = {
    controller: function controller(args) {
        var user_id = args.userId,
            showDraft = args.showDraft || false,
            error = m.prop(false),
            pages = postgrest$1.paginationVM(models.project),
            loader = m.prop(true),
            contextVM = postgrest$1.filtersVM({
            project_user_id: 'eq',
            state: 'in'
        });

        var states = ['online', 'waiting_funds', 'successful', 'failed'];
        if (showDraft) {
            states.push('draft');
        }
        contextVM.state(states).project_user_id(user_id).order({
            updated_at: 'desc'
        });

        models.project.pageSize(9);
        pages.firstPage(contextVM.parameters()).then(function () {
            loader(false);
        }).catch(function (err) {
            error(true);
            loader(false);
            m.redraw();
        });

        return {
            projects: pages,
            loader: loader,
            error: error
        };
    },
    view: function view(ctrl, args) {
        var projects_collection = ctrl.projects.collection();

        return m('.content[id=\'created-tab\']', ctrl.error() ? m.component(inlineError, {
            message: 'Error loading projects.'
        }) : !ctrl.loader() ? [!_$1.isEmpty(projects_collection) ? _$1.map(projects_collection, function (project) {
            return m.component(projectCard, {
                project: project,
                ref: 'user_contributed',
                showFriends: false
            });
        }) : m('.w-container', m('.u-margintop-30.u-text-center.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', [m('.fontsize-large.u-marginbottom-30', 'What are you waiting for to get your project off the paper here at OppoStarter?'), m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', m('a.btn.btn-large[href=\'/start\']', 'Start now!')), m('.w-col.w-col-3')])]), m('.w-col.w-col-3')])), !_$1.isEmpty(projects_collection) ? m('.w-row.u-marginbottom-40.u-margintop-30', [m(loadMoreBtn, {
            collection: ctrl.projects,
            cssClass: '.w-col-push-5'
        })]) : ''] : h.loader());
    }
};

var userContributed = {
    controller: function controller(args) {
        var contributedProjects = m.prop(),
            user_id = args.userId,
            pages = postgrest$1.paginationVM(models.project),
            error = m.prop(false),
            loader = m.prop(true),
            contextVM = postgrest$1.filtersVM({
            project_id: 'in'
        });

        userVM.getPublicUserContributedProjects(user_id, null).then(function (data) {
            contributedProjects(data);
            if (!_$1.isEmpty(contributedProjects())) {
                contextVM.project_id(_$1.pluck(contributedProjects(), 'project_id')).order({
                    online_date: 'desc'
                });

                models.project.pageSize(9);
                pages.firstPage(contextVM.parameters()).then(function () {
                    loader(false);
                });
            } else {
                loader(false);
            }
        }).catch(function (err) {
            error(true);
            loader(false);
            m.redraw();
        });

        return {
            projects: pages,
            error: error,
            loader: loader
        };
    },
    view: function view(ctrl, args) {
        var projects_collection = ctrl.projects.collection();
        return ctrl.error() ? m.component(inlineError, { message: 'Error loading projects.' }) : ctrl.loader() ? h.loader() : m('.content[id=\'contributed-tab\']', [!_$1.isEmpty(projects_collection) ? _$1.map(projects_collection, function (project) {
            return m.component(projectCard, {
                project: project,
                ref: 'user_contributed',
                showFriends: false
            });
        }) : m('.w-container', m('.u-margintop-30.u-text-center.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', [m('.fontsize-large.u-marginbottom-30', 'Well, now ... you have not yet supported any project on OppoStarter!'), m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', m('a.btn.btn-large[href=\'/explore\']', 'How about supporting now??')), m('.w-col.w-col-3')])]), m('.w-col.w-col-3')])), !_$1.isEmpty(projects_collection) ? m('.w-row.u-marginbottom-40.u-margintop-30', [m(loadMoreBtn, { collection: ctrl.projects, cssClass: '.w-col-push-5' })]) : '']);
    }
};

var userCard = {
    controller: function controller(args) {
        var userDetails = m.prop({}),
            user_id = args.userId;

        userVM.fetchUser(user_id, true, userDetails);

        return {
            userDetails: userDetails,
            displayModal: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl) {
        var user = ctrl.userDetails(),
            contactModalC = [ownerMessageContent, ctrl.userDetails],
            profileImage = userVM.displayImage(user);

        return m('#user-card', m('.card.card-user.u-radius.u-marginbottom-30[itemprop=\'author\']', [m('.w-row', [m('.w-col.w-col-4.w.col-small-4.w-col-tiny-4.w-clearfix', m('img.thumb.u-round[itemprop=\'image\'][src=\'' + profileImage + '\'][width=\'100\']')), m('.w-col.w-col-8.w-col-small-8.w-col-tiny-8', [m('.fontsize-small.fontweight-semibold.lineheight-tighter[itemprop=\'name\']', m('a.link-hidden[href="/users/' + user.id + '"]', userVM.displayName(user))), m('.fontsize-smallest.lineheight-looser[itemprop=\'address\']', user.address_city), m('.fontsize-smallest', h.pluralize(user.total_published_projects, ' project', ' projects') + ' created'), m('.fontsize-smallest', 'supported ' + h.pluralize(user.total_contributed_projects, ' project', ' projects'))])]), m('.project-author-contacts', [m('ul.w-list-unstyled.fontsize-smaller.fontweight-semibold', [!_$1.isEmpty(user.facebook_link) ? m('li', [m('a.link-hidden[itemprop="url"][href="' + user.facebook_link + '"][target="_blank"]', 'Facebook Profile')]) : '', !_$1.isEmpty(user.twitter_username) ? m('li', [m('a.link-hidden[itemprop="url"][href="https://twitter.com/' + user.twitter_username + '"][target="_blank"]', 'Twitter Profile')]) : '', _$1.map(user.links, function (link) {
            return m('li', [m('a.link-hidden[itemprop="url"][href="' + link.link + '"][target="_blank"]', link.link)]);
        })])]), ctrl.displayModal() ? m.component(modalBox, {
            displayModal: ctrl.displayModal,
            content: contactModalC
        }) : '', m(UserFollowBtn, { follow_id: user.id, following: user.follwing_this_user, enabledClass: '.btn.btn-medium.btn-message.u-marginbottom-10', disabledClass: '.btn.btn-medium.btn-message.u-marginbottom-10' }), !_$1.isEmpty(user.email) ? m('a.btn.btn-medium.btn-message[href=\'javascript:void(0);\']', { onclick: ctrl.displayModal.toggle }, 'Send Message') : '']));
    }
};

var userAbout = {
    controller: function controller(args) {
        var userDetails = m.prop({}),
            loader = m.prop(true),
            error = m.prop(false),
            user_id = args.userId;

        userVM.fetchUser(user_id, true, userDetails).then(function () {
            loader(false);
        }).catch(function (err) {
            error(true);
            loader(false);
            m.redraw();
        });

        return {
            userDetails: userDetails,
            error: error,
            loader: loader
        };
    },
    view: function view(ctrl, args) {
        var user = ctrl.userDetails();
        return ctrl.error() ? m.component(inlineError, { message: 'Error loading data.' }) : ctrl.loader() ? h.loader() : m('.content[id=\'about-tab\']', m('.w-container[id=\'about-content\']', m('.w-row', [m('.w-col.w-col-8', m('.fontsize-base', user.about_html ? m.trust(user.about_html) : '')), m('.w-col.w-col-4', user.id ? m.component(userCard, { userId: user.id }) : h.loader)])));
    }
};

var usersShow = {
    controller: function controller(args) {
        var userDetails = m.prop({}),
            user_id = args.user_id.split('-')[0],
            hash = m.prop(window.location.hash),
            displayTabContent = function displayTabContent(user) {
            var tabs = {
                '#created': m.component(userCreated, { userId: user.id }),
                '#contributed': m.component(userContributed, { userId: user.id }),
                '#about': m.component(userAbout, { userId: user.id })
            };

            hash(window.location.hash);

            if (_$1.isEmpty(hash()) || hash() === '#_=_') {
                if (user.total_published_projects > 0) {
                    hash('#created');
                    return tabs['#created'];
                } else if (user.total_contributed_projects > 0) {
                    hash('#contributed');
                    return tabs['#contributed'];
                }

                hash('#about');
                return tabs['#about'];
            }

            return tabs[hash()];
        };

        h.redrawHashChange();

        userVM.fetchUser(user_id, true, userDetails);

        return {
            displayTabContent: displayTabContent,
            hash: hash,
            userDetails: userDetails
        };
    },
    view: function view(ctrl, args) {
        var user = ctrl.userDetails();

        return m('div', [m.component(userHeader, { user: user }), m('nav.project-nav.u-text-center.u-marginbottom-30.profile', { style: { 'z-index': '10', position: 'relative' } }, m('.w-container[data-anchor=\'created\']', [!_$1.isEmpty(user) ? user.is_owner_or_admin ? m('a.dashboard-nav-link.dashboard[href=\'/en/users/' + user.id + '/edit\']', { config: m.route,
            onclick: function onclick() {
                m.route('/users/edit/' + user.id, { user_id: user.id });
            } }, [m('span.fa.fa-cog'), m.trust('&nbsp;'), ' Edit profile']) : '' : h.loader(), m('a[data-target=\'#contributed-tab\'][href=\'#contributed\'][id=\'contributed_link\'][class=\'dashboard-nav-link ' + (ctrl.hash() === '#contributed' ? 'selected' : '') + '\']', ['Supported ', m.trust('&nbsp;'), m('span.badge', user.total_contributed_projects)]), m('a[data-target=\'#created-tab\'][href=\'#created\'][id=\'created_link\'][class=\'dashboard-nav-link ' + (ctrl.hash() === '#created' ? 'selected' : '') + '\']', ['Created ', m.trust('&nbsp;'), m('span.badge', user.total_published_projects)]), m('a[data-target=\'#about-tab\'][href=\'#about\'][id=\'about_link\'][class=\'dashboard-nav-link ' + (ctrl.hash() === '#about' ? 'selected' : '') + '\']', 'About')])), m('section.section', m('.w-container', m('.w-row', user.id ? ctrl.displayTabContent(user) : h.loader())))]);
    }
};

var I18nScope$30 = _$1.partial(h.i18nScope, 'activerecord.attributes.address');

var surveyPreview = {
    controller: function controller(args) {
        var fields = args.fields,
            multipleChoiceQuestions = args.multipleChoiceQuestions,
            openQuestions = args.openQuestions;

        return {
            fields: fields,
            multipleChoiceQuestions: multipleChoiceQuestions,
            openQuestions: openQuestions
        };
    },
    view: function view(ctrl, args) {
        return m('.section.u-marginbottom-40', m('.w-container', m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', m('.card.card-terciary.medium.u-radius', [args.confirmAddress ? m('.u-marginbottom-30', [m('.fontcolor-secondary.fontsize-base.fontweight-semibold.u-marginbottom-20', I18n$1.t('delivery_address', I18nScope$30())), m('.fontsize-base', [m('span.fontweight-semibold', I18n$1.t('country', I18nScope$30()) + ': '), args.countryName, m('br'), m('span.fontweight-semibold', I18n$1.t('address_street', I18nScope$30()) + ':'), m.trust('&nbsp;'), ctrl.fields.address_street, m('br'), m('span.fontweight-semibold', I18n$1.t('address_number', I18nScope$30()) + ':'), m.trust('&nbsp;'), ctrl.fields.address_number, m('br'), m('span.fontweight-semibold', I18n$1.t('address_complement', I18nScope$30()) + ':'), m.trust('&nbsp;'), ctrl.fields.address_complement, m('br'), m('span.fontweight-semibold', I18n$1.t('address_neighbourhood', I18nScope$30()) + ':'), m.trust('&nbsp;'), ctrl.fields.address_neighbourhood, m('br'), m('span.fontweight-semibold', I18n$1.t('address_city', I18nScope$30()) + ':'), m.trust('&nbsp;'), ctrl.fields.address_city, m('br'), m('span.fontweight-semibold', I18n$1.t('address_state', I18nScope$30()) + ':'), m.trust('&nbsp;'), args.stateName, m('br'), m('span.fontweight-semibold', I18n$1.t('address_zip_code', I18nScope$30()) + ':'), m.trust('&nbsp;'), ctrl.fields.address_zip_code, m('br'), m('span.fontweight-semibold', I18n$1.t('phone_number', I18nScope$30()) + ':'), m.trust('&nbsp;'), ctrl.fields.phone_number])]) : '', _$1.map(ctrl.multipleChoiceQuestions, function (item) {
            var answer = _$1.find(item.question.question_choices, function (choice) {
                return item.value() == choice.id;
            });
            return m('.u-marginbottom-30', [m('.fontcolor-secondary.fontsize-base.fontweight-semibold', item.question.question), m('.fontcolor-secondary.fontsize-smaller.u-marginbottom-20', item.question.description), m('.fontsize-base', answer ? answer.option : '')]);
        }), _$1.map(ctrl.openQuestions, function (item) {
            return m('.u-marginbottom-30', [m('.fontcolor-secondary.fontsize-base.fontweight-semibold', item.question.question), m('.fontcolor-secondary.fontsize-smaller.u-marginbottom-20', item.question.description), m('.fontsize-base', item.value())]);
        })])), m('.w-col.w-col-1')])));
    }
};

var countrySelect = {
    controller: function controller(args) {
        var countriesLoader = postgrest$1.loader(models.country.getPageOptions()),
            countries = m.prop(),
            defaultCountryID = args.defaultCountryID,
            defaultForeignCountryID = args.defaultForeignCountryID,
            fields = args.fields,
            international = args.international(fields.countryID() !== '' && fields.countryID() !== defaultCountryID);

        var changeCountry = function changeCountry(countryID) {
            fields.countryID(parseInt(countryID));
            args.international(parseInt(countryID) !== defaultCountryID);
        };

        countriesLoader.load().then(function (countryData) {
            return countries(_$1.sortBy(countryData, 'name_en'));
        });
        return {
            changeCountry: changeCountry,
            defaultCountryID: defaultCountryID,
            defaultForeignCountryID: defaultForeignCountryID,
            fields: fields,
            international: international,
            countries: countries
        };
    },
    view: function view(ctrl, args) {
        var fields = ctrl.fields;
        if (args.countryName) {
            args.countryName(ctrl.countries() && fields.countryID() ? _$1.find(ctrl.countries(), function (country) {
                return country.id === parseInt(fields.countryID());
            }).name_en : '');
        }

        return m('.u-marginbottom-30.w-row', [m('.w-col.w-col-6', [m('.field-label.fontweight-semibold', ['Country / ', m('in', 'Country'), ' *']), m('select#country.positive.text-field.w-select', {
            onchange: function onchange(e) {
                ctrl.changeCountry(e.target.value);
            }
        }, [!_$1.isEmpty(ctrl.countries()) ? _$1.map(ctrl.countries(), function (country) {
            return m('option', {
                selected: country.id === ctrl.fields.countryID(),
                value: country.id
            }, country.name_en);
        }) : ''])]), m('.w-col.w-col-6')]);
    }
};

var nationalityRadio = {
    controller: function controller(args) {
        var defaultCountryID = args.defaultCountryID,
            defaultForeignCountryID = args.defaultForeignCountryID,
            international = args.international;

        return {
            defaultCountryID: defaultCountryID,
            defaultForeignCountryID: defaultForeignCountryID,
            international: international
        };
    },
    view: function view(ctrl, args) {
        var international = ctrl.international,
            fields = args.fields;

        return m('div', m('.w-row', [m('.w-col.w-col-4', m('.fontsize-small.fontweight-semibold', 'Nacionalidade:')), m('.w-col.w-col-4', m('.fontsize-small.w-radio', [m("input.w-radio-input[name='nationality'][type='radio']", {
            checked: !international(),
            onclick: function onclick() {
                fields.countryID(ctrl.defaultCountryID);
                international(false);
            }
        }), m('label.w-form-label', 'English')])), m('.w-col.w-col-4', m('.fontsize-small.w-radio', [m("input.w-radio-input[name='nationality'][type='radio']", {
            checked: international(),
            onclick: function onclick() {
                if (fields.countryID() === ctrl.defaultCountryID) {
                    fields.countryID(ctrl.defaultForeignCountryID); // USA
                }
                international(true);
            }
        }), m('label.w-form-label', 'International')]))]));
    }
};

var addressVM = function addressVM(args) {
    var data = args.data;
    var international = m.prop();
    var defaultCountryID = 36,
        defaultForeignCountryID = 74;
    var fields = {
        id: m.prop(data.id || ''),
        countryID: m.prop(data.country_id || defaultCountryID),
        stateID: m.prop(data.state_id || ''),
        addressStreet: m.prop(data.address_street || ''),
        addressNumber: m.prop(data.address_number || ''),
        addressComplement: m.prop(data.address_complement || ''),
        addressNeighbourhood: m.prop(data.address_neighbourhood || ''),
        addressCity: m.prop(data.address_city || ''),
        addressState: m.prop(data.address_state || ''),
        addressZipCode: m.prop(data.address_zip_code || ''),
        phoneNumber: m.prop(data.phone_number || '')
    };

    return {
        international: international,
        defaultCountryID: defaultCountryID,
        defaultForeignCountryID: defaultForeignCountryID,
        fields: fields
    };
};

var I18nScope$31 = _$1.partial(h.i18nScope, 'activerecord.attributes.address');

var addressForm = {
    controller: function controller(args) {
        var parsedErrors = args.parsedErrors;
        var statesLoader = postgrest$1.loader(models.state.getPageOptions()),
            data = args.fields().address(),
            vm = addressVM({
            data: data
        }),
            defaultCountryID = vm.defaultCountryID,
            defaultForeignCountryID = vm.defaultForeignCountryID,
            states = m.prop(),
            zipCodeErrorMessage = m.prop(''),
            fields = args.addressFields || vm.fields,
            errors = {
            countryID: m.prop(parsedErrors ? parsedErrors.hasError('country_id') : false),
            stateID: m.prop(parsedErrors ? parsedErrors.hasError('state') : false),
            addressStreet: m.prop(parsedErrors ? parsedErrors.hasError('street') : false),
            addressNumber: m.prop(parsedErrors ? parsedErrors.hasError('number') : false),
            addressComplement: m.prop(false),
            addressNeighbourhood: m.prop(parsedErrors ? parsedErrors.hasError('neighbourhood') : false),
            addressCity: m.prop(parsedErrors ? parsedErrors.hasError('city') : false),
            addressState: m.prop(parsedErrors ? parsedErrors.hasError('state') : false),
            addressZipCode: m.prop(parsedErrors ? parsedErrors.hasError('zipcode') : false),
            phoneNumber: m.prop(parsedErrors ? parsedErrors.hasError('phonenumber') : false)
        },
            phoneMask = _$1.partial(h.mask, '(99) 9999-99999'),
            zipcodeMask = _$1.partial(h.mask, '99999-999'),
            applyZipcodeMask = _$1.compose(fields.addressZipCode, zipcodeMask),
            applyPhoneMask = _$1.compose(fields.phoneNumber, phoneMask),
            international = args.international || vm.international;

        var checkPhone = function checkPhone() {
            var hasError = false;
            var phone = fields.phoneNumber(),
                strippedPhone = String(phone).replace(/[\(|\)|\-|\s]*/g, '');

            if (strippedPhone.length < 10) {
                errors.phoneNumber(true);
                hasError = true;
            } else {
                var controlDigit = Number(strippedPhone.charAt(2));
                if (!(controlDigit >= 2 && controlDigit <= 9)) {
                    errors.phoneNumber(true);
                    hasError = true;
                }
            }
            return hasError;
        };
        _$1.extend(args.fields(), {
            validate: function validate() {
                var hasError = false;
                var fieldsToIgnore = international() ? ['id', 'stateID', 'addressComplement', 'addressNumber', 'addressNeighbourhood', 'phoneNumber'] : ['id', 'addressComplement', 'addressState', 'phoneNumber'];
                // clear all errors
                _$1.mapObject(errors, function (val, key) {
                    val(false);
                });
                // check for empty fields
                _$1.mapObject(_$1.omit(fields, fieldsToIgnore), function (val, key) {
                    if (!val()) {
                        errors[key](true);
                        hasError = true;
                    }
                });
                if (!international()) {
                    var hasPhoneError = checkPhone();
                    hasError = hasError || hasPhoneError;
                }
                return !hasError;
            }
        });

        var lookupZipCode = function lookupZipCode(zipCode) {
            fields.addressZipCode(zipCode);
            if (zipCode.length === 9) {
                m.request({
                    method: 'GET',
                    url: 'https://api.pagar.me/1/zipcodes/' + zipCode
                }).then(function (response) {
                    fields.addressStreet(response.street);
                    fields.addressNeighbourhood(response.neighborhood);
                    fields.addressCity(response.city);
                    fields.stateID(_$1.find(states(), function (state) {
                        return state.acronym === response.state;
                    }).id);
                    errors.addressStreet(false);
                    errors.addressNeighbourhood(false);
                    errors.addressCity(false);
                    errors.stateID(false);
                    errors.addressZipCode(false);
                }).catch(function (err) {
                    zipCodeErrorMessage(err.errors[0].message);
                    errors.addressZipCode(true);
                });
            }
        };

        statesLoader.load().then(states);
        return {
            lookupZipCode: lookupZipCode,
            zipCodeErrorMessage: zipCodeErrorMessage,
            errors: errors,
            applyPhoneMask: applyPhoneMask,
            applyZipcodeMask: applyZipcodeMask,
            defaultCountryID: defaultCountryID,
            defaultForeignCountryID: defaultForeignCountryID,
            fields: fields,
            international: international,
            states: states
        };
    },
    view: function view(ctrl, args) {
        var fields = ctrl.fields,
            international = ctrl.international,
            defaultCountryID = ctrl.defaultCountryID,
            defaultForeignCountryID = ctrl.defaultForeignCountryID,
            errors = ctrl.errors,

        // hash to send to rails
        address = {
            id: fields.id(),
            country_id: fields.countryID(),
            state_id: fields.stateID(),
            address_street: fields.addressStreet(),
            address_number: fields.addressNumber(),
            address_complement: fields.addressComplement(),
            address_neighbourhood: fields.addressNeighbourhood(),
            address_city: fields.addressCity(),
            address_state: fields.addressState(),
            address_zip_code: fields.addressZipCode(),
            phone_number: fields.phoneNumber()
        };

        args.fields().address(address);
        if (args.stateName) {
            args.stateName(ctrl.states() && fields.stateID() ? _$1.find(ctrl.states(), function (state) {
                return state.id === parseInt(fields.stateID());
            }).name : '');
        }

        return m('#address-form.u-marginbottom-30.w-form', [!args.hideNationality ? m('.u-marginbottom-30', m(nationalityRadio, {
            fields: fields,
            defaultCountryID: defaultCountryID,
            defaultForeignCountryID: defaultForeignCountryID,
            international: international
        })) : '',
        // @TODO move to another component
        international() ? m('form', [m(countrySelect, {
            countryName: args.countryName,
            fields: fields,
            international: international,
            defaultCountryID: defaultCountryID,
            defaultForeignCountryID: defaultForeignCountryID
        }), m('div', [m('.w-row', m('.w-col.w-col-12', [m('.field-label.fontweight-semibold', 'Address *'), m("input.positive.text-field.w-input[required='required'][type='text']", {
            class: errors.addressStreet() ? 'error' : '',
            value: ctrl.fields.addressStreet(),
            onchange: m.withAttr('value', ctrl.fields.addressStreet)
        }), errors.addressStreet() ? m(inlineError, {
            message: 'Please fill in an address.'
        }) : ''])), m('div', m('.w-row', [m('.w-sub-col.w-col.w-col-4', [m('.field-label.fontweight-semibold', 'Zip Code *'), m("input.positive.text-field.w-input[required='required'][type='text']", {
            class: errors.addressZipCode() ? 'error' : '',
            value: ctrl.fields.addressZipCode(),
            onchange: m.withAttr('value', ctrl.fields.addressZipCode)
        }), errors.addressZipCode() ? m(inlineError, {
            message: 'ZipCode is required'
        }) : '']), m('.w-sub-col.w-col.w-col-4', [m('.field-label.fontweight-semibold', 'City *'), m("input.positive.text-field.w-input[required='required'][type='text']", {
            class: errors.addressCity() ? 'error' : '',
            value: ctrl.fields.addressCity(),
            onchange: m.withAttr('value', ctrl.fields.addressCity)
        }), errors.addressCity() ? m(inlineError, {
            message: 'City is required'
        }) : '']), m('.w-col.w-col-4', [m('.field-label.fontweight-semibold', 'State *'), m("input#address-state.positive.text-field.w-input[required='required'][type='text']", {
            class: errors.addressState() ? 'error' : '',
            value: ctrl.fields.addressState(),
            onchange: m.withAttr('value', ctrl.fields.addressState)
        }), errors.addressState() ? m(inlineError, {
            message: 'State is required'
        }) : ''])]))])]) : m('.w-form', [m('div', [m(countrySelect, {
            countryName: args.countryName,
            fields: fields,
            international: international,
            defaultCountryID: defaultCountryID,
            defaultForeignCountryID: defaultForeignCountryID
        }), m('div', [m('.w-row', [m('.w-col.w-col-6', [m('.field-label', [m('span.fontweight-semibold', I18n$1.t('address_zip_code', I18nScope$31()) + ' *'), m("a.fontsize-smallest.alt-link.u-right[href='http://www.buscacep.correios.com.br/sistemas/buscacep/'][target='_blank']", I18n$1.t('zipcode_unknown', I18nScope$31()))]), m("input.positive.text-field.w-input[placeholder='Enter numbers only'][required='required'][type='text']", {
            class: errors.addressZipCode() ? 'error' : '',
            value: ctrl.fields.addressZipCode(),
            onkeyup: m.withAttr('value', function (value) {
                return ctrl.applyZipcodeMask(value);
            }),
            oninput: function oninput(e) {
                ctrl.lookupZipCode(e.target.value);
            }
        }), errors.addressZipCode() ? m(inlineError, {
            message: ctrl.zipCodeErrorMessage() ? ctrl.zipCodeErrorMessage() : 'Please enter a valid zip code.'
        }) : '']), m('.w-col.w-col-6')]), m('.w-row', [m('.field-label.fontweight-semibold', I18n$1.t('address_street', I18nScope$31()) + ' *'), m("input.positive.text-field.w-input[maxlength='256'][required='required'][type='text']", {
            class: errors.addressStreet() ? 'error' : '',
            value: ctrl.fields.addressStreet(),
            onchange: m.withAttr('value', ctrl.fields.addressStreet)
        }), errors.addressStreet() ? m(inlineError, {
            message: 'Enter an address.'
        }) : '']), m('.w-row', [m('.w-sub-col.w-col.w-col-4', [m('.field-label.fontweight-semibold', I18n$1.t('address_number', I18nScope$31()) + ' *'), m("input.positive.text-field.w-input[required='required'][type='text']", {
            class: errors.addressNumber() ? 'error' : '',
            value: ctrl.fields.addressNumber(),
            onchange: m.withAttr('value', ctrl.fields.addressNumber)
        }), errors.addressNumber() ? m(inlineError, {
            message: 'Please enter a number.'
        }) : '']), m('.w-sub-col.w-col.w-col-4', [m('.field-label.fontweight-semibold', I18n$1.t('address_complement', I18nScope$31())), m("input.positive.text-field.w-input[required='required'][type='text']", {
            value: ctrl.fields.addressComplement(),
            onchange: m.withAttr('value', ctrl.fields.addressComplement)
        })]), m('.w-col.w-col-4', [m('.field-label.fontweight-semibold', I18n$1.t('address_neighbourhood', I18nScope$31()) + ' *'), m("input.positive.text-field.w-input[required='required'][type='text']", {
            class: errors.addressNeighbourhood() ? 'error' : '',
            value: ctrl.fields.addressNeighbourhood(),
            onchange: m.withAttr('value', ctrl.fields.addressNeighbourhood)
        }), errors.addressNeighbourhood() ? m(inlineError, {
            message: 'Please enter a district.'
        }) : ''])]), m('.w-row', [m('.w-sub-col.w-col.w-col-6', [m('.field-label.fontweight-semibold', I18n$1.t('address_city', I18nScope$31()) + ' *'), m("input.positive.text-field.w-input[required='required'][type='text']", {
            class: errors.addressCity() ? 'error' : '',
            value: ctrl.fields.addressCity(),
            onchange: m.withAttr('value', ctrl.fields.addressCity)
        }), errors.addressCity() ? m(inlineError, {
            message: 'Please enter a city.'
        }) : '']), m('.w-sub-col.w-col.w-col-2', [m('.field-label.fontweight-semibold', I18n$1.t('address_state', I18nScope$31()) + ' *'), m('select#address-state.positive.text-field.w-select', {
            class: errors.stateID() ? 'error' : '',
            onchange: m.withAttr('value', ctrl.fields.stateID)
        }, [m('option', { value: '' }), !_$1.isEmpty(ctrl.states()) ? _$1.map(ctrl.states(), function (state) {
            return m('option', {
                value: state.id,
                selected: state.id === ctrl.fields.stateID()
            }, state.acronym);
        }) : '']), errors.stateID() ? m(inlineError, {
            message: 'Please enter a State.'
        }) : '']), m('.w-col.w-col-4', [m('.field-label.fontweight-semibold', I18n$1.t('phone_number', I18nScope$31()) + ' *'), m("input#phone.positive.text-field.w-input[placeholder='Enter numbers only'][required='required'][type='text']", {
            class: errors.phoneNumber() ? 'error' : '',
            value: ctrl.fields.phoneNumber(),
            onkeyup: m.withAttr('value', function (value) {
                return ctrl.applyPhoneMask(value);
            }),
            onchange: m.withAttr('value', ctrl.fields.phoneNumber)
        }), errors.phoneNumber() ? m(inlineError, {
            message: 'Please provide a valid phone number.'
        }) : ''])])])])])]);
    }
};

var addressScope = _$1.partial(h.i18nScope, 'activerecord.attributes.address');

var surveysShow = {
    controller: function controller(args) {
        var survey_id = args.survey_id,
            contributionId = m.route.param('contribution_id'),
            survey = m.prop(),
            idVM = h.idVM,
            displayModal = h.toggleProp(false, true),
            showPreview = h.toggleProp(false, true),
            showThanks = h.toggleProp(false, true),
            finished = m.prop(false),
            countryName = m.prop(''),
            stateName = m.prop(''),
            answeredAt = m.prop(''),
            fields = m.prop({}),
            openQuestions = m.prop([]),
            multipleChoiceQuestions = m.prop([]),
            user = m.prop({}),
            reward = m.prop(),
            sendMessage = function sendMessage() {
            displayModal(true);
        },
            vm = postgrest$1.filtersVM({
            contribution_id: 'eq'
        }),
            surveyLoader = function surveyLoader() {
            vm.contribution_id(contributionId);

            return postgrest$1.loaderWithToken(models.survey.getPageOptions(vm.parameters()));
        },
            preview = function preview() {
            if (survey().confirm_address) {
                window.location.hash = '#address-form';
                if (fields().validate()) {
                    scroll(0, 0);
                    showPreview.toggle();
                }
            } else {
                showPreview.toggle();
            }
        },
            sendAnswer = function sendAnswer() {
            var data = {};
            _$1.extend(data, {
                survey_address_answers_attributes: {
                    addresses_attributes: fields().address()
                }
            });
            _$1.extend(data, {
                survey_open_question_answers_attributes: _$1.map(openQuestions(), function (question) {
                    return {
                        id: question.question.answer_id,
                        survey_open_question_id: question.question.id,
                        contribution_id: contributionId,
                        answer: question.value()
                    };
                })
            });
            _$1.extend(data, {
                survey_multiple_choice_question_answers_attributes: _$1.map(multipleChoiceQuestions(), function (question) {
                    return {
                        id: question.question.answer_id,
                        contribution_id: contributionId,
                        survey_multiple_choice_question_id: question.question.id,
                        survey_question_choice_id: question.value()
                    };
                })
            });
            m.request({
                method: 'PUT',
                url: '/contributions/' + contributionId + '/surveys/' + survey_id + '/answer',
                data: data,
                config: h.setCsrfToken
            }).then(function () {
                scroll(0, 0);
                showThanks.toggle();
            });
        };

        var loadSurvey = function loadSurvey(el, isInitialized) {
            if (!isInitialized) {
                surveyLoader().load().then(function (data) {
                    survey(_$1.first(data));
                    finished(!_$1.isEmpty(survey().finished_at));
                    answeredAt(survey().survey_answered_at);
                    projectVM.fetchProject(survey().project_id);
                    rewardVM.rewardLoader(survey().reward_id).load().then(reward);
                    var surveyData = survey();
                    countryName(surveyData.country_name);
                    stateName(surveyData.state_name);

                    idVM.id(h.getUserID());

                    var lUser = postgrest$1.loaderWithToken(models.userDetail.getRowOptions(idVM.parameters()));

                    lUser.load().then(function (userData) {
                        user(_$1.first(userData));
                        fields({
                            address: m.prop(surveyData.address || _$1.omit(user().address, 'id') || {})
                        });
                    });

                    _$1.map(surveyData.open_questions, function (question) {
                        openQuestions().push({
                            question: question,
                            value: m.prop(question.answer)
                        });
                    });
                    _$1.map(surveyData.multiple_choice_questions, function (question) {
                        multipleChoiceQuestions().push({
                            question: question,
                            value: m.prop(question.survey_question_choice_id)
                        });
                    });
                });
            }
        };

        return {
            projectVM: projectVM,
            loadSurvey: loadSurvey,
            countryName: countryName,
            stateName: stateName,
            user: user,
            preview: preview,
            finished: finished,
            fields: fields,
            reward: reward,
            sendMessage: sendMessage,
            displayModal: displayModal,
            answeredAt: answeredAt,
            sendAnswer: sendAnswer,
            showPreview: showPreview,
            showThanks: showThanks,
            openQuestions: openQuestions,
            multipleChoiceQuestions: multipleChoiceQuestions,
            survey: survey
        };
    },
    view: function view(ctrl) {
        var user = ctrl.user(),
            survey = ctrl.survey(),
            countryName = ctrl.countryName,
            stateName = ctrl.stateName,
            openQuestions = ctrl.openQuestions(),
            multipleChoiceQuestions = ctrl.multipleChoiceQuestions(),
            project = ctrl.projectVM.currentProject(),
            reward = _$1.first(ctrl.reward()),
            contactModalC = [ownerMessageContent, m.prop(project ? project.user : {})],
            profileImage = userVM.displayImage(user);

        return m('.survey', {
            config: ctrl.loadSurvey
        }, _$1.isEmpty(user) ? '' : [ctrl.displayModal() ? m.component(modalBox, {
            displayModal: ctrl.displayModal,
            content: contactModalC
        }) : '', ctrl.showThanks() ? m('.survey-thanks', [m('.bg-white.page-header', m('.w-container', m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.u-marginbottom-20.u-text-center', m('img.big.thumb.u-marginbottom-20.u-round[src=\'' + profileImage + '\']')), m('.u-text-center', m('.fontsize-larger.u-marginbottom-10', 'Thanks!')), m('.fontsize-base.u-text-center', ['The answers below were sent to ' + project.user.name + '! Any doubts about the progress of the project, visit ', m('a.alt-link[href=\'/' + project.permalink + '#posts\'][target=\'_blank\']', 'campaign news tab'), ' or ', m('a.alt-link[href=\'javascript:void(0);\']', {
            onclick: ctrl.sendMessage
        }, 'send a message'), '.'])]), m('.w-col.w-col-2')]))), m(surveyPreview, {
            confirmAddress: survey.confirm_address,
            countryName: countryName(),
            stateName: stateName(),
            fields: ctrl.fields().address(),
            openQuestions: openQuestions,
            multipleChoiceQuestions: multipleChoiceQuestions
        })]) : ctrl.showPreview() ? m('.survey-preview', [m('.bg-white.page-header', m('.w-container', m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.u-marginbottom-20.u-text-center', m('img.big.thumb.u-marginbottom-20.u-round[src=\'' + profileImage + '\']')), m('.u-text-center', m('.fontsize-larger', 'You confirm the answers below?'))]), m('.w-col.w-col-2')]))), m(surveyPreview, {
            confirmAddress: survey.confirm_address,
            countryName: countryName(),
            stateName: stateName(),
            fields: ctrl.fields().address(),
            openQuestions: openQuestions,
            multipleChoiceQuestions: multipleChoiceQuestions
        }), m('div', m('.w-container', m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', m('.w-row', [m('.w-col-small-6.w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col', m('a.btn.btn-large.btn-terciary', {
            onclick: ctrl.showPreview.toggle
        }, 'No')), m('.w-col.w-col-6.w-col-small-6.w-col-tiny-6', m('a.btn.btn-large', {
            onclick: ctrl.sendAnswer
        }, 'Yes'))])), m('.w-col.w-col-2')])))]) : m('.survey-show', !survey || !project ? h.loader() : [m('.dashboard-header.u-marginbottom-40.u-text-center', m('.w-container', m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('img.big.thumb.u-marginbottom-20.u-round[src=\'' + profileImage + '\']'), m('.fontsize-larger.u-marginbottom-10', 'Hi, ' + userVM.displayName(user)), m('.fontsize-base.u-marginbottom-20', project.user.name + ', of project ' + project.name + ', has sent you some questions so you can continue with the production and delivery of the reward that you have supported with US$' + reward.minimum_value + ':'), m(rewardCardBig, {
            reward: reward
        })]), m('.w-col.w-col-2')]))), ctrl.finished() ? [m('div', m('.w-container', m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', m('.card.card-terciary.medium.u-marginbottom-30', [m('.card.card-message.u-marginbottom-40.u-radius', m('.fontsize-base', [m('span.fa.fa-exclamation-circle', ''), ctrl.answeredAt() ? m('span', ' This questionnaire is no longer open for answers. Below are the answers you submitted on the day ' + h.momentify(ctrl.answeredAt(), 'DD/MM/YYYY') + '. Any doubt, ', m('a.alt-link[href=\'javascript:void(0);\']', {
            onclick: ctrl.sendMessage
        }, 'send a message to ' + project.user.name)) : m('span', ' Oooops! This questionnaire is no longer open for answers since the day ' + h.momentify(ctrl.survey().finished_at, 'DD/MM/YYYY') + '. Our recommendation is that you ', m('a.alt-link[href=\'javascript:void(0);\']', {
            onclick: ctrl.sendMessage
        }, 'send a message to ' + project.user.name), ' to find out how you can solve your case! ')]))])), ctrl.answeredAt() ? m(surveyPreview, {
            confirmAddress: survey.confirm_address,
            countryName: countryName(),
            stateName: stateName(),
            fields: ctrl.fields().address(),
            openQuestions: openQuestions,
            multipleChoiceQuestions: multipleChoiceQuestions
        }) : '', m('.w-col.w-col-1')])))] : [m('div', m('.w-container', m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', m('.card.card-terciary.medium.u-marginbottom-30', [ctrl.answeredAt() ? m('.card.card-message.u-marginbottom-40.u-radius', m('.fontsize-base', [m('span.fa.fa-exclamation-circle', ''), ' You have already submitted the answers below on the day ' + h.momentify(ctrl.answeredAt(), 'DD/MM/YYYY') + '. If you noticed something wrong, no problem: just change the information required below and resend the answers.'])) : '', survey.confirm_address ? [m('.fontcolor-secondary.fontsize-base.fontweight-semibold', I18n$1.t('delivery_address', addressScope())), m(addressForm, {
            countryName: countryName,
            stateName: stateName,
            fields: ctrl.fields
        })] : '', _$1.map(multipleChoiceQuestions, function (item) {
            return m('.u-marginbottom-30.w-form', [m('.fontcolor-secondary.fontsize-base.fontweight-semibold', item.question.question), m('.fontcolor-secondary.fontsize-smaller.u-marginbottom-20', item.question.description), [_$1.map(item.question.question_choices, function (choice) {
                return m('.fontsize-small.w-radio', [m('input.w-radio-input[type=\'radio\'][name=\'choice' + item.question.id + '\']', {
                    value: choice.id,
                    checked: parseInt(choice.id) === parseInt(item.value()),
                    onchange: m.withAttr('value', item.value)
                }), m("label.w-form-label[for='radio']", choice.option)]);
            })]]);
        }), _$1.map(openQuestions, function (item) {
            return m('.u-marginbottom-30.w-form', [m('.fontcolor-secondary.fontsize-base.fontweight-semibold', item.question.question), m('.fontcolor-secondary.fontsize-smaller.u-marginbottom-20', item.question.description), m("input.positive.text-field.w-input[maxlength='256'][placeholder='Your answer'][required='required'][type='text']", {
                value: item.value(),
                onchange: m.withAttr('value', item.value)
            })]);
        })])), m('.w-col.w-col-1')]))), m('.section', m('.w-container', m('.w-row', [m('.w-col.w-col-4'), m('.w-col.w-col-4', m('a.btn.btn-large', {
            onclick: function onclick() {
                ctrl.preview();
            }
        }, 'Enviar')), m('.w-col.w-col-4')])))]])]);
    }
};

// TODO: Define error pattern that comes from server-side and allow the lib
// to define what fields are coming with errors from the back-end
var generateErrorInstance = function generateErrorInstance() {
    var fields = m.prop([]);
    var submissionError = m.prop(false);
    var submissionErrorMsg = m.prop('');
    var fieldIdxValue = function fieldIdxValue(fieldName, idx, initialValue) {
        return _$1.reduce(fields(), function (memo, field) {
            return field[0] === fieldName ? field[idx] : memo;
        }, initialValue);
    };

    var setError = function setError(fieldName, flag) {
        var updated = _$1.map(fields(), function (field) {
            return field[0] === fieldName ? [field[0], field[1], flag] : field;
        });

        fields(updated);
    };

    var hasError = function hasError(fieldName) {
        return fieldIdxValue(fieldName, 2, false);
    };

    var getErrorMsg = function getErrorMsg(fieldName) {
        return fieldIdxValue(fieldName, 1, '');
    };

    var e = function e(fieldOrArray) {
        var errorMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

        if (Array.isArray(fieldOrArray)) {
            _$1.map(fieldOrArray, function (field) {
                field.push(false);
                return fields().push(field);
            });
        } else {
            fields().push([fieldOrArray, errorMessage, false]);
        }
    };

    e.fields = fields;
    e.setSubmissionError = submissionErrorMsg;
    e.hasSubmissionError = function () {
        return submissionError() === true;
    };
    e.displaySubmissionError = function () {
        if (submissionError()) {
            return m('.card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller', m('.u-marginbottom-10.fontweight-bold', m.trust(submissionErrorMsg())));
        }

        return null;
    };
    e.submissionError = function (flag) {
        if (_$1.isUndefined(flag)) {
            return e.displaySubmissionError();
        }

        submissionError(flag);
    };

    e.hasError = hasError;
    e.inlineError = function (field, flag) {
        if (_$1.isUndefined(flag)) {
            if (hasError(field)) {
                return m(inlineError, { message: getErrorMsg(field) });
            }

            return null;
        }
        setError(field, flag);
    };

    e.resetFieldErrors = function () {
        return _$1.map(fields(), function (field) {
            return field[2] = false;
        });
    };

    e.resetErrors = function () {
        e.resetFieldErrors();
        submissionError(false);
    };

    return e;
};

var e = generateErrorInstance();

var fields = {
    password: m.prop(''),
    current_password: m.prop(''),
    uploaded_image: m.prop(''),
    cover_image: m.prop(''),
    email: m.prop(''),
    permalink: m.prop(''),
    public_name: m.prop(''),
    facebook_link: m.prop(''),
    twitter: m.prop(''),
    links: m.prop([]),
    about_html: m.prop(''),
    email_confirmation: m.prop('')
};

var mapRailsErrors$1 = function mapRailsErrors(rails_errors) {
    var parsedErrors = void 0;
    try {
        parsedErrors = JSON.parse(rails_errors);
    } catch (e) {
        parsedErrors = {};
    }
    var extractAndSetErrorMsg = function extractAndSetErrorMsg(label, fieldArray) {
        var value = _$1.first(_$1.compact(_$1.map(fieldArray, function (field) {
            return _$1.first(parsedErrors[field]);
        })));

        if (value) {
            e(label, value);
            e.inlineError(label, true);
        }
    };

    //extractAndSetErrorMsg("about_html", ["user.about_html", "about_html"]);
    //extractAndSetErrorMsg("public_name", ["user.public_name", "public_name"]);

    return e;
};

var userAboutVM = {
    fields: fields,
    mapRailsErrors: mapRailsErrors$1
};

var projectEditSaveBtn = {
    view: function view(ctrl, args) {
        return m('.w-section.save-draft-btn-section', [m('.w-row', [m('.w-col.w-col-4.w-col-push-4', args.loading() ? h.loader() : [m('input[id="anchor"][name="anchor"][type="hidden"][value="about_me"]'), m('input.btn.btn.btn-large[name="commit"][type="submit"][value="Save"]', {
            onclick: args.onSubmit
        })]), m('.w-col.w-col-4')])]);
    }
};

var userAboutEdit = {
    controller: function controller(args) {
        var parsedErrors = userAboutVM.mapRailsErrors(railsErrorsVM.railsErrors());
        var deleteUser = void 0;
        var user = args.user || {},
            fields = {
            password: m.prop(''),
            current_password: m.prop(''),
            uploaded_image: m.prop(userVM.displayImage(user)),
            cover_image: m.prop(user.profile_cover_image || ''),
            email: m.prop(''),
            permalink: m.prop(user.permalink || ''),
            public_name: m.prop(user.public_name || ''),
            facebook_link: m.prop(user.facebook_link || ''),
            twitter: m.prop(user.twitter_username || ''),
            links: m.prop(user.links || []),
            about_html: m.prop(user.about_html || ''),
            email_confirmation: m.prop('')
        },
            passwordHasError = m.prop(false),
            emailHasError = m.prop(false),
            showEmailForm = h.toggleProp(false, true),
            showSuccess = m.prop(false),
            showError = m.prop(false),
            errors = m.prop(),
            loading = m.prop(false),
            uploading = m.prop(false),
            errorsArray = m.prop([]),
            pushErrosMessage = function pushErrosMessage() {
            errors(errorsArray().join('<br/>'));
        },
            updateFieldsFromUser = function updateFieldsFromUser() {
            userVM.fetchUser(args.userId, false).then(function (dataResponse) {
                var data = _$1.first(dataResponse);
                fields.uploaded_image(userVM.displayImage(data));
                fields.cover_image(data.profile_cover_image);
                fields.permalink(data.permalink);
                fields.public_name(data.public_name);
                fields.facebook_link(data.facebook_link);
                fields.twitter(data.twitter_username);
                fields.links(data.links);
                fields.about_html(data.about_html);
            });
        },
            uploadImage = function uploadImage() {
            var userUploadedImageEl = window.document.getElementById('user_uploaded_image'),
                userCoverImageEl = window.document.getElementById('user_cover_image'),
                formData = new FormData();

            if (userUploadedImageEl.files[0] || !args.hideCoverImg && userCoverImageEl.files[0]) {
                formData.append('uploaded_image', userUploadedImageEl.files[0]);
                if (!args.hideCoverImg) {
                    formData.append('cover_image', userCoverImageEl.files[0]);
                }

                uploading(true);
                m.redraw();

                return m.request({
                    method: 'POST',
                    url: '/users/' + user.id + '/upload_image.json',
                    data: formData,
                    config: h.setCsrfToken,
                    serialize: function serialize(data) {
                        return data;
                    }
                }).then(function (data) {
                    fields.uploaded_image(data.uploaded_image);
                    fields.cover_image(data.cover_image);
                    uploading(false);
                }).catch(function (err) {
                    if (_$1.isArray(err.errors)) {
                        errorsArray(errorsArray().concat(err.errors));
                    } else {
                        errors('Error updating information.');
                    }
                    pushErrosMessage();
                    showError(true);
                    uploading(false);
                });
            }

            return void 0;
        },
            updateUser = function updateUser() {
            var userData = {
                current_password: fields.current_password(),
                password: fields.password(),
                email: fields.email(),
                permalink: fields.permalink(),
                public_name: fields.public_name(),
                facebook_link: fields.facebook_link(),
                twitter: fields.twitter(),
                about_html: fields.about_html(),
                links_attributes: linkAttributes()
            };

            if (args.publishingUserAbout) {
                userData.publishing_user_about = true;
            }

            loading(true);
            m.redraw();
            uploadImage();

            return m.request({
                method: 'PUT',
                url: '/users/' + user.id + '.json',
                data: {
                    user: userData
                },
                config: h.setCsrfToken
            }).then(function () {
                showSuccess(true);
                updateFieldsFromUser();
                loading(false);
                m.redraw();
                railsErrorsVM.validatePublish();
            }).catch(function (err) {
                if (parsedErrors) {
                    parsedErrors.resetFieldErrors();
                }
                parsedErrors = userAboutVM.mapRailsErrors(err.errors_json);
                errors('Error updating information.');

                showError(true);
                loading(false);
                m.redraw();
            });
        },
            removeLinks = [],
            addLink = function addLink() {
            return fields.links().push({
                link: ''
            });
        },
            removeLink = function removeLink(linkId, idx) {
            return function () {
                fields.links()[idx]._destroy = true;
                return false;
            };
        },
            linkAttributes = function linkAttributes() {
            return _$1.reduce(fields.links(), function (memo, item, index) {
                memo[index.toString()] = item;
                return memo;
            }, {});
        },
            validateEmailConfirmation = function validateEmailConfirmation() {
            if (fields.email() !== fields.email_confirmation()) {
                emailHasError(true);
            } else {
                emailHasError(false);
            }
            return !emailHasError();
        },
            validatePassword = function validatePassword() {
            var pass = String(fields.password());
            if (pass.length > 0 && pass.length <= 5) {
                passwordHasError(true);
            }

            return !passwordHasError();
        },
            setDeleteForm = function setDeleteForm(el, isInit) {
            if (!isInit) {
                deleteUser = function deleteUser() {
                    return el.submit();
                };
            }
        },
            deleteAccount = function deleteAccount() {
            if (window.confirm('Are you sure you want to deactivate your account??')) {
                deleteUser();
            }

            return false;
        },
            onSubmit = function onSubmit(e) {
            e.preventDefault();
            if (!validateEmailConfirmation()) {
                errors('Email confirmation is incorrect.');
                showError(true);
            } else if (!validatePassword()) {
                errors('New password is incorrect.');
                showError(true);
            } else {
                updateUser();
            }
            return false;
        };
        // Temporary fix for the menu selection bug. Should be fixed/removed as soon as we route all tabs from mithril.
        setTimeout(m.redraw, 0);

        return {
            removeLinks: removeLinks,
            removeLink: removeLink,
            addLink: addLink,
            fields: fields,
            loading: loading,
            showSuccess: showSuccess,
            showError: showError,
            errors: errors,
            uploading: uploading,
            onSubmit: onSubmit,
            emailHasError: emailHasError,
            showEmailForm: showEmailForm,
            validateEmailConfirmation: validateEmailConfirmation,
            passwordHasError: passwordHasError,
            validatePassword: validatePassword,
            deleteAccount: deleteAccount,
            setDeleteForm: setDeleteForm,
            parsedErrors: parsedErrors
        };
    },
    view: function view(ctrl, args) {
        var user = args.user || {},
            fields = ctrl.fields;

        return m('#about-tab.content', [ctrl.showSuccess() && !ctrl.loading() && !ctrl.uploading() ? m.component(popNotification, {
            message: 'Your information has been updated'
        }) : '', ctrl.showError() && !ctrl.loading() && !ctrl.uploading() ? m.component(popNotification, {
            message: m.trust(ctrl.errors()),
            error: true
        }) : '', m('form.simple_form.w-form', {
            onsubmit: ctrl.onSubmit
        }, [m('input[name="utf8"][type="hidden"][value="✓"]'), m('input[name="_method"][type="hidden"][value="patch"]'), m('input[name="authenticity_token"][type="hidden"][value=' + h.authenticityToken() + ']'), m('div', m('.w-container', m('.w-row', m('.w-col.w-col-10.w-col-push-1', [!user.is_admin ? '' : m('.w-row.u-marginbottom-30.card.card-terciary', [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold', 'Your profile address'), m('label.field-label.fontsize-smallest.fontcolor-secondary', 'Your public profile may have a custom URL. Choose a a name that is easy to remember!    ')]), m('.w-col.w-col-7', m('.w-row', [m('.w-col.w-col-6.w-col-small-6.w-col-tiny-6', m('input.string.optional.w-input.text-field.text-field.positive.prefix[id="user_permalink"][type="text"]', {
            name: 'user[permalink]',
            value: fields.permalink(),
            onchange: m.withAttr('value', fields.permalink)
        })), m('.w-col.w-col-6.w-col-small-6.w-col-tiny-6.text-field.postfix.no-hover', m('.fontcolor-secondary.fontsize-smaller', '  .oppostarter.com'))]))]), m('.w-row.u-marginbottom-30.card.card-terciary', [m('.fontsize-base.fontweight-semibold', 'Email'), m('.fontsize-small.u-marginbottom-30', 'Keep this email up to date as it is the communication channel between you, the OppoStarter team and the team of projects you have supported. '), m('.fontsize-base.u-marginbottom-40', [m('span.fontweight-semibold.card.u-radius', user.email), m('a.alt-link.fontsize-small.u-marginleft-10[href=\'javascript:void(0);\'][id=\'update_email\']', {
            onclick: function onclick() {
                ctrl.showEmailForm.toggle();
            }
        }, 'Change e-mail')]), m((ctrl.showEmailForm() ? '' : '.w-hidden') + '.u-marginbottom-20.w-row[id=\'email_update_form\']', [m('.w-col.w-col-6.w-sub-col', [m('label.field-label.fontweight-semibold', 'New email'), m('input.w-input.text-field.positive[id=\'new_email\'][name=\'new_email\'][type=\'email\']', {
            class: ctrl.emailHasError() ? 'error' : '',
            value: fields.email(),
            onfocus: function onfocus() {
                return ctrl.emailHasError(false);
            },
            onchange: m.withAttr('value', fields.email)
        })]), m('.w-col.w-col-6', [m('label.field-label.fontweight-semibold', 'Confirm new email'), m('input.string.required.w-input.text-field.w-input.text-field.positive[id=\'new_email_confirmation\'][name=\'user[email]\'][type=\'text\']', {
            class: ctrl.emailHasError() ? 'error' : '',
            value: fields.email_confirmation(),
            onfocus: function onfocus() {
                return ctrl.emailHasError(false);
            },
            onblur: ctrl.validateEmailConfirmation,
            onchange: m.withAttr('value', fields.email_confirmation)
        })]), ctrl.emailHasError() ? m(inlineError, {
            message: 'Email confirmation is incorrect.'
        }) : ''])]), m('.w-row.u-marginbottom-30.card.card-terciary', [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold', '  Name in public profile'), m('label.field-label.fontsize-smallest.fontcolor-secondary', 'This is the name that users will see on your profile.')]), m('.w-col.w-col-7', m('input.string.optional.w-input.text-field.positive[id="user_public_name"][type="text"]', {
            name: 'user[public_name]',
            class: ctrl.parsedErrors.hasError('public_name') ? 'error' : false,
            value: fields.public_name(),
            onchange: m.withAttr('value', fields.public_name)
        }), ctrl.parsedErrors.inlineError('public_name'))]), m('.w-form', [m('.w-row.u-marginbottom-30.card.card-terciary', [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold', '  Profile picture'), m('label.field-label.fontsize-smallest.fontcolor-secondary', '  This image will be used as the thumbnail of your profile (PNG, JPG size 280 x 280)')]), m('.w-col.w-col-4.w-sub-col', m('.input.file.optional.user_uploaded_image.field_with_hint', [m('label.field-label'), m('span.hint', m('img[alt="User avatar"][src="' + fields.uploaded_image() + '"]')), m('input.file.optional.w-input.text-field[id="user_uploaded_image"][type="file"]', {
            name: 'user[uploaded_image]',
            class: ctrl.parsedErrors.hasError('uploaded_image') ? 'error' : false
        }), ctrl.parsedErrors.inlineError('uploaded_image')]))]), args.hideCoverImg ? '' : m('.w-row.u-marginbottom-30.card.card-terciary', [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold', '  Profile Cover Image'), m('label.field-label.fontsize-smallest.fontcolor-secondary', '  This image will be used as the background of your public profile header (PNG or JPG). If you do not submit any images here, we will use your profile image as an alternative.')]), m('.w-col.w-col-4.w-sub-col', m('.input.file.optional.user_cover_image', [m('label.field-label'), m('span.hint', user.profile_cover_image ? m('img', {
            src: fields.cover_image()
        }) : ''), m('input.file.optional.w-input.text-field[id="user_cover_image"][type="file"]', {
            name: 'user[cover_image]'
        })]))])]), m('.w-row', m('.w-col', m('.card.card-terciary.u-marginbottom-30', [m('label.field-label.fontweight-semibold', 'About'), m('label.field-label.fontsize-smallest.fontcolor-secondary.u-marginbottom-20', 'Talk about yourself and try to provide the most relevant information so visitors can get to know you better.. '), m('.w-form', m('.preview-container.u-marginbottom-40', {
            class: ctrl.parsedErrors.hasError('about_html') ? 'error' : false
        }, h.redactor('user[about_html]', fields.about_html)), ctrl.parsedErrors.inlineError('about_html'))]))), m('.w-form.card.card-terciary.u-marginbottom-30', [m('.w-row.u-marginbottom-10', [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold', '  Facebook profile'), m('label.field-label.fontsize-smallest.fontcolor-secondary', '  Paste your profile link')]), m('.w-col.w-col-7', m('input.string.optional.w-input.text-field.positive[type="text"]', {
            name: 'user[facebook_link]',
            value: fields.facebook_link(),
            onchange: m.withAttr('value', fields.facebook_link)
        }))]), m('.w-row.u-marginbottom-10', [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold', '  Twitter profile'), m('label.field-label.fontsize-smallest.fontcolor-secondary', '  Paste your profile link')]), m('.w-col.w-col-7', m('input.string.optional.w-input.text-field.positive[type="text"]', {
            name: 'user[twitter]',
            value: fields.twitter(),
            onchange: m.withAttr('value', fields.twitter)
        }))])]), m('.w-form.card.card-terciary.u-marginbottom-30', m('.w-row.u-marginbottom-10', [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold[for="name-8"]', ' Presence on the internet'), m('label.field-label.fontsize-smallest.fontcolor-secondary[for="name-8"]', ' Include links to help other users get to know you better. ')]), m('.w-col.w-col-7', [m('.w-row', [fields.links() && fields.links().length <= 0 ? '' : m('.link', _$1.map(fields.links(), function (link, idx) {
            var toRemove = link._destroy;

            return m('div', {
                key: idx,
                class: toRemove ? 'w-hidden' : 'none'
            }, [m('.w-col.w-col-10.w-col-small-10.w-col-tiny-10', m('input.string.w-input.text-field.w-input.text-field][type="text"][value="' + link.link + '"]', {
                class: link.link === '' ? 'positive' : 'optional',
                name: 'user[links_attributes][' + idx + '][link]',
                onchange: m.withAttr('value', function (val) {
                    return fields.links()[idx].link = val;
                })
            })), m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2', [m('a.btn.btn-small.btn-terciary.fa.fa-lg.fa-trash.btn-no-border', {
                onclick: ctrl.removeLink(link.id, idx)
            })])]);
        }))]), m('.w-row', [m('.w-col.w-col-6.w-col-push-6', m('a.btn.btn-small.btn-terciary', {
            onclick: ctrl.addLink
        }, m('span.translation_missing', 'Add Link')))])])])), args.hidePasswordChange ? '' : m('.w-form.card.card-terciary.u-marginbottom-30', m('.w-row.u-marginbottom-10', [m('.fontsize-base.fontweight-semibold', 'Change my password'), m('.fontsize-small.u-marginbottom-20', 'In order for the password to be changed you need to confirm your current password.'), m('.w-row.u-marginbottom-20', [m('.w-col.w-col-6.w-sub-col', [m('label.field-label.fontweight-semibold', ' Senha atual'), m('input.password.optional.w-input.text-field.w-input.text-field.positive[id=\'user_current_password\'][name=\'user[current_password]\'][type=\'password\']', {
            value: fields.current_password(),
            onchange: m.withAttr('value', fields.current_password)
        })]), m('.w-col.w-col-6', [m('label.field-label.fontweight-semibold', ' New password'), m('input.password.optional.w-input.text-field.w-input.text-field.positive[id=\'user_password\'][name=\'user[password]\'][type=\'password\']', {
            class: ctrl.passwordHasError() ? 'error' : '',
            value: fields.password(),
            onfocus: function onfocus() {
                return ctrl.passwordHasError(false);
            },
            onblur: ctrl.validatePassword,
            onchange: m.withAttr('value', fields.password)
        }), !ctrl.passwordHasError() ? '' : m(inlineError, {
            message: 'Your new password must be at least 6 characters.'
        })])])])), args.hideDisableAcc || user.total_published_projects > 0 ? '' : m('.w-form.card.card-terciary.u-marginbottom-30', m('.w-row.u-marginbottom-10', [m('.fontweight-semibold.fontsize-smaller', 'Deactivate my account'), m('.fontsize-smallest', 'All your support will be converted into anonymous backups, your data will no longer be visible, you will automatically exit the system and your account will be permanently disabled.'), m('a.alt-link.fontsize-smaller[href=\'/en/users/' + user.id + '\'][rel=\'nofollow\']', {
            onclick: ctrl.deleteAccount
        }, 'Deactivate my OppoStarter account'), m('form.w-hidden', {
            action: '/en/users/' + user.id,
            method: 'post',
            config: ctrl.setDeleteForm
        }, [m('input[name=\'authenticity_token\'][type=\'hidden\'][value=\'' + h.authenticityToken() + '\']'), m('input[name=\'_method\'][type=\'hidden\'][value=\'delete\']')])]))]))), m(projectEditSaveBtn, {
            loading: ctrl.loading,
            onSubmit: ctrl.onSubmit
        }))])]);
    }
};

var I18nScope$32 = _$1.partial(h.i18nScope, 'users.show.contributions');

var userContributedList = {
    controller: function controller(args) {
        var title = args.title,
            hideSurveys = args.hideSurveys;
        return {
            hideSurveys: hideSurveys,
            title: title
        };
    },
    view: function view(ctrl, args) {
        var collection = args.collection,
            pagination = args.pagination,
            hideSurveys = ctrl.hideSurveys,
            title = ctrl.title;

        return !_$1.isEmpty(collection) ? m('div', [m('.section-one-column.u-marginbottom-30', m('.w-container', [m('.fontsize-larger.fontweight-semibold.u-marginbottom-30.u-text-center', title), m('.card.card-secondary.w-hidden-small.w-hidden-tiny.w-row', [m('.w-col.w-col-3', m('.fontsize-small.fontweight-semibold', I18n$1.t('project_col', I18nScope$32()))), m('.w-col.w-col-3', m('.fontsize-small.fontweight-semibold', I18n$1.t('contribution_col', I18nScope$32()))), m('.w-col.w-col-3', m('.fontsize-small.fontweight-semibold', I18n$1.t('reward_col', I18nScope$32()))), m('.w-col.w-col-1'), !hideSurveys ? m('.w-col.w-col-2', m('.fontsize-small.fontweight-semibold', I18n$1.t('survey_col', I18nScope$32()))) : '']), _$1.map(collection, function (contribution) {
            return m(userContributedBox, {
                contribution: contribution
            });
        }), m('.w-row.u-marginbottom-40.u-margintop-30', [m(loadMoreBtn, {
            collection: pagination,
            cssClass: '.w-col-push-4'
        })])])), m('.divider.u-marginbottom-80.u-margintop-80')]) : m('div', '');
    }
};

var userPrivateContributed = {
    controller: function controller(args) {
        var user_id = args.userId,
            onlinePages = postgrest$1.paginationVM(models.userContribution),
            successfulPages = postgrest$1.paginationVM(models.userContribution),
            failedPages = postgrest$1.paginationVM(models.userContribution),
            error = m.prop(false),
            loader = m.prop(true),
            handleError = function handleError() {
            error(true);
            loader(false);
            m.redraw();
        },
            contextVM = postgrest$1.filtersVM({
            user_id: 'eq',
            state: 'in',
            project_state: 'in'
        });

        models.userContribution.pageSize(9);
        contextVM.user_id(user_id).order({
            created_at: 'desc'
        }).state(['refunded', 'pending_refund', 'paid', 'refused', 'pending']);

        contextVM.project_state(['online', 'waiting_funds']);
        onlinePages.firstPage(contextVM.parameters()).then(function () {
            loader(false);
        }).catch(handleError);

        contextVM.project_state(['failed']);
        failedPages.firstPage(contextVM.parameters()).then(function () {
            loader(false);
        }).catch(handleError);

        contextVM.project_state(['successful']).state(['paid', 'refunded', 'pending_refund']);
        successfulPages.firstPage(contextVM.parameters()).then(function () {
            loader(false);
        }).catch(handleError);

        return {
            onlinePages: onlinePages,
            successfulPages: successfulPages,
            failedPages: failedPages,
            error: error,
            loader: loader
        };
    },
    view: function view(ctrl, args) {
        var onlineCollection = ctrl.onlinePages.collection(),
            successfulCollection = ctrl.successfulPages.collection(),
            failedCollection = ctrl.failedPages.collection();

        return m('.content[id=\'private-contributed-tab\']', ctrl.error() ? m.component(inlineError, {
            message: 'Error loading projects.'
        }) : ctrl.loader() ? h.loader() : _$1.isEmpty(onlineCollection) && _$1.isEmpty(successfulCollection) && _$1.isEmpty(failedCollection) ? m('.w-container', m('.w-row.u-margintop-30.u-text-center', [m('.w-col.w-col-3'), m('.w-col.w-col-6', [m('.fontsize-large.u-marginbottom-30', ['You have not yet supported any', m.trust('&nbsp;'), 'OppoStarter...']), m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', m('a.btn.btn-large[href=\'/en/explore\']', {
            config: m.route,
            onclick: function onclick() {
                m.route('/explore');
            }
        }, 'Apoie agora!')), m('.w-col.w-col-3')])]), m('.w-col.w-col-3')])) : [m.component(userContributedList, {
            title: 'Projects in progress',
            collection: onlineCollection,
            pagination: ctrl.onlinePages
        }), m.component(userContributedList, {
            title: 'Successful Projects',
            collection: successfulCollection,
            pagination: ctrl.successfulPages
        }), m.component(userContributedList, {
            title: 'Non-funded projects',
            collection: failedCollection,
            pagination: ctrl.failedPages,
            hideSurveys: true
        })]);
    }
};

var bigCard = {
    view: function view(ctrl, args) {
        var cardClass = '.card.medium.card-terciary.u-marginbottom-30';

        return m(cardClass, [m('div.u-marginbottom-30', [m('label.fontweight-semibold.fontsize-base', args.label), args.label_hint ? m('.fontsize-small', args.label_hint) : '']), m('div', args.children)]);
    }
};

var e$1 = generateErrorInstance();

var fields$1 = {
    owner_document: m.prop(''),
    country_id: m.prop(''),
    street: m.prop(''),
    number: m.prop(''),
    city: m.prop(''),
    zipcode: m.prop(''),
    complement: m.prop(''),
    neighbourhood: m.prop(''),
    state: m.prop(''),
    phonenumber: m.prop(''),
    name: m.prop(''),
    agency: m.prop(''),
    bank_id: m.prop(''),
    agency_digit: m.prop(''),
    account: m.prop(''),
    account_digit: m.prop(''),
    bank_account_id: m.prop(''),
    state_inscription: m.prop(''),
    birth_date: m.prop(''),
    account_type: m.prop(''),
    bank_account_type: m.prop('')
};

var mapRailsErrors$2 = function mapRailsErrors(rails_errors) {
    var parsedErrors = void 0;
    try {
        parsedErrors = JSON.parse(rails_errors);
    } catch (e) {
        parsedErrors = {};
    }
    var extractAndSetErrorMsg = function extractAndSetErrorMsg(label, fieldArray) {
        var value = _$1.first(_$1.compact(_$1.map(fieldArray, function (field) {
            return _$1.first(parsedErrors[field]);
        })));

        if (value) {
            e$1(label, value);
            e$1.inlineError(label, true);
        }
    };

    extractAndSetErrorMsg("owner_document", ["user.cpf", "cpf"]);
    extractAndSetErrorMsg("country_id", ["user.country_id", "country_id"]);
    extractAndSetErrorMsg("street", ["user.address_street", "address_street"]);
    extractAndSetErrorMsg("number", ["user.address_number", "address_number"]);
    extractAndSetErrorMsg("city", ["user.address_city", "address_city"]);
    extractAndSetErrorMsg("zipcode", ["user.address_zip_code", "address_zip_code"]);
    extractAndSetErrorMsg("complement", ["user.address_complement", "address_complement"]);
    extractAndSetErrorMsg("neighbourhood", ["user.address_neighbourhood", "address_neighbourhood"]);
    extractAndSetErrorMsg("state", ["user.address_state", "address_state"]);
    extractAndSetErrorMsg("phonenumber", ["user.phone_number", "phone_number"]);
    extractAndSetErrorMsg("name", ["user.name", "name"]);
    extractAndSetErrorMsg("agency", ["user.bank_account.agency", "bank_account.agency"]);
    extractAndSetErrorMsg("agency_digit", ["user.bank_account.agency_digit", "bank_account.agency_digit"]);
    extractAndSetErrorMsg("account", ["user.bank_account.account", "bank_account.account"]);
    extractAndSetErrorMsg("account_digit", ["user.bank_account.account_digit", "bank_account.account_digit"]);
    extractAndSetErrorMsg("bank_account_type", ["user.bank_account.account_type", "bank_account.account_type"]);
    extractAndSetErrorMsg("bank_id", ["user.bank_account.bank", "bank_account.bank"]);
    extractAndSetErrorMsg("birth_date", ["user.birth_date", "birth_date"]);
    extractAndSetErrorMsg("account_type", ["user.account_type", "account_type"]);

    return e$1;
};

var userSettingsVM = {
    fields: fields$1,
    mapRailsErrors: mapRailsErrors$2
};

var I18nScope$33 = _$1.partial(h.i18nScope, 'users.edit.settings_tab');

var userSettings = {
    controller: function controller(args) {
        var parsedErrors = userSettingsVM.mapRailsErrors(railsErrorsVM.railsErrors());
        var deleteFormSubmit = void 0;
        var user = args.user,
            fields = m.prop({
            owner_document: m.prop(user.owner_document || ''),
            name: m.prop(user.name || ''),
            state_inscription: m.prop(''),
            address: m.prop(user.address || {}),
            birth_date: m.prop(user.birth_date ? h.momentify(user.birth_date) : ''),
            account_type: m.prop(user.account_type || '')
        }),
            loading = m.prop(false),
            user_id = args.userId,
            error = m.prop(''),
            loader = m.prop(true),
            showSuccess = h.toggleProp(false, true),
            showError = h.toggleProp(false, true),
            documentMask = _$1.partial(h.mask, '999.999.999-99'),
            documentCompanyMask = _$1.partial(h.mask, '99.999.999/9999-99'),
            birthDayMask = _$1.partial(h.mask, '99/99/9999'),
            creditCards = m.prop(),
            toDeleteCard = m.prop(-1),
            deleteCard = function deleteCard(id) {
            return function () {
                toDeleteCard(id);
                // We must redraw here to update the action output of the hidden form on the DOM.
                m.redraw(true);
                deleteFormSubmit();
                return false;
            };
        },
            setCardDeletionForm = function setCardDeletionForm(el, isInit) {
            if (!isInit) {
                deleteFormSubmit = function deleteFormSubmit() {
                    return el.submit();
                };
            }
        },
            updateUserData = function updateUserData() {
            var userData = {
                cpf: fields().owner_document(),
                name: fields().name(),
                address_attributes: fields().address(),
                account_type: fields().account_type(),
                birth_date: fields().birth_date()
            };

            if (args.publishingUserSettings) {
                userData.publishing_user_settings = true;
            }

            return m.request({
                method: 'PUT',
                url: '/users/' + user_id + '.json',
                data: {
                    user: userData
                },
                config: h.setCsrfToken
            }).then(function () {
                if (parsedErrors) {
                    parsedErrors.resetFieldErrors();
                }
                loading(false);
                if (!showSuccess()) {
                    showSuccess.toggle();
                }
                railsErrorsVM.validatePublish();
            }).catch(function (err) {
                if (parsedErrors) {
                    parsedErrors.resetFieldErrors();
                }
                parsedErrors = userSettingsVM.mapRailsErrors(err.errors_json);
                error('Error updating information.');
                loading(false);
                if (showSuccess()) {
                    showSuccess.toggle();
                }
                if (!showError()) {
                    showError.toggle();
                }
            });
        },
            onSubmit = function onSubmit() {
            loading(true);
            m.redraw();
            updateUserData();
            return false;
        },
            applyBirthDateMask = _$1.compose(fields().birth_date, birthDayMask),
            applyDocumentMask = function applyDocumentMask(value) {
            if (fields().account_type() != 'pf') {
                fields().owner_document(documentCompanyMask(value));
            } else {
                fields().owner_document(documentMask(value));
            }
        },
            handleError = function handleError() {
            error(true);
            loader(false);
            m.redraw();
        };

        userVM.getUserCreditCards(args.userId).then(creditCards).catch(handleError);
        if (parsedErrors.hasError('country_id')) {
            parsedErrors.inlineError('country_id', false);
        }

        return {
            handleError: handleError,
            applyDocumentMask: applyDocumentMask,
            fields: fields,
            loader: loader,
            showSuccess: showSuccess,
            showError: showError,
            user: user,
            onSubmit: onSubmit,
            error: error,
            creditCards: creditCards,
            deleteCard: deleteCard,
            toDeleteCard: toDeleteCard,
            setCardDeletionForm: setCardDeletionForm,
            applyBirthDateMask: applyBirthDateMask,
            loading: loading,
            parsedErrors: parsedErrors
        };
    },
    view: function view(ctrl, args) {
        var user = ctrl.user,
            fields = ctrl.fields(),
            hasContributedOrPublished = user.total_contributed_projects >= 1 || user.total_published_projects >= 1,
            disableFields = user.is_admin_role ? false : hasContributedOrPublished && !_$1.isEmpty(user.name) && !_$1.isEmpty(user.owner_document);

        return m('[id=\'settings-tab\']', [ctrl.showSuccess() ? m.component(popNotification, {
            message: I18n$1.t('update_success_msg', I18nScope$33()),
            toggleOpt: ctrl.showSuccess
        }) : '', ctrl.showError() ? m.component(popNotification, {
            message: m.trust(ctrl.error()),
            toggleOpt: ctrl.showError,
            error: true
        }) : '', m('form.w-form', {
            onsubmit: ctrl.onSubmit
        }, [m('div', [m('.w-container', m('.w-col.w-col-10.w-col-push-1',
        // ( _.isEmpty(fields.name()) && _.isEmpty(fields.owner_document()) ? '' : m(UserOwnerBox, {user: user}) ),

        m(bigCard, {
            label: I18n$1.t('legal_title', I18nScope$33()),
            label_hint: m.trust(I18n$1.t('legal_subtitle', I18nScope$33())),
            children: [m('.divider.u-marginbottom-20'), m('.w-row', [m('.w-col.w-col-6.w-sub-col', m('.input.select.required.user_bank_account_bank_id', [m('select.select.required.w-input.text-field.bank-select.positive' + (disableFields ? '.text-field-disabled' : '') + '[id=\'user_bank_account_attributes_bank_id\']', {
                name: 'user[bank_account_attributes][bank_id]',
                onchange: m.withAttr('value', fields.account_type),
                disabled: disableFields
            }, [m('option[value=\'pf\']', {
                selected: fields.account_type() === 'pf'
            }, I18n$1.t('account_types.pf', I18nScope$33())), m('option[value=\'pj\']', {
                selected: fields.account_type() === 'pj'
            }, I18n$1.t('account_types.pj', I18nScope$33())), m('option[value=\'mei\']', {
                selected: fields.account_type() === 'mei'
            }, I18n$1.t('account_types.mei', I18nScope$33()))])]))]), m('.w-row', [m('.w-col.w-col-6.w-sub-col', [m('label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for=\'user_bank_account_attributes_owner_name\']', I18n$1.t(fields.account_type() == 'pf' ? 'pf_label_name' : 'pj_label_name', I18nScope$33())), m('input.string.required.w-input.text-field.positive' + (disableFields ? '.text-field-disabled' : '') + '[id=\'user_bank_account_attributes_owner_name\'][type=\'text\']', {
                value: fields.name(),
                name: 'user[name]',
                class: ctrl.parsedErrors.hasError('name') ? 'error' : false,
                onchange: m.withAttr('value', fields.name),
                disabled: disableFields
            }), ctrl.parsedErrors.inlineError('name')]), m('.w-col.w-col-6', [m('.w-row', [m('.w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle', [m('label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for=\'user_bank_account_attributes_owner_document\']', I18n$1.t(fields.account_type() == 'pf' ? 'pf_label_document' : 'pj_label_document', I18nScope$33())), m('input.string.tel.required.w-input.text-field.positive' + (disableFields ? '.text-field-disabled' : '') + '[data-validate-cpf-cnpj=\'true\'][id=\'user_bank_account_attributes_owner_document\'][type=\'tel\'][validation_text=\'true\']', {
                value: fields.owner_document(),
                class: ctrl.parsedErrors.hasError('owner_document') ? 'error' : false,
                disabled: disableFields,
                name: 'user[cpf]',
                onchange: m.withAttr('value', ctrl.applyDocumentMask),
                onkeyup: m.withAttr('value', ctrl.applyDocumentMask)
            }), ctrl.parsedErrors.inlineError('owner_document')]), m('.w-col.w-col-6.w-col-small-6.w-col-tiny-6', fields.account_type() == 'pf' ? [m('label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for=\'user_bank_account_attributes_owner_document\']', I18n$1.t('label_birth_date', I18nScope$33())), m('input.string.tel.required.w-input.text-field.positive' + (disableFields && !_$1.isEmpty(user.birth_date) ? '.text-field-disabled' : '') + '[data-validate-cpf-cnpj=\'true\'][id=\'user_bank_account_attributes_owner_document\'][type=\'tel\'][validation_text=\'true\']', {
                value: fields.birth_date(),
                name: 'user[birth_date]',
                class: ctrl.parsedErrors.hasError('birth_date') ? 'error' : false,
                disabled: disableFields && !_$1.isEmpty(user.birth_date),
                onchange: m.withAttr('value', ctrl.applyBirthDateMask),
                onkeyup: m.withAttr('value', ctrl.applyBirthDateMask)
            }), ctrl.parsedErrors.inlineError('birth_date')] : [m('label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for=\'user_bank_account_attributes_owner_document\']', I18n$1.t('label_state_inscription', I18nScope$33())), m('input.string.tel.required.w-input.text-field.positive[data-validate-cpf-cnpj=\'true\'][id=\'user_bank_account_attributes_owner_document\'][type=\'tel\'][validation_text=\'true\']', {
                value: fields.state_inscription(),
                class: ctrl.parsedErrors.hasError('state_inscription') ? 'error' : false,
                name: 'user[state_inscription]',
                onchange: m.withAttr('value', fields.state_inscription)
            }), ctrl.parsedErrors.inlineError('state_inscription')])])])])]
        }), m(bigCard, {
            label: I18n$1.t('address_title', I18nScope$33()),
            label_hint: I18n$1.t('address_subtitle', I18nScope$33()),
            children: [m('.divider.u-marginbottom-20'), m(addressForm, {
                fields: ctrl.fields,
                parsedErrors: ctrl.parsedErrors
            })]
        }), args.hideCreditCards ? '' : m('.w-form.card.card-terciary.u-marginbottom-20', [m('.fontsize-base.fontweight-semibold', I18n$1.t('credit_cards.title', I18nScope$33())), m('.fontsize-small.u-marginbottom-20', m.trust(I18n$1.t('credit_cards.subtitle', I18nScope$33()))), m('.divider.u-marginbottom-20'), m('.w-row.w-hidden-tiny.card', [m('.w-col.w-col-5.w-col-small-5', m('.fontsize-small.fontweight-semibold', I18n$1.t('credit_cards.card_label', I18nScope$33()))), m('.w-col.w-col-5.w-col-small-5', m('.fontweight-semibold.fontsize-small', I18n$1.t('credit_cards.provider_label', I18nScope$33()))), m('.w-col.w-col-2.w-col-small-2')]), _$1.map(ctrl.creditCards(), function (card) {
            return m('.w-row.card', [m('.w-col.w-col-5.w-col-small-5', m('.fontsize-small.fontweight-semibold', ['XXXX XXXX XXXX', m.trust('&nbsp;'), card.last_digits])), m('.w-col.w-col-5.w-col-small-5', m('.fontsize-small.fontweight-semibold.u-marginbottom-10', card.card_brand.toUpperCase())), m('.w-col.w-col-2.w-col-small-2', m('a.btn.btn-terciary.btn-small[rel=\'nofollow\']', {
                onclick: ctrl.deleteCard(card.id)
            }, I18n$1.t('credit_cards.remove_label', I18nScope$33())))]);
        }), m('form.w-hidden', {
            action: '/en/users/' + user.id + '/credit_cards/' + ctrl.toDeleteCard(),
            method: 'POST',
            config: ctrl.setCardDeletionForm
        }, [m('input[name=\'utf8\'][type=\'hidden\'][value=\'✓\']'), m('input[name=\'_method\'][type=\'hidden\'][value=\'delete\']'), m('input[name=\'authenticity_token\'][type=\'hidden\'][value=\'' + h.authenticityToken() + '\']')])]))), m(projectEditSaveBtn, {
            loading: ctrl.loading,
            onSubmit: ctrl.onSubmit
        })])])]);
    }
};

var I18nScope$34 = _$1.partial(h.i18nScope, 'users.edit.notifications_fields');
var userNotifications = {
    controller: function controller(args) {
        var contributedProjects = m.prop(),
            projectReminders = m.prop(),
            mailMarketingLists = m.prop(),
            user_id = args.userId,
            showNotifications = h.toggleProp(false, true),
            error = m.prop(false);

        userVM.getUserProjectReminders(user_id).then(projectReminders).catch(function (err) {
            error(true);
            m.redraw();
        });

        userVM.getMailMarketingLists().then(function (data) {
            mailMarketingLists(generateListHandler(data));
        }).catch(function (err) {
            error(true);
            m.redraw();
        });

        userVM.getUserContributedProjects(user_id, null).then(contributedProjects).catch(function (err) {
            error(true);
            m.redraw();
        });

        var generateListHandler = function generateListHandler(list) {
            var user_lists = args.user.mail_marketing_lists;
            return _$1.map(list, function (item, i) {
                var user_signed = !_$1.isEmpty(user_lists) && !_$1.isUndefined(_$1.find(user_lists, function (userList) {
                    return userList.marketing_list ? userList.marketing_list.list_id === item.list_id : false;
                }));
                var handler = {
                    item: item,
                    in_list: user_signed,
                    should_insert: m.prop(false),
                    should_destroy: m.prop(false),
                    isInsertInListState: h.toggleProp(false, true),
                    hovering: m.prop(false)
                };
                handler.isInsertInListState(!handler.in_list);
                return handler;
            });
        };

        var getUserMarketingListId = function getUserMarketingListId(list) {
            var currentList = _$1.find(args.user.mail_marketing_lists, function (userList) {
                return userList.marketing_list.list_id === list.list_id;
            });

            return currentList ? currentList['user_marketing_list_id'] : null;
        };

        var isOnCurrentList = function isOnCurrentList(userLists, currentList) {
            return Boolean(_$1.find(userLists, function (userList) {
                if (userList.marketing_list) {
                    return userList.marketing_list.list_id === currentList.list_id;
                }

                return false;
            }));
        };

        return {
            projects: contributedProjects,
            mailMarketingLists: mailMarketingLists,
            showNotifications: showNotifications,
            projectReminders: projectReminders,
            error: error,
            generateListHandler: generateListHandler,
            getUserMarketingListId: getUserMarketingListId,
            isOnCurrentList: isOnCurrentList
        };
    },
    view: function view(ctrl, args) {
        var user = args.user,
            reminders = ctrl.projectReminders(),
            projects_collection = ctrl.projects(),
            marketing_lists = ctrl.mailMarketingLists();

        return m('[id=\'notifications-tab\']', ctrl.error() ? m.component(inlineError, {
            message: 'Error loading page.'
        }) : m('form.simple_form.edit_user[accept-charset=\'UTF-8\'][action=\'/en/users/' + user.id + '\'][method=\'post\'][novalidate=\'novalidate\']', [m('input[name=\'utf8\'][type=\'hidden\'][value=\'✓\']'), m('input[name=\'_method\'][type=\'hidden\'][value=\'patch\']'), m('input[name=\'authenticity_token\'][type=\'hidden\'][value=\'' + h.authenticityToken() + '\']'), m('input[id=\'anchor\'][name=\'anchor\'][type=\'hidden\'][value=\'notifications\']'), m('.w-container', [m('.w-row', m('.w-col.w-col-10.w-col-push-1', m('.w-form.card.card-terciary', [m('.w-row.u-marginbottom-20', [m('.w-col.w-col-4', m('.fontweight-semibold.fontsize-small.u-marginbottom-10', 'Newsletters:')), m('.w-col.w-col-8', _$1.isEmpty(marketing_lists) ? h.loader() : _$1.map(marketing_lists, function (_item, i) {
            var item = _item.item;

            return m('.card.u-marginbottom-20.u-radius.u-text-center-small-only', m('.w-row', [m('.w-sub-col.w-col.w-col-6', m('img', {
                src: I18n$1.t('newsletters.' + item.list_id + '.image_src', I18nScope$34())
            })), m('.w-col.w-col-6', [m('.fontsize-base.fontweight-semibold', I18n$1.t('newsletters.' + item.list_id + '.title', I18nScope$34())), m('.fontsize-small.u-marginbottom-30', I18n$1.t('newsletters.' + item.list_id + '.description', I18nScope$34())), _item.should_insert() || _item.should_destroy() ? m('input[type=\'hidden\']', { name: 'user[mail_marketing_users_attributes][' + i + '][mail_marketing_list_id]', value: item.id }) : '', _item.should_destroy() ? m('input[type=\'hidden\']', { name: 'user[mail_marketing_users_attributes][' + i + '][id]', value: ctrl.getUserMarketingListId(item) }) : '', _item.should_destroy() ? m('input[type=\'hidden\']', { name: 'user[mail_marketing_users_attributes][' + i + '][_destroy]', value: _item.should_destroy() }) : '', m('button.btn.btn-medium.w-button', {
                class: !_item.isInsertInListState() ? 'btn-terciary' : null,
                onclick: function onclick(event) {
                    // If user already has this list, click should enable destroy state
                    if (ctrl.isOnCurrentList(user.mail_marketing_lists, item)) {
                        _item.should_destroy(true);

                        return;
                    }
                    _item.should_insert(true);
                },
                onmouseenter: function onmouseenter() {
                    _item.hovering(true);
                },
                onmouseout: function onmouseout() {
                    _item.hovering(false);
                }
            }, _item.in_list ? _item.hovering() ? 'Describe' : 'Signed' : 'Sign')])]));
        }))]), m('.w-row.u-marginbottom-20', [m('.w-col.w-col-4', m('.fontweight-semibold.fontsize-small.u-marginbottom-10', 'Projects you have supported:')), m('.w-col.w-col-8', m('.w-checkbox.w-clearfix', [m('input[name=user[subscribed_to_project_posts]][type=\'hidden\'][value=\'0\']'), m('input.w-checkbox-input' + (user.subscribed_to_project_posts ? '[checked=\'checked\']' : '') + '[id=\'user_subscribed_to_project_posts\'][name=user[subscribed_to_project_posts]][type=\'checkbox\'][value=\'1\']'), m('label.w-form-label.fontsize-base.fontweight-semibold', ' I want to receive project updates'), m('.u-marginbottom-20', m('a.alt-link[href=\'javascript:void(0);\']', {
            onclick: ctrl.showNotifications.toggle
        }, ' Manage notifications from ' + user.total_contributed_projects + ' projects')), ctrl.showNotifications() ? m('ul.w-list-unstyled.u-radius.card.card-secondary[id=\'notifications-box\']', [!_$1.isEmpty(projects_collection) ? _$1.map(projects_collection, function (project) {
            return m('li', m('.w-checkbox.w-clearfix', [m('input[id=\'unsubscribes_' + project.project_id + '\'][type=\'hidden\'][value=\'\']', {
                name: 'unsubscribes[' + project.project_id + ']'
            }), m('input.w-checkbox-input' + (project.unsubscribed ? '' : '[checked=\'checked\']') + '[type=\'checkbox\'][value=\'1\'][id=\'user_unsubscribes_' + project.project_id + '\']', {
                name: 'unsubscribes[' + project.project_id + ']'
            }), m('label.w-form-label.fontsize-small', project.project_name)]));
        }) : '']) : '']))]), m('.w-row.u-marginbottom-20', [m('.w-col.w-col-4', m('.fontweight-semibold.fontsize-small.u-marginbottom-10', 'Social:')), m('.w-col.w-col-8', m('.w-checkbox.w-clearfix', [m('input[name=user[subscribed_to_friends_contributions]][type=\'hidden\'][value=\'0\']'), m('input.w-checkbox-input' + (user.subscribed_to_friends_contributions ? '[checked=\'checked\']' : '') + '[id=\'user_subscribed_to_friends_contributions\'][name=user[subscribed_to_friends_contributions]][type=\'checkbox\'][value=\'1\']'), m('label.w-form-label.fontsize-small', 'A friend supported or launched a project')])), m('.w-col.w-col-8', m('.w-checkbox.w-clearfix', [m('input[name=user[subscribed_to_new_followers]][type=\'hidden\'][value=\'0\']'), m('input.w-checkbox-input' + (user.subscribed_to_new_followers ? '[checked=\'checked\']' : '') + '[id=\'user_subscribed_to_new_followers\'][name=user[subscribed_to_new_followers]][type=\'checkbox\'][value=\'1\']'), m('label.w-form-label.fontsize-small', 'A friend started to follow me.')]))]), m('.w-row.u-marginbottom-20', [m('.w-col.w-col-4', m('.fontweight-semibold.fontsize-small.u-marginbottom-10', 'Project Reminders:')), m('.w-col.w-col-8', [!_$1.isEmpty(reminders) ? _$1.map(reminders, function (reminder) {
            return m('.w-checkbox.w-clearfix', [m('input[id=\'user_reminders_' + reminder.project_id + '\'][type=\'hidden\'][value=\'false\']', {
                name: 'user[reminders][' + reminder.project_id + ']'
            }), m('input.w-checkbox-input[checked=\'checked\'][type=\'checkbox\'][value=\'1\'][id=\'user_reminders_' + reminder.project_id + '\']', {
                name: 'user[reminders][' + reminder.project_id + ']'
            }), m('label.w-form-label.fontsize-small', reminder.project_name)]);
        }) : ''])])]))), m('.u-margintop-30', m('.w-container', m('.w-row', m('.w-col.w-col-4.w-col-push-4', m('input.btn.btn-large[id=\'save\'][name=\'commit\'][type=\'submit\'][value=\'Save\']')))))])]));
    }
};

var UserOwnerBox = {
    view: function view(ctrl, args) {
        var project = args.project,
            user = args.user;

        return m('.card.card-terciary.u-radius.u-marginbottom-40', [m('.w-row', [args.hideAvatar ? '' : m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2.w-hidden-tiny', [m('img.thumb.u-margintop-10.u-round[src="' + h.useAvatarOrDefault(user.profile_img_thumbnail) + '"][width="100"]')]), m('.w-col.w-col-10.w-col-small-10.w-col-tiny-10', [m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-10', [project ? 'Supporter details ' : 'User details ', m('a.alt-link[href="/not-my-account' + (project ? '?project_id=' + project.project_id : '') + (args.reward ? '&reward_id=' + args.reward.id : '') + (args.value ? '&value=' + args.value : '') + '"]', 'Not You?')]), m('.fontsize-base.fontweight-semibold', user.name), m('label.field-label', 'CPF/CNPJ: ' + user.owner_document)])])]);
    }
};

var userBankForm = {
    controller: function controller(args) {
        var parsedErrors = args.parsedErrors;
        var fields = args.fields,
            user = args.user,
            bankAccount = m.prop({}),
            banks = m.prop(),
            banksLoader = postgrest$1.loader(models.bank.getPageOptions()),
            showOtherBanks = h.toggleProp(false, true),
            showOtherBanksInput = m.prop(false),
            popularBanks = [{
            id: '51',
            code: '001',
            name: 'Banco do Brasil S.A.'
        }, {
            id: '131',
            code: '341',
            name: 'Itaú Unibanco S.A.'
        }, {
            id: '122',
            code: '104',
            name: 'Caixa Econômica Federal'
        }, {
            id: '104',
            code: '033',
            name: 'Banco Santander  (Brasil)  S.A.'
        }, {
            id: '127',
            code: '399',
            name: 'HSBC Bank Brasil S.A. - Banco Múltiplo'
        }, {
            id: '23',
            code: '237',
            name: 'Banco Bradesco S.A.'
        }];

        userVM.getUserBankAccount(user.id).then(function (data) {
            if (!_$1.isEmpty(_$1.first(data))) {
                bankAccount(_$1.first(data));
                fields.bank_account_id(bankAccount().bank_account_id);
                fields.account(bankAccount().account);
                fields.account_digit(bankAccount().account_digit);
                fields.agency(bankAccount().agency);
                fields.agency_digit(bankAccount().agency_digit);
                fields.bank_id(bankAccount().bank_id);
                fields.bank_account_type(bankAccount().account_type);
                args.bankCode(bankAccount().bank_id);
            } else {
                fields.bank_account_type('conta_corrente');
            }
        });
        banksLoader.load().then(banks);

        return {
            bankInput: args.bankInput,
            bankCode: args.bankCode,
            banks: banks,
            banksLoader: banksLoader,
            showOtherBanksInput: showOtherBanksInput,
            showOtherBanks: showOtherBanks,
            popularBanks: popularBanks,
            bankAccount: bankAccount,
            parsedErrors: parsedErrors
        };
    },
    view: function view(ctrl, args) {
        var user = args.user,
            fields = args.fields,
            bankAccount = ctrl.bankAccount();
        return m('div', [m('.w-row', [m('.w-col.w-col-5.w-sub-col' + (ctrl.showOtherBanksInput() ? '.w-hidden' : '') + '[id=\'bank_select\']', m('.input.select.required.user_bank_account_bank_id', [m('label.field-label.fontsize-smaller', 'Bank'), m('select.select.required.w-input.text-field.bank-select.positive[id=\'user_bank_account_attributes_bank_id\']', {
            name: 'user[bank_account_attributes][bank_id]',
            class: ctrl.parsedErrors.hasError('bank_id') ? 'error' : false,
            onchange: function onchange(e) {
                m.withAttr('value', ctrl.bankCode)(e);
                ctrl.showOtherBanksInput(ctrl.bankCode() == '0');
            }
        }, [m('option[value=\'\']', {
            selected: fields.bank_id() === ''
        }), _$1.map(ctrl.popularBanks, function (bank) {
            return fields.bank_id() != bank.id ? m('option[value=\'' + bank.id + '\']', {
                selected: fields.bank_id() == bank.id
            }, bank.code + ' . ' + bank.name) : '';
        }), fields.bank_id() === '' || _$1.find(ctrl.popularBanks, function (bank) {
            return bank.id === fields.bank_id();
        }) ? '' : m('option[value=\'' + fields.bank_id() + '\']', {
            selected: true
        }, bankAccount.bank_code + ' . ' + bankAccount.bank_name), m('option[value=\'0\']', 'Other')]), m('.fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for=\'user_bank_account_attributes_bank_id\']', ' Select a bank'), ctrl.parsedErrors.inlineError('bank_id')])), ctrl.showOtherBanksInput() ? m('.w-col.w-col-5.w-sub-col', m('.w-row.u-marginbottom-20[id=\'bank_search\']', m('.w-col.w-col-12', [m('.input.string.optional.user_bank_account_input_bank_number', [m('label.field-label.fontsize-smaller', 'Bank Number (3 numbers)'), m('input.string.optional.w-input.text-field.bank_account_input_bank_number[id=\'user_bank_account_attributes_input_bank_number\'][maxlength=\'3\'][size=\'3\'][type=\'text\']', {
            name: 'user[bank_account_attributes][input_bank_number]',
            value: ctrl.bankInput(),
            onchange: m.withAttr('value', ctrl.bankInput)
        }), m('.fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for=\'user_bank_account_attributes_input_bank_number\']', ' Invalid bank number')]), m('a.w-hidden-small.w-hidden-tiny.alt-link.fontsize-smaller[href=\'javascript:void(0);\'][id=\'show_bank_list\']', {
            onclick: ctrl.showOtherBanks.toggle
        }, ['Search by name  ', m.trust('&nbsp;'), m.trust('&gt;')]), m('a.w-hidden-main.w-hidden-medium.alt-link.fontsize-smaller[href=\'javascript:void(0);\'][id=\'show_bank_list\']', {
            onclick: ctrl.showOtherBanks.toggle
        }, ['Search by name  ', m.trust('&nbsp;'), m.trust('&gt;')])]))) : '', ctrl.showOtherBanks() ? m('.w-row[id=\'bank_search_list\']', m('.w-col.w-col-12', m('.select-bank-list[data-ix=\'height-0-on-load\']', {
            style: {
                height: '395px'
            }
        }, m('.card.card-terciary', [m('.fontsize-small.fontweight-semibold.u-marginbottom-10.u-text-center', 'Select your bank below'), m('.fontsize-smaller', [m('.w-row.card.card-secondary.fontweight-semibold', [m('.w-col.w-col-3.w-col-small-3.w-col-tiny-3', m('div', 'Number')), m('.w-col.w-col-9.w-col-small-9.w-col-tiny-9', m('div', 'Name'))]), !_$1.isEmpty(ctrl.banks()) ? _$1.map(ctrl.banks(), function (bank) {
            return m('.w-row.card.fontsize-smallest', [m('.w-col.w-col-3.w-col-small-3.w-col-tiny-3', m('a.link-hidden.bank-resource-link[data-code=\'' + bank.code + '\'][data-id=\'' + bank.id + '\'][href=\'javascript:void(0)\']', {
                onclick: function onclick() {
                    ctrl.bankInput(bank.code);
                    ctrl.showOtherBanks.toggle();
                }
            }, bank.code)), m('.w-col.w-col-9.w-col-small-9.w-col-tiny-9', m('a.link-hidden.bank-resource-link[data-code=\'' + bank.code + '\'][data-id=\'' + bank.id + '\'][href=\'javascript:void(0)\']', {
                onclick: function onclick() {
                    ctrl.bankInput(bank.code);
                    ctrl.showOtherBanks.toggle();
                }
            }, bank.code + ' . ' + bank.name))]);
        }) : ''])])))) : '', m('.w-col.w-col-7', m('.w-row', [m('.w-col.w-col-7.w-col-small-7.w-col-tiny-7.w-sub-col-middle', [m('label.text.required.field-label.field-label.fontweight-semibold.force-text-dark.fontsize-smaller[for=\'user_bank_account_attributes_agency\']', 'Agency'), m('input.string.required.w-input.text-field.positive[id=\'user_bank_account_attributes_agency\'][type=\'text\']', {
            value: fields.agency(),
            class: ctrl.parsedErrors.hasError('agency') ? 'error' : false,
            name: 'user[bank_account_attributes][agency]',
            onchange: m.withAttr('value', fields.agency)
        }), ctrl.parsedErrors.inlineError('agency')]), m('.w-col.w-col-5.w-col-small-5.w-col-tiny-5', [m('label.text.optional.field-label.field-label.fontweight-semibold.force-text-dark.fontsize-smaller[for=\'user_bank_account_attributes_agency_digit\']', 'Agency Digit'), m('input.string.optional.w-input.text-field.positive[id=\'user_bank_account_attributes_agency_digit\'][type=\'text\']', {
            value: fields.agency_digit(),
            class: ctrl.parsedErrors.hasError('agency_digit') ? 'error' : false,
            name: 'user[bank_account_attributes][agency_digit]',
            onchange: m.withAttr('value', fields.agency_digit)
        }), ctrl.parsedErrors.inlineError('agency_digit')])]))]), m('.w-row', [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold.fontsize-smaller', 'Tipo de conta'), m('.input.select.required.user_bank_account_account_type', [m('select.select.required.w-input.text-field.bank-select.positive[id=\'user_bank_account_attributes_account_type\']', {
            name: 'user[bank_account_attributes][account_type]',
            class: ctrl.parsedErrors.hasError('account_type') ? 'error' : false,
            onchange: m.withAttr('value', fields.bank_account_type)
        }, [m('option[value=\'conta_corrente\']', {
            selected: fields.bank_account_type() === 'conta_corrente'
        }, 'Conta corrente'), m('option[value=\'conta_poupanca\']', {
            Selected: fields.bank_account_type() === 'conta_poupanca'
        }, 'Conta poupança'), m('option[value=\'conta_corrente_conjunta\']', {
            selected: fields.bank_account_type() === 'conta_corrente_conjunta'
        }, 'Conta corrente conjunta'), m('option[value=\'conta_poupanca_conjunta\']', {
            selected: fields.bank_account_type() === 'conta_poupanca_conjunta'
        }, 'Conta poupança conjunta')]), ctrl.parsedErrors.inlineError('account_type')])]), m('.w-col.w-col-7', m('.w-row', [m('.w-col.w-col-7.w-col-small-7.w-col-tiny-7.w-sub-col-middle', [m('label.text.required.field-label.field-label.fontweight-semibold.force-text-dark.fontsize-smaller[for=\'user_bank_account_attributes_account\']', 'Account No.'), m('input.string.required.w-input.text-field.positive[id=\'user_bank_account_attributes_account\'][type=\'text\']', {
            value: fields.account(),
            class: ctrl.parsedErrors.hasError('account') ? 'error' : false,
            onchange: m.withAttr('value', fields.account),
            name: 'user[bank_account_attributes][account]'
        }), ctrl.parsedErrors.inlineError('account')]), m('.w-col.w-col-5.w-col-small-5.w-col-tiny-5', [m('label.text.required.field-label.field-label.fontweight-semibold.force-text-dark.fontsize-smaller[for=\'user_bank_account_attributes_account_digit\']', 'Account Digit'), m('input.string.required.w-input.text-field.positive[id=\'user_bank_account_attributes_account_digit\'][type=\'text\']', {
            value: fields.account_digit(),
            class: ctrl.parsedErrors.hasError('account_digit') ? 'error' : false,
            onchange: m.withAttr('value', fields.account_digit),
            name: 'user[bank_account_attributes][account_digit]'
        }), ctrl.parsedErrors.inlineError('account_digit')])]))]), bankAccount.bank_account_id ? m('input[id=\'user_bank_account_attributes_id\'][type=\'hidden\']', {
            name: 'user[bank_account_attributes][id]',
            value: fields.bank_account_id()
        }) : '']);
    }
};

/**
 * window.c.UserBalanceRequestModalContent component
 * Render the current user bank account to confirm fund request
 *
 * Example:
 * m.component(c.UserBalanceRequestModelContent, {
 *     balance: {user_id: 123, amount: 123} // userBalance struct
 * })
 */
var I18nScope$36 = _$1.partial(h.i18nScope, 'users.balance');

var userBalanceRequestModelContent = {
    controller: function controller(args) {
        var _ref;

        var parsedErrors = userSettingsVM.mapRailsErrors(args.rails_errors);

        var fields = {
            agency: m.prop(''),
            bank_id: m.prop(''),
            agency_digit: m.prop(''),
            account: m.prop(''),
            account_digit: m.prop(''),
            bank_account_id: m.prop(''),
            bank_account_type: m.prop('')
        };

        var bankAccounts = m.prop([]);

        var bankInput = m.prop(''),
            bankCode = m.prop('-1'),
            vm = postgrest.filtersVM({ user_id: 'eq' }),
            balance = args.balance,
            loaderOpts = models.balanceTransfer.postOptions({
            user_id: balance.user_id }),
            requestLoader = postgrest.loaderWithToken(loaderOpts),
            loading = m.prop(false),
            displayDone = h.toggleProp(false, true),
            displayConfirmation = h.toggleProp(false, true),
            updateUserData = function updateUserData(user_id) {
            var userData = {};
            userData.bank_account_attributes = {
                bank_id: bankCode(),
                input_bank_number: bankInput(),
                agency_digit: fields.agency_digit(),
                agency: fields.agency(),
                account: fields.account(),
                account_digit: fields.account_digit(),
                account_type: fields.bank_account_type()
            };

            if (fields.bank_account_id()) {
                userData.bank_account_attributes.id = fields.bank_account_id().toString();
            }

            loading(true);
            m.redraw();
            return m.request({
                method: 'PUT',
                url: '/users/' + user_id + '.json',
                data: { user: userData },
                config: h.setCsrfToken
            }).then(function (data) {
                if (parsedErrors) {
                    parsedErrors.resetFieldErrors();
                }

                userVM.getUserBankAccount(user_id).then(bankAccounts);
                loading(false);
                displayConfirmation(true);
                m.redraw();
            }).catch(function (err) {
                if (parsedErrors) {
                    parsedErrors.resetFieldErrors();
                }
                parsedErrors = userSettingsVM.mapRailsErrors(err.errors_json);
                loading(false);
                m.redraw();
            });
        },
            requestFund = function requestFund() {
            requestLoader.load().then(function (data) {
                args.balanceManager.load();
                args.balanceTransactionManager.load();
                displayConfirmation(false);
                displayDone.toggle();
                m.redraw();
            });
        };

        return _ref = {
            loading: loading,
            requestLoader: requestLoader,
            requestFund: requestFund,
            bankAccounts: bankAccounts,
            displayDone: displayDone,
            displayConfirmation: displayConfirmation,
            loadBankA: args.bankAccountManager.loader,
            updateUserData: updateUserData
        }, defineProperty(_ref, 'requestFund', requestFund), defineProperty(_ref, 'parsedErrors', parsedErrors), defineProperty(_ref, 'fields', fields), defineProperty(_ref, 'bankInput', bankInput), defineProperty(_ref, 'bankCode', bankCode), _ref;
    },
    view: function view(ctrl, args) {
        var balance = args.balance,
            fields = ctrl.fields,
            user = args.user;

        return m('div', [m('.modal-dialog-header', [m('.fontsize-large.u-text-center', I18n$1.t('withdraw', I18nScope$36()))]), ctrl.displayConfirmation() ? m('.modal-dialog-content.u-text-center', ctrl.loadBankA() ? h.loader() : _$1.map(ctrl.bankAccounts(), function (item) {
            return [m('.fontsize-base.u-marginbottom-20', [m('span.fontweight-semibold', I18n$1.t('value_text', I18nScope$36()) + ':'), m.trust('&nbsp;'), m('span.text-success', I18n$1.t('shared.currency', { amount: h.formatNumber(balance.amount, 2, 3) }))]), m('.fontsize-base.u-marginbottom-10', [m('span', { style: { 'font-weight': ' 600' } }, I18n$1.t('bank.account', I18nScope$36()))]), m('.fontsize-small.u-marginbottom-10', [m('div', [m('span.fontcolor-secondary', I18n$1.t('bank.name', I18nScope$36())), m.trust('&nbsp;'), item.owner_name]), m('div', [m('span.fontcolor-secondary', I18n$1.t('bank.cpf_cnpj', I18nScope$36())), m.trust('&nbsp;'), item.owner_document]), m('div', [m('span.fontcolor-secondary', I18n$1.t('bank.bank_name', I18nScope$36())), m.trust('&nbsp;'), item.bank_name]), m('div', [m('span.fontcolor-secondary', I18n$1.t('bank.agency', I18nScope$36())), m.trust('&nbsp;'), item.agency + '-' + item.agency_digit]), m('div', [m('span.fontcolor-secondary', I18n$1.t('bank.account', I18nScope$36())), m.trust('&nbsp;'), item.account + '-' + item.account_digit])])];
        })) : ctrl.displayDone() ? m('.modal-dialog-content.u-text-center', [m('.fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40'), m('p.fontsize-large', I18n$1.t('success_message', I18nScope$36()))]) : m('.modal-dialog-content', [m('.fontsize-base.u-marginbottom-20', [m('span.fontweight-semibold', I18n$1.t('value_text', I18nScope$36()) + ':'), m.trust('&nbsp;'), m('span.text-success', I18n$1.t('shared.currency', { amount: h.formatNumber(balance.amount, 2, 3) }))]), m(UserOwnerBox, { user: args.user, hideAvatar: true }), m(userBankForm, { user: args.user, parsedErrors: ctrl.parsedErrors, fields: ctrl.fields, bankCode: ctrl.bankCode, bankInput: ctrl.bankInput })]), ctrl.displayConfirmation() ? m('.modal-dialog-nav-bottom', { style: 'position: relative' }, [m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-5', ctrl.requestLoader() || ctrl.loading() ? h.loader() : [m('a.btn.btn-medium.btn-request-fund[href="javascript:void(0);"]', { onclick: function onclick() {
                return ctrl.requestFund();
            } }, I18n$1.t('shared.confirm_text'))]), m('.w-col.w-col-5', ctrl.requestLoader() || ctrl.loading() ? '' : [m('a.btn.btn-medium.btn-terciary.w-button', {
            onclick: ctrl.displayConfirmation.toggle
        }, I18n$1.t('shared.back_text'))]), m('.w-col.w-col-1')])]) : '', !ctrl.displayConfirmation() && !ctrl.displayDone() ? m('.modal-dialog-nav-bottom', { style: 'position: relative;' }, [m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', [ctrl.requestLoader() || ctrl.loading() ? h.loader() : m('a.btn.btn-large.btn-request-fund[href="javascript:void(0);"]', { onclick: function onclick() {
                return ctrl.updateUserData(args.user.id);
            } }, I18n$1.t('request_fund', I18nScope$36()))]), m('.w-col.w-col-3')])]) : '']);
    }
};

/**
 * window.c.UserBalance component
 * Render the current user total balance and request fund action
 *
 * Example:
 * m.component(c.UserBalance, {
 *     user_id: 123,
 * })
 */
var I18nScope$35 = _$1.partial(h.i18nScope, 'users.balance');

var userBalance = {
    controller: function controller(args) {
        args.balanceManager.load();

        return {
            userBalances: args.balanceManager.collection,
            displayModal: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl, args) {
        var balance = _$1.first(ctrl.userBalances()) || { user_id: args.user_id, amount: 0 },
            balanceRequestModalC = [userBalanceRequestModelContent, _$1.extend({}, { balance: balance }, args)];

        return m('.w-section.section.user-balance-section', [ctrl.displayModal() ? m.component(modalBox, {
            displayModal: ctrl.displayModal,
            content: balanceRequestModalC
        }) : '', m('.w-container', [m('.w-row', [m('.w-col.w-col-8.u-text-center-small-only.u-marginbottom-20', [m('.fontsize-larger', [I18n.t('totals', I18nScope$35()), m('span.text-success', 'US$ ' + h.formatNumber(balance.amount, 2, 3))])]), m('.w-col.w-col-4', [m('a[class="r-fund-btn w-button btn btn-medium u-marginbottom-10 ' + (balance.amount <= 0 ? 'btn-inactive' : '') + '"][href="javascript:void(0);"]', { onclick: balance.amount > 0 ? ctrl.displayModal.toggle : 'javascript:void(0);' }, I18n.t('withdraw_cta', I18nScope$35()))])])])]);
    }
};

var I18nScope$37 = _.partial(h.i18nScope, 'users.balance');

var userBalanceTrasactionRow = {
    controller: function controller(args) {
        var expanded = h.toggleProp(false, true);

        if (args.index == 0) {
            expanded.toggle();
        }

        return {
            expanded: expanded
        };
    },
    view: function view(ctrl, args) {
        var item = args.item,
            createdAt = h.momentFromString(item.created_at, 'YYYY-MM-DD');

        return m('div[class=\'balance-card ' + (ctrl.expanded() ? 'card-detailed-open' : '') + '\']', m('.w-clearfix.card.card-clickable', [m('.w-row', [m('.w-col.w-col-2.w-col-tiny-2', [m('.fontsize-small.lineheight-tightest', createdAt.format('D MMM')), m('.fontsize-smallest.fontcolor-terciary', createdAt.format('YYYY'))]), m('.w-col.w-col-10.w-col-tiny-10', [m('.w-row', [m('.w-col.w-col-4', [m('div', [m('span.fontsize-smaller.fontcolor-secondary', I18n.t('debit', I18nScope$37())), m.trust('&nbsp;'), m('span.fontsize-base.text-error', 'US$ ' + h.formatNumber(Math.abs(item.debit), 2, 3))])]), m('.w-col.w-col-4', [m('div', [m('span.fontsize-smaller.fontcolor-secondary', I18n.t('credit', I18nScope$37())), m.trust('&nbsp;'), m('span.fontsize-base.text-success', 'US$ ' + h.formatNumber(item.credit, 2, 3))])]), m('.w-col.w-col-4', [m('div', [m('span.fontsize-smaller.fontcolor-secondary', I18n.t('totals', I18nScope$37())), m.trust('&nbsp;'), m('span.fontsize-base', 'US$ ' + h.formatNumber(item.total_amount, 2, 3))])])])])]), m('a.w-inline-block.arrow-admin.' + (ctrl.expanded() ? 'arrow-admin-opened' : '') + '.fa.fa-chevron-down.fontcolor-secondary[href="javascript:(void(0));"]', { onclick: ctrl.expanded.toggle })]), ctrl.expanded() ? m('.card', _.map(item.source, function (transaction) {
            var pos = transaction.amount >= 0;

            return m('div', [m('.w-row.fontsize-small.u-marginbottom-10', [m('.w-col.w-col-2', [m('.text-' + (pos ? 'success' : 'error'), (pos ? '+' : '-') + ' US$ ' + h.formatNumber(Math.abs(transaction.amount), 2, 3))]), m('.w-col.w-col-10', [m('div', I18n.t('event_names.' + transaction.event_name, I18nScope$37({
                service_fee: transaction.origin_objects.service_fee ? transaction.origin_objects.service_fee * 100.0 : '',
                project_name: transaction.origin_objects.project_name,
                contributitor_name: transaction.origin_objects.contributor_name
            })))])]), m('.divider.u-marginbottom-10')]);
        })) : '');
    }
};

var userBalanceTransactions = {
    controller: function controller(args) {
        args.balanceTransactionManager.load();

        return {
            list: args.balanceTransactionManager.list
        };
    },
    view: function view(ctrl, args) {
        var list = ctrl.list;

        return m('.w-section.section.card-terciary.before-footer.balance-transactions-area', [m('.w-container', _$1.map(list.collection(), function (item, index) {
            return m.component(userBalanceTrasactionRow, { item: item, index: index });
        })), m('.container', [m('.w-row.u-margintop-40', [m('.w-col.w-col-2.w-col-push-5', [!list.isLoading() ? list.isLastPage() ? '' : m('button#load-more.btn.btn-medium.btn-terciary', {
            onclick: list.nextPage
        }, 'Load more') : h.loader()])])])]);
    }
};

/**
 * window.c.userBalanceMain component
 * A root component to show user balance and transactions
 *
 * Example:
 * To mount this component just create a DOM element like:
 * <div data-mithril="UsersBalance" data-parameters="{'user_id': 10}">
 */
var userBalanceMain = {
    controller: function controller(args) {
        var userIdVM = postgrest$1.filtersVM({ user_id: 'eq' });

        userIdVM.user_id(args.user_id);

        // Handles with user balance request data
        var balanceManager = function () {
            var collection = m.prop([{ amount: 0, user_id: args.user_id }]),
                load = function load() {
                models.balance.getRowWithToken(userIdVM.parameters()).then(collection);
            };

            return {
                collection: collection,
                load: load
            };
        }(),


        // Handles with user balance transactions list data
        balanceTransactionManager = function () {
            var listVM = postgrest$1.paginationVM(models.balanceTransaction, 'created_at.desc'),
                load = function load() {
                listVM.firstPage(userIdVM.parameters());
            };

            return {
                load: load,
                list: listVM
            };
        }(),


        // Handles with bank account to check
        bankAccountManager = function () {
            var collection = m.prop([]),
                loader = function () {
                return postgrest$1.loaderWithToken(models.bankAccount.getRowOptions(userIdVM.parameters()));
            }(),
                load = function load() {
                loader.load().then(collection);
            };

            return {
                collection: collection,
                load: load,
                loader: loader
            };
        }();

        return {
            bankAccountManager: bankAccountManager,
            balanceManager: balanceManager,
            balanceTransactionManager: balanceTransactionManager
        };
    },
    view: function view(ctrl, args) {
        var opts = _$1.extend({}, args, ctrl);
        return m('#balance-area', [m.component(userBalance, opts), m('.divider'), m.component(userBalanceTransactions, opts), m('.u-marginbottom-40'), m('.w-section.section.card-terciary.before-footer')]);
    }
};

var usersEdit = {
    controller: function controller(args) {
        var userDetails = m.prop({}),
            userId = args.user_id.split('-')[0],
            hash = m.prop(window.location.hash),
            displayTabContent = function displayTabContent(user) {
            var tabs = {
                '#projects': m(userCreated, {
                    userId: userId,
                    showDraft: true
                }),
                '#contributions': m(userPrivateContributed, {
                    userId: userId,
                    user: user
                }),
                '#about_me': m(userAboutEdit, {
                    userId: userId,
                    user: user
                }),
                '#settings': m(userSettings, {
                    userId: userId,
                    user: user
                }),
                '#notifications': m(userNotifications, {
                    userId: userId,
                    user: user
                }),
                '#balance': m(userBalanceMain, {
                    user_id: userId,
                    userId: userId,
                    user: user
                })
            };

            hash(window.location.hash);

            if (_$1.isEmpty(hash()) || hash() === '#_=_') {
                hash('#contributions');
                return tabs['#contributions'];
            }

            return tabs[hash()];
        };

        h.redrawHashChange();
        userVM.fetchUser(userId, true, userDetails);
        return {
            displayTabContent: displayTabContent,
            hash: hash,
            userDetails: userDetails
        };
    },
    view: function view(ctrl, args) {
        var user = ctrl.userDetails();

        return m('div', [m(userHeader, {
            user: user,
            hideDetails: true
        }), !_$1.isEmpty(user) ? [m('nav.dashboard-nav.u-text-center', {
            style: {
                'z-index': '10',
                position: 'relative'
            }
        }, m('.w-container', [m('a.dashboard-nav-link' + (ctrl.hash() === '#contributions' ? '.selected' : '') + '[data-target=\'#dashboard_contributions\'][href=\'#contributions\'][id=\'dashboard_contributions_link\']', 'Supported'), m('a.dashboard-nav-link' + (ctrl.hash() === '#projects' ? '.selected' : '') + '[data-target=\'#dashboard_projects\'][href=\'#projects\'][id=\'dashboard_projects_link\']', 'Created'), m('a.dashboard-nav-link' + (ctrl.hash() === '#about_me' ? '.selected' : '') + '[data-target=\'#dashboard_about_me\'][href=\'#about_me\'][id=\'dashboard_about_me_link\']', 'Public Profile'), m('a.dashboard-nav-link' + (ctrl.hash() === '#settings' ? '.selected' : '') + '[data-target=\'#dashboard_settings\'][href=\'#settings\'][id=\'dashboard_settings_link\']', 'Registration Details'), m('a.dashboard-nav-link' + (ctrl.hash() === '#notifications' ? '.selected' : '') + '[data-target=\'#dashboard_notifications\'][href=\'#notifications\'][id=\'dashboard_notifications_link\']', 'Notifications'), m('a.dashboard-nav-link' + (ctrl.hash() === '#balance' ? '.selected' : '') + '[data-target=\'#dashboard_balance\'][href=\'#balance\'][id=\'dashboard_balance_link\']', 'Balance'), m('a.dashboard-nav-link.u-right-big-only[href=\'/en/users/' + user.id + '\']', {
            config: m.route,
            onclick: function onclick() {
                m.route('/users/' + user.id, {
                    user_id: user.id
                });
            }
        }, 'Go to the public profile')])), m('section.section', m(ctrl.hash() == '#projects' ? '.w-container' : '.w-section', m('.w-row', user.id ? ctrl.displayTabContent(user) : h.loader())))] : '']);
    }
};

var e$2 = generateErrorInstance();

var fields$2 = {
    mode: m.prop(''),
    online_days: m.prop(''),
    goal: m.prop('')
};

var fillFields = function fillFields(data) {
    fields$2.mode(data.mode || 'aon');
    fields$2.online_days(data.online_days || '');
    fields$2.goal(data.goal);
};

var updateProject$1 = function updateProject(project_id) {
    var projectData = {
        mode: fields$2.mode(),
        online_days: fields$2.online_days(),
        goal: fields$2.goal()
    };

    return projectVM.updateProject(project_id, projectData);
};

var genClickChangeMode = function genClickChangeMode(mode) {
    return function () {
        fields$2.mode(mode);
        fields$2.online_days('');
        if (mode == 'flex') {
            e$2.inlineError('online_days', false);
        }
    };
};

var projectGoalVM = {
    fields: fields$2,
    fillFields: fillFields,
    updateProject: updateProject$1,
    e: e$2,
    genClickChangeMode: genClickChangeMode
};

var I18nScope$39 = _$1.partial(h.i18nScope, 'projects.dashboard_goal');

var projectGoalEdit = {
    controller: function controller(args) {
        var vm = projectGoalVM,
            mapErrors = [['mode', ['mode']], ['goal', ['goal']], ['online_days', ['online_days']]],
            showSuccess = h.toggleProp(false, true),
            showError = h.toggleProp(false, true),
            showModeDiff = h.toggleProp(false, true),
            showTaxesDiff = h.toggleProp(false, true),
            applyGoalMask = _$1.compose(vm.fields.goal, h.applyMonetaryMask),
            loading = m.prop(false),
            onSubmit = function onSubmit(event) {
            loading(true);
            m.redraw();
            vm.updateProject(args.projectId).then(function (data) {
                loading(false);
                vm.e.resetFieldErrors();
                if (!showSuccess()) {
                    showSuccess.toggle();
                }
                if (showError()) {
                    showError.toggle();
                }
                railsErrorsVM.validatePublish();
            }).catch(function (err) {
                if (err.errors_json) {
                    railsErrorsVM.mapRailsErrors(err.errors_json, mapErrors, vm.e);
                }
                loading(false);
                if (showSuccess()) {
                    showSuccess.toggle();
                }
                if (!showError()) {
                    showError.toggle();
                }
            });
            return false;
        };

        if (railsErrorsVM.railsErrors()) {
            railsErrorsVM.mapRailsErrors(railsErrorsVM.railsErrors(), mapErrors, vm.e);
        }
        vm.fillFields(args.project);

        return {
            onSubmit: onSubmit,
            showSuccess: showSuccess,
            showError: showError,
            showModeDiff: showModeDiff,
            showTaxesDiff: showTaxesDiff,
            vm: vm,
            applyGoalMask: applyGoalMask,
            loading: loading
        };
    },
    view: function view(ctrl, args) {
        var vm = ctrl.vm;
        return m('#goal-tab', [ctrl.showSuccess() ? m.component(popNotification, {
            message: I18n$1.t('shared.successful_update'),
            toggleOpt: ctrl.showSuccess
        }) : '', ctrl.showError() ? m.component(popNotification, {
            message: I18n$1.t('shared.failed_update'),
            toggleOpt: ctrl.showError,
            error: true
        }) : '', m('form.w-form', { onsubmit: ctrl.onSubmit }, [m('.w-container', [m('.w-row', [m('.w-col.w-col-10.w-col-push-1', [m(bigCard, {
            label: I18n$1.t('mode_label', I18nScope$39()),
            label_hint: I18n$1.t('mode_hint', I18nScope$39()),
            children: [m('.flex-row.u-marginbottom-30', [m('a.choose-mode.choose-aon.w-inline-block.btn-select.flex-column.u-text-center[data-mode="aon"][href="javascript:void(0);"]', {
                onclick: vm.genClickChangeMode('aon'),
                class: vm.fields.mode() == 'aon' ? 'selected' : false
            }, [m('img[alt="Badge aon"][src="/assets/catarse_bootstrap/badge-aon.png"]')]), m('a.choose-mode.choose-flex.w-inline-block.btn-select.flex-column.u-text-center[data-mode="flex"][href="javascript:void(0);"]', {
                onclick: vm.genClickChangeMode('flex'),
                class: vm.fields.mode() == 'flex' ? 'selected' : false
            }, [m('img[alt="Badge flex"][src="/assets/catarse_bootstrap/badge-flex.png"]')])]), m('.u-text-center.fontsize-smaller', [m('a.mode-diff-toggle.link-hidden-light.fontweight-semibold[href="javascript:void(0);"]', { onclick: ctrl.showModeDiff.toggle }, ['See the difference between the models ', m('span.fa.fa-chevron-down')])]), ctrl.showModeDiff() ? m('.mode-diff.u-margintop-30', [m('.flex-row', [m('.w-hidden-small.w-hidden-tiny.fontsize-smaller.flex-column', m.trust(I18n$1.t('aon_diff_html', I18nScope$39()))), m('.w-hidden-small.w-hidden-tiny.fontsize-smaller.flex-column', m.trust(I18n$1.t('flex_diff_html', I18nScope$39())))]), m('.u-text-center.u-margintop-30', [m('.divider.u-marginbottom-20'), m('.fontsize-base', I18n$1.t('want_more', I18nScope$39())), m.trust(I18n$1.t('mode_diff_ebook', I18nScope$39()))])]) : '']
        }), m(bigCard, {
            label: I18n$1.t('goal_label', I18nScope$39()),
            label_hint: I18n$1.t('goal_hint', I18nScope$39()),
            children: [m('.w-row.u-marginbottom-30', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.w-row', [m('.w-col.w-col-4.w-col-small-6.w-col-tiny-6.text-field.prefix.no-hover.medium.prefix-permalink', [m('.fontcolor-secondary.u-text-center.fontsize-base.lineheight-tightest', 'US$')]), m('.w-col.w-col-8.w-col-small-6.w-col-tiny-6.label-hide', [m('.input.tel.optional.project_goal', [m('label.field-label'), m('input.string.optional.w-input.text-field.postfix.positive.medium[autocomplete="off"][id="project-goal-input"][name="project[goal]"][type="tel"]', {
                class: vm.e.hasError('goal') ? 'error' : false,
                value: vm.fields.goal(),
                maxlength: 14,
                onkeyup: m.withAttr('value', ctrl.applyGoalMask)
            })])])]), m('.u-text-center', vm.e.inlineError('goal'))]), m('.w-col.w-col-2')]), m('.u-text-center.fontsize-smaller.fontweight-semibold', [m('a.fee-toggle.link-hidden-light[href="javascript:void(0)"]', {
                onclick: ctrl.showTaxesDiff.toggle
            }, [I18n$1.t('goal_taxes_link', I18nScope$39()), m('span.fa.fa-chevron-down')])]), ctrl.showTaxesDiff() ? m('.fee-explanation.u-margintop-30', [m('.u-marginbottom-30', [m('.fontsize-small.fontweight-semibold', I18n$1.t('goal_taxes_label', I18nScope$39())), m('.fontsize-smaller', I18n$1.t('goal_' + vm.fields.mode() + '_taxes_hint', I18nScope$39()))]), m('.u-text-center.u-margintop-30', [m('.divider.u-marginbottom-20'), m('.fontsize-base', I18n$1.t('want_more', I18nScope$39())), m.trust(I18n$1.t('goal_taxes_watch_video_html', I18nScope$39()))])]) : '']
        }), m(bigCard, {
            label: I18n$1.t('online_days_label', I18nScope$39()),
            label_hint: m.trust(I18n$1.t('online_days_' + vm.fields.mode() + '_hint', I18nScope$39())),
            children: vm.fields.mode() == 'aon' ? [m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.w-row', [m('.w-col.w-col-8.label-hide', [m('.input.integer.optional.disabled.project_online_days', [m('label.field-label'), m('input.numeric.integer.optional.disabled.w-input.text-field.postfix.positive.medium[id="project_online_days"][name="project[online_days]"][type="number"]', {
                onchange: m.withAttr('value', vm.fields.online_days),
                value: vm.fields.online_days(),
                class: vm.e.hasError('online_days') ? 'error' : false
            })])]), m('.w-col.w-col-4', [m('.text-field.medium.prefix-permalink.u-text-center', [m('', 'days')])])]), vm.e.inlineError('online_days')])])] : [m('.flex-row', [m('a.choose-time.choose-unlimited.w-inline-block.btn-select.flex-column.u-text-center', {
                class: _$1.isEmpty(vm.fields.online_days().toString()) ? 'selected' : '',
                onclick: function onclick() {
                    vm.fields.online_days('');
                }
            }, [m('.fontsize-base.fontweight-semibold.u-marginbottom-20', I18n$1.t('online_days_open', I18nScope$39())), m('.w-hidden-tiny', I18n$1.t('online_days_open_hint', I18nScope$39()))]), m('a.choose-time.choose-limited.w-inline-block.btn-select.flex-column.u-text-center', {
                class: _$1.isEmpty(vm.fields.online_days().toString()) ? '' : 'selected',
                onclick: function onclick() {
                    vm.fields.online_days(1);
                }
            }, [m('.fontsize-base.fontweight-semibold.u-marginbottom-20', I18n$1.t('online_days_closed', I18nScope$39())), m('.w-hidden-tiny.u-marginbottom-30', I18n$1.t('online_days_closed_hint', I18nScope$39())), m('.w-row', [m('.w-col.w-col-6.label-hide', [m('.input.integer.optional.project_online_days', [m('label.field-label'), m('input.numeric.integer.optional.w-input.text-field.field.w-input.text-field.medium.prefix[id="project_online_days"][name="project[online_days]"][type="number"]', {
                onchange: m.withAttr('value', vm.fields.online_days),
                value: vm.fields.online_days(),
                class: vm.e.hasError('online_days') ? 'error' : false
            })])]), m('.w-col.w-col-6', [m('.text-field.medium.prefix-permalink', {
                class: vm.e.hasError('online_days') ? 'error' : false
            }, [m('', 'days')])])]), m('.w-row', vm.e.inlineError('online_days'))])])]
        })])])]), m(projectEditSaveBtn, { loading: ctrl.loading, onSubmit: ctrl.onSubmit })])]);
    }
};

var projectEditGoal = {
    controller: function controller(args) {
        return {
            user: userVM.fetchUser(args.user_id),
            project: projectVM.fetchProject(args.project_id)
        };
    },
    view: function view(ctrl, args) {
        return ctrl.user() && ctrl.project() ? m(projectGoalEdit, {
            user: ctrl.user(),
            userId: args.user_id,
            projectId: args.project_id,
            project: ctrl.project()
        }) : m('div', h.loader());
    }
};

var e$3 = generateErrorInstance();

var fields$3 = {
    tracker_snippet_html: m.prop(''),
    user_id: m.prop(''),
    public_tags: m.prop(''),
    admin_tags: m.prop(''),
    service_fee: m.prop(''),
    name: m.prop(''),
    permalink: m.prop(''),
    category_id: m.prop(''),
    city_id: m.prop(''),
    city_name: m.prop('')
};

var fillFields$1 = function fillFields(data) {
    fields$3.tracker_snippet_html(data.tracker_snippet_html || '');
    fields$3.user_id(data.user_id);
    fields$3.admin_tags(data.admin_tag_list || '');
    fields$3.public_tags(data.tag_list || '');
    fields$3.service_fee(data.service_fee);
    fields$3.name(data.name);
    fields$3.permalink(data.permalink);
    fields$3.category_id(data.category_id);
    fields$3.city_id(data.city_id || '');
    if (data.address.city) {
        fields$3.city_name(data.address.city + ' - ' + data.address.state);
    }
};

var updateProject$2 = function updateProject(project_id) {
    var projectData = {
        tracker_snippet_html: fields$3.tracker_snippet_html(),
        user_id: fields$3.user_id(),
        all_tags: fields$3.admin_tags(),
        all_public_tags: fields$3.public_tags(),
        service_fee: fields$3.service_fee(),
        name: fields$3.name(),
        permalink: fields$3.permalink(),
        category_id: fields$3.category_id(),
        city_id: fields$3.city_id };

    return projectVM.updateProject(project_id, projectData);
};

var loadCategoriesOptionsTo = function loadCategoriesOptionsTo(prop, selected) {
    var filters = postgrest$1.filtersVM;
    models.category.getPage(filters({}).order({
        name: 'asc'
    }).parameters()).then(function (data) {
        var mapped = _$1.map(data, function (item, index) {
            return m('option[value=\'' + item.id + '\']', {
                selected: selected == item.id
            }, item.name);
        });

        prop(mapped);
    });
};

var generateSearchCity = function generateSearchCity(prop) {
    var filters = postgrest$1.filtersVM({
        search_index: 'ilike'
    }).order({ name: 'asc' });

    var genSelectClickCity = function genSelectClickCity(city, citiesProp) {
        return function () {
            fields$3.city_name(city.name + ' - ' + city.acronym);
            fields$3.city_id(city.id);
            citiesProp('');
        };
    };

    return function (event) {
        var value = event.currentTarget.value;
        filters.search_index(replaceDiacritics(value));
        fields$3.city_name(value);

        models.city.getPage(filters.parameters()).then(function (data) {
            var map = _$1.map(data, function (item) {
                return m('.table-row.fontsize-smallest.fontcolor-secondary', [m('.city-select.fontsize-smallest.link-hidden-light', {
                    onclick: genSelectClickCity(item, prop)
                }, item.name + ' - ' + item.acronym)]);
            });

            prop(m('.table-outer.search-pre-result', { style: { 'z-index': 9999 } }, map));
        }).catch(function (err) {
            prop('');
        });
    };
};

var projectBasicsVM = {
    fields: fields$3,
    fillFields: fillFields$1,
    updateProject: updateProject$2,
    loadCategoriesOptionsTo: loadCategoriesOptionsTo,
    e: e$3,
    generateSearchCity: generateSearchCity
};

var inputCard = {
    view: function view(ctrl, args) {
        var cardClass = args.cardClass || '.w-row.u-marginbottom-30.card.card-terciary',
            onclick = args.onclick || Function.prototype;

        return m(cardClass, { onclick: onclick }, [m('.w-col.w-col-5.w-sub-col', [m('label.field-label.fontweight-semibold', args.label), args.label_hint ? m('label.hint.fontsize-smallest.fontcolor-secondary', args.label_hint) : '']), m('.w-col.w-col-7.w-sub-col', args.children)]);
    }
};

var I18nScope$40 = _$1.partial(h.i18nScope, 'projects.dashboard_basics');

var projectBasicsEdit = {
    controller: function controller(args) {
        var vm = projectBasicsVM,
            mapErrors = [['name', ['name']], ['public_tags', ['public_tags']], ['permalink', ['permalink']], ['category_id', ['category']], ['city_id', ['city']]],
            loading = m.prop(false),
            cities = m.prop(),
            categories = m.prop([]),
            showSuccess = h.toggleProp(false, true),
            showError = h.toggleProp(false, true),
            selectedTags = m.prop([]),
            tagOptions = m.prop([]),
            isEditingTags = m.prop(false),
            tagEditingLoading = m.prop(false),
            onSubmit = function onSubmit() {
            if (isEditingTags()) {
                return false;
            }

            loading(true);
            m.redraw();
            var tagString = _$1.pluck(selectedTags(), 'name').join(',');
            vm.fields.public_tags(tagString);
            vm.updateProject(args.projectId).then(function () {
                loading(false);
                vm.e.resetFieldErrors();
                showSuccess(true);
                showError(false);
            }).catch(function (err) {
                if (err.errors_json) {
                    railsErrorsVM.mapRailsErrors(err.errors_json, mapErrors, vm.e);
                }
                loading(false);
                showSuccess(false);
                showError(true);
            });

            return false;
        };
        if (railsErrorsVM.railsErrors()) {
            railsErrorsVM.mapRailsErrors(railsErrorsVM.railsErrors(), mapErrors, vm.e);
        }
        vm.fillFields(args.project);

        if (vm.fields.public_tags()) {
            selectedTags(_$1.map(vm.fields.public_tags().split(','), function (name) {
                return { name: name };
            }));
        }

        vm.loadCategoriesOptionsTo(categories, vm.fields.category_id());
        var addTag = function addTag(tag) {
            return function () {
                tagOptions([]);

                if (selectedTags().length >= 5) {
                    vm.e('public_tags', I18n$1.t('tags_max_error', I18nScope$40()));
                    vm.e.inlineError('public_tags', true);
                    m.redraw();

                    return false;
                }
                selectedTags().push(tag);
                isEditingTags(false);

                m.redraw();

                return false;
            };
        };

        var removeTag = function removeTag(tagToRemove) {
            return function () {
                var updatedTags = _$1.reject(selectedTags(), function (tag) {
                    return tag === tagToRemove;
                });

                selectedTags(updatedTags);

                return false;
            };
        };
        var tagString = m.prop('');
        var transport = m.prop({ abort: Function.prototype });
        var searchTagsUrl = h.getApiHost() + '/rpc/tag_search';
        var searchTags = function searchTags() {
            return m.request({ method: 'POST', background: true, config: transport, data: { query: tagString(), count: 3 }, url: searchTagsUrl });
        };
        var triggerTagSearch = function triggerTagSearch(e) {
            tagString(e.target.value);

            isEditingTags(true);
            tagOptions([]);

            var keyCode = e.keyCode;

            if (keyCode === 188 || keyCode === 13) {
                var tag = tagString().charAt(tagString().length - 1) === ',' ? tagString().substr(0, tagString().length - 1) : tagString();

                addTag({ name: tag.toLowerCase() }).call();
                e.target.value = '';
                return false;
            }

            tagEditingLoading(true);
            transport().abort();
            searchTags().then(function (data) {
                tagOptions(data);
                tagEditingLoading(false);
                m.redraw(true);
            });

            return false;
        };

        var editTag = function editTag(el, isinit) {
            if (!isinit) {
                el.onkeyup = triggerTagSearch;
            }
        };

        return {
            vm: vm,
            onSubmit: onSubmit,
            loading: loading,
            categories: categories,
            cities: cities,
            showSuccess: showSuccess,
            showError: showError,
            tagOptions: tagOptions,
            editTag: editTag,
            addTag: addTag,
            removeTag: removeTag,
            isEditingTags: isEditingTags,
            triggerTagSearch: triggerTagSearch,
            selectedTags: selectedTags,
            tagEditingLoading: tagEditingLoading
        };
    },
    view: function view(ctrl, args) {
        var vm = ctrl.vm;

        return m('#basics-tab', [ctrl.showSuccess() ? m.component(popNotification, {
            message: I18n$1.t('shared.successful_update'),
            toggleOpt: ctrl.showSuccess
        }) : '', ctrl.showError() ? m.component(popNotification, {
            message: I18n$1.t('shared.failed_update'),
            toggleOpt: ctrl.showError,
            error: true
        }) : '',

        // add pop notifications here
        m('form.w-form', { onsubmit: ctrl.onSubmit }, [m('.w-container', [
        // admin fields
        args.user.is_admin ? m('.w-row', [m('.w-col.w-col-10.w-col-push-1', [m(inputCard, {
            label: I18n$1.t('tracker_snippet_html', I18nScope$40()),
            children: [m('textarea.text.optional.w-input.text-field.positive.medium', {
                value: vm.fields.tracker_snippet_html(),
                onchange: m.withAttr('value', vm.fields.tracker_snippet_html)
            })]
        }), m(inputCard, {
            label: I18n$1.t('user_id', I18nScope$40()),
            children: [m('input.string.optional.w-input.text-field.positive.medium[type="text"]', {
                value: vm.fields.user_id(),
                onchange: m.withAttr('value', vm.fields.user_id)
            })]
        }), m(inputCard, {
            label: I18n$1.t('admin_tags', I18nScope$40()),
            label_hint: I18n$1.t('admin_tags_hint', I18nScope$40()),
            children: [m('input.string.optional.w-input.text-field.positive.medium[type="text"]', {
                value: vm.fields.admin_tags(),
                onchange: m.withAttr('value', vm.fields.admin_tags)
            })]
        }), m(inputCard, {
            label: I18n$1.t('service_fee', I18nScope$40()),
            children: [m('input.string.optional.w-input.text-field.positive.medium[type="number"]', {
                value: vm.fields.service_fee(),
                onchange: m.withAttr('value', vm.fields.service_fee)
            })]
        })])]) : '', m('.w-row', [m('.w-col.w-col-10.w-col-push-1', [m(inputCard, {
            label: I18n$1.t('name', I18nScope$40()),
            label_hint: I18n$1.t('name_hint', I18nScope$40()),
            children: [m('input.string.required.w-input.text-field.positive.medium[type="text"][maxlength="50"]', {
                value: vm.fields.name(),
                class: vm.e.hasError('name') ? 'error' : '',
                onchange: m.withAttr('value', vm.fields.name)
            }), vm.e.inlineError('name')]
        }), m(inputCard, {
            label: I18n$1.t('tags', I18nScope$40()),
            label_hint: I18n$1.t('tags_hint', I18nScope$40()),
            onclick: function onclick() {
                return ctrl.isEditingTags(false);
            },
            children: [m('input.string.optional.w-input.text-field.positive.medium[type="text"]', {
                config: ctrl.editTag,
                class: vm.e.hasError('public_tags') ? 'error' : '',
                onfocus: function onfocus() {
                    return vm.e.inlineError('public_tags', false);
                }
            }), ctrl.isEditingTags() ? m('.options-list.table-outer', ctrl.tagEditingLoading() ? m('.dropdown-link', m('.fontsize-smallest', 'Loading...')) : ctrl.tagOptions().length ? _$1.map(ctrl.tagOptions(), function (tag) {
                return m('.dropdown-link', { onclick: ctrl.addTag(tag) }, m('.fontsize-smaller', tag.name));
            }) : m('.dropdown-link', m('.fontsize-smallest', 'No related tags...'))) : '', vm.e.inlineError('public_tags'), m('div.tag-choices', _$1.map(ctrl.selectedTags(), function (choice) {
                return m('.tag-div', m('div', [m('a.tag-close-btn.fa.fa-times-circle', { onclick: ctrl.removeTag(choice) }), ' ' + choice.name]));
            }))]
        }), m(inputCard, {
            label: I18n$1.t('permalink', I18nScope$40()),
            label_hint: I18n$1.t('permalink_hint', I18nScope$40()),
            children: [m('.w-row', [m('.w-col.w-col-4.w-col-small-6.w-col-tiny6.text-field.prefix.no-hover.medium.prefix-permalink', {
                class: vm.e.hasError('permalink') ? 'error' : ''
            }, m('.fontcolor-secondary.u-text-center.fontcolor-secondary.u-text-center.fontsize-smallest', 'www.oppostarter.com/')), m('.w-col.w-col-8.w-col-small-6.w-col-tiny-6', [m('input.string.required.w-input.text-field.postfix.positive.medium[type="text"]', {
                value: vm.fields.permalink(),
                class: vm.e.hasError('permalink') ? 'error' : '',
                onchange: m.withAttr('value', vm.fields.permalink)
            })])]), m('.w-row', vm.e.inlineError('permalink'))]
        }), m(inputCard, {
            label: I18n$1.t('category', I18nScope$40()),
            label_hint: I18n$1.t('category_hint', I18nScope$40()),
            children: [m('select.required.w-input.text-field.w-select.positive.medium', {
                value: vm.fields.category_id(),
                class: vm.e.hasError('category_id') ? 'error' : '',
                onchange: m.withAttr('value', vm.fields.category_id)
            }, ctrl.categories()), vm.e.inlineError('category_id')]
        }), m(inputCard, {
            label: I18n$1.t('city', I18nScope$40()),
            label_hint: I18n$1.t('city_hint', I18nScope$40()),
            children: [m('input.string.required.w-input.text-field.positive.medium[type="text"]', {
                value: vm.fields.city_name(),
                class: vm.e.hasError('city_id') ? 'error' : '',
                onkeyup: vm.generateSearchCity(ctrl.cities)
            }), vm.e.inlineError('city_id'), ctrl.cities()]
        })])])]), m(projectEditSaveBtn, { loading: ctrl.loading, onSubmit: ctrl.onSubmit })])]);
    }
};

var projectEditBasic = {
    controller: function controller(args) {
        return {
            user: userVM.fetchUser(args.user_id),
            project: projectVM.fetchProject(args.project_id)
        };
    },
    view: function view(ctrl, args) {
        return ctrl.user() && ctrl.project() ? m(projectBasicsEdit, {
            user: ctrl.user(),
            userId: args.user_id,
            projectId: args.project_id,
            project: ctrl.project()
        }) : m('div', h.loader());
    }
};

var e$4 = generateErrorInstance();

var fields$4 = {
    about_html: m.prop('')
};

var fillFields$2 = function fillFields(data) {
    fields$4.about_html(data.about_html || '');
};

var updateProject$3 = function updateProject(project_id) {
    var projectData = {
        about_html: fields$4.about_html()
    };

    return projectVM.updateProject(project_id, projectData);
};

var projectDescriptionVM = {
    fields: fields$4,
    fillFields: fillFields$2,
    updateProject: updateProject$3,
    e: e$4
};

var bigInputCard = {
    view: function view(ctrl, args) {
        var cardClass = args.cardClass || '.w-row.u-marginbottom-30.card.card-terciary.padding-redactor-description.text.optional.project_about_html.field_with_hint';

        return m(cardClass, { style: args.cardStyle || {} }, [m('div', [m('label.field-label.fontweight-semibold.fontsize-base', args.label), args.label_hint ? m('label.hint.fontsize-smallest.fontcolor-secondary', args.label_hint) : '']), m('div', args.children)]);
    }
};

var I18nScope$41 = _$1.partial(h.i18nScope, 'projects.dashboard_description');

var projectDescriptionEdit = {
    controller: function controller(args) {
        var vm = projectDescriptionVM,
            mapErrors = [['about_html', ['about_html']]],
            showSuccess = h.toggleProp(false, true),
            showError = h.toggleProp(false, true),
            loading = m.prop(false),
            onSubmit = function onSubmit(event) {
            loading(true);
            m.redraw();
            vm.updateProject(args.projectId).then(function (data) {
                loading(false);
                vm.e.resetFieldErrors();
                if (!showSuccess()) {
                    showSuccess.toggle();
                }
                if (showError()) {
                    showError.toggle();
                }
                railsErrorsVM.validatePublish();
            }).catch(function (err) {
                if (err.errors_json) {
                    railsErrorsVM.mapRailsErrors(err.errors_json, mapErrors, vm.e);
                }
                loading(false);
                if (showSuccess()) {
                    showSuccess.toggle();
                }
                if (!showError()) {
                    showError.toggle();
                }
            });
            return false;
        };

        if (railsErrorsVM.railsErrors()) {
            railsErrorsVM.mapRailsErrors(railsErrorsVM.railsErrors(), mapErrors, vm.e);
        }
        vm.fillFields(args.project);

        return {
            onSubmit: onSubmit,
            showSuccess: showSuccess,
            showError: showError,
            vm: vm,
            loading: loading
        };
    },
    view: function view(ctrl, args) {
        var vm = ctrl.vm;
        return m('#description-tab', [ctrl.showSuccess() ? m.component(popNotification, {
            message: I18n$1.t('shared.successful_update'),
            toggleOpt: ctrl.showSuccess
        }) : '', ctrl.showError() ? m.component(popNotification, {
            message: I18n$1.t('shared.failed_update'),
            toggleOpt: ctrl.showError,
            error: true
        }) : '', m('form.w-form', { onsubmit: ctrl.onSubmit }, [m('.w-container', [m('.w-row', [m('.w-col.w-col-10.w-col-push-1', [m('.u-marginbottom-60.u-text-center', [m('.w-inline-block.card.fontsize-small.u-radius', [m.trust(I18n$1.t('description_alert', I18nScope$41()))])]), m(bigInputCard, {
            label: I18n$1.t('description_label', I18nScope$41()),
            label_hint: I18n$1.t('description_hint', I18nScope$41()),
            children: [m('.preview-container', {
                class: vm.e.hasError('about_html') ? 'error' : false
            }, h.redactor('project[about_html]', vm.fields.about_html)), vm.e.inlineError('about_html')]
        })])])]), m(projectEditSaveBtn, { loading: ctrl.loading, onSubmit: ctrl.onSubmit })])]);
    }
};

var projectEditDescription = {
    controller: function controller(args) {
        return {
            user: userVM.fetchUser(args.user_id),
            project: projectVM.fetchProject(args.project_id)
        };
    },
    view: function view(ctrl, args) {
        return ctrl.user() && ctrl.project() ? m(projectDescriptionEdit, {
            user: ctrl.user(),
            userId: args.user_id,
            projectId: args.project_id,
            project: ctrl.project()
        }) : m('div', h.loader());
    }
};

var e$5 = generateErrorInstance();

var fields$5 = {
    video_url: m.prop('')
};

var fillFields$3 = function fillFields(data) {
    fields$5.video_url(data.video_url || '');
};

var updateProject$4 = function updateProject(project_id) {
    var projectData = {
        video_url: fields$5.video_url()
    };

    return projectVM.updateProject(project_id, projectData);
};

var projectVideoVM = {
    fields: fields$5,
    fillFields: fillFields$3,
    updateProject: updateProject$4,
    e: e$5
};

var I18nScope$42 = _$1.partial(h.i18nScope, 'projects.dashboard_video');

var projectBudgetEdit = {
    controller: function controller(args) {
        var vm = projectVideoVM,
            mapErrors = [['video_url', ['video_url']]],
            showSuccess = h.toggleProp(false, true),
            showError = h.toggleProp(false, true),
            loading = m.prop(false),
            onSubmit = function onSubmit(event) {
            loading(true);
            m.redraw();
            vm.updateProject(args.projectId).then(function (data) {
                loading(false);
                vm.e.resetFieldErrors();
                if (!showSuccess()) {
                    showSuccess.toggle();
                }
                if (showError()) {
                    showError.toggle();
                }
                railsErrorsVM.validatePublish();
            }).catch(function (err) {
                if (err.errors_json) {
                    railsErrorsVM.mapRailsErrors(err.errors_json, mapErrors, vm.e);
                }
                loading(false);
                if (showSuccess()) {
                    showSuccess.toggle();
                }
                if (!showError()) {
                    showError.toggle();
                }
            });
            return false;
        };

        if (railsErrorsVM.railsErrors()) {
            railsErrorsVM.mapRailsErrors(railsErrorsVM.railsErrors(), mapErrors, vm.e);
        }
        vm.fillFields(args.project);

        return {
            onSubmit: onSubmit,
            showSuccess: showSuccess,
            showError: showError,
            vm: vm,
            loading: loading
        };
    },
    view: function view(ctrl, args) {
        var vm = ctrl.vm;
        return m('#video-tab', [ctrl.showSuccess() ? m.component(popNotification, {
            message: I18n$1.t('shared.successful_update'),
            toggleOpt: ctrl.showSuccess
        }) : '', ctrl.showError() ? m.component(popNotification, {
            message: I18n$1.t('shared.failed_update'),
            toggleOpt: ctrl.showError,
            error: true
        }) : '', m('form.w-form', { onsubmit: ctrl.onSubmit }, [m('.w-container', [m('.w-row', [m('.w-col.w-col-10.w-col-push-1', [m('.u-marginbottom-60.u-text-center', [m('.w-inline-block.card.fontsize-small.u-radius', [m.trust(I18n$1.t('video_alert', I18nScope$42()))])]), m(inputCard, {
            label: I18n$1.t('video_label', I18nScope$42()),
            label_hint: I18n$1.t('video_hint', I18nScope$42()),
            children: [m('input.string.required.w-input.text-field.positive.medium[type="text"]', {
                value: vm.fields.video_url(),
                class: vm.e.hasError('video_url') ? 'error' : '',
                onchange: m.withAttr('value', vm.fields.video_url)
            }), vm.e.inlineError('video_url')]
        })])])]), m(projectEditSaveBtn, { loading: ctrl.loading, onSubmit: ctrl.onSubmit })])]);
    }
};

var projectEditVideo = {
    controller: function controller(args) {
        return {
            user: userVM.fetchUser(args.user_id),
            project: projectVM.fetchProject(args.project_id)
        };
    },
    view: function view(ctrl, args) {
        return ctrl.user() && ctrl.project() ? m(projectBudgetEdit, {
            user: ctrl.user(),
            userId: args.user_id,
            projectId: args.project_id,
            project: ctrl.project()
        }) : m('div', h.loader());
    }
};

var e$6 = generateErrorInstance();

var fields$6 = {
    budget: m.prop('')
};

var fillFields$4 = function fillFields(data) {
    fields$6.budget(data.budget || '');
};

var updateProject$5 = function updateProject(project_id) {
    var projectData = {
        budget: fields$6.budget()
    };

    return projectVM.updateProject(project_id, projectData);
};

var projectBudgetVM = {
    fields: fields$6,
    fillFields: fillFields$4,
    updateProject: updateProject$5,
    e: e$6
};

var I18nScope$43 = _$1.partial(h.i18nScope, 'projects.dashboard_budget');

var projectBudgetEdit$1 = {
    controller: function controller(args) {
        var vm = projectBudgetVM,
            mapErrors = [['budget', ['budget']]],
            showSuccess = h.toggleProp(false, true),
            showError = h.toggleProp(false, true),
            loading = m.prop(false),
            onSubmit = function onSubmit(event) {
            loading(true);
            m.redraw();
            vm.updateProject(args.projectId).then(function (data) {
                loading(false);
                vm.e.resetFieldErrors();
                if (!showSuccess()) {
                    showSuccess.toggle();
                }
                if (showError()) {
                    showError.toggle();
                }
                railsErrorsVM.validatePublish();
            }).catch(function (err) {
                if (err.errors_json) {
                    railsErrorsVM.mapRailsErrors(err.errors_json, mapErrors, vm.e);
                }
                loading(false);
                if (showSuccess()) {
                    showSuccess.toggle();
                }
                if (!showError()) {
                    showError.toggle();
                }
            });
            return false;
        };

        if (railsErrorsVM.railsErrors()) {
            railsErrorsVM.mapRailsErrors(railsErrorsVM.railsErrors(), mapErrors, vm.e);
        }
        vm.fillFields(args.project);

        return {
            onSubmit: onSubmit,
            showSuccess: showSuccess,
            showError: showError,
            vm: vm,
            loading: loading
        };
    },
    view: function view(ctrl, args) {
        var vm = ctrl.vm;
        return m('#budget-tab', [ctrl.showSuccess() ? m.component(popNotification, {
            message: I18n$1.t('shared.successful_update'),
            toggleOpt: ctrl.showSuccess
        }) : '', ctrl.showError() ? m.component(popNotification, {
            message: I18n$1.t('shared.failed_update'),
            toggleOpt: ctrl.showError,
            error: true
        }) : '', m('form.w-form', { onsubmit: ctrl.onSubmit }, [m('.w-container', [m('.w-row', [m('.w-col.w-col-10.w-col-push-1', [m('.u-marginbottom-60.u-text-center', [m('.w-inline-block.card.fontsize-small.u-radius', [m.trust(I18n$1.t('budget_alert', I18nScope$43()))])]), m(bigInputCard, {
            cardStyle: { display: 'block' },
            label: I18n$1.t('budget_label', I18nScope$43()),
            children: [m('.preview-container', {
                class: vm.e.hasError('budget') ? 'error' : false
            }, h.redactor('project[budget]', vm.fields.budget)), vm.e.inlineError('budget')]
        })])])]), m(projectEditSaveBtn, { loading: ctrl.loading, onSubmit: ctrl.onSubmit })])]);
    }
};

var projectEditBudget = {
    controller: function controller(args) {
        return {
            user: userVM.fetchUser(args.user_id),
            project: projectVM.fetchProject(args.project_id)
        };
    },
    view: function view(ctrl, args) {
        return ctrl.user() && ctrl.project() ? m(projectBudgetEdit$1, {
            user: ctrl.user(),
            userId: args.user_id,
            projectId: args.project_id,
            project: ctrl.project()
        }) : m('div', h.loader());
    }
};

var projectEditUserAbout = {
    controller: function controller(args) {
        return {
            user: userVM.fetchUser(args.user_id)
        };
    },
    view: function view(ctrl, args) {
        return ctrl.user() ? m(userAboutEdit, {
            user: ctrl.user(),
            userId: args.user_id,
            useFloatBtn: true,
            hideDisableAcc: true,
            hideCoverImg: true,
            hidePasswordChange: true,
            publishingUserAbout: true
        }) : m('div', h.loader());
    }
};

var projectEditUserSettings = {
    controller: function controller(args) {
        return {
            user: userVM.fetchUser(args.user_id)
        };
    },
    view: function view(ctrl, args) {
        return ctrl.user() ? m(userSettings, {
            user: ctrl.user(),
            userId: args.user_id,
            hideCreditCards: true,
            useFloatBtn: true,
            publishingUserSettings: true
        }) : m('div', h.loader());
    }
};

var shippingFeeInput = {
    controller: function controller(args) {
        var states = args.states;
        var fee = args.fee,
            fees = args.fees,
            deleted = h.toggleProp(false, true),
            stateInUse = function stateInUse(state) {
            var destinations = _$1.map(fees(), function (fee) {
                return fee.destination();
            });
            return state.acronym !== fee.destination() && _$1.contains(destinations, state.acronym);
        },
            applyMask = _$1.compose(fee.value, h.applyMonetaryMask);

        _$1.extend(fee, { deleted: deleted });
        fee.value(fee.value() ? '' + h.formatNumber(fee.value(), 2, 3) : '0.00');
        return {
            fee: fee,
            applyMask: applyMask,
            fees: fees,
            deleted: deleted,
            feeValue: fee.value,
            stateInUse: stateInUse,
            states: states
        };
    },
    view: function view(ctrl) {
        var deleted = ctrl.deleted,
            othersCount = _$1.filter(ctrl.fees(), function (fee) {
            return fee.destination !== 'others' && fee.destination !== 'international';
        }).length,
            states = ctrl.states;

        return m('div' + (deleted() ? '.w-hidden' : ''), [m('.u-marginbottom-10.w-row', [m('.w-col.w-col-6', ctrl.fee.destination() === 'others' ? [m('input[type=\'hidden\']', {
            value: 'others'
        }), m('label.field-label.fontsize-smallest', othersCount > 0 ? 'Rest of the UK' : 'All Cities of the UK')] : ctrl.fee.destination() === 'international' ? [m('input[type=\'hidden\']', {
            value: 'international'
        }), m('label.field-label.fontsize-smallest', 'International')] : m('select.fontsize-smallest.text-field.text-field-light.w-select', {
            class: ctrl.fee.error ? 'error' : false,
            value: ctrl.fee.destination(),
            onchange: m.withAttr('value', ctrl.fee.destination)
        }, [_$1.map(states(), function (state) {
            return m('option', {
                value: state.acronym,
                disabled: ctrl.stateInUse(state)
            }, state.name);
        })])), m('.w-col.w-col-1'), m('.w-col.w-col-4', m('.w-row', [m('.no-hover.positive.prefix.text-field.w-col.w-col-3', m('.fontcolor-secondary.fontsize-mini.u-text-center', 'US$')), m('.w-col.w-col-9', m('input.positive.postfix.text-field.w-input', {
            value: ctrl.feeValue(),
            autocomplete: 'off',
            type: 'text',
            onkeyup: m.withAttr('value', ctrl.applyMask),
            oninput: m.withAttr('value', ctrl.feeValue)
        }))])), m('.w-col.w-col-1', [m('input[type=\'hidden\']', {
            value: ctrl.deleted()
        }), ctrl.fee.destination() === 'others' || ctrl.fee.destination() === 'international' ? '' : m('a.btn.btn-no-border.btn-small.btn-terciary.fa.fa-1.fa-trash', {
            onclick: function onclick() {
                return ctrl.deleted.toggle();
            }
        })])], ctrl.fee.error ? m(inlineError, { message: 'State can not be left blank.' }) : ''), m('.divider.u-marginbottom-10')]);
    }
};

var editRewardCard = {
    controller: function controller(args) {
        var reward = args.reward(),
            destroyed = m.prop(false),
            acceptNumeric = function acceptNumeric(e) {
            reward.minimum_value(e.target.value.replace(/[^0-9]/g, ''));
            return true;
        },
            confirmDelete = function confirmDelete() {
            var r = confirm('Você tem certeza?');
            if (r) {
                if (reward.newReward) {
                    destroyed(true);return false;
                }
                return m.request({
                    method: 'DELETE',
                    url: '/projects/' + args.project_id + '/rewards/' + reward.id(),
                    config: h.setCsrfToken
                }).then(function () {
                    destroyed(true);
                    m.redraw();
                });
            }
            return false;
        },
            descriptionError = m.prop(false),
            minimumValueError = m.prop(false),
            deliverAtError = m.prop(false),
            states = m.prop([]),
            fees = m.prop([]),
            statesLoader = rewardVM.statesLoader,
            validate = function validate() {
            args.error(false);
            args.errors('Error saving information. Check the details reported.');
            descriptionError(false);
            minimumValueError(false);
            deliverAtError(false);
            if (reward.newReward && moment(reward.deliver_at()).isBefore(moment().date(-1))) {
                args.error(true);
                deliverAtError(true);
            }
            if (_$1.isEmpty(reward.description())) {
                args.error(true);
                descriptionError(true);
            }
            if (!reward.minimum_value() || parseInt(reward.minimum_value()) < 10) {
                args.error(true);
                minimumValueError(true);
            }
            _$1.map(fees(), function (fee) {
                _$1.extend(fee, { error: false });
                if (fee.destination() === null) {
                    args.error(true);
                    _$1.extend(fee, { error: true });
                }
            });
        },
            saveReward = function saveReward() {
            validate();
            if (args.error()) {
                return false;
            }
            var shippingFees = _$1.map(fees(), function (fee) {
                return { _destroy: fee.deleted(), id: fee.id(), value: fee.value(), destination: fee.destination() };
            });
            var data = {
                title: reward.title(),
                project_id: args.project_id,
                shipping_options: reward.shipping_options(),
                minimum_value: reward.minimum_value(),
                description: reward.description(),
                shipping_fees_attributes: shippingFees,
                deliver_at: reward.deliver_at()
            };
            if (reward.newReward) {
                rewardVM.createReward(args.project_id, data).then(function (r) {
                    args.showSuccess(true);
                    reward.newReward = false;
                    // save id so we can update without reloading the page
                    reward.id(r.reward_id);
                    reward.edit.toggle();
                });
            } else {
                rewardVM.updateReward(args.project_id, reward.id(), data).then(function () {
                    args.showSuccess(true);
                    reward.edit.toggle();
                });
            }
            return false;
        },
            updateOptions = function updateOptions() {
            var destinations = _$1.map(fees(), function (fee) {
                return fee.destination();
            });
            if ((reward.shipping_options() === 'national' || reward.shipping_options() === 'international') && !_$1.contains(destinations, 'others')) {
                fees().push({
                    id: m.prop(null),
                    value: m.prop(0),
                    destination: m.prop('others')
                });
            }
            if (reward.shipping_options() === 'national') {
                fees(_$1.reject(fees(), function (fee) {
                    return fee.destination() === 'international';
                }));
            } else if (reward.shipping_options() === 'international' && !_$1.contains(destinations, 'international')) {
                fees().push({
                    id: m.prop(null),
                    value: m.prop(0),
                    destination: m.prop('international')
                });
            }
        };

        statesLoader.load().then(function (data) {
            states(data);
            states().unshift({
                acronym: null,
                name: 'States'
            });

            if (!reward.newReward) {
                rewardVM.getFees({ id: reward.id() }).then(function (feeData) {
                    _$1.map(feeData, function (fee) {
                        var feeProp = {
                            id: m.prop(fee.id),
                            value: m.prop(fee.value),
                            destination: m.prop(fee.destination)
                        };
                        fees().unshift(feeProp);
                    });
                    updateOptions();
                });
            }
        });

        return {
            minimumValueError: minimumValueError,
            deliverAtError: deliverAtError,
            descriptionError: descriptionError,
            confirmDelete: confirmDelete,
            acceptNumeric: acceptNumeric,
            updateOptions: updateOptions,
            saveReward: saveReward,
            destroyed: destroyed,
            states: states,
            reward: reward,
            fees: fees
        };
    },
    view: function view(ctrl, args) {
        var newFee = {
            id: m.prop(null),
            value: m.prop(null),
            destination: m.prop(null)
        },
            fees = ctrl.fees(),
            reward = args.reward(),
            inlineError = function inlineError(message) {
            return m('.fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle', m('span', message));
        };

        return ctrl.destroyed() ? m('div', '') : m('.w-row.card.card-terciary.u-marginbottom-20.card-edition.medium', [m('.card', m('.w-form', [m('.w-row', [m('.w-col.w-col-5', m('label.fontsize-smaller', 'Title:')), m('.w-col.w-col-7', m('input.w-input.text-field.positive[aria-required=\'true\'][autocomplete=\'off\'][type=\'tel\']', {
            value: ctrl.reward.title(),
            oninput: m.withAttr('value', ctrl.reward.title)
        }))]), m('.w-row.u-marginbottom-20', [m('.w-col.w-col-5', m('label.fontsize-smaller', 'Minimum amount:')), m('.w-col.w-col-7', [m('.w-row', [m('.w-col.w-col-3.w-col-small-3.w-col-tiny-3.text-field.positive.prefix.no-hover', m('.fontsize-smallest.fontcolor-secondary.u-text-center', 'US$')), m('.w-col.w-col-9.w-col-small-9.w-col-tiny-9', m('input.string.tel.required.w-input.text-field.project-edit-reward.positive.postfix[aria-required=\'true\'][autocomplete=\'off\'][required=\'required\'][type=\'tel\']', {

            class: ctrl.minimumValueError() ? 'error' : false,
            value: ctrl.reward.minimum_value(),
            oninput: function oninput(e) {
                return ctrl.acceptNumeric(e);
            }
        }))]), ctrl.minimumValueError() ? inlineError('Amount must be equal to or greater than US$10.') : '', m(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='reward_minimum_value']", 'Enter a minimum amount greater than or equal to 10')])]), m('.w-row', [m('.w-col.w-col-5', m('label.fontsize-smaller', 'Delivery forecast:')), m('.w-col.w-col-7', m('.w-row', m('.w-col.w-col-12', m('.w-row', [m('input[type=\'hidden\'][value=\'1\']'), m('select.date.required.w-input.text-field.w-col-6.positive[aria-required=\'true\'][discard_day=\'true\'][required=\'required\'][use_short_month=\'true\']', {
            class: ctrl.deliverAtError() ? 'error' : false,
            onchange: function onchange(e) {
                ctrl.reward.deliver_at(moment(ctrl.reward.deliver_at()).month(parseInt(e.target.value) - 1).format());
            }
        }, [_$1.map(moment.monthsShort(), function (month, monthIndex) {
            return m('option', {
                value: monthIndex + 1,
                selected: moment(ctrl.reward.deliver_at()).format('M') == monthIndex + 1
            }, h.capitalize(month));
        })]), m('select.date.required.w-input.text-field.w-col-6.positive[aria-required=\'true\'][discard_day=\'true\'][required=\'required\'][use_short_month=\'true\']', {
            class: ctrl.deliverAtError() ? 'error' : false,
            onchange: function onchange(e) {
                ctrl.reward.deliver_at(moment(reward.deliver_at()).year(parseInt(e.target.value)).format());
            }
        }, [_$1.map(_$1.range(moment().year(), moment().year() + 6), function (year) {
            return m('option', {
                value: year,
                selected: moment(ctrl.reward.deliver_at()).format('YYYY') === String(year)
            }, year);
        })])]))), ctrl.deliverAtError() ? inlineError('Delivery date can not be in the past.') : '')]), m('.w-row', m('label.fontsize-smaller', 'Description:')), m('.w-row', [m('textarea.text.required.w-input.text-field.positive.height-medium[aria-required=\'true\'][placeholder=\'Describe your reward\'][required=\'required\']', {
            value: ctrl.reward.description(),
            class: ctrl.descriptionError() ? 'error' : false,
            oninput: m.withAttr('value', ctrl.reward.description)
        }), m(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='reward_description']", 'Description can not be empty')]), ctrl.descriptionError() ? inlineError('Description can not be empty.') : '',, m('.u-marginbottom-30.w-row', [m('.w-col.w-col-3', m("label.fontsize-smaller[for='field-2']", 'Type of delivery')), m('.w-col.w-col-9', [m('select.positive.text-field.w-select', {
            value: ctrl.reward.shipping_options() || 'free',
            onchange: function onchange(e) {
                ctrl.reward.shipping_options(e.target.value);
                ctrl.updateOptions();
            }
        }, [m('option[value=\'international\']', 'National and International Shipping'), m('option[value=\'national\']', 'National Shipping'), m('option[value=\'free\']', 'No shipping involved'), m('option[value=\'pickup\']', 'Pickup')]), ctrl.reward.shipping_options() === 'national' || ctrl.reward.shipping_options() === 'international' ? m('.card.card-terciary', [

        // state fees
        _$1.map(fees, function (fee, feeIndex) {
            return [m(shippingFeeInput, {
                fee: fee,
                fees: ctrl.fees,
                feeIndex: feeIndex,
                states: ctrl.states
            })];
        }), m('.u-margintop-20', m("a.alt-link[href='#']", {
            onclick: function onclick() {
                ctrl.fees().push(newFee);
                return false;
            }
        }, 'Add destination'))]) : ''])]), m('.w-row.u-margintop-30', [m('.w-col.w-col-5.w-col-small-5.w-col-tiny-5.w-sub-col-middle', m('a.w-button.btn.btn-small', {
            onclick: function onclick() {
                ctrl.saveReward();
            }
        }, 'Save')), reward.newReward ? '' : m('.w-col.w-col-5.w-col-small-5.w-col-tiny-5.w-sub-col-middle', m('a.w-button.btn-terciary.btn.btn-small.reward-close-button', {
            onclick: function onclick() {
                reward.edit.toggle();
            }
        }, 'Cancel')), m('.w-col.w-col-1.w-col-small-1.w-col-tiny-1', [m('input[type=\'hidden\'][value=\'false\']'), m('a.remove_fields.existing', { onclick: ctrl.confirmDelete }, m('.btn.btn-small.btn-terciary.fa.fa-lg.fa-trash.btn-no-border'))])])]))]);
    }
};

var I18nScope$45 = _$1.partial(h.i18nScope, 'projects.reward_fields');

var dashboardRewardCard = {
    controller: function controller(args) {
        var reward = args.reward(),
            availableCount = function availableCount() {
            return reward.maximum_contributions() - reward.paid_count();
        },
            limitError = m.prop(false),
            showLimited = h.toggleProp(false, true),
            toggleLimit = function toggleLimit() {
            reward.limited.toggle();
            reward.maximum_contributions('');
        },
            toggleShowLimit = function toggleShowLimit() {
            showLimited.toggle();
        },
            validate = function validate() {
            limitError(false);
            args.error(false);
            args.errors('Error saving information.');
            if (reward.maximum_contributions() && reward.paid_count() > reward.maximum_contributions()) {
                limitError(true);
                args.error(true);
            }
        },
            saveReward = function saveReward() {
            validate();
            if (args.error()) {
                return false;
            }
            var data = {
                maximum_contributions: reward.maximum_contributions()
            };

            rewardVM.updateReward(args.project_id, reward.id(), data).then(function () {
                args.showSuccess(true);
                showLimited.toggle();
                reward.limited(reward.maximum_contributions() !== null);
                m.redraw();
            });
            return false;
        };

        return {
            availableCount: availableCount,
            toggleShowLimit: toggleShowLimit,
            toggleLimit: toggleLimit,
            saveReward: saveReward,
            showLimited: showLimited,
            limitError: limitError
        };
    },
    view: function view(ctrl, args) {
        var reward = args.reward();
        return m('.w-row.cursor-move.card-persisted.card.card-terciary.u-marginbottom-20.medium.sortable', [m('.card', [m('.w-row', [m('.w-col.w-col-11.w-col-small-11.w-col-tiny-11', m('.fontsize-base.fontweight-semibold', I18n$1.t('minimum_value_title', I18nScope$45({
            minimum_value: reward.minimum_value()
        })))), rewardVM.canEdit(reward, args.project_state, args.user) ? m('.w-col.w-col-1.w-col-small-1.w-col-tiny-1', m("a.show_reward_form[href='javascript:void(0);']", {
            onclick: function onclick() {
                reward.edit.toggle();
            }
        }, m('.btn.btn-small.btn-terciary.fa.fa-lg.fa-edit.btn-no-border'))) : '']), m('.fontsize-smaller.u-marginbottom-20.fontweight-semibold', I18n$1.t('paid_contributors', I18nScope$45({
            count: reward.paid_count()
        }))), m('.fontsize-small.fontweight-semibold', reward.title()), m('.fontsize-small.fontcolor-secondary', m.trust(h.simpleFormat(h.strip(reward.description())))), reward.limited() ? ctrl.availableCount() <= 0 ? m('.u-margintop-10', m('span.badge.badge-gone.fontsize-smaller', I18n$1.t('reward_gone', I18nScope$45()))) : m('.u-margintop-10', m('span.badge.badge-attention.fontsize-smaller', [m('span.fontweight-bold', I18n$1.t('reward_limited', I18nScope$45())), I18n$1.t('reward_available', I18nScope$45({
            available: ctrl.availableCount(),
            maximum: reward.maximum_contributions()
        }))])) : '', reward.deliver_at() ? m('.fontsize-smallest', [m('b', I18n$1.t('delivery_estimation', I18nScope$45())), h.momentify(reward.deliver_at(), 'MMM/YYYY')]) : '', m('.fontsize-smallest', m('b', I18n$1.t('delivery', I18nScope$45()) + ': '), I18n$1.t('shipping_options.' + reward.shipping_options(), I18nScope$45())), m('.u-margintop-40.w-row', [ctrl.showLimited() ? '' : m('.w-col.w-col-4', [m('button.btn.btn-small.btn-terciary.w-button', {
            onclick: ctrl.toggleShowLimit
        }, 'Change limit')]), m('.w-col.w-col-8')]), m('div' + (ctrl.showLimited() ? '' : '.w-hidden'), m('.card.card-terciary.div-display-none.u-radius', {
            style: {
                display: 'block'
            }
        }, m('.w-form', [[m('.w-row', [m('.w-col.w-col-6', m('.w-checkbox', [m("input.w-checkbox-input[type='checkbox']", {
            onclick: ctrl.toggleLimit,
            checked: reward.limited()
        }), m('label.fontsize-smaller.fontweight-semibold.w-form-label', I18n$1.t('reward_limited_input', I18nScope$45()))])), m('.w-col.w-col-6', m('input.string.tel.optional.w-input.text-field.u-marginbottom-30.positive[placeholder=\'Available quantity\'][type=\'tel\']', {
            class: ctrl.limitError() ? 'error' : false,
            value: reward.maximum_contributions(),
            onchange: m.withAttr('value', reward.maximum_contributions)
        }))]), m('.w-row', [m('.w-sub-col.w-col.w-col-4', m('button.btn.btn-small.w-button', { onclick: ctrl.saveReward }, 'Save')), m('.w-sub-col.w-col.w-col-4', m('button.btn.btn-small.btn-terciary.w-button', {
            onclick: ctrl.toggleShowLimit
        }, 'Cancel')), m('.w-clearfix.w-col.w-col-4')])]]))), ctrl.limitError() ? m(inlineError, {
            message: 'Limit must be greater than amount of supports.'
        }) : '']), m('.u-margintop-20', [m('.fontcolor-secondary.fontsize-smallest.fontweight-semibold', I18n$1.t('reward_link_label', I18nScope$45())), m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-10', I18n$1.t('reward_link_hint', I18nScope$45())), m('.w-form', m('.w-col.w-col-6', m.component(copyTextInput, {
            value: 'https://www.oppostarter.com/en/projects/' + args.project_id + '/contributions/new?reward_id=' + reward.id()
        })))])]);
    }
};

var I18nScope$44 = _$1.partial(h.i18nScope, 'projects.reward_fields');

var projectEditReward = {
    controller: function controller(args) {
        var rewards = m.prop([]),
            loading = m.prop(false),
            error = m.prop(false),
            errors = m.prop([]),
            showSuccess = m.prop(false),
            newReward = function newReward() {
            return {
                id: m.prop(null),
                minimum_value: m.prop(null),
                title: m.prop(''),
                shipping_options: m.prop('free'),
                edit: h.toggleProp(true, false),
                deliver_at: m.prop(moment().date(1).format()),
                description: m.prop(''),
                paid_count: m.prop(0),
                limited: h.toggleProp(false, true),
                maximum_contributions: m.prop(null),
                newReward: true,
                row_order: m.prop(999999999 + rewards().length * 20) // we need large and spaced apart numbers
            };
        };

        var updateRewardSortPosition = function updateRewardSortPosition(rewardId, position) {
            return m.request({
                method: 'POST',
                url: '/en/projects/' + args.project_id + '/rewards/' + rewardId + '/sort?reward[row_order_position]=' + position,
                config: function config(xhr) {
                    if (h.authenticityToken()) {
                        xhr.setRequestHeader('X-CSRF-Token', h.authenticityToken());
                        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                    }
                }
            });
        };

        var setSorting = function setSorting(el, isInit) {
            if (!isInit && window.$) {
                window.$(el).sortable({
                    update: function update(event, ui) {
                        var rewardId = ui.item[0].id;
                        updateRewardSortPosition(rewardId, ui.item.index());
                    }
                });
            }
        };

        var loadRewards = function loadRewards() {
            return rewardVM.fetchRewards(args.project_id).then(function () {
                rewards([]);
                _$1.map(rewardVM.rewards(), function (reward) {
                    var limited = reward.maximum_contributions !== null;
                    var rewardProp = m.prop({
                        id: m.prop(reward.id),
                        deliver_at: m.prop(reward.deliver_at),
                        description: m.prop(reward.description),
                        maximum_contributions: m.prop(reward.maximum_contributions),
                        minimum_value: m.prop(reward.minimum_value),
                        edit: h.toggleProp(false, true),
                        limited: h.toggleProp(limited, !limited),
                        paid_count: m.prop(reward.paid_count),
                        row_order: m.prop(reward.row_order),
                        shipping_options: m.prop(reward.shipping_options),
                        title: m.prop(reward.title),
                        waiting_payment_count: m.prop(reward.waiting_payment_count)
                    });
                    rewards().push(rewardProp);
                });

                if (rewardVM.rewards().length === 0) {
                    rewards().push(m.prop(newReward()));
                }
            });
        };

        var tips = I18n$1.translations[I18n$1.currentLocale()].projects.reward_fields.faq;

        loadRewards();

        return {
            loading: loading,
            error: error,
            errors: errors,
            showSuccess: showSuccess,
            rewards: rewards,
            user: userVM.fetchUser(args.user_id),
            newReward: newReward,
            setSorting: setSorting,
            tips: tips
        };
    },
    view: function view(ctrl, args) {
        var error = ctrl.error,
            project = args.project;

        return m("[id='dashboard-rewards-tab']", project() ? [m('.w-section.section', m('.w-container', [ctrl.showSuccess() ? m.component(popNotification, {
            message: 'Reward saved successfully'
        }) : '', ctrl.error() ? m.component(popNotification, {
            message: ctrl.errors(),
            error: true
        }) : '', m('.w-row', m('.w-col.w-col-8.w-col-push-2', m('.u-marginbottom-60.u-text-center', m('.w-inline-block.card.fontsize-small.u-radius', [m('span.fa.fa-lightbulb-o'), m.trust(' ' + I18n$1.t('reward_know_more_cta_html', I18nScope$44()))])))), m('.w-row', [m('.w-col.w-col-9', m('.w-form', [ctrl.rewards().length === 0 ? '' : m(".ui-sortable[id='rewards']", {
            config: ctrl.setSorting
        }, [_$1.map(_$1.sortBy(ctrl.rewards(), function (reward) {
            return Number(reward().row_order());
        }), function (reward, index) {
            return m('div[id=' + reward().id() + ']', [m('.nested-fields', m('.reward-card', [!reward().edit() ? m(dashboardRewardCard, {
                reward: reward,
                error: error,
                errors: ctrl.errors,
                user: ctrl.user(),
                showSuccess: ctrl.showSuccess,
                project_id: args.project_id,
                project_state: project().state
            }) : m(editRewardCard, {
                project_id: args.project_id,
                error: error,
                showSuccess: ctrl.showSuccess,
                errors: ctrl.errors,
                reward: reward
            })])), m('input.ui-sortable-handle[type=\'hidden\']', {
                value: reward().id()
            })]);
        })])]), rewardVM.canAdd(project().state, ctrl.user()) ? [m('button.btn.btn-large.btn-message.show_reward_form.new_reward_button.add_fields', {
            onclick: function onclick() {
                return ctrl.rewards().push(m.prop(ctrl.newReward()));
            }
        }, I18n$1.t('add_reward', I18nScope$44()))] : ''), m('.w-col.w-col-3', [I18n$1.t('reward_faq_intro', I18nScope$44()), m('br'), m('br'), I18n$1.t('reward_faq_sub_intro', I18nScope$44()), m('br'), m('br'), _$1.map(ctrl.tips, function (tip) {
            return [m('.fontweight-semibold', tip.title), m.trust(tip.description), m('br'), m('br')];
        })])])]))] : h.loader());
    }
};

var e$7 = generateErrorInstance();
var currentProject$2 = m.prop({});

var fields$7 = {
    headline: m.prop(''),
    uploaded_image: m.prop(''),
    upload_files: m.prop(undefined)
};

var fillFields$5 = function fillFields(data) {
    fields$7.headline(data.headline || '');
    currentProject$2(data);
};

var reloadCurrentProject = function reloadCurrentProject() {
    if (currentProject$2().id) {
        projectVM.fetchProject(currentProject$2().id, false).then(function (data) {
            currentProject$2(_.first(data));
            m.redraw();
        });
    }
};

var prepareForUpload = function prepareForUpload(event) {
    var formData = new FormData();
    if (event.target.files[0]) {
        formData.append('uploaded_image', event.target.files[0]);
    }
    fields$7.upload_files(formData);
};

var uploadImage = function uploadImage(project_id) {
    if (_.isUndefined(fields$7.upload_files())) {
        var deferred = m.deferred();
        deferred.resolve({});
        return deferred.promise;
    }
    return m.request({
        method: 'POST',
        url: '/projects/' + project_id + '/upload_image.json',
        data: fields$7.upload_files(),
        config: h.setCsrfToken,
        serialize: function serialize(data) {
            return data;
        }
    });
};

var updateProject$6 = function updateProject(project_id) {
    var projectData = {
        headline: fields$7.headline()
    };

    return projectVM.updateProject(project_id, projectData);
};

var projectCardVM = {
    fields: fields$7,
    fillFields: fillFields$5,
    updateProject: updateProject$6,
    e: e$7,
    prepareForUpload: prepareForUpload,
    uploadImage: uploadImage,
    currentProject: currentProject$2,
    reloadCurrentProject: reloadCurrentProject
};

var I18nScope$46 = _$1.partial(h.i18nScope, 'projects.dashboard_card');

var projectCardEdit = {
    controller: function controller(args) {
        var vm = projectCardVM,
            mapErrors = [['uploaded_image', ['uploaded_image']], ['headline', ['headline']]],
            showSuccess = h.toggleProp(false, true),
            showError = h.toggleProp(false, true),
            loading = m.prop(false),
            onSubmit = function onSubmit(event) {
            loading(true);
            m.redraw();
            vm.uploadImage(args.projectId).then(function (uploaded) {
                vm.updateProject(args.projectId).then(function (data) {
                    loading(false);
                    vm.e.resetFieldErrors();
                    if (!showSuccess()) {
                        showSuccess.toggle();
                    }
                    if (showError()) {
                        showError.toggle();
                    }
                    vm.reloadCurrentProject();
                    railsErrorsVM.validatePublish();
                }).catch(function (err) {
                    if (err.errors_json) {
                        railsErrorsVM.mapRailsErrors(err.errors_json, mapErrors, vm.e);
                    }
                    loading(false);
                    if (showSuccess()) {
                        showSuccess.toggle();
                    }
                    if (!showError()) {
                        showError.toggle();
                    }
                    m.redraw();
                });
            }).catch(function (uploaderr) {
                if (uploaderr.errors_json) {
                    railsErrorsVM.mapRailsErrors(uploaderr.errors_json, mapErrors, vm.e);
                }
                loading(false);
                if (showSuccess()) {
                    showSuccess.toggle();
                }
                if (!showError()) {
                    showError.toggle();
                }
            });
            return false;
        };

        if (railsErrorsVM.railsErrors()) {
            railsErrorsVM.mapRailsErrors(railsErrorsVM.railsErrors(), mapErrors, vm.e);
        }
        vm.fillFields(args.project);

        return {
            onSubmit: onSubmit,
            showSuccess: showSuccess,
            showError: showError,
            vm: vm,
            loading: loading
        };
    },
    view: function view(ctrl, args) {
        var vm = ctrl.vm;
        return m('#card-tab', [ctrl.showSuccess() ? m.component(popNotification, {
            message: I18n$1.t('shared.successful_update'),
            toggleOpt: ctrl.showSuccess
        }) : '', ctrl.showError() ? m.component(popNotification, {
            message: I18n$1.t('shared.failed_update'),
            toggleOpt: ctrl.showError,
            error: true
        }) : '', m('form.w-form', { onsubmit: ctrl.onSubmit }, [m('.w-section.section', [m('.w-container', [m('.w-row', [m('.w-col.w-col-8', [m(inputCard, {
            label: I18n$1.t('uploaded_image_label', I18nScope$46()),
            label_hint: I18n$1.t('uploaded_image_hint', I18nScope$46()),
            children: [m('input.file.optional.w-input.text-field[id="project_uploaded_image"][name="project[uploaded_image]"][type="file"]', {
                class: vm.e.hasError('uploaded_image') ? 'error' : false,
                onchange: vm.prepareForUpload
            }), vm.e.inlineError('uploaded_image')]
        }), m(inputCard, {
            label: I18n$1.t('headline_label', I18nScope$46()),
            label_hint: I18n$1.t('headline_label_hint', I18nScope$46()),
            children: [m('textarea.text.optional.w-input.text-field.positive[id="project_headline"][maxlength="100"][name="project[headline]"][rows="3"]', {
                onchange: m.withAttr('value', vm.fields.headline),
                class: vm.e.hasError('headline') ? 'error' : false
            }, vm.fields.headline()), vm.e.inlineError('headline')]
        })]), m(projectCard, { project: vm.currentProject(), type: 'small' })])])]), m(projectEditSaveBtn, { loading: ctrl.loading, onSubmit: ctrl.onSubmit })])]);
    }
};

var projectEditCard = {
    controller: function controller(args) {
        return {
            user: userVM.fetchUser(args.user_id),
            project: projectVM.fetchProject(args.project_id)
        };
    },
    view: function view(ctrl, args) {
        return ctrl.user() && ctrl.project() ? m(projectCardEdit, {
            user: ctrl.user(),
            userId: args.user_id,
            projectId: args.project_id,
            project: ctrl.project()
        }) : m('div', h.loader());
    }
};

var projectPreview = {
    view: function view(ctrl, args) {
        return args.project() ? m('div', [m('.u-text-center', m('.w-container', m('.w-row', [m('.w-col.w-col-8.w-col-push-2', [m('.fontweight-semibold.fontsize-large.u-margintop-40', 'Please provide feedbacks!'), m('p.fontsize-base', 'Share the link below with your friends and take the time to make adjustments to help your campaign.'), m('.w-row.u-marginbottom-30', [m('.w-col.w-col-3'), m('.w-col.w-col-6', m('input.w-input.text-field[type=\'text\'][value=\'https://www.oppostarter.com/' + args.project().permalink + '\']')), m('.w-col.w-col-3')])]), m('.w-col.w-col-2')]))), m(projectsShow, args)]) : h.loader();
    }
};

var announceExpirationModal = {
    view: function view(ctrl, args) {
        return m('div', [m('.modal-dialog-content', [m('.fontsize-large.u-text-center.u-marginbottom-30.fontweight-semibold', 'Are You Sure?'), m('.fontsize-large.u-text-center.u-marginbottom-30', ['Your campaign will end on the day  ', m('span.expire-date', args.expirationDate), ', at 11:50 p.m. Until then, you can still raised funds and stay strong in your campaign! Once your deadline has expired, you will need to confirm your bank details. We will then deposit the money into your account within 10 business days.'])]), m('.modal-dialog-nav-bottom', m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-4', [m("input[id='anchor'][name='anchor'][type='hidden'][value='announce_expiration']"), m("input.btn.btn.btn-large[id='budget-save'][name='commit'][type='submit'][value='Yes']")]), m('.w-col.w-col-4', m('button.btn.btn-large.btn-terciary', {
            onclick: args.displayModal.toggle
        }, ' No')), m('.w-col.w-col-2')]))]);
    }
};

var projectAnnounceExpiration = {
    controller: function controller() {
        var days = m.prop(2),
            showModal = h.toggleProp(false, true);
        return {
            days: days,
            showModal: showModal
        };
    },
    view: function view(ctrl, args) {
        var days = ctrl.days,
            expirationDate = moment().add(ctrl.days(), 'days').format('DD/MM/YYYY');
        return m("[id='dashboard-announce_expiration-tab']", m('form.simple_form.project-form.w-form[accept-charset=\'UTF-8\'][action=\'/en/flexible_projects/' + args.project_id + '\'][id=\'expiration-form\'][method=\'post\'][Not Validated=\'Not Validated\']', [m("input[name='utf8'][type='hidden'][value='✓']"), m("input[name='_method'][type='hidden'][value='patch']"), m('input[name=\'authenticity_token\'][type=\'hidden\'][value=\'' + h.authenticityToken() + '\']'), m('.w-section', m('.w-container', m('.w-row.u-marginbottom-60', [m('.w-col.w-col-1'), m('.w-col.w-col-10', m('.card-big.card.card-terciary.u-radius', [m('.u-marginbottom-30.w-row', [m('.w-sub-col.w-col.w-col-6', m('.fontsize-small.u-marginbottom-10', ['On how many days, counted from now on, do you want to close your collection?', m('br'), m('span.fontsize-smaller.fontweight-semibold', '(minimum of 2 days)')])), m('.w-col.w-col-6', m('.w-row', [m('.w-col.w-col-8.w-col-small-6.w-col-tiny-6', m("input.numeric.numeric.optional.w-input.text-field.positive.medium[id='flexible_project_online_days'][step='any'][type='number']", {
            name: 'flexible_project[online_days]',
            value: days(),
            onchange: m.withAttr('value', ctrl.days)
        })), m('.medium.no-hover.postfix.prefix-permalink.text-field.w-col.w-col-4.w-col-small-6.w-col-tiny-6', m('.fontcolor-secondary.fontsize-base.lineheight-tightest.u-text-center', 'Days'))]))]), m('.fontcolor-secondary.u-text-center', [m('.fontsize-smaller', 'You can receive support until:'), m('.fontsize-base', [m('span.expire-date', expirationDate), ' at 23:59'])])])), m('.w-col.w-col-1')]))), m('.w-section', m('.w-container', m('.w-row', [m('.w-col.w-col-4'), m('.w-col.w-col-4', m('button.btn.btn-large.u-marginbottom-20', {
            onclick: function onclick(e) {
                ctrl.showModal.toggle();
                e.preventDefault();
            }
        }, '  Confirm'))]))), ctrl.showModal() ? m.component(modalBox, {
            displayModal: ctrl.showModal,
            content: [announceExpirationModal, {
                expirationDate: expirationDate,
                displayModal: ctrl.showModal
            }]
        }) : '']));
    }
};

var projectEditTab = {
  view: function view(ctrl, args) {
    return m('div.u-marginbottom-80', [m(".w-section.dashboard-header.u-text-center[id='dashboard-titles-root']", m('.w-container', m('.w-row', m('.w-col.w-col-8.w-col-push-2.u-marginbottom-30', [m(".fontweight-semibold.fontsize-larger.lineheight-looser[id='dashboard-page-title']", m.trust(args.title)), m(".fontsize-base[id='dashboard-page-subtitle']", m.trust(args.subtitle))])))), m('.u-marginbottom-80', args.content)]);
  }
};

// @TODO move all tabs to c/
// using the inside components that root tabs use
var I18nScope$38 = _$1.partial(h.i18nScope, 'projects.edit');

var projectEdit = {
    controller: function controller(args) {
        var project_id = args.project_id,
            user_id = args.user_id;


        var project = projectVM.fetchProject(project_id),
            hash = m.prop(window.location.hash),
            displayTabContent = function displayTabContent() {
            var c_opts = {
                project_id: project_id,
                user_id: user_id,
                project: project
            },
                tabs = {
                '#video': m(projectEditTab, {
                    title: I18n$1.t('video_html', I18nScope$38()),
                    subtitle: I18n$1.t('video_subtitle', I18nScope$38()),
                    content: m(projectEditVideo, _$1.extend({}, c_opts))
                }),
                '#description': m(projectEditTab, {
                    title: I18n$1.t('description', I18nScope$38()),
                    subtitle: I18n$1.t('description_subtitle', I18nScope$38()),
                    content: m(projectEditDescription, _$1.extend({}, c_opts))
                }),
                '#budget': m(projectEditTab, {
                    title: I18n$1.t('budget', I18nScope$38()),
                    subtitle: I18n$1.t('budget_subtitle', I18nScope$38()),
                    content: m(projectEditBudget, _$1.extend({}, c_opts))
                }),
                '#reward': m(projectEditTab, {
                    title: I18n$1.t('reward_html', I18nScope$38()),
                    subtitle: I18n$1.t('reward_subtitle', I18nScope$38()),
                    content: m(projectEditReward, _$1.extend({}, c_opts))
                }),
                '#user_settings': m(projectEditTab, {
                    title: I18n$1.t('user_settings', I18nScope$38()),
                    subtitle: I18n$1.t('user_settings_subtitle', I18nScope$38()),
                    content: m(projectEditUserSettings, _$1.extend({}, c_opts))
                }),
                '#user_about': m(projectEditTab, {
                    title: I18n$1.t('user_about', I18nScope$38()),
                    subtitle: I18n$1.t('user_about_subtitle', I18nScope$38()),
                    content: m(projectEditUserAbout, _$1.extend({}, c_opts))
                }),
                '#card': m(projectEditTab, {
                    title: I18n$1.t('card', I18nScope$38()),
                    subtitle: I18n$1.t('card_subtitle', I18nScope$38()),
                    content: m(projectEditCard, _$1.extend({}, c_opts))
                }),
                '#basics': m(projectEditTab, {
                    title: I18n$1.t('basics', I18nScope$38()),
                    subtitle: I18n$1.t('basics_subtitle', I18nScope$38()),
                    content: m(projectEditBasic, _$1.extend({}, c_opts))
                }),
                '#goal': m(projectEditTab, {
                    title: I18n$1.t('goal', I18nScope$38()),
                    subtitle: I18n$1.t('goal_subtitle', I18nScope$38()),
                    content: m(projectEditGoal, _$1.extend({}, c_opts))
                }),
                '#announce_expiration': m(projectEditTab, {
                    title: I18n$1.t('announce_expiration', I18nScope$38()),
                    subtitle: I18n$1.t('announce_expiration_subtitle', I18nScope$38()),
                    content: m(projectAnnounceExpiration, _$1.extend({}, c_opts))
                }),
                '#preview': m(projectPreview, _$1.extend({}, c_opts))
            };

            hash(window.location.hash);

            if (_$1.isEmpty(hash()) || hash() === '#_=_') {
                return tabs['#basics'];
            }

            return tabs[hash()];
        };

        h.redrawHashChange();
        return {
            displayTabContent: displayTabContent,
            hash: hash,
            project: project
        };
    },
    view: function view(ctrl, args) {
        var project = ctrl.project;

        return m('.project-dashboard-edit', project() ? [m('.w-section.section-product.' + project().mode), ctrl.displayTabContent(), project() ? m.component(projectDashboardMenu, {
            project: project
        }) : ''] : '');
    }
};

var I18nScope$49 = _.partial(h.i18nScope, 'projects.contributions.edit.errors');

var paymentSlip = {
    controller: function controller(args) {
        var vm = args.vm,
            slipPaymentDate = vm.getSlipPaymentDate(args.contribution_id),
            loading = m.prop(false),
            error = m.prop(false),
            completed = m.prop(false);

        var buildSlip = function buildSlip() {
            loading(true);
            m.redraw();
            vm.paySlip(args.contribution_id, args.project_id, error, loading, completed);

            return false;
        };

        return {
            buildSlip: buildSlip,
            slipPaymentDate: slipPaymentDate,
            loading: loading,
            completed: completed,
            error: error
        };
    },
    view: function view(ctrl, args) {
        return m('.w-row', m('.w-col.w-col-12', m('.u-margintop-30.u-marginbottom-60.u-radius.card-big.card', [m('.fontsize-small.u-marginbottom-20', ctrl.slipPaymentDate() ? 'This bank account expires on ' + h.momentify(ctrl.slipPaymentDate().slip_expiration_date) + '.' : 'Loading...'), m('.fontsize-small.u-marginbottom-40', 'In generating the ticket, the director is already counting on his support.'), m('.w-row', m('.w-col.w-col-8.w-col-push-2', [ctrl.loading() ? h.loader() : ctrl.completed() ? '' : m('input.btn.btn-large.u-marginbottom-20', {
            onclick: ctrl.buildSlip,
            value: 'Print Ticket',
            type: 'submit'
        }), ctrl.error() ? m.component(inlineError, { message: ctrl.error() }) : '', m('.fontsize-smallest.u-text-center.u-marginbottom-30', ['By supporting, you agree with the ', m('a.alt-link[href=\'/en/terms-of-use\']', 'Terms of Use '), 'and ', m('a.alt-link[href=\'/en/privacy-policy\']', 'Privacy Policy')])]))])));
    }
};

var defaultFormat = /(\d{1,4})/g;

var indexOf = [].indexOf || function (item) {
    for (var i = 0, l = this.length; i < l; i++) {
        if (i in this && this[i] === item) return i;
    }return -1;
};

var cards = [{
    type: 'link',
    patterns: [401178, 401179, 431274, 438935, 451416, 457393, 457631, 457632, 504175, 506699, 5067, 509, 627780, 636297, 636368, 650, 6516, 6550],
    format: defaultFormat,
    length: [16],
    cvvLength: [3],
    luhn: true
}, {
    type: 'maestro',
    patterns: [5018, 502, 503, 506, 56, 58, 639, 6220, 67],
    format: defaultFormat,
    length: [12, 13, 14, 15, 16, 17, 18, 19],
    cvvLength: [3],
    luhn: true
}, {
    type: 'forbrugsforeningen',
    patterns: [600],
    format: defaultFormat,
    length: [16],
    cvvLength: [3],
    luhn: true
}, {
    type: 'dankort',
    patterns: [5019],
    format: defaultFormat,
    length: [16],
    cvvLength: [3],
    luhn: true
}, {
    type: 'visa',
    patterns: [4],
    format: defaultFormat,
    length: [13, 16],
    cvvLength: [3],
    luhn: true
}, {
    type: 'mastercard',
    patterns: [51, 52, 53, 54, 55, 22, 23, 24, 25, 26, 27],
    format: defaultFormat,
    length: [16],
    cvvLength: [3],
    luhn: true
}, {
    type: 'amex',
    patterns: [34, 37],
    format: /(\d{1,4})(\d{1,6})?(\d{1,5})?/,
    length: [15],
    cvvLength: [3, 4],
    luhn: true
}, {
    type: 'dinersclub',
    patterns: [30, 36, 38, 39],
    format: /(\d{1,4})(\d{1,6})?(\d{1,4})?/,
    length: [14],
    cvvLength: [3],
    luhn: true
}, {
    type: 'discover',
    patterns: [60, 64, 65, 622],
    format: defaultFormat,
    length: [16],
    cvvLength: [3],
    luhn: true
}, {
    type: 'unionpay',
    patterns: [62, 88],
    format: defaultFormat,
    length: [16, 17, 18, 19],
    cvvLength: [3],
    luhn: false
}, {
    type: 'jcb',
    patterns: [35],
    format: defaultFormat,
    length: [16],
    cvvLength: [3],
    luhn: true
}];

var inputCardType = function inputCardType(num) {
    var ref = void 0;
    if (!num) {
        return null;
    }
    return ((ref = cardFromNumber(num)) != null ? ref.type : void 0) || null;
};

var cardFromType = function cardFromType(type) {
    var card = void 0,
        i = void 0,
        len = void 0;
    for (i = 0, len = cards.length; i < len; i++) {
        card = cards[i];
        if (card.type === type) {
            return card;
        }
    }
};

var setCardType = function setCardType(e, type) {
    var $target = void 0,
        allTypes = void 0,
        card = void 0,
        cardType = void 0,
        val = void 0;
    $target = e.currentTarget;
    val = $target.value;
    cardType = inputCardType(val) || 'unknown';
    return type(cardType);
};

var formatBackCardNumber = function formatBackCardNumber(e, prop) {
    var $target = void 0,
        value = void 0;
    $target = e.currentTarget;
    value = $target.value;
    if (e.which !== 8) {
        return;
    }
    if ($target.selectionStart != null && $target.selectionStart !== value.length) {
        return;
    }
    if (/\d\s$/.test(value)) {
        e.preventDefault();
        return setTimeout(function () {
            return $target.value = prop(value.replace(/\d\s$/, ''));
        });
    } else if (/\s\d?$/.test(value)) {
        e.preventDefault();
        return setTimeout(function () {
            return $target.value = prop(value.replace(/\d$/, ''));
        });
    }
};

var replaceFullWidthChars = function replaceFullWidthChars(str) {
    var chars = void 0,
        chr = void 0,
        fullWidth = void 0,
        halfWidth = void 0,
        i = void 0,
        idx = void 0,
        len = void 0,
        value = void 0;
    if (str == null) {
        str = '';
    }
    fullWidth = '\uFF10\uFF11\uFF12\uFF13\uFF14\uFF15\uFF16\uFF17\uFF18\uFF19';
    halfWidth = '0123456789';
    value = '';
    chars = str.split('');
    for (i = 0, len = chars.length; i < len; i++) {
        chr = chars[i];
        idx = fullWidth.indexOf(chr);
        if (idx > -1) {
            chr = halfWidth[idx];
        }
        value += chr;
    }
    return value;
};

var safeVal = function safeVal(value, $target, prop) {
    var currPair = void 0,
        cursor = void 0,
        digit = void 0,
        error = void 0,
        error1 = void 0,
        last = void 0,
        prevPair = void 0;
    try {
        cursor = $target.selectionStart;
    } catch (error1) {
        error = error1;
        cursor = null;
    }
    last = $target.value;
    $target.value = prop(value);
    if (cursor !== null && $target === document.activeElement) {
        if (cursor === last.length) {
            cursor = value.length;
        }
        if (last !== value) {
            prevPair = last.slice(cursor - 1, +cursor + 1 || 9e9);
            currPair = value.slice(cursor - 1, +cursor + 1 || 9e9);
            digit = value[cursor];
            if (/\d/.test(digit) && prevPair === digit + ' ' && currPair === ' ' + digit) {
                cursor += 1;
            }
        }
        $target.selectionStart = cursor;
        return $target.selectionEnd = cursor;
    }
};

var reFormatCardNumber = function reFormatCardNumber(e, prop) {
    var $target = e.currentTarget;
    return setTimeout(function () {
        var value = void 0;
        value = $target.value;
        value = replaceFullWidthChars(value);
        value = formatCardNumber(value);
        return safeVal(value, $target, prop);
    });
};

var formatCardNumber = function formatCardNumber(num) {
    var card = void 0,
        groups = void 0,
        ref = void 0,
        upperLength = void 0;
    num = num.replace(/\D/g, '');
    card = cardFromNumber(num);
    if (!card) {
        return num;
    }
    upperLength = card.length[card.length.length - 1];
    num = num.slice(0, upperLength);
    if (card.format.global) {
        return (ref = num.match(card.format)) != null ? ref.join(' ') : void 0;
    }
    groups = card.format.exec(num);
    if (groups == null) {
        return;
    }
    groups.shift();
    groups = _$1.filter(groups, function (n) {
        return n;
    });
    return groups.join(' ');
};

var formatCardInputNumber = function formatCardInputNumber(e, prop) {
    var $target = void 0,
        card = void 0,
        digit = void 0,
        length = void 0,
        re = void 0,
        upperLength = void 0,
        value = void 0;
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
        return;
    }
    $target = e.currentTarget;
    value = $target.value;
    card = cardFromNumber(value + digit);
    length = (value.replace(/\D/g, '') + digit).length;
    upperLength = 16;
    if (card) {
        upperLength = card.length[card.length.length - 1];
    }
    if (length >= upperLength) {
        return;
    }
    if ($target.selectionStart != null && $target.selectionStart !== value.length) {
        return;
    }
    if (card && card.type === 'amex') {
        re = /^(\d{4}|\d{4}\s\d{6})$/;
    } else {
        re = /(?:^|\s)(\d{4})$/;
    }
    if (re.test(value)) {
        e.preventDefault();
        return setTimeout(function () {
            return $target.value = prop(value + ' ' + digit);
        });
    } else if (re.test(value + digit)) {
        e.preventDefault();
        return setTimeout(function () {
            return $target.value = prop(value + digit + ' ');
        });
    }
};

var cardFromNumber = function cardFromNumber(num) {
    var card = void 0,
        i = void 0,
        j = void 0,
        len = void 0,
        len1 = void 0,
        p = void 0,
        pattern = void 0,
        ref = void 0;
    num = ('' + num).replace(/\D/g, '');
    for (i = 0, len = cards.length; i < len; i++) {
        card = cards[i];
        ref = card.patterns;
        for (j = 0, len1 = ref.length; j < len1; j++) {
            pattern = ref[j];
            p = '' + pattern;
            if (num.substr(0, p.length) === p) {
                return card;
            }
        }
    }
};

var hasTextSelected = function hasTextSelected($target) {
    var ref = void 0;
    if ($target.selectionStart != null && $target.selectionStart !== $target.selectionEnd) {
        return true;
    }
    if ((typeof document !== 'undefined' && document !== null ? (ref = document.selection) != null ? ref.createRange : void 0 : void 0) != null) {
        if (document.selection.createRange().text) {
            return true;
        }
    }
    return false;
};

var restrictNumeric = function restrictNumeric(e) {
    var input = void 0;
    if (e.metaKey || e.ctrlKey) {
        return true;
    }
    if (e.which === 32) {
        return false;
    }
    if (e.which === 0) {
        return true;
    }
    if (e.which < 33) {
        return true;
    }
    input = String.fromCharCode(e.which);
    return !!/[\d\s]/.test(input);
};

var restrictCardNumber = function restrictCardNumber(e) {
    var $target = void 0,
        card = void 0,
        digit = void 0,
        value = void 0;
    $target = e.currentTarget;
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
        return;
    }
    if (hasTextSelected($target)) {
        return;
    }
    value = ($target.value + digit).replace(/\D/g, '');
    card = cardFromNumber(value);
    if (card) {
        return value.length <= card.length[card.length.length - 1];
    }
    return value.length <= 16;
};
var setEvents = function setEvents(el, cardType, prop) {
    el.onkeypress = function (event) {
        restrictNumeric(event);
        restrictCardNumber(event);
        formatCardInputNumber(event, prop);
    };
    el.oninput = function (event) {
        reFormatCardNumber(event, prop);
        setCardType(event, cardType);
    };
    el.onkeydown = function (event) {
        return formatBackCardNumber(event, prop);
    };
    el.onkeyup = function (event) {
        setCardType(event, cardType);
    };
    el.onpaste = function (event) {
        return reFormatCardNumber(event, prop);
    };
    el.onchange = function (event) {
        CatarseAnalytics.oneTimeEvent({ cat: 'contribution_finish', act: 'contribution_cc_edit' });
        reFormatCardNumber(event, prop);
    };
};

var luhnCheck = function luhnCheck(num) {
    var digit = void 0,
        digits = void 0,
        i = void 0,
        len = void 0,
        odd = void 0,
        sum = void 0;
    odd = true;
    sum = 0;
    digits = ('' + num).split('').reverse();
    for (i = 0, len = digits.length; i < len; i++) {
        digit = digits[i];
        digit = parseInt(digit, 10);
        if (odd = !odd) {
            digit *= 2;
        }
        if (digit > 9) {
            digit -= 9;
        }
        sum += digit;
    }
    return sum % 10 === 0;
};

var validateCardNumber = function validateCardNumber(num) {
    var card = void 0,
        ref = void 0;
    num = ('' + num).replace(/\s+|-/g, '');
    if (!/^\d+$/.test(num)) {
        return false;
    }
    card = cardFromNumber(num);
    if (!card) {
        return false;
    }
    return (ref = num.length, indexOf.call(card.length, ref) >= 0) && (card.luhn === false || luhnCheck(num));
};

var validateCardExpiry = function validateCardExpiry(month, year) {
    var currentTime = void 0,
        expiry = void 0,
        ref = void 0;
    if ((typeof month === 'undefined' ? 'undefined' : _typeof(month)) === 'object' && 'month' in month) {
        ref = month, month = ref.month, year = ref.year;
    }
    if (!(month && year)) {
        return false;
    }
    month = String(month).trim();
    year = String(year).trim();
    if (!/^\d+$/.test(month)) {
        return false;
    }
    if (!/^\d+$/.test(year)) {
        return false;
    }
    if (!(month >= 1 && month <= 12)) {
        return false;
    }
    if (year.length === 2) {
        if (year < 70) {
            year = '20' + year;
        } else {
            year = '19' + year;
        }
    }
    if (year.length !== 4) {
        return false;
    }
    expiry = new Date(year, month);
    currentTime = new Date();
    expiry.setMonth(expiry.getMonth() - 1);
    expiry.setMonth(expiry.getMonth() + 1, 1);
    return expiry > currentTime;
};

var validateCardcvv = function validateCardcvv(cvv, type) {
    var card = void 0,
        ref = void 0;
    cvv = String(cvv).trim();
    if (!/^\d+$/.test(cvv)) {
        return false;
    }
    card = cardFromType(type);
    if (card != null) {
        return ref = cvv.length, indexOf.call(card.cvvLength, ref) >= 0;
    }
    return cvv.length >= 3 && cvv.length <= 4;
};

var creditCardVM = {
    setEvents: setEvents,
    validateCardNumber: validateCardNumber,
    validateCardcvv: validateCardcvv,
    validateCardExpiry: validateCardExpiry
};

var creditCardInput = {
    controller: function controller(args) {
        var cardType = args.type || m.prop('unknown');
        // TODO: move all input logic to vdom paradigm
        // CreditCard Input still handle events on a dom-based model.
        var setCreditCardHandlers = function setCreditCardHandlers(el, isInitialized) {
            if (!isInitialized) {
                creditCardVM.setEvents(el, cardType, args.value);
            }
        };

        return {
            setCreditCardHandlers: setCreditCardHandlers,
            cardType: cardType
        };
    },
    view: function view(ctrl, args) {
        return m('input.w-input.text-field[name="' + args.name + '"][required="required"][type="tel"]', {
            onfocus: args.onfocus,
            class: args.class,
            config: ctrl.setCreditCardHandlers,
            onblur: args.onblur
        });
    }
};

var I18nScope$50 = _$1.partial(h.i18nScope, 'projects.contributions.edit');
var I18nIntScope$3 = _$1.partial(h.i18nScope, 'projects.contributions.edit_international');

var paymentCreditCard = {
    controller: function controller(args) {
        var vm = args.vm,
            loadingInstallments = m.prop(true),
            loadingSavedCreditCards = m.prop(true),
            selectedCreditCard = m.prop({ id: -1 }),
            selectedInstallment = m.prop('1'),
            showForm = m.prop(false),
            creditCardType = m.prop('unknown'),
            documentMask = _$1.partial(h.mask, '999.999.999-99'),
            documentCompanyMask = _$1.partial(h.mask, '99.999.999/9999-99');

        var onSubmit = function onSubmit() {
            if (selectedCreditCard().id === -1) {
                checkExpiry();
                checkcvv();
                checkCreditCard();
                checkCreditCardName();
            } else {
                vm.creditCardFields.errors([]);
            }

            if (vm.creditCardFields.errors().length === 0) {
                vm.sendPayment(selectedCreditCard, selectedInstallment, args.contribution_id, args.project_id);
            }

            return false;
        };

        var handleValidity = function handleValidity(isValid, errorObj) {
            if (!isValid) {
                vm.creditCardFields.errors().push(errorObj);
            } else {
                var errorsWithout = _$1.reject(vm.creditCardFields.errors(), function (err) {
                    return _$1.isEqual(err, errorObj);
                });
                vm.creditCardFields.errors(errorsWithout);
            }
        };

        var checkcvv = function checkcvv() {
            var isValid = creditCardVM.validateCardcvv(vm.creditCardFields.cvv(), creditCardType()),
                errorObj = { field: 'cvv', message: I18n$1.t('errors.inline.creditcard_cvv', scope()) };

            handleValidity(isValid, errorObj);
        };

        var checkExpiry = function checkExpiry() {
            var isValid = creditCardVM.validateCardExpiry(vm.creditCardFields.expMonth(), vm.creditCardFields.expYear()),
                errorObj = { field: 'expiry', message: I18n$1.t('errors.inline.creditcard_expiry', scope()) };

            handleValidity(isValid, errorObj);
        };

        var checkCreditCard = function checkCreditCard() {
            var isValid = creditCardVM.validateCardNumber(vm.creditCardFields.number()),
                errorObj = { field: 'number', message: I18n$1.t('errors.inline.creditcard_number', scope()) };

            handleValidity(isValid, errorObj);
        };

        var checkCardOwnerDocument = function checkCardOwnerDocument() {
            var document = vm.creditCardFields.cardOwnerDocument(),
                striped = String(document).replace(/[\.|\-|\/]*/g, '');
            var isValid = false,
                errorMessage = '';

            if (document.length > 14) {
                isValid = h.validateCnpj(document);
                errorMessage = 'CNPJ invalid.';
            } else {
                isValid = h.validateCpf(striped);
                errorMessage = 'CPF invalid.';
            }

            handleValidity(isValid, { field: 'cardOwnerDocument', message: errorMessage });
        };

        var checkCreditCardName = function checkCreditCardName() {
            var trimmedString = vm.creditCardFields.name().replace(/ /g, '');
            var charsOnly = /^[a-zA-Z]*$/;
            var errorObj = { field: 'name', message: I18n$1.t('errors.inline.creditcard_name', scope()) };
            var isValid = !(_$1.isEmpty(trimmedString) || !charsOnly.test(trimmedString));

            handleValidity(isValid, errorObj);
        };

        var applyCreditCardNameMask = _$1.compose(vm.creditCardFields.name, h.noNumbersMask);

        var applyCvvMask = function applyCvvMask(value) {
            var setValue = h.numbersOnlyMask(value.substr(0, 4));

            return vm.creditCardFields.cvv(setValue);
        };

        var applyDocumentMask = function applyDocumentMask(value) {
            if (value.length > 14) {
                vm.creditCardFields.cardOwnerDocument(documentCompanyMask(value));
            } else {
                vm.creditCardFields.cardOwnerDocument(documentMask(value));
            }
        };

        var fieldHasError = function fieldHasError(fieldName) {
            var fieldWithError = _$1.findWhere(vm.creditCardFields.errors(), { field: fieldName });

            return fieldWithError ? m.component(inlineError, { message: fieldWithError.message }) : '';
        };

        var buildTooltip = function buildTooltip(tooltipText) {
            return m.component(tooltip, {
                el: '.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary',
                text: tooltipText,
                width: 380
            });
        };

        var isCreditCardSelected = function isCreditCardSelected(card, idx) {
            return selectedCreditCard() === card;
        };

        var loadPagarme = function loadPagarme(el, isInit) {
            if (!isInit) {
                var script = document.createElement('script');
                script.src = '//assets.pagar.me/js/pagarme.min.js';
                document.body.appendChild(script);
                script.onload = function () {
                    vm.pagarme(window.PagarMe);
                };
            }
        };

        var selectCreditCard = function selectCreditCard(card) {
            selectedCreditCard(card);

            if (card.id === -1) {
                showForm(true);
            } else {
                showForm(false);
            }
        };

        var scope = function scope(attr) {
            return vm.isInternational() ? I18nIntScope$3(attr) : I18nScope$50(attr);
        };

        vm.getInstallments(args.contribution_id).then(function () {
            loadingInstallments(false);
            m.redraw();
        });

        vm.getSavedCreditCards(args.user_id).then(function (savedCards) {
            loadingSavedCreditCards(false);
            selectCreditCard(savedCards[0]);
            m.redraw();
        });

        return {
            vm: vm,
            onSubmit: onSubmit,
            fieldHasError: fieldHasError,
            buildTooltip: buildTooltip,
            loadingInstallments: loadingInstallments,
            loadingSavedCreditCards: loadingSavedCreditCards,
            installments: vm.installments,
            selectedInstallment: selectedInstallment,
            savedCreditCards: vm.savedCreditCards,
            creditCard: vm.creditCardFields,
            creditCardType: creditCardType,
            checkCreditCard: checkCreditCard,
            checkCreditCardName: checkCreditCardName,
            applyCreditCardNameMask: applyCreditCardNameMask,
            applyCreditCardMask: vm.applyCreditCardMask,
            applyDocumentMask: applyDocumentMask,
            checkCardOwnerDocument: checkCardOwnerDocument,
            applyCvvMask: applyCvvMask,
            checkcvv: checkcvv,
            selectCreditCard: selectCreditCard,
            isCreditCardSelected: isCreditCardSelected,
            expMonths: vm.expMonthOptions(),
            expYears: vm.expYearOptions(),
            loadPagarme: loadPagarme,
            scope: scope,
            showForm: showForm
        };
    },
    view: function view(ctrl, args) {
        var isInternational = ctrl.vm.isInternational();

        return m('.w-form.u-marginbottom-40', {
            config: ctrl.loadPagarme
        }, [m('form[name="email-form"]', {
            onsubmit: ctrl.onSubmit
        }, [!ctrl.loadingSavedCreditCards() && ctrl.savedCreditCards().length > 1 ? m('.my-credit-cards.w-form.back-payment-form-creditcard.records-choice.u-marginbottom-40', _$1.map(ctrl.savedCreditCards(), function (card, idx) {
            return m('div#credit-card-record-' + idx + '.w-row.creditcard-records', {
                style: 'cursor:pointer;',
                onclick: function onclick() {
                    return ctrl.selectCreditCard(card);
                }
            }, [m('.w-col.w-col-1.w-sub-col', m('.w-radio.w-clearfix.back-payment-credit-card-radio-field', m('input', {
                checked: ctrl.isCreditCardSelected(card, idx),
                name: 'payment_subscription_card',
                type: 'radio',
                value: card.card_key
            }))), card.id === -1 ? m('.w-col.w-col-11', m('.fontsize-small.fontweight-semibold.fontcolor-secondary', I18n$1.t('credit_card.use_another', ctrl.scope()))) : [m('.w-col.w-col-2.w-sub-col.w-sub-col-middle', m('.fontsize-small.fontweight-semibold.text-success', card.card_brand.toUpperCase())), m('.w-col.w-col-5.w-sub-col.w-sub-col-middle', m('.fontsize-small.fontweight-semibold.u-marginbottom-20', 'XXXX.XXXX.XXXX.' + card.last_digits)), m('.w-col.w-col-4', ctrl.loadingInstallments() || ctrl.installments().length <= 1 ? '' : m('select.w-select.text-field.text-field-creditcard', {
                onchange: m.withAttr('value', ctrl.selectedInstallment),
                value: ctrl.selectedInstallment()
            }, _$1.map(ctrl.installments(), function (installment) {
                return m('option', { value: installment.number }, installment.number + ' X US$ ' + installment.amount);
            })))]]);
        })) : ctrl.loadingSavedCreditCards() ? m('.fontsize-small.u-marginbottom-40', I18n$1.t('credit_card.loading', ctrl.scope())) : '', !ctrl.showForm() ? '' : m('#credit-card-payment-form.u-marginbottom-40', [m('div#credit-card-name', [m('.w-row', [m(isInternational ? '.w-col.w-col-12' : '.w-col.w-col-6.w-col-tiny-6.w-sub-col-middle', [m('label.field-label.fontweight-semibold[for="credit-card-name"]', I18n$1.t('credit_card.name', ctrl.scope())), m('.fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10', I18n$1.t('credit_card.name_tip', ctrl.scope())), m('input.w-input.text-field[name="credit-card-name"][type="text"]', {
            onfocus: ctrl.vm.resetCreditCardFieldError('name'),
            class: ctrl.fieldHasError('name') ? 'error' : '',
            onblur: ctrl.checkCreditCardName,
            onkeyup: m.withAttr('value', ctrl.applyCreditCardNameMask),
            value: ctrl.creditCard.name()
        }), ctrl.fieldHasError('name')]), !isInternational ? m('.w-col.w-col-6.w-col-tiny-6.w-sub-col-middle', [m('label.field-label.fontweight-semibold[for="credit-card-document"]', I18n$1.t('credit_card.document', ctrl.scope())), m('.fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10', I18n$1.t('credit_card.document_tip', ctrl.scope())), m('input.w-input.text-field[name="credit-card-document"]', {
            onfocus: ctrl.vm.resetCreditCardFieldError('cardOwnerDocument'),
            class: ctrl.fieldHasError('cardOwnerDocument') ? 'error' : '',
            onblur: ctrl.checkCardOwnerDocument,
            onkeyup: m.withAttr('value', ctrl.applyDocumentMask),
            value: ctrl.creditCard.cardOwnerDocument()
        }), ctrl.fieldHasError('cardOwnerDocument')]) : ''])]), m('div#credit-card-number', [m('label.field-label.fontweight-semibold[for="credit-card-number"]', I18n$1.t('credit_card.number', ctrl.scope())), m('.fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10', I18n$1.t('credit_card.number_tip', ctrl.scope())), m.component(creditCardInput, {
            onfocus: ctrl.vm.resetCreditCardFieldError('number'),
            onblur: ctrl.checkCreditCard,
            class: ctrl.fieldHasError('number') ? 'error' : '',
            value: ctrl.creditCard.number,
            name: 'credit-card-number',
            type: ctrl.creditCardType
        }), ctrl.fieldHasError('number')]), m('div#credit-card-date', [m('label.field-label.fontweight-semibold[for="expiration-date"]', [I18n$1.t('credit_card.expiry', ctrl.scope())]), m('.fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10', I18n$1.t('credit_card.expiry_tip', ctrl.scope())), m('.w-row', [m('.w-col.w-col-6.w-col-tiny-6.w-sub-col-middle', m('select.w-select.text-field[name="expiration-date_month"]', {
            onfocus: ctrl.vm.resetCreditCardFieldError('expiry'),
            class: ctrl.fieldHasError('expiry') ? 'error' : '',
            onchange: m.withAttr('value', ctrl.creditCard.expMonth),
            value: ctrl.creditCard.expMonth()
        }, _$1.map(ctrl.expMonths, function (month) {
            return m('option', { value: month[0] }, month[1]);
        }))), m('.w-col.w-col-6.w-col-tiny-6', m('select.w-select.text-field[name="expiration-date_year"]', {
            onfocus: ctrl.vm.resetCreditCardFieldError('expiry'),
            class: ctrl.fieldHasError('expiry') ? 'error' : '',
            onchange: m.withAttr('value', ctrl.creditCard.expYear),
            onblur: ctrl.checkExpiry,
            value: ctrl.creditCard.expYear()
        }, _$1.map(ctrl.expYears, function (year) {
            return m('option', { value: year }, year);
        }))), m('.w-col.w-col-12', ctrl.fieldHasError('expiry'))])]), m('div#credit-card-cvv', [m('label.field-label.fontweight-semibold[for="credit-card-cvv"]', [I18n$1.t('credit_card.cvv', ctrl.scope()), ctrl.buildTooltip(I18n$1.t('credit_card.cvv_tooltip', ctrl.scope()))]), m('.fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10', I18n$1.t('credit_card.cvv_tip', ctrl.scope())), m('.w-row', [m('.w-col.w-col-8.w-col-tiny-6.w-sub-col-middle', m('input.w-input.text-field[name="credit-card-cvv"][type="tel"]', {
            onfocus: ctrl.vm.resetCreditCardFieldError('cvv'),
            class: ctrl.fieldHasError('cvv') ? 'error' : '',
            onkeyup: m.withAttr('value', ctrl.applyCvvMask),
            onblur: ctrl.checkcvv,
            value: ctrl.creditCard.cvv()
        }), ctrl.fieldHasError('cvv')), m('.w-col.w-col-4.w-col-tiny-6.u-text-center', m('img[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57298c1c7e99926e77127bdd_cvv-card.jpg"][width="176"]'))])]), ctrl.loadingInstallments() || ctrl.installments().length <= 1 ? '' : m('.w-row', [m('.w-col.w-col-6', [m('label.field-label.fontweight-semibold[for="split"]', I18n$1.t('credit_card.installments', ctrl.scope())), m('select.w-select.text-field[name="split"]', {
            onchange: m.withAttr('value', ctrl.selectedInstallment),
            value: ctrl.selectedInstallment()
        }, _$1.map(ctrl.installments(), function (installment) {
            return m('option[value="' + installment.number + '"]', installment.number + ' X US$ ' + installment.amount);
        }))]), m('.w-col.w-col-6')]), m('.w-checkbox.w-clearfix', [m('input#payment_save_card.w-checkbox-input[type="checkbox"][name="payment_save_card"]', {
            onchange: m.withAttr('checked', ctrl.creditCard.save),
            checked: ctrl.creditCard.save()
        }), m('label.w-form-label[for="payment_save_card"]', I18n$1.t('credit_card.save_card', ctrl.scope()))])]), m('.w-row', [m('.w-col.w-col-8.w-col-push-2', [!_$1.isEmpty(ctrl.vm.submissionError()) ? m('.card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller', m('.u-marginbottom-10.fontweight-bold', m.trust(ctrl.vm.submissionError()))) : '', ctrl.vm.isLoading() ? h.loader() : m('input.btn.btn-large.u-marginbottom-20[type="submit"]', { value: I18n$1.t('credit_card.finish_payment', ctrl.scope()) }), m('.fontsize-smallest.u-text-center.u-marginbottom-30', m.trust(I18n$1.t('credit_card.terms_of_use_agreement', ctrl.scope())))])])])]);
    }
};

var I18nScope$48 = _$1.partial(h.i18nScope, 'projects.contributions.edit');
var I18nIntScope$2 = _$1.partial(h.i18nScope, 'projects.contributions.edit_international');

var paymentForm = {
    controller: function controller(args) {
        var isSlip = m.prop(false),
            scope = function scope() {
            return args.vm.isInternational() ? I18nIntScope$2() : I18nScope$48();
        };
        return {
            isSlip: isSlip,
            scope: scope,
            vm: args.vm
        };
    },
    view: function view(ctrl, args) {
        return m('#catarse_pagarme_form', [m('.u-text-center-small-only.u-marginbottom-30', [m('.fontsize-large.fontweight-semibold', I18n$1.t('payment_info', ctrl.scope())), m('.fontsize-smallest.fontcolor-secondary.fontweight-semibold', [m('span.fa.fa-lock'), I18n$1.t('safe_payment', ctrl.scope())])]), m('.flex-row.u-marginbottom-40', [m('a.w-inline-block.btn-select.flex-column.u-marginbottom-20.u-text-center[href=\'javascript:void(0);\']', {
            onclick: function onclick() {
                return ctrl.isSlip(false);
            },
            class: !ctrl.isSlip() ? 'selected' : ''
        }, [m('.fontsize-base.fontweight-semibold', I18n$1.t('credit_card_select', ctrl.scope())), m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-20', I18n$1.t('debit_card_info', ctrl.scope())), m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57299bd8f326a24d4828a0fd_credit-cards.png\']')]), !args.vm.isInternational() ? m('a.w-inline-block.btn-select.flex-column.u-marginbottom-20.u-text-center[href=\'javascript:void(0);\']', {
            onclick: function onclick() {
                return ctrl.isSlip(true);
            },
            class: ctrl.isSlip() ? 'selected' : ''
        }, [m('.fontsize-base.fontweight-semibold.u-marginbottom-20', 'Bank slip'), m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57299c6ef96a6e44489a7a07_boleto.png\'][width=\'48\']')]) : m('.flex-column')]), !ctrl.isSlip() ? m('#credit-card-section', [m.component(paymentCreditCard, { vm: args.vm, contribution_id: args.contribution_id, project_id: args.project_id, user_id: args.user_id })]) : !args.vm.isInternational() ? m('#boleto-section', [m.component(paymentSlip, { vm: args.vm, contribution_id: args.contribution_id, project_id: args.project_id })]) : '']);
    }
};

var I18nScope$47 = _$1.partial(h.i18nScope, 'projects.contributions.edit');
var I18nIntScope$1 = _$1.partial(h.i18nScope, 'projects.contributions.edit_international');

var projectsPayment = {
    controller: function controller(args) {
        var project = projectVM.currentProject,
            vm = paymentVM(),
            showPaymentForm = m.prop(false),
            addVM = m.prop(),
            contribution = contributionVM.getCurrentContribution(),
            reward = m.prop(contribution().reward),
            value = contribution().value,
            documentMask = _$1.partial(h.mask, '999.999.999-99'),
            documentCompanyMask = _$1.partial(h.mask, '99.999.999/9999-99'),
            isCnpj = m.prop(false),
            currentUserID = h.getUserID(),
            user = userVM.getCurrentUser();

        var shippingFee = function shippingFee() {
            return _$1.findWhere(rewardVM.fees(), {
                id: contribution().shipping_fee_id
            });
        };

        var validateForm = function validateForm() {
            if (vm.validate()) {
                vm.similityExecute(contribution().id);
                showPaymentForm(true);
            }
        };

        var fieldHasError = function fieldHasError(fieldName) {
            var fieldWithError = _$1.findWhere(vm.fields.errors(), {
                field: fieldName
            });

            return fieldWithError ? m.component(inlineError, {
                message: fieldWithError.message
            }) : '';
        };

        var applyDocumentMask = function applyDocumentMask(value) {
            if (value.length > 14) {
                isCnpj(true);
                vm.fields.ownerDocument(documentCompanyMask(value));
            } else {
                isCnpj(false);
                vm.fields.ownerDocument(documentMask(value));
            }
        };

        var addressChange = function addressChange(fn) {
            return function (e) {
                CatarseAnalytics.oneTimeEvent({
                    cat: 'contribution_finish',
                    act: vm.isInternational ? 'contribution_address_br' : 'contribution_address_int'
                });

                if (_$1.isFunction(fn)) {
                    fn(e);
                }
            };
        };

        var scope = function scope(attr) {
            return vm.isInternational() ? I18nIntScope$1(attr) : I18nScope$47(attr);
        };

        var isLongDescription = function isLongDescription(reward) {
            return reward.description && reward.description.length > 110;
        };

        if (_$1.isNull(currentUserID)) {
            return h.navigateToDevise();
        }
        rewardVM.getFees(reward()).then(rewardVM.fees);
        vm.fetchUser().then(function () {
            addVM(addressVM({
                data: vm.fields.address()
            }));
        });
        vm.similityExecute(contribution().id);
        projectVM.getCurrentProject();

        return {
            addressChange: addressChange,
            applyDocumentMask: applyDocumentMask,
            fieldHasError: fieldHasError,
            validateForm: validateForm,
            showPaymentForm: showPaymentForm,
            contribution: contribution,
            reward: reward,
            value: value,
            addVM: addVM,
            scope: scope,
            isCnpj: isCnpj,
            vm: vm,
            user: user,
            project: project,
            shippingFee: shippingFee,
            isLongDescription: isLongDescription,
            toggleDescription: h.toggleProp(false, true)
        };
    },
    view: function view(ctrl) {
        var user = ctrl.user(),
            addVM = ctrl.addVM(),
            project = ctrl.project(),
            formatedValue = h.formatNumber(Number(ctrl.value), 2, 3),
            anonymousCheckbox = m('.w-row', [m('.w-checkbox.w-clearfix', [m('input.w-checkbox-input[id=\'anonymous\'][name=\'anonymous\'][type=\'checkbox\']', {
            onclick: function onclick() {
                return CatarseAnalytics.event({
                    cat: 'contribution_finish',
                    act: 'contribution_anonymous_change'
                });
            },
            onchange: function onchange() {
                ctrl.vm.fields.anonymous.toggle();
            },
            checked: ctrl.vm.fields.anonymous()
        }), m('label.w-form-label.fontsize-smallest[for=\'anonymous\']', I18n$1.t('fields.anonymous', ctrl.scope()))]), ctrl.vm.fields.anonymous() ? m('.card.card-message.u-radius.zindex-10.fontsize-smallest', m('div', [m('span.fontweight-bold', [I18n$1.t('anonymous_confirmation_title', ctrl.scope()), m('br')]), m('br'), I18n$1.t('anonymous_confirmation', ctrl.scope())])) : '']);

        return m('#project-payment.w-section.w-clearfix.section', addVM && !_$1.isEmpty(project) ? [m('.w-col', m('.w-clearfix.w-hidden-main.w-hidden-medium.card.u-radius.u-marginbottom-20', [m('.fontsize-smaller.fontweight-semibold.u-marginbottom-20', I18n$1.t('selected_reward.value', ctrl.scope())), m('.w-clearfix', [m('.fontsize-larger.text-success.u-left', 'US$ ' + formatedValue), m('a.alt-link.fontsize-smaller.u-right[href="/projects/' + projectVM.currentProject().project_id + '/contributions/new' + (ctrl.reward().id ? '?reward_id=' + ctrl.reward().id : '') + '"]', 'Edit')]), m('.divider.u-marginbottom-10.u-margintop-10'), m('.back-payment-info-reward', [m('.fontsize-smaller.fontweight-semibold.u-marginbottom-10', I18n$1.t('selected_reward.reward', ctrl.scope())), m('.fontsize-smallest.fontweight-semibold', ctrl.reward().title), m('.fontsize-smallest.reward-description.opened.fontcolor-secondary', {
            class: ctrl.isLongDescription(ctrl.reward()) ? ctrl.toggleDescription() ? 'extended' : '' : 'extended'
        }, ctrl.reward().description ? ctrl.reward().description : m.trust(I18n$1.t('selected_reward.review_without_reward_html', ctrl.scope(_$1.extend({
            value: formatedValue
        }))))), ctrl.isLongDescription(ctrl.reward()) ? m('a[href="javascript:void(0);"].link-hidden.link-more.u-marginbottom-20', {
            onclick: ctrl.toggleDescription.toggle
        }, [ctrl.toggleDescription() ? 'less ' : 'more ', m('span.fa.fa-angle-down', {
            class: ctrl.toggleDescription() ? 'reversed' : ''
        })]) : '', ctrl.reward().deliver_at ? m('.fontcolor-secondary.fontsize-smallest.u-margintop-10', [m('span.fontweight-semibold', 'Estimated delivery time:'), ' ' + h.momentify(ctrl.reward().deliver_at, 'MMM/YYYY')]) : '', rewardVM.hasShippingOptions(ctrl.reward()) || ctrl.reward().shipping_options === 'Pickup' ? m('.fontcolor-secondary.fontsize-smallest', [m('span.fontweight-semibold', 'Shipping method: '), I18n$1.t('shipping_options.' + ctrl.reward().shipping_options, {
            scope: 'projects.contributions'
        })]) : ''])])), m('.w-container', m('.w-row', [m('.w-col.w-col-8', [m('.w-form', [m('form.u-marginbottom-40', [m('.u-marginbottom-40.u-text-center-small-only', [m('.fontweight-semibold.lineheight-tight.fontsize-large', I18n$1.t('title', ctrl.scope())), m('.fontsize-smaller', I18n$1.t('required', ctrl.scope()))]), user.name && user.owner_document ? m('.card.card-terciary.u-radius.u-marginbottom-40', [m('.w-row.u-marginbottom-20', [m('.w-col.w-col-2.w-col-small-2.w-col-tiny-2.w-hidden-tiny', [m('img.thumb.u-margintop-10.u-round[src="' + h.useAvatarOrDefault(user.profile_img_thumbnail) + '"][width="100"]')]), m('.w-col.w-col-10.w-col-small-10.w-col-tiny-10', [m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-10', [project ? 'Supporter Details ' : 'User Details ', m('a.alt-link[href="/not-my-account' + (project ? '?project_id=' + project.project_id : '') + (ctrl.reward() ? '&reward_id=' + ctrl.reward().id : '') + (ctrl.value ? '&value=' + ctrl.value * 100 : '') + '"]', 'No, and you?')]), m('.fontsize-base.fontweight-semibold', user.name), user.owner_document ? m('label.field-label', 'CPF/CNPJ: ' + user.owner_document) : ''])]), anonymousCheckbox]) : '', m('.card.card-terciary.u-marginbottom-30.u-radius.w-form', m(nationalityRadio, {
            fields: addVM.fields,
            defaultCountryID: addVM.defaultCountryID,
            defaultForeignCountryID: addVM.defaultForeignCountryID,
            international: addVM.international
        })), user.name && user.owner_document ? '' : m('.card.card-terciary.u-radius.u-marginbottom-40', [m('.w-row', [m('.w-col.w-col-7.w-sub-col', [m('label.field-label.fontweight-semibold[for=\'complete-name\']', I18n$1.t('fields.complete_name', ctrl.scope())), m('input.positive.w-input.text-field[id=\'complete-name\'][name=\'complete-name\']', {
            onfocus: ctrl.vm.resetFieldError('completeName'),
            class: ctrl.fieldHasError('completeName') ? 'error' : false,
            type: 'text',
            onchange: m.withAttr('value', ctrl.vm.fields.completeName),
            value: ctrl.vm.fields.completeName(),
            placeholder: 'Full name'
        }), ctrl.fieldHasError('completeName')]), m('.w-col.w-col-5', addVM.international() ? '' : [m('label.field-label.fontweight-semibold[for=\'document\']', I18n$1.t('fields.owner_document', ctrl.scope())), m('input.positive.w-input.text-field[id=\'document\']', {
            onfocus: ctrl.vm.resetFieldError('ownerDocument'),
            class: ctrl.fieldHasError('ownerDocument') ? 'error' : false,
            type: 'tel',
            onkeyup: m.withAttr('value', ctrl.applyDocumentMask),
            value: ctrl.vm.fields.ownerDocument()
        }), ctrl.fieldHasError('ownerDocument')])]), anonymousCheckbox]), m('.card.card-terciary.u-radius.u-marginbottom-40', m(addressForm, {
            addressFields: addVM.fields,
            fields: m.prop(ctrl.vm.fields),
            international: addVM.international,
            hideNationality: true
        }))])]), m('.w-row.u-marginbottom-40', !ctrl.showPaymentForm() ? m('.w-col.w-col-push-3.w-col-6', m('button.btn.btn-large', {
            onclick: function onclick() {
                return CatarseAnalytics.event({
                    cat: 'contribution_finish',
                    act: 'contribution_next_click'
                }, ctrl.validateForm);
            }
        }, I18n$1.t('next_step', ctrl.scope()))) : ''), ctrl.showPaymentForm() ? m.component(paymentForm, {
            vm: ctrl.vm,
            contribution_id: ctrl.contribution().id,
            project_id: projectVM.currentProject().project_id,
            user_id: user.id
        }) : '']), m('.w-col.w-col-4', [m('.card.u-marginbottom-20.u-radius.w-hidden-small.w-hidden-tiny', [m('.fontsize-smaller.fontweight-semibold.u-marginbottom-20', I18n$1.t('selected_reward.value', ctrl.scope())), m('.w-clearfix', [m('.fontsize-larger.text-success.u-left', 'US$ ' + formatedValue), m('a.alt-link.fontsize-smaller.u-right[href="/projects/' + projectVM.currentProject().project_id + '/contributions/new' + (ctrl.reward().id ? '?reward_id=' + ctrl.reward().id : '') + '"]', 'Edit')]), m('.divider.u-marginbottom-10.u-margintop-10'), m('.back-payment-info-reward', [m('.fontsize-smaller.fontweight-semibold.u-marginbottom-10', I18n$1.t('selected_reward.reward', ctrl.scope())), m('.fontsize-smallest.fontweight-semibold', ctrl.reward().title), m('.fontsize-smallest.reward-description.opened.fontcolor-secondary', {
            class: ctrl.isLongDescription(ctrl.reward()) ? ctrl.toggleDescription() ? 'extended' : '' : 'extended'
        }, ctrl.reward().description ? ctrl.reward().description : m.trust(I18n$1.t('selected_reward.review_without_reward_html', ctrl.scope(_$1.extend({
            value: Number(ctrl.value).toFixed()
        }))))), ctrl.isLongDescription(ctrl.reward()) ? m('a[href="javascript:void(0);"].link-hidden.link-more.u-marginbottom-20', {
            onclick: ctrl.toggleDescription.toggle
        }, [ctrl.toggleDescription() ? 'less ' : 'more ', m('span.fa.fa-angle-down', {
            class: ctrl.toggleDescription() ? 'reversed' : ''
        })]) : '', ctrl.reward().deliver_at ? m('.fontcolor-secondary.fontsize-smallest.u-margintop-10', [m('span.fontweight-semibold', 'Estimated delivery time:'), ' ' + h.momentify(ctrl.reward().deliver_at, 'MMM/YYYY')]) : '', rewardVM.hasShippingOptions(ctrl.reward()) || ctrl.reward().shipping_options === 'pickup' ? m('.fontcolor-secondary.fontsize-smallest', [m('span.fontweight-semibold', 'Shipping method: '), I18n$1.t('shipping_options.' + ctrl.reward().shipping_options, {
            scope: 'projects.contributions'
        })]) : '', m('div' //,
        // ctrl.contribution().shipping_fee_id ? [
        //     m('.divider.u-marginbottom-10.u-margintop-10'),
        //     m('.fontsize-smaller.fontweight-semibold',
        //         'Destino da recompensa:'
        //     ),
        //     m(`a.alt-link.fontsize-smaller.u-right[href="/projects/${projectVM.currentProject().project_id}/contributions/new${ctrl.reward().id ? `?reward_id=${ctrl.reward().id}` : ''}"]`,
        //         'Editar'
        //     ),
        //     m('.fontsize-smaller', { style: 'padding-right: 42px;' },
        //         `${rewardVM.feeDestination(ctrl.reward(), ctrl.contribution().shipping_fee_id)}`
        //     ),
        //     m('p.fontsize-smaller', `(US$ ${rewardVM.shippingFeeById(ctrl.contribution().shipping_fee_id) ? rewardVM.shippingFeeById(ctrl.contribution().shipping_fee_id).value : '...'})`)
        // ] : ''
        )])]), m.component(faqBox, {
            mode: project.mode,
            vm: ctrl.vm,
            faq: ctrl.vm.faq(project.mode),
            projectUserId: project.user_id
        })])]))] : h.loader());
    }
};

var projectsReward = {
    controller: function controller(args) {
        var vm = rewardVM,
            selectedReward = vm.selectedReward,
            selectReward = vm.selectReward,
            rewards = vm.rewards(),
            mode = projectVM.currentProject().mode,
            faq = I18n$1.translations[I18n$1.currentLocale()].projects.faq[mode];

        // TODO unify projectsReward and project-reward-list reward submission. fix routing issue.
        var submitContribution = function submitContribution() {
            var valueFloat = h.monetaryToFloat(vm.contributionValue);

            if (valueFloat < vm.selectedReward().minimum_value) {
                vm.error('The amount of support for this reward must be at least US$' + vm.selectedReward().minimum_value);
            } else if (!h.getUser()) {
                h.storeObject(storeKey, { value: valueFloat, reward: vm.selectedReward() });

                return h.navigateToDevise('/' + projectVM.currentProject().permalink);
            } else {
                vm.error('');
                vm.contributionValue(valueFloat);
                m.route('/projects/' + projectVM.currentproject().project_id + '/payment', {
                    project_user_id: projectVM.currentProject().user_id
                });
            }

            return false;
        };

        var isSelected = function isSelected(reward) {
            return reward.id === selectedReward().id;
        };

        if (_$1.first(rewards).id !== vm.noReward.id) {
            rewards.unshift(vm.noReward);
        }

        return {
            rewards: rewards,
            project: projectVM.currentProject,
            contributionValue: vm.contributionValue,
            submitContribution: submitContribution,
            applyMask: vm.applyMask,
            error: vm.error,
            isSelected: isSelected,
            selectedReward: selectedReward,
            selectReward: selectReward,
            faq: faq
        };
    },
    view: function view(ctrl, args) {
        var project = ctrl.project;

        return m('#project-rewards', [m('.w-section.page-header.u-text-center', [m('.w-container', [m('h1.fontsize-larger.fontweight-semibold.project-name[itemprop="name"]', h.selfOrEmpty(project().name || project().project_name)), m('h2.fontsize-base.lineheight-looser[itemprop="author"]', ['by ', project().user ? project().user.name : project().owner_name ? project().owner_name : ''])])]), m('.w-section.header-cont-new', m('.w-container', m('.fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only', 'Choose the reward and then the amount of the support'))), m('.section[id=\'new-contribution\']', m('.w-container', m('.w-row', [m('.w-col.w-col-8', m('.w-form.back-reward-form', m('form.simple_form.new_contribution', {
            onsubmit: ctrl.submitContribution
        }, _$1.map(ctrl.rewards, function (reward, index) {
            var isSelected = ctrl.isSelected(reward),
                monetaryMinimum = h.applyMonetaryMask(reward.minimum_value);

            return m('span.radio.w-radio.w-clearfix.back-reward-radio-reward', {
                class: isSelected ? 'selected' : '',
                onclick: ctrl.selectReward(reward),
                key: index
            }, m('label[for=\'contribution_reward_id_' + reward.id + '\']', [m('input.radio_buttons.optional.w-input.text-field.w-radio-input.back-reward-radio-button[id=\'contribution_reward_id_' + reward.id + '\'][name=\'contribution[reward_id]\'][type=\'radio\'][value=\'' + reward.id + '\']', {
                checked: !!isSelected
            }), m('label.w-form-label.fontsize-base.fontweight-semibold.u-marginbottom-10[for=\'contribution_reward_' + reward.id + '\']', reward.id === -1 ? 'I do not want any reward' : 'US$ ' + reward.minimum_value + ' or more'), isSelected ? m('.w-row.back-reward-money', [m('.w-col.w-col-8.w-col-small-8.w-col-tiny-8.w-sub-col-middle.w-clearfix', [m('.w-row', [m('.w-col.w-col-3.w-col-small-3.w-col-tiny-3', m('.back-reward-input-reward.placeholder', 'US$')), m('.w-col.w-col-9.w-col-small-9.w-col-tiny-9', m('input.user-reward-value.back-reward-input-reward[autocomplete=\'off\'][type=\'tel\']', {
                class: ctrl.error() ? 'error' : '',
                min: monetaryMinimum,
                placeholder: monetaryMinimum,
                onkeyup: m.withAttr('value', ctrl.applyMask),
                value: ctrl.contributionValue()
            }))]), ctrl.error().length > 0 ? m('.text-error', [m('br'), m('span.fa.fa-exclamation-triangle'), ' ' + ctrl.error()]) : '']), m('.submit-form.w-col.w-col-4.w-col-small-4.w-col-tiny-4', m('button.btn.btn-large', ['Continue  ', m('span.fa.fa-chevron-right')]))]) : '', m('.back-reward-reward-description', [m('.fontsize-smaller.u-marginbottom-10', reward.description), reward.deliver_at ? m('.fontsize-smallest.fontcolor-secondary', 'Estimated delivery: ' + h.momentify(reward.deliver_at, 'MMM/YYYY')) : ''])])); // End map return
        })))), m('.w-col.w-col-4', m.component(faqBox, { mode: ctrl.project().mode, faq: ctrl.faq }))])))]);
    }
};

var I18nScope$51 = _$1.partial(h.i18nScope, 'projects.publish');

var publish = {
    controller: function controller(args) {
        var filtersVM = postgrest$1.filtersVM({
            project_id: 'eq'
        }),
            projectAccount = m.prop([]),
            projectDetails = m.prop([]),
            acceptTerm = m.prop([true, true, true, true, true, true, true, true, true]),
            flexAcceptTerm = m.prop([true, true, true, true, true, true, true, true, true]),
            showNextTerm = function showNextTerm(index, acceptTerms) {
            var terms = acceptTerms();
            if (terms[index]) {
                terms[index] = false;
                acceptTerms(terms);
                var nextTerm = document.getElementsByClassName('w-hidden publish-rules');
                if (nextTerm[0] !== undefined) {
                    nextTerm[0].classList.remove('w-hidden');
                }
            }
            // show publish button after accepting all rules
            if (index === terms.length - 1) {
                document.getElementsByClassName('publish-btn-section')[0].classList.remove('w-hidden');
            }
        },
            loader = postgrest$1.loaderWithToken;

        filtersVM.project_id(args.root.getAttribute('data-id'));

        var l = loader(models.projectDetail.getRowOptions(filtersVM.parameters())),
            accountL = loader(models.projectAccount.getRowOptions(filtersVM.parameters()));
        l.load().then(projectDetails);
        accountL.load().then(projectAccount);

        var expiresAt = function expiresAt() {
            var project = _$1.first(projectDetails());
            return moment().add(project.online_days, 'days');
        };

        return {
            l: l,
            accountL: accountL,
            expiresAt: expiresAt,
            filtersVM: filtersVM,
            acceptTerm: acceptTerm,
            flexAcceptTerm: flexAcceptTerm,
            showNextTerm: showNextTerm,
            projectAccount: projectAccount,
            projectDetails: projectDetails
        };
    },
    view: function view(ctrl, args) {
        var project = _$1.first(ctrl.projectDetails()),
            account = _$1.first(ctrl.projectAccount()),
            flexTerms = function flexTerms(project) {
            return [m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '1/9'), ' ', m('span.fontweight-semibold', 'What you can and can not change on the project page as of the post?')]), m('div', [m('span.fontweight-semibold', 'You can not change'), ': the identity of the person in charge of the project (Name/CPF or Company Name/CNPJ), the funding mode, the project title, the URL of the project, the project category, the collection goal, the deadline), and the rewards where there is support already made.', m('br'), m('br'), m('span.fontweight-semibold', 'You can change'), ': the main video of the campaign, the content of the description, the project image, the rewards where there are no supports made, in addition to adding new rewards during the collection'])]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '2/9'), ' ', m('span.fontweight-semibold', 'FLEX Rules')]), m('div', 'You have chosen the flexible campaign. In this way, you will receive all the funds collected from the supporters at the end of the campaign term (discounting OppoStarter fee and Stripe fee) and must comply with the execution of the project and with the delivery of the rewards offered regardless of how much to collect.')]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '3/9'), ' ', m('span.fontweight-semibold', 'Goal of campaign')]), m('div', 'The goal can not be changed after the project has been published.')]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '4/9'), ' ', m('span.fontweight-semibold', 'Fees')]), m('div', ['At the end of the campaign, we will charge 5% plus 3-5% Stripe processing fee ', m('span.fontweight-semibold', 'total amount collected.')])]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '5/9'), ' ', m('span.fontweight-semibold', 'Campaign deadline')]), m('div', 'Once set, the closing period can not be changed. If you started the campaign with the deadline, you should set it during the campaign, and you can leave the campaign open for a maximum of 12 months.')]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '6/9'), ' ', m('span.fontweight-semibold', 'Prazo para repasse')]), m('div', m.trust('When the deadline for your project comes to an end, you must enter and confirm your bank details. You may change the Bank, Account and the Agency <strong>only if the new registered account is owned by you</strong>. Upon confirmation, Oppostarter will deposit into your checking account within 10 business days. The amount deposited will already be considering the discount of 5% of the rate.'))]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '7/9'), ' ', m('span.fontweight-semibold', 'Responsibility of OppoStarter')]), [m('div', [m('span.fontweight-semibold'), m('span.fontweight-semibold', 'OppoStarter is responsible:'), ' the technological development of the platform, fixing of concerns and problems (both of supporters and directors), for hosting the project on the platform and for ensuring the security of financial transactions.\ ', m('br'), m('br'), m('span.fontweight-semibold', 'OppoStarter is not responsible:'), ' financing, advertising and creating, nor for the delivery of rewards of the registered projects.'])]]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '8/9'), ' ', m('span.fontweight-semibold', 'Your responsibilities')]), m('div', 'It is your responsibility to receive the money from the campaign and everything related to the campaign of project, planning and advertising the fundraising campaign, mobilizing supporters, executing the project, communicating with supporters, and producing and delivering rewards within the estimated time frame.')]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '9/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'Cancelling from projects that are live')]), m('div', [m('span.fontweight-semibold'), 'OPPOSTARTER reserves the right, in its sole discretion and once notified, to cancel projects and terminate the accounts of PROJECT CREATORS that violate our ', m('a.alt-link[href=\'http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos\'][target=\'_blank\']', 'Rules'), ' and ', m('a.alt-link[href=\'https://www.oppostarter.com/terms-of-use\'][target=\'_blank\']', 'Terms of Use'), '.'])])];
        },
            terms = function terms(project) {
            return [m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '1/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'What you can and can not change on the project page as of the post?')]), m('div', [m('span.fontweight-semibold', 'You can not change'), ': the identity of the person in charge of the project (Name/CPF or Company Name/CNPJ), the funding mode, the project title, the URL of the project, the project category, the collection goal, the deadline), and the rewards where there is support already made. ', m('br'), m('br'), m('span.fontweight-semibold', 'You can change'), ': the main video of the campaign, the content of the description, the project image, the rewards where there are no supports made, in addition to adding new rewards during the collection'])]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '2/9'), ' ', m('span.fontweight-semibold', 'All-or-nothing rules')]), m('div', ['You chose the all-or-nothing campaign. In this way, you will only receive the funds collected ', m('span.fontweight-semibold', 'if it reaches or exceeds the collection goal'), '. Otherwise, all of your supporters will be reimbursed. You will be responsible for delivering the rewards offered if your project reaches the collection goal.'])]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '3/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'Goal of campaign')]), m('div', 'The goal can not be changed after the project has been published.')]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '4/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'Fees')]), m('div', ['We charge 5% plus 3-5% Stripe processing fee ', m('span.fontweight-semibold', 'total amount collected'), ' by your project if it reaches or exceeds the target within the campaign deadline. If the project does not reach the goal, no fee will be charged.', m('span.fontweight-semibold')])]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '5/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'Campaign deadline')]), m('div', 'Your project will be in campaign on OppoStarter until the day ' + h.momentify(ctrl.expiresAt()) + ' at 11:50 p.m. This deadline can not be changed after the publication of the project.')]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '6/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'Transfer and refund rules'), m('div', [m.trust('When the deadline for your project comes to an end, you must enter and confirm your bank details. You may change the Bank, Account and the Agency <strong>only if the new registered account is owned by you</strong>. After this confirmation, OppoStarter will deposit the amount collected, already discounted the fee, into your account in 10 business days. If the project does not reach 100% of the target by the deadline, OppoStarter will reimburse the supporters. <a href="http://suporte.catarse.me/hc/pt-br/articles/202365507" target="blank">Learn more about the repayment process</a>')])]), m('div', '')]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '7/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'OppoStarter is responsible')]), [m('div', [m('span.fontweight-semibold'), m('span.fontweight-semibold', 'OppoStarter is responsible:'), ' the technological development of the platform, fixing of concerns and problems (both of supporters and directors), for hosting the project on the platform and for ensuring the security of financial transactions.\ ', m('br'), m('br'), m('span.fontweight-semibold', 'OppoStarter is not responsible:'), ' financing, advertising and creating, nor for the delivery of rewards of the registered projects.'])]]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '8/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'Your responsibilities')]), m('div', 'It is your responsibility to receive the money from the campaign and everything related to the campaign of project, planning and advertising the fundraising campaign, mobilizing supporters, executing the project, communicating with supporters, and producing and delivering rewards within the estimated time frame.')]), m('.w-col.w-col-11', [m('div', [m('span.fontsize-smallest.fontcolor-secondary', '9/9'), ' ', m('span', { style: { 'font-weight': ' 600' } }, 'Cancelling from projects that are live')]), m('div', [m('span.fontweight-semibold'), 'OPPOSTARTER reserves the right, in its sole discretion and once notified, to cancel projects and terminate the accounts of PROJECT CREATORS that violate our ', m('a.alt-link[href=\'http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos\'][target=\'_blank\']', 'Rules'), ' and ', m('a.alt-link[href=\'http://www.catarse.me/terms-of-use\'][target=\'_blank\']', 'Terms of Use'), '.'])])];
        };

        return [project && account ? [project.is_owner_or_admin ? m.component(projectDashboardMenu, {
            project: m.prop(project),
            hidePublish: true
        }) : '', m('.w-section.section-product.' + project.mode), m('.w-section.section', [m('.w-container', [m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-6', [m('.u-text-center', [m('img.u-marginbottom-20[src=\'/assets/catarse_bootstrap/launch-icon.png\'][width=\'94\']'), m('.fontsize-large.fontweight-semibold.u-marginbottom-20', 'Ready to launch your campaign?'), m('.fontsize-base.u-marginbottom-30', 'We have prepared a list with important information for you to check before putting your project online.!')])]), m('.w-col.w-col-3')])])]), m('.divider'), m('.w-section.section-one-column.bg-gray.section.before-footer', [m('.w-container', [m('.card.medium.u-marginbottom-60.card-terciary', [m('.w-row', [m('.w-col.w-col-6.w-clearfix', [m('img.card-project-thumb.u-right[src=' + project.large_image + ']')]), m('.w-col.w-col-6', [m('.u-marginbottom-30.fontsize-base', [m('div', [m('span.fontweight-semibold', 'Title: '), project.name]), m('div', [m('span.fontweight-semibold', 'Link: '), 'www.oppostarter.com/' + project.permalink]), m('div', [m('span.fontweight-semibold', 'Financing method: '), I18n$1.t(project.mode, I18nScope$51())]), m('div', [m('span.fontweight-semibold', 'Goal of campaign: '), 'US$ ' + h.formatNumber(project.goal, 2, 3)]), project.online_days !== null ? m('div', [m('span.fontweight-semibold', 'Deadline: ' + project.online_days + ' ' + (project.online_days > 1 ? 'days' : 'day'))]) : '', m('div', [m('span.fontweight-semibold', 'Responsible: '), account.owner_name]), m('div', [m('span.fontweight-semibold', 'CPF/CNPJ: '), account.owner_document])])])]), m('.u-text-center', [m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', [m('.divider.u-marginbottom-10'), m('.fontsize-small.fontcolor-secondary', 'The above details can not be changed after the project goes live. If you need to make changes, navigate to the sidebar and come back here when you are all set!')]), m('.w-col.w-col-1')])])]), m('.card.medium.u-radius.u-marginbottom-60', [m('.u-text-center.u-marginbottom-60', [m('.fontsize-large.fontweight-semibold', 'Remember our rules'), m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.fontsize-small', ['Before posting, click on the circles below and confirm that you are aware of how OppoStarter works. Any doubt, ', m('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/requests/new"][target="_blank"]', 'Enter contact'), '!'])]), m('.w-col.w-col-2')])]), _$1.map(project.mode === 'flex' ? flexTerms(project) : terms(project), function (term, index) {
            return m('.u-marginbottom-30.fontsize-base' + (index === 0 ? '' : '.w-hidden.publish-rules'), [m('.w-row[id=\'rule-' + index + '\']', [m('.w-col.w-col-1.u-text-center', [m('div', [m((project.mode === 'flex' ? ctrl.flexAcceptTerm() : ctrl.acceptTerm())[index] ? 'a.w-inline-block.checkbox-big[href=\'#rule-' + (index + 1) + '\']' : 'a.w-inline-block.checkbox-big.checkbox--selected.fa.fa-check.fa-lg[href=\'#rule-' + (index + 1) + '\']', { onclick: function onclick() {
                    return ctrl.showNextTerm(index, project.mode === 'flex' ? ctrl.flexAcceptTerm : ctrl.acceptTerm);
                } })])]), term])]);
        })]), m('.w-row.publish-btn-section.w-hidden', [m('.w-col.w-col-4'), m('.w-col.w-col-4', [m('a.btn.btn-large.u-marginbottom-20[href=/' + (project.mode === 'flex' ? 'flexible_projects' : 'projects') + '/' + project.project_id + '/push_to_online]', 'Publish Now!'), m('.u-text-center.fontsize-smaller', ['When you publish your project, you are accepting ', m('a.alt-link[href=\'/terms-of-use\'][target=\'_blank\']', 'Terms of Use'), ' and ', m('a.alt-link[href=\'/privacy-policy\'][target=\'_blank\']', 'Privacy Policy')])]), m('.w-col.w-col-4')])])]), '\
    '] : h.loader()];
    }
};

var startVM = function startVM(I18n) {
    var i18nStart = I18n.translations[I18n.currentLocale()].pages.start,
        testimonials = i18nStart.testimonials,
        categoryProjects = i18nStart.categoryProjects,
        panes = i18nStart.panes,
        qa = i18nStart.qa;

    return {
        testimonials: _$1.map(testimonials, function (testimonial) {
            return {
                thumbUrl: testimonial.thumb,
                content: testimonial.content,
                name: testimonial.name,
                totals: testimonial.totals
            };
        }),
        panes: _$1.map(panes, function (pane) {
            return {
                label: pane.label,
                src: pane.src
            };
        }),
        questions: {
            col_1: _$1.map(qa.col_1, function (question) {
                return {
                    question: question.question,
                    answer: question.answer
                };
            }),
            col_2: _$1.map(qa.col_2, function (question) {
                return {
                    question: question.question,
                    answer: question.answer
                };
            })
        },
        categoryProjects: _$1.map(categoryProjects, function (category) {
            return {
                categoryId: category.category_id,
                sampleProjects: [category.sample_project_ids.primary, category.sample_project_ids.secondary]
            };
        })
    };
};

/**
 * window.c.youtubeLightbox component
 * A visual component that displays a lightbox with a youtube video
 *
 * Example:
 * view: () => {
 *      ...
 *      m.component(c.youtubeLightbox, {src: 'https://www.youtube.com/watch?v=FlFTcDSKnLM'})
 *      ...
 *  }
 */

var youtubeLightbox = {
    controller: function controller(args) {
        var player = void 0;
        var showLightbox = h.toggleProp(false, true),
            setYoutube = function setYoutube(el, isInitialized) {
            if (!isInitialized) {
                var tag = document.createElement('script'),
                    firstScriptTag = document.getElementsByTagName('script')[0];
                tag.src = 'https://www.youtube.com/iframe_api';
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                window.onYouTubeIframeAPIReady = createPlayer;
            }
        },
            closeVideo = function closeVideo() {
            if (!_.isUndefined(player)) {
                player.pauseVideo();
            }

            showLightbox.toggle();

            return false;
        },
            createPlayer = function createPlayer() {
            player = new YT.Player('ytvideo', {
                height: '528',
                width: '940',
                videoId: args.src,
                playerVars: {
                    showInfo: 0,
                    modestBranding: 0
                },
                events: {
                    onStateChange: function onStateChange(state) {
                        return state.data === 0 ? closeVideo() : false;
                    }
                }
            });
        };

        return {
            showLightbox: showLightbox,
            setYoutube: setYoutube,
            closeVideo: closeVideo
        };
    },
    view: function view(ctrl, args) {
        return m('#youtube-lightbox', [m('a#youtube-play.w-lightbox.w-inline-block.fa.fa-play-circle.fontcolor-negative.fa-5x[href=\'javascript:void(0);\']', {
            onclick: function onclick() {
                ctrl.showLightbox.toggle();
                args.onclick && args.onclick();
            }
        }), m('#lightbox.w-lightbox-backdrop[style="display:' + (ctrl.showLightbox() ? 'block' : 'none') + '"]', [m('.w-lightbox-container', [m('.w-lightbox-content', [m('.w-lightbox-view', [m('.w-lightbox-frame', [m('figure.w-lightbox-figure', [m('img.w-lightbox-img.w-lightbox-image[src=\'data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22940%22%20height=%22528%22/%3E\']'), m('#ytvideo.embedly-embed.w-lightbox-embed', { config: ctrl.setYoutube })])])]), m('.w-lightbox-spinner.w-lightbox-hide'), m('.w-lightbox-control.w-lightbox-left.w-lightbox-inactive'), m('.w-lightbox-control.w-lightbox-right.w-lightbox-inactive'), m('#youtube-close.w-lightbox-control.w-lightbox-close', { onclick: ctrl.closeVideo })]), m('.w-lightbox-strip')])])]);
    }
};

var I18nScope$52 = _$1.partial(h.i18nScope, 'pages.start');

var start = {
    controller: function controller() {
        h.analytics.windowScroll({ cat: 'project_start', act: 'start_page_scroll' });
        var stats = m.prop([]),
            categories = m.prop([]),
            selectedPane = m.prop(0),
            selectedCategory = m.prop([]),
            featuredProjects = m.prop([]),
            selectedCategoryIdx = m.prop(-1),
            startvm = startVM(I18n$1),
            filters = postgrest$1.filtersVM,
            paneImages = startvm.panes,
            categoryvm = filters({
            category_id: 'eq'
        }),
            projectvm = filters({
            project_id: 'eq'
        }),
            uservm = filters({
            id: 'eq'
        }),
            loader = postgrest$1.loader,
            statsLoader = loader(models.statistic.getRowOptions()),
            loadCategories = function loadCategories() {
            return models.category.getPage(filters({}).order({
                name: 'asc'
            }).parameters()).then(categories);
        },
            selectPane = function selectPane(idx) {
            return function () {
                selectedPane(idx);
            };
        },
            lCategory = function lCategory() {
            return loader(models.categoryTotals.getRowOptions(categoryvm.parameters()));
        },
            lProject = function lProject() {
            return loader(models.projectDetail.getRowOptions(projectvm.parameters()));
        },
            lUser = function lUser() {
            return loader(models.userDetail.getRowOptions(uservm.parameters()));
        },
            linkToExternal = function linkToExternal(category) {
            var externalLinkCategories = I18n$1.translations[I18n$1.currentLocale()].projects.index.explore_categories;
            return _$1.isUndefined(externalLinkCategories[category.id]) ? null : externalLinkCategories[category.id].link + '?ref=ctrse_start';
        },
            loadCategoryProjects = function loadCategoryProjects(category) {
            selectedCategory(category);
            var categoryProjects = _$1.findWhere(startvm.categoryProjects, {
                categoryId: _$1.first(category).category_id
            });
            featuredProjects([]);
            if (!_$1.isUndefined(categoryProjects)) {
                _$1.map(categoryProjects.sampleProjects, function (project_id, idx) {
                    if (!_$1.isUndefined(project_id)) {
                        projectvm.project_id(project_id);
                        lProject().load().then(function (project) {
                            return setProject(project, idx);
                        });
                    }
                });
            }
        },
            selectCategory = function selectCategory(category) {
            return function () {
                var externalLink = linkToExternal(category);
                if (externalLink) {
                    window.location = externalLink;
                    return;
                }
                selectedCategoryIdx(category.id);
                categoryvm.category_id(category.id);
                selectedCategory([category]);
                m.redraw();
                lCategory().load().then(loadCategoryProjects);
            };
        },
            setUser = function setUser(user, idx) {
            featuredProjects()[idx] = _$1.extend({}, featuredProjects()[idx], {
                userThumb: _$1.first(user).profile_img_thumbnail
            });
        },
            setProject = function setProject(project, idx) {
            featuredProjects()[idx] = _$1.first(project);
            uservm.id(_$1.first(project).user.id);
            lUser().load().then(function (user) {
                return setUser(user, idx);
            });
        },
            projectCategory = m.prop('-1'),
            projectName = m.prop(''),
            projectNameError = m.prop(false),
            projectCategoryError = m.prop(false),
            validateProjectForm = function validateProjectForm() {
            projectCategoryError(projectCategory() == -1);
            projectNameError(projectName().trim() === '');

            return !projectCategoryError() && !projectNameError();
        };

        statsLoader.load().then(stats);
        loadCategories();

        return {
            stats: stats,
            categories: categories,
            paneImages: paneImages,
            selectCategory: selectCategory,
            selectedCategory: selectedCategory,
            selectedCategoryIdx: selectedCategoryIdx,
            selectPane: selectPane,
            selectedPane: selectedPane,
            featuredProjects: featuredProjects,
            linkToExternal: linkToExternal,
            testimonials: startvm.testimonials,
            questions: startvm.questions,
            projectCategory: projectCategory,
            projectName: projectName,
            projectNameError: projectNameError,
            projectCategoryError: projectCategoryError,
            validateProjectForm: validateProjectForm
        };
    },
    view: function view(ctrl, args) {
        var stats = _$1.first(ctrl.stats());
        var testimonials = function testimonials() {
            return _$1.map(ctrl.testimonials, function (testimonial) {
                var content = m('.card.u-radius.card-big.card-terciary', [m('.u-text-center.u-marginbottom-20', [m('img.thumb-testimonial.u-round.u-marginbottom-20[src="' + testimonial.thumbUrl + '"]')]), m('p.fontsize-large.u-marginbottom-30', '"' + testimonial.content + '"'), m('.u-text-center', [m('.fontsize-large.fontweight-semibold', testimonial.name), m('.fontsize-base', testimonial.totals)])]);

                return {
                    content: content
                };
            });
        };

        return m('#start', { config: h.setPageTitle(I18n$1.t('header_html', I18nScope$52())) }, [m('.w-section.hero-full.hero-start', [m('.w-container.u-text-center', [m('.fontsize-megajumbo.fontweight-semibold.u-marginbottom-40', I18n$1.t('slogan', I18nScope$52())), m('.w-row.u-marginbottom-40', [m('.w-col.w-col-4.w-col-push-4', [m('a.btn.btn-large.u-marginbottom-10[href="#start-form"]', {
            config: h.scrollTo(),
            onclick: h.analytics.event({ cat: 'project_start', act: 'start_btnstart_click' })
        }, I18n$1.t('submit', I18nScope$52()))])]), m('.w-row', _$1.isEmpty(stats) ? '' : [m('.w-col.w-col-4', [m('.fontsize-largest.lineheight-loose', h.formatNumber(stats.total_contributors, 0, 3)), m('p.fontsize-small.start-stats', I18n$1.t('header.people', I18nScope$52()))]), m('.w-col.w-col-4', [m('.fontsize-largest.lineheight-loose', stats.total_contributed.toString().slice(0, 2) + ' milh\xF5es'), m('p.fontsize-small.start-stats', I18n$1.t('header.money', I18nScope$52()))]), m('.w-col.w-col-4', [m('.fontsize-largest.lineheight-loose', h.formatNumber(stats.total_projects_success, 0, 3)), m('p.fontsize-small.start-stats', I18n$1.t('header.success', I18nScope$52()))])])])]), m('.w-section.section', [m('.w-container', [m('.w-row', [m('.w-col.w-col-10.w-col-push-1.u-text-center', [m('.fontsize-larger.u-marginbottom-10.fontweight-semibold', I18n$1.t('page-title', I18nScope$52())), m('.fontsize-small', I18n$1.t('page-subtitle', I18nScope$52()))])]), m('.w-clearfix.how-row', [m('.w-hidden-small.w-hidden-tiny.how-col-01', [m('.info-howworks-backers', [m('.fontweight-semibold.fontsize-large', I18n$1.t('banner.1', I18nScope$52())), m('.fontsize-base', I18n$1.t('banner.2', I18nScope$52()))]), m('.info-howworks-backers', [m('.fontweight-semibold.fontsize-large', I18n$1.t('banner.3', I18nScope$52())), m('.fontsize-base', I18n$1.t('banner.4', I18nScope$52()))])]), m('.how-col-02'), m('.how-col-03', [m('.fontweight-semibold.fontsize-large', I18n$1.t('banner.5', I18nScope$52())), m('.fontsize-base', I18n$1.t('banner.6', I18nScope$52())), m('.fontweight-semibold.fontsize-large.u-margintop-30', I18n$1.t('banner.7', I18nScope$52())), m('.fontsize-base', I18n$1.t('banner.8', I18nScope$52()))]), m('.w-hidden-main.w-hidden-medium.how-col-01', [m('.info-howworks-backers', [m('.fontweight-semibold.fontsize-large', I18n$1.t('banner.1', I18nScope$52())), m('.fontsize-base', I18n$1.t('banner.2', I18nScope$52()))]), m('.info-howworks-backers', [m('.fontweight-semibold.fontsize-large', I18n$1.t('banner.3', I18nScope$52())), m('.fontsize-base', I18n$1.t('banner.4', I18nScope$52()))])])])])]), m('.w-section.divider'), m('.w-section.section-large', [m('.w-container.u-text-center.u-marginbottom-60', [m('div', [m('span.fontsize-largest.fontweight-semibold', I18n$1.t('features.title', I18nScope$52()))]), m('.w-hidden-small.w-hidden-tiny.fontsize-large.u-marginbottom-20', I18n$1.t('features.subtitle', I18nScope$52())), m('.w-hidden-main.w-hidden-medium.u-margintop-30', [m('.fontsize-large.u-marginbottom-30', I18n$1.t('features.feature_1', I18nScope$52())), m('.fontsize-large.u-marginbottom-30', I18n$1.t('features.feature_2', I18nScope$52())), m('.fontsize-large.u-marginbottom-30', I18n$1.t('features.feature_3', I18nScope$52())), m('.fontsize-large.u-marginbottom-30', I18n$1.t('features.feature_4', I18nScope$52())), m('.fontsize-large.u-marginbottom-30', I18n$1.t('features.feature_5', I18nScope$52())), m('.fontsize-large.u-marginbottom-30', I18n$1.t('features.feature_6', I18nScope$52()))])]), m('.w-container', [m('.w-tabs.w-hidden-small.w-hidden-tiny', [m('.w-tab-menu.w-col.w-col-4', _$1.map(ctrl.paneImages, function (pane, idx) {
            return m('btn.w-tab-link.w-inline-block.tab-list-item' + (idx === ctrl.selectedPane() ? '.selected' : ''), {
                onclick: h.analytics.event({ cat: 'project_start', act: 'start_solution_click', lbl: pane.label }, ctrl.selectPane(idx))
            }, pane.label);
        })), m('.w-tab-content.w-col.w-col-8', _$1.map(ctrl.paneImages, function (pane, idx) {
            return m('.w-tab-pane', [m('img[src="' + pane.src + '"].pane-image' + (idx === ctrl.selectedPane() ? '.selected' : ''))]);
        }))])])]), m('.w-section.section-large.card-terciary', m('.w-container', [m('.u-text-center.u-marginbottom-40', [m('div', m('span.fontsize-largest.fontweight-semibold', I18n$1.t('mode.title', I18nScope$52()))), m('.w-row', [m('.w-col.w-col-1'), m('.w-col.w-col-10', m('.fontsize-large.u-marginbottom-20', I18n$1.t('mode.subtitle', I18nScope$52()))), m('.w-col.w-col-1')])]), m('div', m('.flex-row.u-marginbottom-40', [m('.flex-column.card.u-radius.u-marginbottom-30', [m('.u-text-center.u-marginbottom-30', m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/5632f334ec8a367d341b4bba_badge-aon.png\']')), m('.fontsize-large.flex-column.u-marginbottom-20', [I18n$1.t('mode.aon.info', I18nScope$52()), m.trust('&nbsp;')]), m('.fontsize-base.flex-column.fontcolor-secondary', I18n$1.t('mode.aon.info_2', I18nScope$52()))]), m('.flex-column.card.u-radius.u-marginbottom-30', [m('.u-text-center.u-marginbottom-30', m('img[src=\'https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/5632ebacd092957f34eaea9c_badge-flex.png\']')), m('.fontsize-large.flex-column.u-marginbottom-20', I18n$1.t('mode.flex.info', I18nScope$52())), m('.fontsize-base.flex-column.fontcolor-secondary', I18n$1.t('mode.flex.info_2', I18nScope$52()))])])), m('.u-text-center.u-marginbottom-30', [m('.fontsize-large.fontweight-semibold', I18n$1.t('mode.tax_info', I18nScope$52())), m('.fontsize-smallest.fontcolor-secondary', [I18n$1.t('mode.failed_info', I18nScope$52()), m.trust(I18n$1.t('mode.more_link', I18nScope$52()))])])])), m('.w-section.section-large.bg-blue-one', [m('.w-container.u-text-center', [m('.fontsize-larger.lineheight-tight.fontcolor-negative.u-marginbottom-20', [I18n$1.t('video.title', I18nScope$52()), m('br'), I18n$1.t('video.subtitle', I18nScope$52())]), m.component(youtubeLightbox, {
            src: I18n$1.t('video.src', I18nScope$52()),
            onclick: h.analytics.event({ cat: 'project_start', act: 'start_video_play' })
        })])]), m('.w-hidden-small.w-hidden-tiny.section-categories', [m('.w-container', [m('.u-text-center', [m('.w-row', [m('.w-col.w-col-10.w-col-push-1', [m('.fontsize-large.u-marginbottom-40.fontcolor-negative', I18n$1.t('categories.title', I18nScope$52()))])])]), m('.w-tabs', [m('.w-tab-menu.u-text-center', _$1.map(ctrl.categories(), function (category) {
            return m('a.w-tab-link.w-inline-block.btn-category.small.btn-inline' + (ctrl.selectedCategoryIdx() === category.id ? '.w--current' : ''), {
                onclick: h.analytics.event({ cat: 'project_start', act: 'start_category_click', lbl: category.name }, ctrl.selectCategory(category))
            }, [m('div', category.name)]);
        })), m('.w-tab-content.u-margintop-40', [m('.w-tab-pane.w--tab-active', [m('.w-row', ctrl.selectedCategoryIdx() !== -1 ? _$1.map(ctrl.selectedCategory(), function (category) {
            return [m('.w-col.w-col-5', [m('.fontsize-jumbo.u-marginbottom-20', category.name), m('a.w-button.btn.btn-medium.btn-inline.btn-dark[href="#start-form"]', {
                config: h.scrollTo()
            }, I18n$1.t('submit', I18nScope$52()))]), m('.w-col.w-col-7', [m('.fontsize-megajumbo.fontcolor-negative', 'US$ ' + (category.total_successful_value ? h.formatNumber(category.total_successful_value, 2, 3) : '...')), m('.fontsize-large.u-marginbottom-20', 'Doados para projetos'), m('.fontsize-megajumbo.fontcolor-negative', category.successful_projects ? category.successful_projects : '...'), m('.fontsize-large.u-marginbottom-30', 'Projects financed'), !_$1.isEmpty(ctrl.featuredProjects()) ? _$1.map(ctrl.featuredProjects(), function (project) {
                return !_$1.isUndefined(project) ? m('.w-row.u-marginbottom-10', [m('.w-col.w-col-1', [m('img.user-avatar[src="' + h.useAvatarOrDefault(project.userThumb) + '"]')]), m('.w-col.w-col-11', [m('.fontsize-base.fontweight-semibold', project.user.public_name || project.user.name), m('.fontsize-smallest', [I18n$1.t('categories.pledged', I18nScope$52({ pledged: h.formatNumber(project.pledged), contributors: project.total_contributors })), m('a.link-hidden[href="/' + project.permalink + '"]', project.name)])])]) : m('.fontsize-base', I18n$1.t('categories.loading_featured', I18nScope$52()));
            }) : ''])];
        }) : '')])])])])]), m.component(slider, {
            slides: testimonials(),
            title: I18n$1.t('testimonials_title', I18nScope$52()),
            slideClass: 'slide-testimonials-content',
            wrapperClass: 'slide-testimonials',
            onchange: h.analytics.event({ cat: 'project_start', act: 'start_testimonials_change' })
        }), m('.w-section.divider.u-margintop-30'), m('.w-container', [m('.fontsize-larger.u-text-center.u-marginbottom-60.u-margintop-40', I18n$1.t('qa_title', I18nScope$52())), m('.w-row.u-marginbottom-60', [m('.w-col.w-col-6', _$1.map(ctrl.questions.col_1, function (question) {
            return m.component(landingQA, {
                question: question.question,
                answer: question.answer,
                onclick: h.analytics.event({ cat: 'project_start', act: 'start_qa_click', lbl: question.question })
            });
        })), m('.w-col.w-col-6', _$1.map(ctrl.questions.col_2, function (question) {
            return m.component(landingQA, {
                question: question.question,
                answer: question.answer,
                onclick: h.analytics.event({ cat: 'project_start', act: 'start_qa_click', lbl: question.question })
            });
        }))])]), m('#start-form.w-section.section-large.u-text-center.bg-purple.before-footer', [m('.w-container', [m('.fontsize-jumbo.fontcolor-negative.u-marginbottom-60', 'Create your draft for free!'), m('form[action="/projects/fallback_create"][method="GET"].w-row.w-form', {
            onsubmit: function onsubmit(e) {
                h.analytics.oneTimeEvent({ cat: 'project_create', act: 'create_form_submit' })(e);
                return ctrl.validateProjectForm();
            }
        }, [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.fontsize-larger.fontcolor-negative.u-marginbottom-10', I18n$1.t('form.title', I18nScope$52())), m('input[name="utf8"][type="hidden"][value="✓"]'), m('input[name="authenticity_token"][type="hidden"][value="' + h.authenticityToken() + '"]'), m('input.w-input.text-field.medium.u-marginbottom-30[type="text"]', {
            name: 'project[name]',
            class: ctrl.projectNameError() ? 'error' : '',
            onfocus: function onfocus() {
                return ctrl.projectNameError(false);
            },
            onchange: function onchange(e) {
                h.analytics.oneTimeEvent({ cat: 'project_create', act: 'create_form_change', lbl: 'name' })(e);
                m.withAttr('value', ctrl.projectName)(e);
            }
        }), m('.fontsize-larger.fontcolor-negative.u-marginbottom-10', 'in category'), m('select.w-select.text-field.medium.u-marginbottom-40', {
            name: 'project[category_id]',
            class: ctrl.projectCategoryError() ? 'error' : '',
            onfocus: function onfocus() {
                return ctrl.projectCategoryError(false);
            },
            onchange: function onchange(e) {
                h.analytics.oneTimeEvent({ cat: 'project_create', act: 'create_form_change', lbl: 'category' })(e);
                m.withAttr('value', ctrl.projectCategory)(e);
            }
        }, [m('option[value="-1"]', I18n$1.t('form.select_default', I18nScope$52())), _$1.map(ctrl.categories(), function (category) {
            return m('option', { value: category.id, selected: ctrl.projectCategory() === category.id }, category.name);
        })])]), m('.w-col.w-col-2'), m('.w-row.u-marginbottom-20', [m('.w-col.w-col-4.w-col-push-4.u-margintop-40', [m('input[type="submit"][value="' + I18n$1.t('form.submit', I18nScope$52()) + '"].w-button.btn.btn-large')])]), m('.w-row.u-marginbottom-80', ctrl.projectNameError() || ctrl.projectCategoryError() ? m.component(inlineError, { message: 'Please verify the above fields!' }) : '')])])])]);
    }
};

var teamTotal = {
    controller: function controller() {
        var vm = {
            collection: m.prop([])
        };

        models.teamTotal.getRow().then(function (data) {
            vm.collection(data);
        });

        return {
            vm: vm
        };
    },
    view: function view(ctrl, args) {
        return m('#team-total-static.w-section.section-one-column.section.u-margintop-40.u-text-center.u-marginbottom-20', [ctrl.vm.collection().map(function (teamTotal) {
            return m('.w-container', [m('.w-row', [m('.w-col.w-col-2'), m('.w-col.w-col-8', [m('.fontsize-base.u-marginbottom-30', 'Today we are ' + teamTotal.member_count + ' people all over the ' + teamTotal.total_cities + ' cities in ' + teamTotal.countries.length + ' countries (' + teamTotal.countries.toString() + ')! OppoStarter is an independent, non-investor, open-ended and built with love. Our passion is to build an environment where more and more projects can come to life.'), m('.fontsize-larger.lineheight-tight.text-success', 'Our team, together, has supported US$' + h.formatNumber(teamTotal.total_amount) + ' for ' + teamTotal.total_contributed_projects + ' projects!')]), m('.w-col.w-col-2')])]);
        })]);
    }
};

var teamMembers = {
    controller: function controller() {
        var vm = {
            collection: m.prop([])
        },
            groupCollection = function groupCollection(collection, groupTotal) {
            return _$1.map(_$1.range(Math.ceil(collection.length / groupTotal)), function (i) {
                return collection.slice(i * groupTotal, (i + 1) * groupTotal);
            });
        };

        models.teamMember.getPage().then(function (data) {
            vm.collection(groupCollection(data, 4));
        });

        return {
            vm: vm
        };
    },
    view: function view(ctrl) {
        return m('#team-members-static.w-section.section', [m('.w-container', [_$1.map(ctrl.vm.collection(), function (group) {
            return m('.w-row.u-text-center', [_$1.map(group, function (member) {
                return m('.team-member.w-col.w-col-3.w-col-small-3.w-col-tiny-6.u-marginbottom-40', [m('a.alt-link[href="/users/' + member.id + '"]', [m('img.thumb.big.u-round.u-marginbottom-10[src="' + member.img + '"]'), m('.fontweight-semibold.fontsize-base', member.name)]), m('.fontsize-smallest.fontcolor-secondary', 'Supported ' + member.total_contributed_projects + ' projects')]);
            })]);
        })])]);
    }
};

var team = {
    view: function view() {
        return m('#static-team-app', [m('.w-section.hero-who.hero-full', [m('.w-container.u-text-center', [m('img.icon-hero[src="https://catarse.me/assets/logo-yellow.png"]'), m('.u-text-center.u-marginbottom-20.fontsize-largest', 'Meet Our Team')])]), m.component(teamTotal), m.component(teamMembers)]);
    }
};

var menuSearch = {
    view: function view(ctrl, args) {
        return m('span#menu-search', [m('.w-form.w-hidden-small.w-hidden-tiny.header-search[id=\'discover-form-wrapper\']', [m('form.discover-form[accept-charset=\'UTF-8\'][action=\'/en/explore?ref=ctrse_header\'][id=\'search-form\'][method=\'get\']', [m('div', { style: { display: 'none' } }, m('input[name=\'utf8\'][type=\'hidden\'][value=\'✓\']')), m('input.w-input.text-field.prefix.search-input[autocomplete=\'off\'][id=\'pg_search\'][name=\'pg_search\'][placeholder=\'Search Projects\'][type=\'text\']')]), m('.search-pre-result.w-hidden[data-searchpath=\'/en/auto_complete_projects\']', [m('.result', m('.u-text-center', m('img[alt=\'Loader\'][src=\'/assets/catarse_bootstrap/loader.gif\']'))), m('a.btn.btn-small.btn-terciary.see-more-projects[href=\'javascript:void(0);\']', ' See all')])]), m('a.w-inline-block.w-hidden-small.w-hidden-tiny.btn.btn-dark.btn-attached.postfix[href=\'javascript:void(0);\'][id=\'pg_search_submit\']', { onclick: function onclick() {
                $('#search-form').submit();
            } }, m('img.header-lupa[alt=\'Lupa\'][data-pin-nopin=\'true\'][src=\'/assets/catarse_bootstrap/lupa.png\']'))]);
    }
};

var menuProfile = {
    controller: function controller(args) {
        var contributedProjects = m.prop(),
            latestProjects = m.prop([]),
            userDetails = m.prop({}),
            user_id = args.user.user_id,
            userBalance = m.prop(0),
            userIdVM = postgrest.filtersVM({ user_id: 'eq' });

        var userName = function userName() {
            var name = userVM.displayName(userDetails());
            if (name && !_$1.isEmpty(name)) {
                return _$1.first(name.split(' '));
            }

            return '';
        };

        userVM.fetchUser(user_id, true, userDetails);

        userIdVM.user_id(user_id);
        models.balance.getRowWithToken(userIdVM.parameters()).then(function (result) {
            var data = _$1.first(result) || { amount: 0, user_id: user_id };
            userBalance(data.amount);
        });

        return {
            contributedProjects: contributedProjects,
            latestProjects: latestProjects,
            userDetails: userDetails,
            userName: userName,
            toggleMenu: h.toggleProp(false, true),
            userBalance: userBalance
        };
    },
    view: function view(ctrl, args) {
        var user = ctrl.userDetails();

        return m('.w-dropdown.user-profile', [m('.w-dropdown-toggle.dropdown-toggle.w-clearfix[id=\'user-menu\']', {
            onclick: ctrl.toggleMenu.toggle
        }, [m('.user-name-menu', [m('.fontsize-smaller.lineheight-tightest.text-align-right', ctrl.userName()), ctrl.userBalance() > 0 ? m('.fontsize-smallest.fontweight-semibold.text-success', 'US$ ' + h.formatNumber(ctrl.userBalance(), 2, 3)) : '']), m('img.user-avatar[alt=\'Thumbnail - ' + user.name + '\'][height=\'40\'][src=\'' + h.useAvatarOrDefault(user.profile_img_thumbnail) + '\'][width=\'40\']')]), ctrl.toggleMenu() ? m('nav.w-dropdown-list.dropdown-list.user-menu.w--open[id=\'user-menu-dropdown\']', { style: 'display:block;' }, [m('.w-row', [m('.w-col.w-col-12', [m('.fontweight-semibold.fontsize-smaller.u-marginbottom-10', 'My History'), m('ul.w-list-unstyled.u-marginbottom-20', [m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/users/' + user.id + '/edit#balance\']', m('span', ['Balance ', ctrl.userBalance() > 0 ? m('span.fontcolor-secondary', 'US$ ' + h.formatNumber(ctrl.userBalance(), 2, 3)) : '']))), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/users/' + user.id + '/edit#contributions\']', 'Support History')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/users/' + user.id + '/edit#projects\']', 'Projects Created')), m('li.w-hidden-main.w-hidden-medium.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/users/' + user.id + '/edit#projects\']', 'Projects Created'))]), m('.fontweight-semibold.fontsize-smaller.u-marginbottom-10', 'Settings'), m('ul.w-list-unstyled.u-marginbottom-20', [m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/connect-facebook/\']', 'Find Friends')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/users/' + user.id + '/edit#about_me\']', 'Public Profile')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/users/' + user.id + '/edit#notifications\']', 'Notifications')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/users/' + user.id + '/edit#settings\']', 'Registration Details'))]), m('.divider.u-marginbottom-20'), args.user.is_admin_role ? m('.fontweight-semibold.fontsize-smaller.u-marginbottom-10', 'Admin') : '', args.user.is_admin_role ? m('ul.w-list-unstyled.u-marginbottom-20', [m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/new-admin#/users\']', 'Users')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/new-admin\']', 'Support')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/new-admin#/balance-transfers\']', 'Withdrawals')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/admin/financials\']', 'Financial Report')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/new-admin#/projects\']', 'Admin Projects')), m('li.lineheight-looser', m('a.alt-link.fontsize-smaller[href=\'/en/dbhero\']', 'Dataclips'))]) : '', m('.fontsize-mini', 'Your registration email is: '), m('.fontsize-smallest.u-marginbottom-20', [m('span.fontweight-semibold', user.email + ' '), m('a.alt-link[href=\'/en/users/' + user.id + '/edit#about_me\']', 'Change e-mail')]), m('.divider.u-marginbottom-20'), m('a.alt-link[href=\'/en/logout\']', 'Logout')])]
        //m(`.w-col.w-col-4.w-hidden-small.w-hidden-tiny`,
        //    [
        //        m(`.fontweight-semibold.fontsize-smaller.u-marginbottom-10`,
        //            `Projetos apoiados`
        //        ),
        //        m(`ul.w-list-unstyled.u-marginbottom-20`, ctrl.contributedProjects() ?
        //            _.isEmpty(ctrl.contributedProjects) ? 'Nenhum projeto.' :
        //            m.component(quickProjectList, {
        //                projects: m.prop(_.map(ctrl.contributedProjects(), (contribution) => {
        //                    return {
        //                        project_id: contribution.project_id,
        //                        project_user_id: contribution.project_user_id,
        //                        thumb_image: contribution.project_img,
        //                        video_cover_image: contribution.project_img,
        //                        permalink: contribution.permalink,
        //                        name: contribution.project_name
        //                    };
        //                })),
        //                loadMoreHref: '/pt/users/${user.id}/edit#contributions',
        //                ref: 'user_menu_my_contributions'
        //            }) : 'carregando...'
        //        )
        //    ]
        //),
        //m(`.w-col.w-col-4.w-hidden-small.w-hidden-tiny`,
        //    [
        //        m(`.fontweight-semibold.fontsize-smaller.u-marginbottom-10`,
        //            `Projetos criados`
        //        ),
        //        m(`ul.w-list-unstyled.u-marginbottom-20`, ctrl.latestProjects() ?
        //            _.isEmpty(ctrl.latestProjects) ? 'Nenhum projeto.' :
        //            m.component(quickProjectList, {
        //                projects: ctrl.latestProjects,
        //                loadMoreHref: '/pt/users/${user.id}/edit#contributions',
        //                ref: 'user_menu_my_projects'
        //            }) : 'carregando...'
        //        )
        //    ]
        //)
        )]) : '']);
    }
};

var menu = {
    controller: function controller(args) {
        var user = h.getUser(),
            menuCss = function menuCss() {
            var dynamicClasses = void 0;

            return (args.menuTransparency ? 'overlayer' : '') + ' ' + (args.withAlert || args.withFixedAlert ? 'with-global-alert' : '');
        },
            homeAttrs = function homeAttrs() {
            if (args.absoluteHome) {
                return {
                    href: h.rootUrl()
                };
            }
            return {
                config: m.route
            };
        };

        return {
            user: user,
            menuCss: menuCss,
            homeAttrs: homeAttrs
        };
    },
    view: function view(ctrl, args) {
        return m('header.main-header', {
            class: ctrl.menuCss()
        }, [m('.w-row', [m('.w-clearfix.w-col.w-col-8.w-col-small-8.w-col-tiny-8', [m('a.header-logo.w-inline-block[href=\'/?ref=ctrse_header\'][title=\'Catarse\']', ctrl.homeAttrs(), m('img[alt=\'Logo big\'][src=\'/assets/catarse_bootstrap/logo_big.png\']')), args.menuShort ? '' : m('div#menu-components', [m('a.w-hidden-small.w-hidden-tiny.header-link.w-nav-link[href=\'/start?ref=ctrse_header\']', { config: m.route }, 'Start your project'), m('a.w-hidden-small.w-hidden-tiny.header-link.w-nav-link[href=\'/explore?ref=ctrse_header\']', { config: m.route }, 'Explore'), m.component(menuSearch)])]), m('.text-align-right.w-col.w-col-4.w-col-small-4.w-col-tiny-4', [ctrl.user ? m.component(menuProfile, { user: ctrl.user }) : m('a.w-nav-link.header-link.w-nav-link.btn-edit.u-right[href=\'/en/login?ref=ctrse_header\']', 'Login')])]), args.menuShort ? '' : m('.header-controls-mobile.w-hidden-main.w-hidden-medium', [m('a.header-link.w-nav-link[href=\'/en/start?ref=ctrse_header\']', { onclick: function onclick() {
                return m.route('/start');
            } }, 'Start your project'), m('a.header-link.w-nav-link[href=\'/en/explore?ref=ctrse_header\']', { onclick: function onclick() {
                return m.route('/explore');
            } }, 'Explore')])]);
    }
};

var footer = {
    view: function view() {
        return m('footer.main-footer.main-footer-neg', [m('section.w-container', m('.w-row', [m('.w-col.w-col-9', m('.w-row', [m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.w-hidden-tiny', [m('.footer-full-signature-text.fontsize-small', 'Welcome'), m('a.link-footer[href=\'http://crowdfunding.catarse.me/paratodos?ref=ctrse_footer\']', ' How it works'), m('a.link-footer[href=\'https://blog.oppostarter.com\']', ' Blog'), m('a.link-footer[href=\'https://www.oppostarter.com/en/team?ref=ctrse_footer\']', [' Our team ', m.trust('&lt;'), '3']), m('a.link-footer[href=\'https://www.oppostarter.com/en/jobs\']', ' Work with us'), m('a.link-footer[href=\'https://www.oppostarter.com/en/press?ref=ctrse_footer\']', ' Press'), m('a.u-marginbottom-30.link-footer[href=\'https://ano.catarse.me/2016?ref=ctrse_footer\']', ' Retrospective 2018'), m('.footer-full-signature-text.fontsize-small', 'Social networks'), m('a.link-footer[href=\'https://www.facebook.com/oppostarter/\']', [m('span.fa.fa-facebook-square.fa-lg'), m.trust('&nbsp;&nbsp;'), 'Facebook']), m('a.link-footer[href=\'https://twitter.com/oppostarter\']', [m('span.fa.fa-twitter-square.fa-lg'), m.trust('&nbsp;&nbsp;'), 'Twitter']), m('a.link-footer[href=\'http://instagram.com/oppostarter\']', [m('span.fa.fa-instagram.fa-lg'), m.trust('&nbsp;&nbsp;'), 'Instagram']), m('a.link-footer[href=\'http://github.com/catarse/catarse\']', [m('span.fa.fa-github-square.fa-lg'), m.trust('&nbsp;&nbsp;'), 'Github'])]), m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.footer-full-firstcolumn', [m('.footer-full-signature-text.fontsize-small', 'Help'), m('a.link-footer[href=\'https://support.oppostarter.com?ref=ctrse_footer/\']', ' Support Center'), m('a.link-footer[href=\'https://support.oppostarter.com/en\'][target="_BLANK"]', ' Contact'), m('a.link-footer[href=\'https://www.ofinanciamentocoletivo.com.br/?ref=ctrse_footer\']', ['OppoStarter School', m.trust('&nbsp;'), m('span.badge.badge-success', 'Novelty')]), m('a.link-footer[href=\'http://crowdfunding.catarse.me/nossa-taxa?ref=ctrse_footer\']', ' Our Fees'), m('a.link-footer[href=\'http://pesquisa.catarse.me/\']', ' Our Aim'), m('a.link-footer[href=\'http://support.oppostarter.com/en/knowledgebase/3-getting-started/docs/3-responsibilities-and-security?ref=ctrse_footer\']', ' Responsibilities and Security'), m('a.link-footer[href=\'/en/terms-of-use\']', ' Terms of Use'), m('a.link-footer[href=\'/en/privacy-policy\']', ' Privacy Policy')]), m('.w-col.w-col-4.w-col-small-4.w-col-tiny-4.footer-full-lastcolumn', [m('.footer-full-signature-text.fontsize-small', 'Create a campaign'), m('a.link-footer[href=\'/en/start?ref=ctrse_footer\']', ' Start your project'), m('a.link-footer[href=\'http://crowdfunding.catarse.me/financiamento-coletivo-musica-independente?ref=ctrse_footer\']', ['Music on OppoStarter', m.trust('&nbsp;'), m('span.badge.badge-success', 'Novelty')]), m('a.u-marginbottom-30.link-footer[href=\'https://crowdfunding.catarse.me/publicacoes-independentes-financiamento-coletivo?ref=ctrse_footer\']', ['Independent Publications', m.trust('&nbsp;'), m('span.badge.badge-success', 'Novelty')]), m('.footer-full-signature-text.fontsize-small', 'Support projects on OppoStarter'), m('a.link-footer[href=\'/en/explore?ref=ctrse_footer\']', ' Explore Projects'), m('a.w-hidden-main.w-hidden-medium.w-hidden-small.link-footer[href=\'https://blog.oppostarter.com?ref=ctrse_footer\']', ' Blog'), m('a.w-hidden-main.w-hidden-medium.w-hidden-small.link-footer[href=\'https://support.oppostarter.com/en\']', ' Contact'), m('a.w-hidden-tiny.link-footer[href=\'/en/explore?filter=score&ref=ctrse_footer\']', ' Popular'), m('a.w-hidden-tiny.link-footer[href=\'/en/explore?filter=online&ref=ctrse_footer\']', ' Online'), m('a.w-hidden-tiny.link-footer[href=\'/en/explore?filter=finished&ref=ctrse_footer\']', ' Finalized')])])), m('.w-col.w-col-3.column-social-media-footer', [m('.footer-full-signature-text.fontsize-small', 'Subscribe to our news'), m('.w-form', m('form[accept-charset=\'UTF-8\'][action=\'' + h.getNewsletterUrl() + '\'][id=\'mailee-form\'][method=\'post\']', [m('.w-form.footer-newsletter', m('input.w-input.text-field.prefix[id=\'EMAIL\'][label=\'email\'][name=\'EMAIL\'][placeholder=\'Type your e-mail\'][type=\'email\']')), m('button.w-inline-block.btn.btn-edit.postfix.btn-attached[style="padding:0;"]', m('img.footer-news-icon[alt=\'Icon newsletter\'][src=\'/assets/catarse_bootstrap/icon-newsletter.png\']'))])), m('.footer-full-signature-text.fontsize-small', 'Change language'), m('[id=\'google_translate_element\']')])])), m('.w-container', m('.footer-full-copyleft', [m('img.u-marginbottom-20[alt=\'Logo footer\'][src=\'/assets/logo-footer.png\']'), m('.lineheight-loose', m('a.link-footer-inline[href=\'http://github.com/catarse/catarse\']', 'OppoStarter | ' + new Date().getFullYear() + ' | StartUp Crowdfunding'))]))]);
    }
};

/*
 * UserFollowCard - Component
 * User info card with follow button
 *
 * Example:
 * m.component(c.UserFollowCard, {friend: friend})
 */

var UserFollowCard = {
    controller: function controller(args) {
        var friend = m.prop(args.friend);
        return {
            friend: friend
        };
    },
    view: function view(ctrl, args) {
        var friend = ctrl.friend(),
            profile_img = _$1.isEmpty(friend.avatar) ? '/assets/catarse_bootstrap/user.jpg' : friend.avatar;
        return m('.w-col.w-col-4', m('.card.card-backer.u-marginbottom-20.u-radius.u-text-center', [m('img.thumb.u-marginbottom-10.u-round[src=\'' + profile_img + '\']'), m('.fontsize-base.fontweight-semibold.lineheight-tight', m('a.link-hidden', { href: '/users/' + friend.friend_id }, userVM.displayName(friend))), m('.fontcolor-secondary.fontsize-smallest.u-marginbottom-10', _$1.isNull(friend.city) ? '' : m('.fontsize-smaller.fontcolor-secondary.u-marginbottom-10', friend.city + ', ' + friend.state)), m('.fontsize-smaller', [m('span.fontweight-semibold', friend.total_contributed_projects), ' supported ', m.trust('&nbsp;'), '| ', m.trust('&nbsp;'), m('span.fontweight-semibold', friend.total_published_projects), ' created']), m('.btn-bottom-card.w-row', [m('.w-col.w-col-3.w-col-small-4.w-col-tiny-3'), m('.w-col.w-col-6.w-col-small-4.w-col-tiny-6', m.component(UserFollowBtn, { following: friend.following, follow_id: friend.friend_id })), m('.w-col.w-col-3.w-col-small-4.w-col-tiny-3')])]));
    }
};

/**
 * window.c.userFriends component
 * Shows all friends cards and a follow-all button
 *
 * Example of use:
 * view: () => {
 *   ...
 *   m.component(c.userFriends, {user: user})
 *   ...
 * }
 */
var userFriends = {
    controller: function controller(args) {
        models.userFriend.pageSize(9);

        var userFriendVM = postgrest$1.filtersVM({ user_id: 'eq' }),
            user = args.user,
            friendListVM = postgrest$1.paginationVM(models.userFriend, 'following.asc,total_contributed_projects.desc', {
            Prefer: 'count=exact'
        }),
            allLoading = m.prop(false),
            followAll = function followAll() {
            allLoading(true);
            var l = postgrest$1.loaderWithToken(models.followAllFriends.postOptions({}));

            l.load().then(function () {
                friendListVM.firstPage(userFriendVM.parameters());
                allLoading(false);
            });
        };

        userFriendVM.user_id(user.user_id);

        if (!friendListVM.collection().length) {
            friendListVM.firstPage(userFriendVM.parameters());
        }

        return {
            friendListVM: friendListVM,
            followAll: followAll,
            allLoading: allLoading
        };
    },
    view: function view(ctrl, args) {
        var listVM = ctrl.friendListVM;
        return m('.w-section.bg-gray.before-footer.section', [m('.w-container', [m('.w-row.u-marginbottom-40.card.u-radius.card-terciary', [m('.w-col.w-col-7.w-col-small-6.w-col-tiny-6', [m('.fontsize-small', 'Start now! Follow all your friends or just a few of them to discover projects together!')]), m('.w-col.w-col-5.w-col-small-6.w-col-tiny-6', [ctrl.allLoading() ? h.loader() : m('a.w-button.btn.btn-medium', {
            onclick: ctrl.followAll
        }, 'Follow all your ' + (listVM.total() ? listVM.total() : '') + ' friends')])]), m('.w-row', [_$1.map(listVM.collection(), function (friend) {
            return m.component(UserFollowCard, { friend: friend });
        })]), m('.w-section.section.bg-gray', [m('.w-container', [m('.w-row.u-marginbottom-60', [m('.w-col.w-col-5', [m('.u-marginright-20')]), m.component(loadMoreBtn, { collection: listVM }), m('.w-col.w-col-5')])])])])]);
    }
};

/**
 * window.c.userFollows component
 * Shows all user follows cards
 *
 * Example of use:
 * view: () => {
 *   ...
 *   m.component(c.userFollows, {user: user})
 *   ...
 * }
 */
var userFollows = {
    controller: function controller(args) {
        models.userFollow.pageSize(9);
        var userFriendVM = postgrest$1.filtersVM({ user_id: 'eq' }),
            user = args.user,
            hash = m.prop(window.location.hash),
            followsListVM = postgrest$1.paginationVM(models.userFollow, 'created_at.desc', {
            Prefer: 'count=exact'
        });

        userFriendVM.user_id(user.user_id);
        if (!followsListVM.collection().length) {
            followsListVM.firstPage(userFriendVM.parameters());
        }

        return {
            followsListVM: followsListVM
        };
    },
    view: function view(ctrl, args) {
        var followsVM = ctrl.followsListVM;
        return m('.w-section.bg-gray.before-footer.section', [m('.w-container', [m('.w-row', [_$1.map(followsVM.collection(), function (friend) {
            return m.component(UserFollowCard, { friend: _$1.extend({}, { following: true, friend_id: friend.follow_id }, friend.source) });
        })]), m('.w-section.section.bg-gray', [m('.w-container', [m('.w-row.u-marginbottom-60', [m('.w-col.w-col-5', [m('.u-marginright-20')]), m.component(loadMoreBtn, { collection: followsVM }), m('.w-col.w-col-5')])])])])]);
    }
};

/**
 * window.c.userFollowers component
 * Shows all user followers cards
 *
 * Example of use:
 * view: () => {
 *   ...
 *   m.component(c.userFollowers, {user: user})
 *   ...
 * }
 */
var userFollowers = {
    controller: function controller(args) {
        models.userFollower.pageSize(9);
        var followersListVM = postgrest$1.paginationVM(models.userFollower, 'following.asc,created_at.desc', {
            Prefer: 'count=exact'
        }),
            user = args.user,
            userIdVM = postgrest$1.filtersVM({ follow_id: 'eq' });

        userIdVM.follow_id(user.user_id);

        if (!followersListVM.collection().length) {
            followersListVM.firstPage(userIdVM.parameters());
        }
        return {
            followersListVM: followersListVM
        };
    },
    view: function view(ctrl, args) {
        var followersVM = ctrl.followersListVM;
        return m('.w-section.bg-gray.before-footer.section', [m('.w-container', [m('.w-row', [_$1.map(followersVM.collection(), function (friend) {
            return m.component(UserFollowCard, { friend: _$1.extend({}, { friend_id: friend.user_id }, friend.source) });
        })]), m('.w-section.section.bg-gray', [m('.w-container', [m('.w-row.u-marginbottom-60', [m('.w-col.w-col-5', [m('.u-marginright-20')]), m.component(loadMoreBtn, { collection: followersVM }), m('.w-col.w-col-5')])])])])]);
    }
};

/**
 * window.c.userCreators component
 * Shows all user creators suggestions cards
 *
 * Example of use:
 * view: () => {
 *   ...
 *   m.component(c.userCreators, {user: user})
 *   ...
 * }
 */
var userCreators = {
    controller: function controller() {
        models.creatorSuggestion.pageSize(9);
        var creatorsListVM = postgrest$1.paginationVM(models.creatorSuggestion, 'following.asc, total_published_projects.desc, total_contributed_projects.desc', {
            Prefer: 'count=exact'
        });
        var allLoading = m.prop(false);
        var followAll = function followAll() {
            allLoading(true);
            var l = postgrest$1.loaderWithToken(models.followAllCreators.postOptions({}));

            l.load().then(function () {
                creatorsListVM.firstPage();
                allLoading(false);
            });
        };

        if (!creatorsListVM.collection().length) {
            creatorsListVM.firstPage();
        }

        return {
            allLoading: allLoading,
            creatorsListVM: creatorsListVM,
            followAll: followAll
        };
    },
    view: function view(ctrl) {
        var creatorsVM = ctrl.creatorsListVM;

        return m('.w-section.bg-gray.before-footer.section', [m('.w-container', [m('.w-row.u-marginbottom-40.card.u-radius.card-terciary', [m('.w-col.w-col-7.w-col-small-6.w-col-tiny-6', [m('.fontsize-small', 'Follow the creators you have already supported and know firsthand whenever they support projects or launch new campaigns!')]), m('.w-col.w-col-5.w-col-small-6.w-col-tiny-6', [ctrl.allLoading() ? h.loader() : m('a.w-button.btn.btn-medium', {
            onclick: ctrl.followAll
        }, 'Follow all ' + (creatorsVM.total() ? creatorsVM.total() : '') + ' Creators')])]), m('.w-row', [_$1.map(creatorsVM.collection(), function (friend) {
            return m.component(UserFollowCard, {
                friend: _$1.extend({}, {
                    friend_id: friend.user_id
                }, friend)
            });
        })]), m('.w-section.section.bg-gray', [m('.w-container', [m('.w-row.u-marginbottom-60', [m('.w-col.w-col-5', [m('.u-marginright-20')]), m.component(loadMoreBtn, { collection: creatorsVM }), m('.w-col.w-col-5')])])])])]);
    }
};

var FollowFoundFriends = {
    controller: function controller(args) {
        var user = h.getUser(),
            hash = m.prop(window.location.hash),
            displayTabContent = function displayTabContent() {
            var c_opts = {
                user: user
            },
                tabs = {
                '#creators': m.component(userCreators, c_opts),
                '#friends': m.component(userFriends, c_opts),
                '#follows': m.component(userFollows, c_opts),
                '#followers': m.component(userFollowers, c_opts)
            };

            hash(window.location.hash);

            if (_$1.isEmpty(hash()) || hash() === '#_=_') {
                return tabs['#friends'];
            }

            return tabs[hash()];
        };

        h.redrawHashChange();

        return {
            user: user,
            displayTabContent: displayTabContent
        };
    },
    view: function view(ctrl, args) {
        return m('div', [m('.w-section.dashboard-header', [m('.w-container', [m('.w-row.u-margintop-20.u-marginbottom-20', [m('.w-col.w-col-1'), m('.w-col.w-col-10.u-text-center', [m('.fontsize-larger.fontweight-semibold.u-marginbottom-10', 'Discover projects with your friends'), m('.fontsize-small', 'Follow your friends and we will notify you whenever they launch or support any project')]), m('.w-col.w-col-1')])])]), m('.divider.u-margintop-30'), m('.project-nav', m('.u-text-center.w-container', [m('a[id="creators-link"][class="dashboard-nav-link ' + (h.hashMatch('#creators') ? 'selected' : '') + '"] [href="#creators"]', 'Find Creators'), m('a[id="friends-link"][class="dashboard-nav-link ' + (h.hashMatch('#friends') || h.hashMatch('') ? 'selected' : '') + '"] [href="#friends"]', 'Find friends'), m('a[id="follows-link"][class="dashboard-nav-link ' + (h.hashMatch('#follows') ? 'selected' : '') + '"] [href="#follows"]', ['Following', m.trust('&nbsp;'), m('span.w-hidden-small.w-hidden-tiny.badge', ctrl.user.follows_count)]), m('a[id="followers-link"][class="dashboard-nav-link ' + (h.hashMatch('#followers') ? 'selected' : '') + '"] [href="#followers"]', ['Followers', m.trust('&nbsp;'), m('span.w-hidden-small.w-hidden-tiny.badge', ctrl.user.followers_count)])])), ctrl.displayTabContent()]);
    }
};

var I18nScope$53 = _$1.partial(h.i18nScope, 'projects.contributions');

var thankYou = {
    controller: function controller(args) {
        var recommendedProjects = userVM.getUserRecommendedProjects(),
            isSlip = args.contribution && !_$1.isEmpty(args.contribution.slip_url);

        var setEvents = function setEvents(el, isInitialized) {
            if (!isInitialized) {
                CatarseAnalytics.event({
                    cat: 'contribution_finish',
                    act: 'contribution_finished',
                    lbl: isSlip ? 'slip' : 'creditcard',
                    val: args.contribution.value,
                    extraData: {
                        contribution_id: args.contribution.contribution_id
                    }
                });

                CatarseAnalytics.checkout('' + args.contribution.contribution_id, '[' + args.contribution.project.permalink + '] ' + (args.contribution.reward ? args.contribution.reward.minimum_value : '10') + ' [' + (isSlip ? 'slip' : 'creditcard') + ']', '' + (args.contribution.reward ? args.contribution.reward.reward_id : ''), '' + args.contribution.project.category, '' + args.contribution.value, '' + args.contribution.value * args.contribution.project.service_fee);
            }
        };

        return {
            setEvents: setEvents,
            displayShareBox: h.toggleProp(false, true),
            isSlip: isSlip,
            recommendedProjects: recommendedProjects
        };
    },
    view: function view(ctrl, args) {
        return m('#thank-you', { config: ctrl.setEvents }, [m('.page-header.u-marginbottom-30', m('.w-container', m('.w-row', m('.w-col.w-col-10.w-col-push-1', [m('.u-marginbottom-20.u-text-center', m('img.big.thumb.u-round[src=\'' + args.contribution.project.user_thumb + '\']')), m('#thank-you.u-text-center', !ctrl.isSlip ? [m('#creditcard-thank-you.fontsize-larger.text-success.u-marginbottom-20', I18n$1.t('thank_you.thank_you', I18nScope$53())), m('.fontsize-base.u-marginbottom-40', m.trust(I18n$1.t('thank_you.thank_you_text_html', I18nScope$53({
            total: args.contribution.project.total_contributions,
            email: args.contribution.contribution_email,
            link2: '/en/users/' + h.getUser().user_id + '/edit#contributions',
            link_email: '/en/users/' + h.getUser().user_id + '/edit#about_me'
        })))), m('.fontsize-base.fontweight-semibold.u-marginbottom-20', 'Share with your friends and help this project hit the goal!')] : [m('#slip-thank-you.fontsize-largest.text-success.u-marginbottom-20', I18n$1.t('thank_you_slip.thank_you', I18nScope$53())), m('.fontsize-base.u-marginbottom-40', m.trust(I18n$1.t('thank_you_slip.thank_you_text_html', I18nScope$53({
            email: args.contribution.contribution_email,
            link_email: '/en/users/' + h.getUser().user_id + '/edit#about_me'
        }))))]), ctrl.isSlip ? '' : m('.w-row', [m('.w-hidden-small.w-hidden-tiny', [m('.w-sub-col.w-col.w-col-4', m.component(facebookButton, {
            url: 'https://www.oppostarter.com/' + args.contribution.project.permalink + '?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share',
            big: true
        })), m('.w-sub-col.w-col.w-col-4', m.component(facebookButton, {
            messenger: true,
            big: true,
            url: 'https://www.oppostarter.com/' + args.contribution.project.permalink + '?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=messenger&utm_campaign=thanks_share'
        })), m('.w-col.w-col-4', m('a.btn.btn-large.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20' + encodeURIComponent(args.contribution.project.name) + '%20https://www.oppostarter.com/' + args.contribution.project.permalink + '%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]', [m('span.fa.fa-twitter'), ' Twitter']))]), m('.w-hidden-main.w-hidden-medium', [m('.u-marginbottom-30.u-text-center-small-only', m('button.btn.btn-large.btn-terciary.u-marginbottom-40', {
            onclick: ctrl.displayShareBox.toggle
        }, 'Share')), ctrl.displayShareBox() ? m(projectShareBox, {
            // Mocking a project m.prop
            project: m.prop({
                permalink: args.contribution.project.permalink,
                name: args.contribution.project.name
            }),
            displayShareBox: ctrl.displayShareBox
        }) : ''])])])))), m('.section.u-marginbottom-40', m('.w-container', ctrl.isSlip ? m('.w-row', m('.w-col.w-col-8.w-col-offset-2', m('iframe.slip', {
            src: args.contribution.slip_url,
            width: '100%',
            height: '905px',
            frameborder: '0',
            style: 'overflow: hidden;'
        }))) : [m('.fontsize-large.fontweight-semibold.u-marginbottom-30.u-text-center', I18n$1.t('thank_you.project_recommendations', I18nScope$53())), m.component(projectRow, {
            collection: ctrl.recommendedProjects,
            ref: 'ctrse_thankyou_r'
        })]))]);
    }
};

var I18nScope$54 = _$1.partial(h.i18nScope, 'users.edit.email_confirmation');

var CheckEmail = {
    controller: function controller(args) {
        var userID = h.getUserID(),
            user = userVM.fetchUser(userID),
            confirmedEmail = m.prop(false),
            hideAlert = m.prop(false);

        return {
            confirmedEmail: confirmedEmail,
            hideAlert: hideAlert,
            user: user,
            checkEmail: function checkEmail() {
                return m.request({
                    method: 'PUT',
                    url: '/users/' + userID + '.json',
                    data: {
                        user: {
                            confirmed_email_at: true
                        }
                    },
                    config: h.setCsrfToken
                }).then(function (data) {
                    confirmedEmail(true);
                    window.setTimeout(function () {
                        hideAlert(true);
                        m.redraw(true);
                    }, 4000);
                });
            }
        };
    },
    view: function view(ctrl, args) {
        var user = ctrl.user();
        if (user) {
            var userCreatedRecently = moment().isBefore(moment(user.created_at).add(2, 'days'));

            return user && !userCreatedRecently && !user.email_active && !ctrl.hideAlert() ? m('.card-alert.section.u-text-center', { style: args.menuTransparency ? { 'padding-top': '100px' } : {} }, [m('.w-container', ctrl.confirmedEmail() ? [m('.fontsize-large.fontweight-semibold', I18n$1.t('confirmed_title', I18nScope$54())), m('.fontsize-large.fontweight-semibold.u-marginbottom-20', I18n$1.t('confirmed_sub', I18nScope$54()))] : [m('.fontsize-large.fontweight-semibold', _$1.isNull(user.name) ? 'Hello' : I18n$1.t('hello', I18nScope$54({ name: user.name }))), m('.fontsize-large.fontweight-semibold.u-marginbottom-20', I18n$1.t('hello_sub', I18nScope$54())), m('.fontsize-base.u-marginbottom-10', I18n$1.t('hello_email', I18nScope$54({ email: user.email }))), m('.w-row', [m('.w-col.w-col-3'), m('.w-col.w-col-3', [m('button.btn.btn-medium.btn-terciary.w-button', {
                onclick: ctrl.checkEmail
            }, 'Yes!')]), m('.w-col.w-col-3', [m('a.btn.btn-medium.w-button[href="/users/' + user.id + '/edit#about_me"]', 'Edit email')]), m('.w-col.w-col-3')])])]) : m('div');
        }

        return m('div');
    }
};

var c = {
    root: {
        AdminUsers: adminUsers,
        AdminProjects: adminProjects,
        AdminContributions: adminContributions,
        AdminBalanceTranfers: adminBalanceTranfers,
        ClipboardCopy: copyTextInput,
        Flex: Flex,
        Insights: insights,
        Posts: posts,
        Surveys: surveys,
        Jobs: jobs,
        LiveStatistics: liveStatistics,
        ProjectsContributionReport: projectContributionReport,
        ProjectsDashboard: projectsDashboard,
        ProjectsExplore: projectsExplore,
        ProjectsHome: projectsHome,
        ProjectsShow: projectsShow,
        UsersShow: usersShow,
        SurveysShow: surveysShow,
        UsersEdit: usersEdit,
        ProjectEdit: projectEdit,
        SurveyCreate: surveyCreate,
        ProjectsContribution: projectsContribution,
        ProjectsPayment: projectsPayment,
        ProjectsReward: projectsReward,
        ThankYou: thankYou,
        Publish: publish,
        Start: start,
        Team: team,
        Menu: menu,
        Press: press,
        Footer: footer,
        FollowFoundFriends: FollowFoundFriends,
        CheckEmail: CheckEmail,
        projectEditUserAbout: projectEditUserAbout,
        projectEditUserSettings: projectEditUserSettings,
        projectEditReward: projectEditReward,
        projectEditBasic: projectEditBasic,
        projectEditDescription: projectEditDescription,
        projectEditBudget: projectEditBudget,
        projectEditVideo: projectEditVideo,
        projectEditGoal: projectEditGoal,
        projectEditCard: projectEditCard
    }
};

return c;

}(m,I18n,_,moment,$,postgrest,CatarseAnalytics,replaceDiacritics,Chart,select));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjLyoqLyouanMiLCJzb3VyY2VzIjpbXSwic291cmNlc0NvbnRlbnQiOltdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsInByZUV4aXN0aW5nQ29tbWVudCI6Ii8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJanB1ZFd4c0xDSnpiM1Z5WTJWeklqcGJYU3dpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHRkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3lKOSJ9
;














(function(m, c, Chart, analytics){
  Chart.defaults.global.responsive = true;
  Chart.defaults.global.responsive = false;
  Chart.defaults.global.scaleFontFamily = "proxima-nova";

  I18n.defaultLocale = "en";
  I18n.locale = "en";

  var adminRoot = document.getElementById('new-admin');

  if(adminRoot){
      var adminWrap = function(component, customAttr) {
          return {
              controller: function() {
                  var attr = customAttr;

                  return {
                      attr: attr
                  };
              },
              view: function(ctrl) {
                  return m('#app', [
                      m.component(c.root.Menu, ctrl.attr),
                      m.component(component, ctrl.attr),
                      (ctrl.attr.hideFooter ? '' : m.component(c.root.Footer, ctrl.attr))
                  ]);
              }
          };
      };
    m.route.mode = 'hash';

    m.route(adminRoot, '/', {
        '/': adminWrap(c.root.AdminContributions, {root: adminRoot, menuTransparency: false, hideFooter: true}),
        '/users': adminWrap(c.root.AdminUsers, { menuTransparency: false, hideFooter: true }),
        '/projects': adminWrap(c.root.AdminProjects, { menuTransparency: false, hideFooter: true }),
        '/balance-transfers': adminWrap(c.root.AdminBalanceTranfers, { menuTransparency: false, hideFooter: true })
    });
  }

    var app = document.getElementById('application'),
        body = document.getElementsByTagName('body')[0];
    var firstRun = true;//Indica se é a primeira vez q executa um controller.

  var wrap = function(component, customAttr) {
      return {
        controller: function() {
            if(firstRun) {
                firstRun=false;
            } else {//só roda se nao for firstRun
                try {
                    analytics.pageView(false);
                } catch(e) {console.error(e);}
            }
            var parameters = app.getAttribute('data-parameters') ? JSON.parse(app.getAttribute('data-parameters')) : {};
            var attr = customAttr,
                projectParam = m.route.param('project_id') || parameters.project_id,
                projectUserIdParam = m.route.param('project_user_id') || parameters.user_id || parameters.project_user_id,
                userParam = m.route.param('user_id') || app.getAttribute('data-userid') || parameters.user_id,
                rewardIdParam = m.route.param('reward_id'),
                surveyIdParam = m.route.param('survey_id'),
                filterParam = m.route.param('filter'),
                thankYouParam = app && JSON.parse(app.getAttribute('data-contribution'));

            var addToAttr = function(newAttr) {
                attr = _.extend({}, newAttr, attr);
            };

            if(projectParam) {
                addToAttr({project_id: projectParam});
            }

            if(userParam) {
                addToAttr({user_id: userParam});
            }

            if(projectUserIdParam) {
                addToAttr({project_user_id: projectUserIdParam});
            }

            if(surveyIdParam) {
                addToAttr({survey_id: surveyIdParam});
            }

            if(rewardIdParam) {
                addToAttr({reward_id: rewardIdParam});
            }

            if(filterParam) {
                addToAttr({filter: filterParam});
            }

            if(thankYouParam) {
                addToAttr({contribution: thankYouParam});
            }

            if(window.localStorage && (window.localStorage.getItem('globalVideoLanding') !== 'true')) {
                addToAttr({withAlert: false});
            }

            if(document.getElementById('fixed-alert')) {
                addToAttr({withFixedAlert: true});
            }

            body.className = 'body-project closed';


            return {
                attr: attr
            };
        },
        view: function(ctrl){
            return m('#app', [
                m.component(c.root.Menu, ctrl.attr),
                m.component(c.root.CheckEmail, ctrl.attr),
                m.component(component, ctrl.attr),
                (ctrl.attr.hideFooter ? '' : m.component(c.root.Footer, ctrl.attr))
            ]);
        }
      };
  };

  if(app){
      var rootEl = app,
          isUserProfile = body.getAttribute('data-controller-name') == 'users' && body.getAttribute('data-action') == 'show' && app.getAttribute('data-hassubdomain') == 'true';

      m.route.mode = 'pathname';

      m.route(rootEl, '/', {
          '/': wrap(( isUserProfile ? c.root.UsersShow : c.root.ProjectsHome), {menuTransparency: true, footerBig: true, absoluteHome: isUserProfile}),
          '/explore': wrap(c.root.ProjectsExplore, {menuTransparency: true, footerBig: true}),
          '/start': wrap(c.root.Start, {menuTransparency: true, footerBig: true}),
          '/projects/:project_id/contributions/new': wrap(c.root.ProjectsContribution),
          '/projects/:project_id/contributions/fallback_create': wrap(c.root.ProjectsContribution),
          '/projects/:project_id/contributions/:contribution_id/edit': wrap(c.root.ProjectsPayment, {menuShort: true}),
          '/en/projects/:project_id/contributions/new': wrap(c.root.ProjectsContribution),
          '/en/projects/:project_id/contributions/:contribution_id/edit': wrap(c.root.ProjectsPayment, {menuShort: true}),
          '/en': wrap(c.root.ProjectsHome, {menuTransparency: true, footerBig: true}),
          '/en/flexible_projects': wrap(c.root.ProjectsHome, {menuTransparency: true, footerBig: true}),
          '/en/projects': wrap(c.root.ProjectsHome, {menuTransparency: true, footerBig: true}),
          '/projects': wrap(c.root.ProjectsHome, {menuTransparency: true, footerBig: true}),
          '/en/explore': wrap(c.root.ProjectsExplore, {menuTransparency: true, footerBig: true}),
          '/en/start': wrap(c.root.Start, {menuTransparency: true, footerBig: true}),
          '/en/projects/:project_id/contributions/:contribution_id': wrap(c.root.ThankYou, {menuTransparency: false, footerBig: false}),
          '/projects/:project_id/contributions/:contribution_id': wrap(c.root.ThankYou, {menuTransparency: false, footerBig: false}),
          '/en/:project': wrap(c.root.ProjectsShow, {menuTransparency: false, footerBig: false}),
          '/projects/:project_id/insights': wrap(c.root.Insights, {menuTransparency: false, footerBig: false}),
          '/en/projects/:project_id/insights': wrap(c.root.Insights, {menuTransparency: false, footerBig: false}),
          '/projects/:project_id/contributions_report': wrap(c.root.ProjectsContributionReport, {menuTransparency: false, footerBig: false}),
          '/en/projects/:project_id/contributions_report': wrap(c.root.ProjectsContributionReport, {menuTransparency: false, footerBig: false}),
          '/projects/:project_id/posts': wrap(c.root.Posts, {menuTransparency: false, footerBig: false}),
          '/projects/:project_id/surveys': wrap(c.root.Surveys, {menuTransparency: false, footerBig: false, menuShort: true}),
          '/en/projects/:project_id/posts': wrap(c.root.Posts, {menuTransparency: false, footerBig: false}),
          '/projects/:project_id': wrap(c.root.ProjectsShow, {menuTransparency: false, footerBig: false}),
          '/users/:user_id': wrap(c.root.UsersShow, {menuTransparency: true, footerBig: false}),
          '/en/users/:user_id': wrap(c.root.UsersShow, {menuTransparency: true, footerBig: false}),
          '/contributions/:contribution_id/surveys/:survey_id': wrap(c.root.SurveysShow, {menuTransparency: false, footerBig: false}),
          '/en/contributions/:contribution_id/surveys/:survey_id': wrap(c.root.SurveysShow, {menuTransparency: false, footerBig: false}),
          '/users/:user_id/edit': wrap(c.root.UsersEdit, {menuTransparency: true, footerBig: false}),
          '/en/users/:user_id/edit': wrap(c.root.UsersEdit, {menuTransparency: true, footerBig: false}),
          '/projects/:project_id/edit': wrap(c.root.ProjectEdit, {menuTransparency: false, hideFooter: true, menuShort: true}),
          '/en/projects/:project_id/edit': wrap(c.root.ProjectEdit, {menuTransparency: false, hideFooter: true, menuShort: true}),
          '/projects/:project_id/rewards/:reward_id/surveys/new': wrap(c.root.SurveyCreate, {menuTransparency: false, hideFooter: true, menuShort: true}),
          '/:project': wrap(c.root.ProjectsShow, {menuTransparency: false, footerBig: false}),
          '/en/follow-fb-friends': wrap(c.root.FollowFoundFriends, {menuTransparency: false, footerBig: false}),
          '/follow-fb-friends': wrap(c.root.FollowFoundFriends, {menuTransparency: false, footerBig: false}),
          '/en/team': wrap(c.root.Team, {menuTransparency: true, footerBig: true}),
          '/team': wrap(c.root.Team, {menuTransparency: true, footerBig: true}),
          '/en/jobs': wrap(c.root.Jobs, {menuTransparency: true, footerBig: true}),
          '/jobs': wrap(c.root.Jobs, {menuTransparency: true, footerBig: true}),
          '/press': wrap(c.root.Press, {menuTransparency: true, footerBig: true}),
          '/en/press': wrap(c.root.Press, {menuTransparency: true, footerBig: true})
      });
  }
  _.each(document.querySelectorAll('div[data-mithril]'), function(el){
    var component = c.root[el.attributes['data-mithril'].value],
        paramAttr = el.attributes['data-parameters'],
        params = paramAttr && JSON.parse(paramAttr.value);
    m.mount(el, m.component(component, _.extend({root: el}, params)));
  });
}(window.m, window.c, window.Chart, window.CatarseAnalytics));

window.toggleMenu = function(){
  var userMenu = document.getElementById("user-menu-dropdown");
  userMenu.classList.toggle('w--open');
};
